var ZR=Object.defineProperty;var YR=(t,e,n)=>e in t?ZR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var qe=(t,e,n)=>YR(t,typeof e!="symbol"?e+"":e,n);function QR(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var jc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var bT={exports:{}},Yp={},ET={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wh=Symbol.for("react.element"),XR=Symbol.for("react.portal"),JR=Symbol.for("react.fragment"),eL=Symbol.for("react.strict_mode"),tL=Symbol.for("react.profiler"),nL=Symbol.for("react.provider"),iL=Symbol.for("react.context"),rL=Symbol.for("react.forward_ref"),sL=Symbol.for("react.suspense"),oL=Symbol.for("react.memo"),aL=Symbol.for("react.lazy"),mx=Symbol.iterator;function lL(t){return t===null||typeof t!="object"?null:(t=mx&&t[mx]||t["@@iterator"],typeof t=="function"?t:null)}var ST={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},TT=Object.assign,kT={};function Zl(t,e,n){this.props=t,this.context=e,this.refs=kT,this.updater=n||ST}Zl.prototype.isReactComponent={};Zl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Zl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function PT(){}PT.prototype=Zl.prototype;function _v(t,e,n){this.props=t,this.context=e,this.refs=kT,this.updater=n||ST}var yv=_v.prototype=new PT;yv.constructor=_v;TT(yv,Zl.prototype);yv.isPureReactComponent=!0;var gx=Array.isArray,CT=Object.prototype.hasOwnProperty,vv={current:null},IT={key:!0,ref:!0,__self:!0,__source:!0};function AT(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)CT.call(e,i)&&!IT.hasOwnProperty(i)&&(r[i]=e[i]);var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];r.children=u}if(t&&t.defaultProps)for(i in l=t.defaultProps,l)r[i]===void 0&&(r[i]=l[i]);return{$$typeof:wh,type:t,key:s,ref:o,props:r,_owner:vv.current}}function uL(t,e){return{$$typeof:wh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function wv(t){return typeof t=="object"&&t!==null&&t.$$typeof===wh}function cL(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var _x=/\/+/g;function lg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?cL(""+t.key):e.toString(36)}function cf(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case wh:case XR:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+lg(o,0):i,gx(r)?(n="",t!=null&&(n=t.replace(_x,"$&/")+"/"),cf(r,e,n,"",function(h){return h})):r!=null&&(wv(r)&&(r=uL(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(_x,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",gx(t))for(var l=0;l<t.length;l++){s=t[l];var u=i+lg(s,l);o+=cf(s,e,n,u,r)}else if(u=lL(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=i+lg(s,l++),o+=cf(s,e,n,u,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function xd(t,e,n){if(t==null)return t;var i=[],r=0;return cf(t,i,"","",function(s){return e.call(n,s,r++)}),i}function hL(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ln={current:null},hf={transition:null},dL={ReactCurrentDispatcher:Ln,ReactCurrentBatchConfig:hf,ReactCurrentOwner:vv};function RT(){throw Error("act(...) is not supported in production builds of React.")}Ve.Children={map:xd,forEach:function(t,e,n){xd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return xd(t,function(){e++}),e},toArray:function(t){return xd(t,function(e){return e})||[]},only:function(t){if(!wv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ve.Component=Zl;Ve.Fragment=JR;Ve.Profiler=tL;Ve.PureComponent=_v;Ve.StrictMode=eL;Ve.Suspense=sL;Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dL;Ve.act=RT;Ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=TT({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=vv.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)CT.call(e,u)&&!IT.hasOwnProperty(u)&&(i[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];i.children=l}return{$$typeof:wh,type:t.type,key:r,ref:s,props:i,_owner:o}};Ve.createContext=function(t){return t={$$typeof:iL,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:nL,_context:t},t.Consumer=t};Ve.createElement=AT;Ve.createFactory=function(t){var e=AT.bind(null,t);return e.type=t,e};Ve.createRef=function(){return{current:null}};Ve.forwardRef=function(t){return{$$typeof:rL,render:t}};Ve.isValidElement=wv;Ve.lazy=function(t){return{$$typeof:aL,_payload:{_status:-1,_result:t},_init:hL}};Ve.memo=function(t,e){return{$$typeof:oL,type:t,compare:e===void 0?null:e}};Ve.startTransition=function(t){var e=hf.transition;hf.transition={};try{t()}finally{hf.transition=e}};Ve.unstable_act=RT;Ve.useCallback=function(t,e){return Ln.current.useCallback(t,e)};Ve.useContext=function(t){return Ln.current.useContext(t)};Ve.useDebugValue=function(){};Ve.useDeferredValue=function(t){return Ln.current.useDeferredValue(t)};Ve.useEffect=function(t,e){return Ln.current.useEffect(t,e)};Ve.useId=function(){return Ln.current.useId()};Ve.useImperativeHandle=function(t,e,n){return Ln.current.useImperativeHandle(t,e,n)};Ve.useInsertionEffect=function(t,e){return Ln.current.useInsertionEffect(t,e)};Ve.useLayoutEffect=function(t,e){return Ln.current.useLayoutEffect(t,e)};Ve.useMemo=function(t,e){return Ln.current.useMemo(t,e)};Ve.useReducer=function(t,e,n){return Ln.current.useReducer(t,e,n)};Ve.useRef=function(t){return Ln.current.useRef(t)};Ve.useState=function(t){return Ln.current.useState(t)};Ve.useSyncExternalStore=function(t,e,n){return Ln.current.useSyncExternalStore(t,e,n)};Ve.useTransition=function(){return Ln.current.useTransition()};Ve.version="18.3.1";ET.exports=Ve;var $=ET.exports;const Ji=Zp($),fL=QR({__proto__:null,default:Ji},[$]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pL=$,mL=Symbol.for("react.element"),gL=Symbol.for("react.fragment"),_L=Object.prototype.hasOwnProperty,yL=pL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vL={key:!0,ref:!0,__self:!0,__source:!0};function LT(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)_L.call(e,i)&&!vL.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:mL,type:t,key:s,ref:o,props:r,_owner:yL.current}}Yp.Fragment=gL;Yp.jsx=LT;Yp.jsxs=LT;bT.exports=Yp;var S=bT.exports,b_={},NT={exports:{}},li={},OT={exports:{}},MT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(K,he){var M=K.length;K.push(he);e:for(;0<M;){var fe=M-1>>>1,ce=K[fe];if(0<r(ce,he))K[fe]=he,K[M]=ce,M=fe;else break e}}function n(K){return K.length===0?null:K[0]}function i(K){if(K.length===0)return null;var he=K[0],M=K.pop();if(M!==he){K[0]=M;e:for(var fe=0,ce=K.length,U=ce>>>1;fe<U;){var be=2*(fe+1)-1,we=K[be],pe=be+1,Ie=K[pe];if(0>r(we,M))pe<ce&&0>r(Ie,we)?(K[fe]=Ie,K[pe]=M,fe=pe):(K[fe]=we,K[be]=M,fe=be);else if(pe<ce&&0>r(Ie,M))K[fe]=Ie,K[pe]=M,fe=pe;else break e}}return he}function r(K,he){var M=K.sortIndex-he.sortIndex;return M!==0?M:K.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],d=1,m=null,g=3,_=!1,w=!1,x=!1,C=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(K){for(var he=n(h);he!==null;){if(he.callback===null)i(h);else if(he.startTime<=K)i(h),he.sortIndex=he.expirationTime,e(u,he);else break;he=n(h)}}function j(K){if(x=!1,P(K),!w)if(n(u)!==null)w=!0,ae(W);else{var he=n(h);he!==null&&ue(j,he.startTime-K)}}function W(K,he){w=!1,x&&(x=!1,E(I),I=-1),_=!0;var M=g;try{for(P(he),m=n(u);m!==null&&(!(m.expirationTime>he)||K&&!D());){var fe=m.callback;if(typeof fe=="function"){m.callback=null,g=m.priorityLevel;var ce=fe(m.expirationTime<=he);he=t.unstable_now(),typeof ce=="function"?m.callback=ce:m===n(u)&&i(u),P(he)}else i(u);m=n(u)}if(m!==null)var U=!0;else{var be=n(h);be!==null&&ue(j,be.startTime-he),U=!1}return U}finally{m=null,g=M,_=!1}}var z=!1,R=null,I=-1,N=5,F=-1;function D(){return!(t.unstable_now()-F<N)}function B(){if(R!==null){var K=t.unstable_now();F=K;var he=!0;try{he=R(!0,K)}finally{he?V():(z=!1,R=null)}}else z=!1}var V;if(typeof k=="function")V=function(){k(B)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,te=ee.port2;ee.port1.onmessage=B,V=function(){te.postMessage(null)}}else V=function(){C(B,0)};function ae(K){R=K,z||(z=!0,V())}function ue(K,he){I=C(function(){K(t.unstable_now())},he)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_continueExecution=function(){w||_||(w=!0,ae(W))},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(K){switch(g){case 1:case 2:case 3:var he=3;break;default:he=g}var M=g;g=he;try{return K()}finally{g=M}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(K,he){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var M=g;g=K;try{return he()}finally{g=M}},t.unstable_scheduleCallback=function(K,he,M){var fe=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?fe+M:fe):M=fe,K){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=M+ce,K={id:d++,callback:he,priorityLevel:K,startTime:M,expirationTime:ce,sortIndex:-1},M>fe?(K.sortIndex=M,e(h,K),n(u)===null&&K===n(h)&&(x?(E(I),I=-1):x=!0,ue(j,M-fe))):(K.sortIndex=ce,e(u,K),w||_||(w=!0,ae(W))),K},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(K){var he=g;return function(){var M=g;g=he;try{return K.apply(this,arguments)}finally{g=M}}}})(MT);OT.exports=MT;var wL=OT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xL=$,ai=wL;function se(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var DT=new Set,Vc={};function ga(t,e){Il(t,e),Il(t+"Capture",e)}function Il(t,e){for(Vc[t]=e,t=0;t<e.length;t++)DT.add(e[t])}var as=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),E_=Object.prototype.hasOwnProperty,bL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yx={},vx={};function EL(t){return E_.call(vx,t)?!0:E_.call(yx,t)?!1:bL.test(t)?vx[t]=!0:(yx[t]=!0,!1)}function SL(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function TL(t,e,n,i){if(e===null||typeof e>"u"||SL(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nn(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var un={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){un[t]=new Nn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];un[e]=new Nn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){un[t]=new Nn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){un[t]=new Nn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){un[t]=new Nn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){un[t]=new Nn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){un[t]=new Nn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){un[t]=new Nn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){un[t]=new Nn(t,5,!1,t.toLowerCase(),null,!1,!1)});var xv=/[\-:]([a-z])/g;function bv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(xv,bv);un[e]=new Nn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(xv,bv);un[e]=new Nn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(xv,bv);un[e]=new Nn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){un[t]=new Nn(t,1,!1,t.toLowerCase(),null,!1,!1)});un.xlinkHref=new Nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){un[t]=new Nn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ev(t,e,n,i){var r=un.hasOwnProperty(e)?un[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(TL(e,n,r,i)&&(n=null),i||r===null?EL(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var vs=xL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bd=Symbol.for("react.element"),el=Symbol.for("react.portal"),tl=Symbol.for("react.fragment"),Sv=Symbol.for("react.strict_mode"),S_=Symbol.for("react.profiler"),FT=Symbol.for("react.provider"),jT=Symbol.for("react.context"),Tv=Symbol.for("react.forward_ref"),T_=Symbol.for("react.suspense"),k_=Symbol.for("react.suspense_list"),kv=Symbol.for("react.memo"),Ds=Symbol.for("react.lazy"),VT=Symbol.for("react.offscreen"),wx=Symbol.iterator;function Bu(t){return t===null||typeof t!="object"?null:(t=wx&&t[wx]||t["@@iterator"],typeof t=="function"?t:null)}var Tt=Object.assign,ug;function rc(t){if(ug===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ug=e&&e[1]||""}return`
`+ug+t}var cg=!1;function hg(t,e){if(!t||cg)return"";cg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var i=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){i=h}t.call(e.prototype)}else{try{throw Error()}catch(h){i=h}t()}}catch(h){if(h&&i&&typeof h.stack=="string"){for(var r=h.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,l=s.length-1;1<=o&&0<=l&&r[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(r[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||r[o]!==s[l]){var u=`
`+r[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{cg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?rc(t):""}function kL(t){switch(t.tag){case 5:return rc(t.type);case 16:return rc("Lazy");case 13:return rc("Suspense");case 19:return rc("SuspenseList");case 0:case 2:case 15:return t=hg(t.type,!1),t;case 11:return t=hg(t.type.render,!1),t;case 1:return t=hg(t.type,!0),t;default:return""}}function P_(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case tl:return"Fragment";case el:return"Portal";case S_:return"Profiler";case Sv:return"StrictMode";case T_:return"Suspense";case k_:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case jT:return(t.displayName||"Context")+".Consumer";case FT:return(t._context.displayName||"Context")+".Provider";case Tv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case kv:return e=t.displayName||null,e!==null?e:P_(t.type)||"Memo";case Ds:e=t._payload,t=t._init;try{return P_(t(e))}catch{}}return null}function PL(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P_(e);case 8:return e===Sv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function zT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function CL(t){var e=zT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ed(t){t._valueTracker||(t._valueTracker=CL(t))}function BT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=zT(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Uf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function C_(t,e){var n=e.checked;return Tt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function xx(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=fo(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function UT(t,e){e=e.checked,e!=null&&Ev(t,"checked",e,!1)}function I_(t,e){UT(t,e);var n=fo(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?A_(t,e.type,n):e.hasOwnProperty("defaultValue")&&A_(t,e.type,fo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function bx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function A_(t,e,n){(e!=="number"||Uf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var sc=Array.isArray;function pl(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+fo(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function R_(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(se(91));return Tt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ex(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(se(92));if(sc(n)){if(1<n.length)throw Error(se(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:fo(n)}}function $T(t,e){var n=fo(e.value),i=fo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Sx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function HT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function L_(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?HT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Sd,WT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Sd=Sd||document.createElement("div"),Sd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Sd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function zc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var yc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IL=["Webkit","ms","Moz","O"];Object.keys(yc).forEach(function(t){IL.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),yc[e]=yc[t]})});function qT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||yc.hasOwnProperty(t)&&yc[t]?(""+e).trim():e+"px"}function GT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=qT(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var AL=Tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function N_(t,e){if(e){if(AL[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(se(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(se(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(se(61))}if(e.style!=null&&typeof e.style!="object")throw Error(se(62))}}function O_(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var M_=null;function Pv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var D_=null,ml=null,gl=null;function Tx(t){if(t=Eh(t)){if(typeof D_!="function")throw Error(se(280));var e=t.stateNode;e&&(e=tm(e),D_(t.stateNode,t.type,e))}}function KT(t){ml?gl?gl.push(t):gl=[t]:ml=t}function ZT(){if(ml){var t=ml,e=gl;if(gl=ml=null,Tx(t),e)for(t=0;t<e.length;t++)Tx(e[t])}}function YT(t,e){return t(e)}function QT(){}var dg=!1;function XT(t,e,n){if(dg)return t(e,n);dg=!0;try{return YT(t,e,n)}finally{dg=!1,(ml!==null||gl!==null)&&(QT(),ZT())}}function Bc(t,e){var n=t.stateNode;if(n===null)return null;var i=tm(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(se(231,e,typeof n));return n}var F_=!1;if(as)try{var Uu={};Object.defineProperty(Uu,"passive",{get:function(){F_=!0}}),window.addEventListener("test",Uu,Uu),window.removeEventListener("test",Uu,Uu)}catch{F_=!1}function RL(t,e,n,i,r,s,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(d){this.onError(d)}}var vc=!1,$f=null,Hf=!1,j_=null,LL={onError:function(t){vc=!0,$f=t}};function NL(t,e,n,i,r,s,o,l,u){vc=!1,$f=null,RL.apply(LL,arguments)}function OL(t,e,n,i,r,s,o,l,u){if(NL.apply(this,arguments),vc){if(vc){var h=$f;vc=!1,$f=null}else throw Error(se(198));Hf||(Hf=!0,j_=h)}}function _a(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function JT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function kx(t){if(_a(t)!==t)throw Error(se(188))}function ML(t){var e=t.alternate;if(!e){if(e=_a(t),e===null)throw Error(se(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return kx(r),t;if(s===i)return kx(r),e;s=s.sibling}throw Error(se(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,i=s;break}if(l===i){o=!0,i=r,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,i=r;break}if(l===i){o=!0,i=s,n=r;break}l=l.sibling}if(!o)throw Error(se(189))}}if(n.alternate!==i)throw Error(se(190))}if(n.tag!==3)throw Error(se(188));return n.stateNode.current===n?t:e}function ek(t){return t=ML(t),t!==null?tk(t):null}function tk(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=tk(t);if(e!==null)return e;t=t.sibling}return null}var nk=ai.unstable_scheduleCallback,Px=ai.unstable_cancelCallback,DL=ai.unstable_shouldYield,FL=ai.unstable_requestPaint,Ot=ai.unstable_now,jL=ai.unstable_getCurrentPriorityLevel,Cv=ai.unstable_ImmediatePriority,ik=ai.unstable_UserBlockingPriority,Wf=ai.unstable_NormalPriority,VL=ai.unstable_LowPriority,rk=ai.unstable_IdlePriority,Qp=null,wr=null;function zL(t){if(wr&&typeof wr.onCommitFiberRoot=="function")try{wr.onCommitFiberRoot(Qp,t,void 0,(t.current.flags&128)===128)}catch{}}var er=Math.clz32?Math.clz32:$L,BL=Math.log,UL=Math.LN2;function $L(t){return t>>>=0,t===0?32:31-(BL(t)/UL|0)|0}var Td=64,kd=4194304;function oc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function qf(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~r;l!==0?i=oc(l):(s&=o,s!==0&&(i=oc(s)))}else o=n&~r,o!==0?i=oc(o):s!==0&&(i=oc(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-er(e),r=1<<n,i|=t[n],e&=~r;return i}function HL(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function WL(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-er(s),l=1<<o,u=r[o];u===-1?(!(l&n)||l&i)&&(r[o]=HL(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function V_(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function sk(){var t=Td;return Td<<=1,!(Td&4194240)&&(Td=64),t}function fg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function xh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-er(e),t[e]=n}function qL(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-er(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function Iv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-er(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var tt=0;function ok(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ak,Av,lk,uk,ck,z_=!1,Pd=[],Ys=null,Qs=null,Xs=null,Uc=new Map,$c=new Map,js=[],GL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cx(t,e){switch(t){case"focusin":case"focusout":Ys=null;break;case"dragenter":case"dragleave":Qs=null;break;case"mouseover":case"mouseout":Xs=null;break;case"pointerover":case"pointerout":Uc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$c.delete(e.pointerId)}}function $u(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Eh(e),e!==null&&Av(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function KL(t,e,n,i,r){switch(e){case"focusin":return Ys=$u(Ys,t,e,n,i,r),!0;case"dragenter":return Qs=$u(Qs,t,e,n,i,r),!0;case"mouseover":return Xs=$u(Xs,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Uc.set(s,$u(Uc.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,$c.set(s,$u($c.get(s)||null,t,e,n,i,r)),!0}return!1}function hk(t){var e=Go(t.target);if(e!==null){var n=_a(e);if(n!==null){if(e=n.tag,e===13){if(e=JT(n),e!==null){t.blockedOn=e,ck(t.priority,function(){lk(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function df(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=B_(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);M_=i,n.target.dispatchEvent(i),M_=null}else return e=Eh(n),e!==null&&Av(e),t.blockedOn=n,!1;e.shift()}return!0}function Ix(t,e,n){df(t)&&n.delete(e)}function ZL(){z_=!1,Ys!==null&&df(Ys)&&(Ys=null),Qs!==null&&df(Qs)&&(Qs=null),Xs!==null&&df(Xs)&&(Xs=null),Uc.forEach(Ix),$c.forEach(Ix)}function Hu(t,e){t.blockedOn===e&&(t.blockedOn=null,z_||(z_=!0,ai.unstable_scheduleCallback(ai.unstable_NormalPriority,ZL)))}function Hc(t){function e(r){return Hu(r,t)}if(0<Pd.length){Hu(Pd[0],t);for(var n=1;n<Pd.length;n++){var i=Pd[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Ys!==null&&Hu(Ys,t),Qs!==null&&Hu(Qs,t),Xs!==null&&Hu(Xs,t),Uc.forEach(e),$c.forEach(e),n=0;n<js.length;n++)i=js[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<js.length&&(n=js[0],n.blockedOn===null);)hk(n),n.blockedOn===null&&js.shift()}var _l=vs.ReactCurrentBatchConfig,Gf=!0;function YL(t,e,n,i){var r=tt,s=_l.transition;_l.transition=null;try{tt=1,Rv(t,e,n,i)}finally{tt=r,_l.transition=s}}function QL(t,e,n,i){var r=tt,s=_l.transition;_l.transition=null;try{tt=4,Rv(t,e,n,i)}finally{tt=r,_l.transition=s}}function Rv(t,e,n,i){if(Gf){var r=B_(t,e,n,i);if(r===null)Eg(t,e,i,Kf,n),Cx(t,i);else if(KL(r,t,e,n,i))i.stopPropagation();else if(Cx(t,i),e&4&&-1<GL.indexOf(t)){for(;r!==null;){var s=Eh(r);if(s!==null&&ak(s),s=B_(t,e,n,i),s===null&&Eg(t,e,i,Kf,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Eg(t,e,i,null,n)}}var Kf=null;function B_(t,e,n,i){if(Kf=null,t=Pv(i),t=Go(t),t!==null)if(e=_a(t),e===null)t=null;else if(n=e.tag,n===13){if(t=JT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Kf=t,null}function dk(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jL()){case Cv:return 1;case ik:return 4;case Wf:case VL:return 16;case rk:return 536870912;default:return 16}default:return 16}}var Hs=null,Lv=null,ff=null;function fk(){if(ff)return ff;var t,e=Lv,n=e.length,i,r="value"in Hs?Hs.value:Hs.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return ff=r.slice(t,1<i?1-i:void 0)}function pf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Cd(){return!0}function Ax(){return!1}function ui(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Cd:Ax,this.isPropagationStopped=Ax,this}return Tt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Cd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Cd)},persist:function(){},isPersistent:Cd}),e}var Yl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nv=ui(Yl),bh=Tt({},Yl,{view:0,detail:0}),XL=ui(bh),pg,mg,Wu,Xp=Tt({},bh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ov,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Wu&&(Wu&&t.type==="mousemove"?(pg=t.screenX-Wu.screenX,mg=t.screenY-Wu.screenY):mg=pg=0,Wu=t),pg)},movementY:function(t){return"movementY"in t?t.movementY:mg}}),Rx=ui(Xp),JL=Tt({},Xp,{dataTransfer:0}),eN=ui(JL),tN=Tt({},bh,{relatedTarget:0}),gg=ui(tN),nN=Tt({},Yl,{animationName:0,elapsedTime:0,pseudoElement:0}),iN=ui(nN),rN=Tt({},Yl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),sN=ui(rN),oN=Tt({},Yl,{data:0}),Lx=ui(oN),aN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=uN[t])?!!e[t]:!1}function Ov(){return cN}var hN=Tt({},bh,{key:function(t){if(t.key){var e=aN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=pf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?lN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ov,charCode:function(t){return t.type==="keypress"?pf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?pf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),dN=ui(hN),fN=Tt({},Xp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nx=ui(fN),pN=Tt({},bh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ov}),mN=ui(pN),gN=Tt({},Yl,{propertyName:0,elapsedTime:0,pseudoElement:0}),_N=ui(gN),yN=Tt({},Xp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vN=ui(yN),wN=[9,13,27,32],Mv=as&&"CompositionEvent"in window,wc=null;as&&"documentMode"in document&&(wc=document.documentMode);var xN=as&&"TextEvent"in window&&!wc,pk=as&&(!Mv||wc&&8<wc&&11>=wc),Ox=" ",Mx=!1;function mk(t,e){switch(t){case"keyup":return wN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gk(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var nl=!1;function bN(t,e){switch(t){case"compositionend":return gk(e);case"keypress":return e.which!==32?null:(Mx=!0,Ox);case"textInput":return t=e.data,t===Ox&&Mx?null:t;default:return null}}function EN(t,e){if(nl)return t==="compositionend"||!Mv&&mk(t,e)?(t=fk(),ff=Lv=Hs=null,nl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return pk&&e.locale!=="ko"?null:e.data;default:return null}}var SN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!SN[t.type]:e==="textarea"}function _k(t,e,n,i){KT(i),e=Zf(e,"onChange"),0<e.length&&(n=new Nv("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var xc=null,Wc=null;function TN(t){Ck(t,0)}function Jp(t){var e=sl(t);if(BT(e))return t}function kN(t,e){if(t==="change")return e}var yk=!1;if(as){var _g;if(as){var yg="oninput"in document;if(!yg){var Fx=document.createElement("div");Fx.setAttribute("oninput","return;"),yg=typeof Fx.oninput=="function"}_g=yg}else _g=!1;yk=_g&&(!document.documentMode||9<document.documentMode)}function jx(){xc&&(xc.detachEvent("onpropertychange",vk),Wc=xc=null)}function vk(t){if(t.propertyName==="value"&&Jp(Wc)){var e=[];_k(e,Wc,t,Pv(t)),XT(TN,e)}}function PN(t,e,n){t==="focusin"?(jx(),xc=e,Wc=n,xc.attachEvent("onpropertychange",vk)):t==="focusout"&&jx()}function CN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Jp(Wc)}function IN(t,e){if(t==="click")return Jp(e)}function AN(t,e){if(t==="input"||t==="change")return Jp(e)}function RN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nr=typeof Object.is=="function"?Object.is:RN;function qc(t,e){if(nr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!E_.call(e,r)||!nr(t[r],e[r]))return!1}return!0}function Vx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zx(t,e){var n=Vx(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Vx(n)}}function wk(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?wk(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function xk(){for(var t=window,e=Uf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Uf(t.document)}return e}function Dv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function LN(t){var e=xk(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&wk(n.ownerDocument.documentElement,n)){if(i!==null&&Dv(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=zx(n,s);var o=zx(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var NN=as&&"documentMode"in document&&11>=document.documentMode,il=null,U_=null,bc=null,$_=!1;function Bx(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$_||il==null||il!==Uf(i)||(i=il,"selectionStart"in i&&Dv(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),bc&&qc(bc,i)||(bc=i,i=Zf(U_,"onSelect"),0<i.length&&(e=new Nv("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=il)))}function Id(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var rl={animationend:Id("Animation","AnimationEnd"),animationiteration:Id("Animation","AnimationIteration"),animationstart:Id("Animation","AnimationStart"),transitionend:Id("Transition","TransitionEnd")},vg={},bk={};as&&(bk=document.createElement("div").style,"AnimationEvent"in window||(delete rl.animationend.animation,delete rl.animationiteration.animation,delete rl.animationstart.animation),"TransitionEvent"in window||delete rl.transitionend.transition);function em(t){if(vg[t])return vg[t];if(!rl[t])return t;var e=rl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in bk)return vg[t]=e[n];return t}var Ek=em("animationend"),Sk=em("animationiteration"),Tk=em("animationstart"),kk=em("transitionend"),Pk=new Map,Ux="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wo(t,e){Pk.set(t,e),ga(e,[t])}for(var wg=0;wg<Ux.length;wg++){var xg=Ux[wg],ON=xg.toLowerCase(),MN=xg[0].toUpperCase()+xg.slice(1);wo(ON,"on"+MN)}wo(Ek,"onAnimationEnd");wo(Sk,"onAnimationIteration");wo(Tk,"onAnimationStart");wo("dblclick","onDoubleClick");wo("focusin","onFocus");wo("focusout","onBlur");wo(kk,"onTransitionEnd");Il("onMouseEnter",["mouseout","mouseover"]);Il("onMouseLeave",["mouseout","mouseover"]);Il("onPointerEnter",["pointerout","pointerover"]);Il("onPointerLeave",["pointerout","pointerover"]);ga("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ga("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ga("onBeforeInput",["compositionend","keypress","textInput","paste"]);ga("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ga("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ga("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DN=new Set("cancel close invalid load scroll toggle".split(" ").concat(ac));function $x(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,OL(i,e,void 0,t),t.currentTarget=null}function Ck(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var l=i[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&r.isPropagationStopped())break e;$x(r,l,h),s=u}else for(o=0;o<i.length;o++){if(l=i[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&r.isPropagationStopped())break e;$x(r,l,h),s=u}}}if(Hf)throw t=j_,Hf=!1,j_=null,t}function dt(t,e){var n=e[K_];n===void 0&&(n=e[K_]=new Set);var i=t+"__bubble";n.has(i)||(Ik(e,t,2,!1),n.add(i))}function bg(t,e,n){var i=0;e&&(i|=4),Ik(n,t,i,e)}var Ad="_reactListening"+Math.random().toString(36).slice(2);function Gc(t){if(!t[Ad]){t[Ad]=!0,DT.forEach(function(n){n!=="selectionchange"&&(DN.has(n)||bg(n,!1,t),bg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ad]||(e[Ad]=!0,bg("selectionchange",!1,e))}}function Ik(t,e,n,i){switch(dk(e)){case 1:var r=YL;break;case 4:r=QL;break;default:r=Rv}n=r.bind(null,e,n,t),r=void 0,!F_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Eg(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var l=i.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===r||u.nodeType===8&&u.parentNode===r))return;o=o.return}for(;l!==null;){if(o=Go(l),o===null)return;if(u=o.tag,u===5||u===6){i=s=o;continue e}l=l.parentNode}}i=i.return}XT(function(){var h=s,d=Pv(n),m=[];e:{var g=Pk.get(t);if(g!==void 0){var _=Nv,w=t;switch(t){case"keypress":if(pf(n)===0)break e;case"keydown":case"keyup":_=dN;break;case"focusin":w="focus",_=gg;break;case"focusout":w="blur",_=gg;break;case"beforeblur":case"afterblur":_=gg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Rx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=eN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=mN;break;case Ek:case Sk:case Tk:_=iN;break;case kk:_=_N;break;case"scroll":_=XL;break;case"wheel":_=vN;break;case"copy":case"cut":case"paste":_=sN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Nx}var x=(e&4)!==0,C=!x&&t==="scroll",E=x?g!==null?g+"Capture":null:g;x=[];for(var k=h,P;k!==null;){P=k;var j=P.stateNode;if(P.tag===5&&j!==null&&(P=j,E!==null&&(j=Bc(k,E),j!=null&&x.push(Kc(k,j,P)))),C)break;k=k.return}0<x.length&&(g=new _(g,w,null,n,d),m.push({event:g,listeners:x}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",g&&n!==M_&&(w=n.relatedTarget||n.fromElement)&&(Go(w)||w[ls]))break e;if((_||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,_?(w=n.relatedTarget||n.toElement,_=h,w=w?Go(w):null,w!==null&&(C=_a(w),w!==C||w.tag!==5&&w.tag!==6)&&(w=null)):(_=null,w=h),_!==w)){if(x=Rx,j="onMouseLeave",E="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(x=Nx,j="onPointerLeave",E="onPointerEnter",k="pointer"),C=_==null?g:sl(_),P=w==null?g:sl(w),g=new x(j,k+"leave",_,n,d),g.target=C,g.relatedTarget=P,j=null,Go(d)===h&&(x=new x(E,k+"enter",w,n,d),x.target=P,x.relatedTarget=C,j=x),C=j,_&&w)t:{for(x=_,E=w,k=0,P=x;P;P=Ga(P))k++;for(P=0,j=E;j;j=Ga(j))P++;for(;0<k-P;)x=Ga(x),k--;for(;0<P-k;)E=Ga(E),P--;for(;k--;){if(x===E||E!==null&&x===E.alternate)break t;x=Ga(x),E=Ga(E)}x=null}else x=null;_!==null&&Hx(m,g,_,x,!1),w!==null&&C!==null&&Hx(m,C,w,x,!0)}}e:{if(g=h?sl(h):window,_=g.nodeName&&g.nodeName.toLowerCase(),_==="select"||_==="input"&&g.type==="file")var W=kN;else if(Dx(g))if(yk)W=AN;else{W=CN;var z=PN}else(_=g.nodeName)&&_.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(W=IN);if(W&&(W=W(t,h))){_k(m,W,n,d);break e}z&&z(t,g,h),t==="focusout"&&(z=g._wrapperState)&&z.controlled&&g.type==="number"&&A_(g,"number",g.value)}switch(z=h?sl(h):window,t){case"focusin":(Dx(z)||z.contentEditable==="true")&&(il=z,U_=h,bc=null);break;case"focusout":bc=U_=il=null;break;case"mousedown":$_=!0;break;case"contextmenu":case"mouseup":case"dragend":$_=!1,Bx(m,n,d);break;case"selectionchange":if(NN)break;case"keydown":case"keyup":Bx(m,n,d)}var R;if(Mv)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else nl?mk(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(pk&&n.locale!=="ko"&&(nl||I!=="onCompositionStart"?I==="onCompositionEnd"&&nl&&(R=fk()):(Hs=d,Lv="value"in Hs?Hs.value:Hs.textContent,nl=!0)),z=Zf(h,I),0<z.length&&(I=new Lx(I,t,null,n,d),m.push({event:I,listeners:z}),R?I.data=R:(R=gk(n),R!==null&&(I.data=R)))),(R=xN?bN(t,n):EN(t,n))&&(h=Zf(h,"onBeforeInput"),0<h.length&&(d=new Lx("onBeforeInput","beforeinput",null,n,d),m.push({event:d,listeners:h}),d.data=R))}Ck(m,e)})}function Kc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Zf(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Bc(t,n),s!=null&&i.unshift(Kc(t,s,r)),s=Bc(t,e),s!=null&&i.push(Kc(t,s,r))),t=t.return}return i}function Ga(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Hx(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===i)break;l.tag===5&&h!==null&&(l=h,r?(u=Bc(n,s),u!=null&&o.unshift(Kc(n,u,l))):r||(u=Bc(n,s),u!=null&&o.push(Kc(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var FN=/\r\n?/g,jN=/\u0000|\uFFFD/g;function Wx(t){return(typeof t=="string"?t:""+t).replace(FN,`
`).replace(jN,"")}function Rd(t,e,n){if(e=Wx(e),Wx(t)!==e&&n)throw Error(se(425))}function Yf(){}var H_=null,W_=null;function q_(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var G_=typeof setTimeout=="function"?setTimeout:void 0,VN=typeof clearTimeout=="function"?clearTimeout:void 0,qx=typeof Promise=="function"?Promise:void 0,zN=typeof queueMicrotask=="function"?queueMicrotask:typeof qx<"u"?function(t){return qx.resolve(null).then(t).catch(BN)}:G_;function BN(t){setTimeout(function(){throw t})}function Sg(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Hc(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Hc(e)}function Js(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Gx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ql=Math.random().toString(36).slice(2),yr="__reactFiber$"+Ql,Zc="__reactProps$"+Ql,ls="__reactContainer$"+Ql,K_="__reactEvents$"+Ql,UN="__reactListeners$"+Ql,$N="__reactHandles$"+Ql;function Go(t){var e=t[yr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ls]||n[yr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Gx(t);t!==null;){if(n=t[yr])return n;t=Gx(t)}return e}t=n,n=t.parentNode}return null}function Eh(t){return t=t[yr]||t[ls],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function sl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(se(33))}function tm(t){return t[Zc]||null}var Z_=[],ol=-1;function xo(t){return{current:t}}function pt(t){0>ol||(t.current=Z_[ol],Z_[ol]=null,ol--)}function ut(t,e){ol++,Z_[ol]=t.current,t.current=e}var po={},En=xo(po),Hn=xo(!1),ra=po;function Al(t,e){var n=t.type.contextTypes;if(!n)return po;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Wn(t){return t=t.childContextTypes,t!=null}function Qf(){pt(Hn),pt(En)}function Kx(t,e,n){if(En.current!==po)throw Error(se(168));ut(En,e),ut(Hn,n)}function Ak(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(se(108,PL(t)||"Unknown",r));return Tt({},n,i)}function Xf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||po,ra=En.current,ut(En,t),ut(Hn,Hn.current),!0}function Zx(t,e,n){var i=t.stateNode;if(!i)throw Error(se(169));n?(t=Ak(t,e,ra),i.__reactInternalMemoizedMergedChildContext=t,pt(Hn),pt(En),ut(En,t)):pt(Hn),ut(Hn,n)}var Qr=null,nm=!1,Tg=!1;function Rk(t){Qr===null?Qr=[t]:Qr.push(t)}function HN(t){nm=!0,Rk(t)}function bo(){if(!Tg&&Qr!==null){Tg=!0;var t=0,e=tt;try{var n=Qr;for(tt=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Qr=null,nm=!1}catch(r){throw Qr!==null&&(Qr=Qr.slice(t+1)),nk(Cv,bo),r}finally{tt=e,Tg=!1}}return null}var al=[],ll=0,Jf=null,ep=0,Ei=[],Si=0,sa=null,es=1,ts="";function Uo(t,e){al[ll++]=ep,al[ll++]=Jf,Jf=t,ep=e}function Lk(t,e,n){Ei[Si++]=es,Ei[Si++]=ts,Ei[Si++]=sa,sa=t;var i=es;t=ts;var r=32-er(i)-1;i&=~(1<<r),n+=1;var s=32-er(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,es=1<<32-er(e)+r|n<<r|i,ts=s+t}else es=1<<s|n<<r|i,ts=t}function Fv(t){t.return!==null&&(Uo(t,1),Lk(t,1,0))}function jv(t){for(;t===Jf;)Jf=al[--ll],al[ll]=null,ep=al[--ll],al[ll]=null;for(;t===sa;)sa=Ei[--Si],Ei[Si]=null,ts=Ei[--Si],Ei[Si]=null,es=Ei[--Si],Ei[Si]=null}var si=null,ni=null,yt=!1,Ki=null;function Nk(t,e){var n=ki(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Yx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,si=t,ni=Js(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,si=t,ni=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=sa!==null?{id:es,overflow:ts}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ki(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,si=t,ni=null,!0):!1;default:return!1}}function Y_(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Q_(t){if(yt){var e=ni;if(e){var n=e;if(!Yx(t,e)){if(Y_(t))throw Error(se(418));e=Js(n.nextSibling);var i=si;e&&Yx(t,e)?Nk(i,n):(t.flags=t.flags&-4097|2,yt=!1,si=t)}}else{if(Y_(t))throw Error(se(418));t.flags=t.flags&-4097|2,yt=!1,si=t}}}function Qx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;si=t}function Ld(t){if(t!==si)return!1;if(!yt)return Qx(t),yt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!q_(t.type,t.memoizedProps)),e&&(e=ni)){if(Y_(t))throw Ok(),Error(se(418));for(;e;)Nk(t,e),e=Js(e.nextSibling)}if(Qx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(se(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ni=Js(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ni=null}}else ni=si?Js(t.stateNode.nextSibling):null;return!0}function Ok(){for(var t=ni;t;)t=Js(t.nextSibling)}function Rl(){ni=si=null,yt=!1}function Vv(t){Ki===null?Ki=[t]:Ki.push(t)}var WN=vs.ReactCurrentBatchConfig;function qu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(se(309));var i=n.stateNode}if(!i)throw Error(se(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=r.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(se(284));if(!n._owner)throw Error(se(290,t))}return t}function Nd(t,e){throw t=Object.prototype.toString.call(e),Error(se(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Xx(t){var e=t._init;return e(t._payload)}function Mk(t){function e(E,k){if(t){var P=E.deletions;P===null?(E.deletions=[k],E.flags|=16):P.push(k)}}function n(E,k){if(!t)return null;for(;k!==null;)e(E,k),k=k.sibling;return null}function i(E,k){for(E=new Map;k!==null;)k.key!==null?E.set(k.key,k):E.set(k.index,k),k=k.sibling;return E}function r(E,k){return E=io(E,k),E.index=0,E.sibling=null,E}function s(E,k,P){return E.index=P,t?(P=E.alternate,P!==null?(P=P.index,P<k?(E.flags|=2,k):P):(E.flags|=2,k)):(E.flags|=1048576,k)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,k,P,j){return k===null||k.tag!==6?(k=Lg(P,E.mode,j),k.return=E,k):(k=r(k,P),k.return=E,k)}function u(E,k,P,j){var W=P.type;return W===tl?d(E,k,P.props.children,j,P.key):k!==null&&(k.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Ds&&Xx(W)===k.type)?(j=r(k,P.props),j.ref=qu(E,k,P),j.return=E,j):(j=xf(P.type,P.key,P.props,null,E.mode,j),j.ref=qu(E,k,P),j.return=E,j)}function h(E,k,P,j){return k===null||k.tag!==4||k.stateNode.containerInfo!==P.containerInfo||k.stateNode.implementation!==P.implementation?(k=Ng(P,E.mode,j),k.return=E,k):(k=r(k,P.children||[]),k.return=E,k)}function d(E,k,P,j,W){return k===null||k.tag!==7?(k=ea(P,E.mode,j,W),k.return=E,k):(k=r(k,P),k.return=E,k)}function m(E,k,P){if(typeof k=="string"&&k!==""||typeof k=="number")return k=Lg(""+k,E.mode,P),k.return=E,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case bd:return P=xf(k.type,k.key,k.props,null,E.mode,P),P.ref=qu(E,null,k),P.return=E,P;case el:return k=Ng(k,E.mode,P),k.return=E,k;case Ds:var j=k._init;return m(E,j(k._payload),P)}if(sc(k)||Bu(k))return k=ea(k,E.mode,P,null),k.return=E,k;Nd(E,k)}return null}function g(E,k,P,j){var W=k!==null?k.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return W!==null?null:l(E,k,""+P,j);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case bd:return P.key===W?u(E,k,P,j):null;case el:return P.key===W?h(E,k,P,j):null;case Ds:return W=P._init,g(E,k,W(P._payload),j)}if(sc(P)||Bu(P))return W!==null?null:d(E,k,P,j,null);Nd(E,P)}return null}function _(E,k,P,j,W){if(typeof j=="string"&&j!==""||typeof j=="number")return E=E.get(P)||null,l(k,E,""+j,W);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case bd:return E=E.get(j.key===null?P:j.key)||null,u(k,E,j,W);case el:return E=E.get(j.key===null?P:j.key)||null,h(k,E,j,W);case Ds:var z=j._init;return _(E,k,P,z(j._payload),W)}if(sc(j)||Bu(j))return E=E.get(P)||null,d(k,E,j,W,null);Nd(k,j)}return null}function w(E,k,P,j){for(var W=null,z=null,R=k,I=k=0,N=null;R!==null&&I<P.length;I++){R.index>I?(N=R,R=null):N=R.sibling;var F=g(E,R,P[I],j);if(F===null){R===null&&(R=N);break}t&&R&&F.alternate===null&&e(E,R),k=s(F,k,I),z===null?W=F:z.sibling=F,z=F,R=N}if(I===P.length)return n(E,R),yt&&Uo(E,I),W;if(R===null){for(;I<P.length;I++)R=m(E,P[I],j),R!==null&&(k=s(R,k,I),z===null?W=R:z.sibling=R,z=R);return yt&&Uo(E,I),W}for(R=i(E,R);I<P.length;I++)N=_(R,E,I,P[I],j),N!==null&&(t&&N.alternate!==null&&R.delete(N.key===null?I:N.key),k=s(N,k,I),z===null?W=N:z.sibling=N,z=N);return t&&R.forEach(function(D){return e(E,D)}),yt&&Uo(E,I),W}function x(E,k,P,j){var W=Bu(P);if(typeof W!="function")throw Error(se(150));if(P=W.call(P),P==null)throw Error(se(151));for(var z=W=null,R=k,I=k=0,N=null,F=P.next();R!==null&&!F.done;I++,F=P.next()){R.index>I?(N=R,R=null):N=R.sibling;var D=g(E,R,F.value,j);if(D===null){R===null&&(R=N);break}t&&R&&D.alternate===null&&e(E,R),k=s(D,k,I),z===null?W=D:z.sibling=D,z=D,R=N}if(F.done)return n(E,R),yt&&Uo(E,I),W;if(R===null){for(;!F.done;I++,F=P.next())F=m(E,F.value,j),F!==null&&(k=s(F,k,I),z===null?W=F:z.sibling=F,z=F);return yt&&Uo(E,I),W}for(R=i(E,R);!F.done;I++,F=P.next())F=_(R,E,I,F.value,j),F!==null&&(t&&F.alternate!==null&&R.delete(F.key===null?I:F.key),k=s(F,k,I),z===null?W=F:z.sibling=F,z=F);return t&&R.forEach(function(B){return e(E,B)}),yt&&Uo(E,I),W}function C(E,k,P,j){if(typeof P=="object"&&P!==null&&P.type===tl&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case bd:e:{for(var W=P.key,z=k;z!==null;){if(z.key===W){if(W=P.type,W===tl){if(z.tag===7){n(E,z.sibling),k=r(z,P.props.children),k.return=E,E=k;break e}}else if(z.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===Ds&&Xx(W)===z.type){n(E,z.sibling),k=r(z,P.props),k.ref=qu(E,z,P),k.return=E,E=k;break e}n(E,z);break}else e(E,z);z=z.sibling}P.type===tl?(k=ea(P.props.children,E.mode,j,P.key),k.return=E,E=k):(j=xf(P.type,P.key,P.props,null,E.mode,j),j.ref=qu(E,k,P),j.return=E,E=j)}return o(E);case el:e:{for(z=P.key;k!==null;){if(k.key===z)if(k.tag===4&&k.stateNode.containerInfo===P.containerInfo&&k.stateNode.implementation===P.implementation){n(E,k.sibling),k=r(k,P.children||[]),k.return=E,E=k;break e}else{n(E,k);break}else e(E,k);k=k.sibling}k=Ng(P,E.mode,j),k.return=E,E=k}return o(E);case Ds:return z=P._init,C(E,k,z(P._payload),j)}if(sc(P))return w(E,k,P,j);if(Bu(P))return x(E,k,P,j);Nd(E,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,k!==null&&k.tag===6?(n(E,k.sibling),k=r(k,P),k.return=E,E=k):(n(E,k),k=Lg(P,E.mode,j),k.return=E,E=k),o(E)):n(E,k)}return C}var Ll=Mk(!0),Dk=Mk(!1),tp=xo(null),np=null,ul=null,zv=null;function Bv(){zv=ul=np=null}function Uv(t){var e=tp.current;pt(tp),t._currentValue=e}function X_(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function yl(t,e){np=t,zv=ul=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&($n=!0),t.firstContext=null)}function Ri(t){var e=t._currentValue;if(zv!==t)if(t={context:t,memoizedValue:e,next:null},ul===null){if(np===null)throw Error(se(308));ul=t,np.dependencies={lanes:0,firstContext:t}}else ul=ul.next=t;return e}var Ko=null;function $v(t){Ko===null?Ko=[t]:Ko.push(t)}function Fk(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,$v(e)):(n.next=r.next,r.next=n),e.interleaved=n,us(t,i)}function us(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Fs=!1;function Hv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jk(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ss(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function eo(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ge&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,us(t,n)}return r=i.interleaved,r===null?(e.next=e,$v(i)):(e.next=r.next,r.next=e),i.interleaved=e,us(t,n)}function mf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Iv(t,n)}}function Jx(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ip(t,e,n,i){var r=t.updateQueue;Fs=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?s=h:o.next=h,o=u;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=h:l.next=h,d.lastBaseUpdate=u))}if(s!==null){var m=r.baseState;o=0,d=h=u=null,l=s;do{var g=l.lane,_=l.eventTime;if((i&g)===g){d!==null&&(d=d.next={eventTime:_,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=t,x=l;switch(g=e,_=n,x.tag){case 1:if(w=x.payload,typeof w=="function"){m=w.call(_,m,g);break e}m=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=x.payload,g=typeof w=="function"?w.call(_,m,g):w,g==null)break e;m=Tt({},m,g);break e;case 2:Fs=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=r.effects,g===null?r.effects=[l]:g.push(l))}else _={eventTime:_,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(h=d=_,u=m):d=d.next=_,o|=g;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;g=l,l=g.next,g.next=null,r.lastBaseUpdate=g,r.shared.pending=null}}while(!0);if(d===null&&(u=m),r.baseState=u,r.firstBaseUpdate=h,r.lastBaseUpdate=d,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);aa|=o,t.lanes=o,t.memoizedState=m}}function e1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(se(191,r));r.call(i)}}}var Sh={},xr=xo(Sh),Yc=xo(Sh),Qc=xo(Sh);function Zo(t){if(t===Sh)throw Error(se(174));return t}function Wv(t,e){switch(ut(Qc,e),ut(Yc,t),ut(xr,Sh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:L_(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=L_(e,t)}pt(xr),ut(xr,e)}function Nl(){pt(xr),pt(Yc),pt(Qc)}function Vk(t){Zo(Qc.current);var e=Zo(xr.current),n=L_(e,t.type);e!==n&&(ut(Yc,t),ut(xr,n))}function qv(t){Yc.current===t&&(pt(xr),pt(Yc))}var Et=xo(0);function rp(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var kg=[];function Gv(){for(var t=0;t<kg.length;t++)kg[t]._workInProgressVersionPrimary=null;kg.length=0}var gf=vs.ReactCurrentDispatcher,Pg=vs.ReactCurrentBatchConfig,oa=0,St=null,Ht=null,Jt=null,sp=!1,Ec=!1,Xc=0,qN=0;function dn(){throw Error(se(321))}function Kv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!nr(t[n],e[n]))return!1;return!0}function Zv(t,e,n,i,r,s){if(oa=s,St=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,gf.current=t===null||t.memoizedState===null?YN:QN,t=n(i,r),Ec){s=0;do{if(Ec=!1,Xc=0,25<=s)throw Error(se(301));s+=1,Jt=Ht=null,e.updateQueue=null,gf.current=XN,t=n(i,r)}while(Ec)}if(gf.current=op,e=Ht!==null&&Ht.next!==null,oa=0,Jt=Ht=St=null,sp=!1,e)throw Error(se(300));return t}function Yv(){var t=Xc!==0;return Xc=0,t}function mr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jt===null?St.memoizedState=Jt=t:Jt=Jt.next=t,Jt}function Li(){if(Ht===null){var t=St.alternate;t=t!==null?t.memoizedState:null}else t=Ht.next;var e=Jt===null?St.memoizedState:Jt.next;if(e!==null)Jt=e,Ht=t;else{if(t===null)throw Error(se(310));Ht=t,t={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},Jt===null?St.memoizedState=Jt=t:Jt=Jt.next=t}return Jt}function Jc(t,e){return typeof e=="function"?e(t):e}function Cg(t){var e=Li(),n=e.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=t;var i=Ht,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var l=o=null,u=null,h=s;do{var d=h.lane;if((oa&d)===d)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),i=h.hasEagerState?h.eagerState:t(i,h.action);else{var m={lane:d,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=m,o=i):u=u.next=m,St.lanes|=d,aa|=d}h=h.next}while(h!==null&&h!==s);u===null?o=i:u.next=l,nr(i,e.memoizedState)||($n=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=u,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,St.lanes|=s,aa|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ig(t){var e=Li(),n=e.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);nr(s,e.memoizedState)||($n=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function zk(){}function Bk(t,e){var n=St,i=Li(),r=e(),s=!nr(i.memoizedState,r);if(s&&(i.memoizedState=r,$n=!0),i=i.queue,Qv(Hk.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Jt!==null&&Jt.memoizedState.tag&1){if(n.flags|=2048,eh(9,$k.bind(null,n,i,r,e),void 0,null),en===null)throw Error(se(349));oa&30||Uk(n,e,r)}return r}function Uk(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=St.updateQueue,e===null?(e={lastEffect:null,stores:null},St.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function $k(t,e,n,i){e.value=n,e.getSnapshot=i,Wk(e)&&qk(t)}function Hk(t,e,n){return n(function(){Wk(e)&&qk(t)})}function Wk(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!nr(t,n)}catch{return!0}}function qk(t){var e=us(t,1);e!==null&&tr(e,t,1,-1)}function t1(t){var e=mr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jc,lastRenderedState:t},e.queue=t,t=t.dispatch=ZN.bind(null,St,t),[e.memoizedState,t]}function eh(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=St.updateQueue,e===null?(e={lastEffect:null,stores:null},St.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Gk(){return Li().memoizedState}function _f(t,e,n,i){var r=mr();St.flags|=t,r.memoizedState=eh(1|e,n,void 0,i===void 0?null:i)}function im(t,e,n,i){var r=Li();i=i===void 0?null:i;var s=void 0;if(Ht!==null){var o=Ht.memoizedState;if(s=o.destroy,i!==null&&Kv(i,o.deps)){r.memoizedState=eh(e,n,s,i);return}}St.flags|=t,r.memoizedState=eh(1|e,n,s,i)}function n1(t,e){return _f(8390656,8,t,e)}function Qv(t,e){return im(2048,8,t,e)}function Kk(t,e){return im(4,2,t,e)}function Zk(t,e){return im(4,4,t,e)}function Yk(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Qk(t,e,n){return n=n!=null?n.concat([t]):null,im(4,4,Yk.bind(null,e,t),n)}function Xv(){}function Xk(t,e){var n=Li();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Kv(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Jk(t,e){var n=Li();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Kv(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function eP(t,e,n){return oa&21?(nr(n,e)||(n=sk(),St.lanes|=n,aa|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,$n=!0),t.memoizedState=n)}function GN(t,e){var n=tt;tt=n!==0&&4>n?n:4,t(!0);var i=Pg.transition;Pg.transition={};try{t(!1),e()}finally{tt=n,Pg.transition=i}}function tP(){return Li().memoizedState}function KN(t,e,n){var i=no(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},nP(t))iP(e,n);else if(n=Fk(t,e,n,i),n!==null){var r=Rn();tr(n,t,i,r),rP(n,e,i)}}function ZN(t,e,n){var i=no(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(nP(t))iP(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(r.hasEagerState=!0,r.eagerState=l,nr(l,o)){var u=e.interleaved;u===null?(r.next=r,$v(e)):(r.next=u.next,u.next=r),e.interleaved=r;return}}catch{}finally{}n=Fk(t,e,r,i),n!==null&&(r=Rn(),tr(n,t,i,r),rP(n,e,i))}}function nP(t){var e=t.alternate;return t===St||e!==null&&e===St}function iP(t,e){Ec=sp=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function rP(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Iv(t,n)}}var op={readContext:Ri,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useInsertionEffect:dn,useLayoutEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useMutableSource:dn,useSyncExternalStore:dn,useId:dn,unstable_isNewReconciler:!1},YN={readContext:Ri,useCallback:function(t,e){return mr().memoizedState=[t,e===void 0?null:e],t},useContext:Ri,useEffect:n1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,_f(4194308,4,Yk.bind(null,e,t),n)},useLayoutEffect:function(t,e){return _f(4194308,4,t,e)},useInsertionEffect:function(t,e){return _f(4,2,t,e)},useMemo:function(t,e){var n=mr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=mr();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=KN.bind(null,St,t),[i.memoizedState,t]},useRef:function(t){var e=mr();return t={current:t},e.memoizedState=t},useState:t1,useDebugValue:Xv,useDeferredValue:function(t){return mr().memoizedState=t},useTransition:function(){var t=t1(!1),e=t[0];return t=GN.bind(null,t[1]),mr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=St,r=mr();if(yt){if(n===void 0)throw Error(se(407));n=n()}else{if(n=e(),en===null)throw Error(se(349));oa&30||Uk(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,n1(Hk.bind(null,i,s,t),[t]),i.flags|=2048,eh(9,$k.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=mr(),e=en.identifierPrefix;if(yt){var n=ts,i=es;n=(i&~(1<<32-er(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Xc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=qN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},QN={readContext:Ri,useCallback:Xk,useContext:Ri,useEffect:Qv,useImperativeHandle:Qk,useInsertionEffect:Kk,useLayoutEffect:Zk,useMemo:Jk,useReducer:Cg,useRef:Gk,useState:function(){return Cg(Jc)},useDebugValue:Xv,useDeferredValue:function(t){var e=Li();return eP(e,Ht.memoizedState,t)},useTransition:function(){var t=Cg(Jc)[0],e=Li().memoizedState;return[t,e]},useMutableSource:zk,useSyncExternalStore:Bk,useId:tP,unstable_isNewReconciler:!1},XN={readContext:Ri,useCallback:Xk,useContext:Ri,useEffect:Qv,useImperativeHandle:Qk,useInsertionEffect:Kk,useLayoutEffect:Zk,useMemo:Jk,useReducer:Ig,useRef:Gk,useState:function(){return Ig(Jc)},useDebugValue:Xv,useDeferredValue:function(t){var e=Li();return Ht===null?e.memoizedState=t:eP(e,Ht.memoizedState,t)},useTransition:function(){var t=Ig(Jc)[0],e=Li().memoizedState;return[t,e]},useMutableSource:zk,useSyncExternalStore:Bk,useId:tP,unstable_isNewReconciler:!1};function qi(t,e){if(t&&t.defaultProps){e=Tt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function J_(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Tt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var rm={isMounted:function(t){return(t=t._reactInternals)?_a(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Rn(),r=no(t),s=ss(i,r);s.payload=e,n!=null&&(s.callback=n),e=eo(t,s,r),e!==null&&(tr(e,t,r,i),mf(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Rn(),r=no(t),s=ss(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=eo(t,s,r),e!==null&&(tr(e,t,r,i),mf(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Rn(),i=no(t),r=ss(n,i);r.tag=2,e!=null&&(r.callback=e),e=eo(t,r,i),e!==null&&(tr(e,t,i,n),mf(e,t,i))}};function i1(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!qc(n,i)||!qc(r,s):!0}function sP(t,e,n){var i=!1,r=po,s=e.contextType;return typeof s=="object"&&s!==null?s=Ri(s):(r=Wn(e)?ra:En.current,i=e.contextTypes,s=(i=i!=null)?Al(t,r):po),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=rm,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function r1(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&rm.enqueueReplaceState(e,e.state,null)}function ey(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Hv(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Ri(s):(s=Wn(e)?ra:En.current,r.context=Al(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(J_(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&rm.enqueueReplaceState(r,r.state,null),ip(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Ol(t,e){try{var n="",i=e;do n+=kL(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function Ag(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ty(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var JN=typeof WeakMap=="function"?WeakMap:Map;function oP(t,e,n){n=ss(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){lp||(lp=!0,hy=i),ty(t,e)},n}function aP(t,e,n){n=ss(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){ty(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ty(t,e),typeof i!="function"&&(to===null?to=new Set([this]):to.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function s1(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new JN;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=f4.bind(null,t,e,n),e.then(t,t))}function o1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function a1(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ss(-1,1),e.tag=2,eo(n,e,1))),n.lanes|=1),t)}var e4=vs.ReactCurrentOwner,$n=!1;function An(t,e,n,i){e.child=t===null?Dk(e,null,n,i):Ll(e,t.child,n,i)}function l1(t,e,n,i,r){n=n.render;var s=e.ref;return yl(e,r),i=Zv(t,e,n,i,s,r),n=Yv(),t!==null&&!$n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,cs(t,e,r)):(yt&&n&&Fv(e),e.flags|=1,An(t,e,i,r),e.child)}function u1(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!o0(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,lP(t,e,s,i,r)):(t=xf(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:qc,n(o,i)&&t.ref===e.ref)return cs(t,e,r)}return e.flags|=1,t=io(s,i),t.ref=e.ref,t.return=e,e.child=t}function lP(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(qc(s,i)&&t.ref===e.ref)if($n=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&($n=!0);else return e.lanes=t.lanes,cs(t,e,r)}return ny(t,e,n,i,r)}function uP(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ut(hl,ti),ti|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ut(hl,ti),ti|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,ut(hl,ti),ti|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,ut(hl,ti),ti|=i;return An(t,e,r,n),e.child}function cP(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ny(t,e,n,i,r){var s=Wn(n)?ra:En.current;return s=Al(e,s),yl(e,r),n=Zv(t,e,n,i,s,r),i=Yv(),t!==null&&!$n?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,cs(t,e,r)):(yt&&i&&Fv(e),e.flags|=1,An(t,e,n,r),e.child)}function c1(t,e,n,i,r){if(Wn(n)){var s=!0;Xf(e)}else s=!1;if(yl(e,r),e.stateNode===null)yf(t,e),sP(e,n,i),ey(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Ri(h):(h=Wn(n)?ra:En.current,h=Al(e,h));var d=n.getDerivedStateFromProps,m=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==i||u!==h)&&r1(e,o,i,h),Fs=!1;var g=e.memoizedState;o.state=g,ip(e,i,o,r),u=e.memoizedState,l!==i||g!==u||Hn.current||Fs?(typeof d=="function"&&(J_(e,n,d,i),u=e.memoizedState),(l=Fs||i1(e,n,l,i,g,u,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=u),o.props=i,o.state=u,o.context=h,i=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,jk(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:qi(e.type,l),o.props=h,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ri(u):(u=Wn(n)?ra:En.current,u=Al(e,u));var _=n.getDerivedStateFromProps;(d=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==u)&&r1(e,o,i,u),Fs=!1,g=e.memoizedState,o.state=g,ip(e,i,o,r);var w=e.memoizedState;l!==m||g!==w||Hn.current||Fs?(typeof _=="function"&&(J_(e,n,_,i),w=e.memoizedState),(h=Fs||i1(e,n,h,i,g,w,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,w,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,w,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=w),o.props=i,o.state=w,o.context=u,i=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),i=!1)}return iy(t,e,n,i,s,r)}function iy(t,e,n,i,r,s){cP(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&Zx(e,n,!1),cs(t,e,s);i=e.stateNode,e4.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Ll(e,t.child,null,s),e.child=Ll(e,null,l,s)):An(t,e,l,s),e.memoizedState=i.state,r&&Zx(e,n,!0),e.child}function hP(t){var e=t.stateNode;e.pendingContext?Kx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Kx(t,e.context,!1),Wv(t,e.containerInfo)}function h1(t,e,n,i,r){return Rl(),Vv(r),e.flags|=256,An(t,e,n,i),e.child}var ry={dehydrated:null,treeContext:null,retryLane:0};function sy(t){return{baseLanes:t,cachePool:null,transitions:null}}function dP(t,e,n){var i=e.pendingProps,r=Et.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(r&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),ut(Et,r&1),t===null)return Q_(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=am(o,i,0,null),t=ea(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=sy(n),e.memoizedState=ry,t):Jv(e,o));if(r=t.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return t4(t,e,o,i,l,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,l=r.sibling;var u={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=u,e.deletions=null):(i=io(r,u),i.subtreeFlags=r.subtreeFlags&14680064),l!==null?s=io(l,s):(s=ea(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?sy(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=ry,i}return s=t.child,t=s.sibling,i=io(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Jv(t,e){return e=am({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Od(t,e,n,i){return i!==null&&Vv(i),Ll(e,t.child,null,n),t=Jv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function t4(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=Ag(Error(se(422))),Od(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=am({mode:"visible",children:i.children},r,0,null),s=ea(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Ll(e,t.child,null,o),e.child.memoizedState=sy(o),e.memoizedState=ry,s);if(!(e.mode&1))return Od(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var l=i.dgst;return i=l,s=Error(se(419)),i=Ag(s,i,void 0),Od(t,e,o,i)}if(l=(o&t.childLanes)!==0,$n||l){if(i=en,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,us(t,r),tr(i,t,r,-1))}return s0(),i=Ag(Error(se(421))),Od(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=p4.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,ni=Js(r.nextSibling),si=e,yt=!0,Ki=null,t!==null&&(Ei[Si++]=es,Ei[Si++]=ts,Ei[Si++]=sa,es=t.id,ts=t.overflow,sa=e),e=Jv(e,i.children),e.flags|=4096,e)}function d1(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),X_(t.return,e,n)}function Rg(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function fP(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(An(t,e,i.children,n),i=Et.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&d1(t,n,e);else if(t.tag===19)d1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(ut(Et,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&rp(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Rg(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&rp(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Rg(e,!0,n,null,s);break;case"together":Rg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function yf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function cs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),aa|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(se(153));if(e.child!==null){for(t=e.child,n=io(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=io(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function n4(t,e,n){switch(e.tag){case 3:hP(e),Rl();break;case 5:Vk(e);break;case 1:Wn(e.type)&&Xf(e);break;case 4:Wv(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;ut(tp,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ut(Et,Et.current&1),e.flags|=128,null):n&e.child.childLanes?dP(t,e,n):(ut(Et,Et.current&1),t=cs(t,e,n),t!==null?t.sibling:null);ut(Et,Et.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return fP(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ut(Et,Et.current),i)break;return null;case 22:case 23:return e.lanes=0,uP(t,e,n)}return cs(t,e,n)}var pP,oy,mP,gP;pP=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};oy=function(){};mP=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Zo(xr.current);var s=null;switch(n){case"input":r=C_(t,r),i=C_(t,i),s=[];break;case"select":r=Tt({},r,{value:void 0}),i=Tt({},i,{value:void 0}),s=[];break;case"textarea":r=R_(t,r),i=R_(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Yf)}N_(n,i);var o;n=null;for(h in r)if(!i.hasOwnProperty(h)&&r.hasOwnProperty(h)&&r[h]!=null)if(h==="style"){var l=r[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Vc.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in i){var u=i[h];if(l=r!=null?r[h]:void 0,i.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Vc.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&dt("scroll",t),s||l===u||(s=[])):(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};gP=function(t,e,n,i){n!==i&&(e.flags|=4)};function Gu(t,e){if(!yt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function fn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function i4(t,e,n){var i=e.pendingProps;switch(jv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fn(e),null;case 1:return Wn(e.type)&&Qf(),fn(e),null;case 3:return i=e.stateNode,Nl(),pt(Hn),pt(En),Gv(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Ld(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ki!==null&&(py(Ki),Ki=null))),oy(t,e),fn(e),null;case 5:qv(e);var r=Zo(Qc.current);if(n=e.type,t!==null&&e.stateNode!=null)mP(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(se(166));return fn(e),null}if(t=Zo(xr.current),Ld(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[yr]=e,i[Zc]=s,t=(e.mode&1)!==0,n){case"dialog":dt("cancel",i),dt("close",i);break;case"iframe":case"object":case"embed":dt("load",i);break;case"video":case"audio":for(r=0;r<ac.length;r++)dt(ac[r],i);break;case"source":dt("error",i);break;case"img":case"image":case"link":dt("error",i),dt("load",i);break;case"details":dt("toggle",i);break;case"input":xx(i,s),dt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},dt("invalid",i);break;case"textarea":Ex(i,s),dt("invalid",i)}N_(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?i.textContent!==l&&(s.suppressHydrationWarning!==!0&&Rd(i.textContent,l,t),r=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Rd(i.textContent,l,t),r=["children",""+l]):Vc.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&dt("scroll",i)}switch(n){case"input":Ed(i),bx(i,s,!0);break;case"textarea":Ed(i),Sx(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Yf)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=HT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[yr]=e,t[Zc]=i,pP(t,e,!1,!1),e.stateNode=t;e:{switch(o=O_(n,i),n){case"dialog":dt("cancel",t),dt("close",t),r=i;break;case"iframe":case"object":case"embed":dt("load",t),r=i;break;case"video":case"audio":for(r=0;r<ac.length;r++)dt(ac[r],t);r=i;break;case"source":dt("error",t),r=i;break;case"img":case"image":case"link":dt("error",t),dt("load",t),r=i;break;case"details":dt("toggle",t),r=i;break;case"input":xx(t,i),r=C_(t,i),dt("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Tt({},i,{value:void 0}),dt("invalid",t);break;case"textarea":Ex(t,i),r=R_(t,i),dt("invalid",t);break;default:r=i}N_(n,r),l=r;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?GT(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&WT(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&zc(t,u):typeof u=="number"&&zc(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Vc.hasOwnProperty(s)?u!=null&&s==="onScroll"&&dt("scroll",t):u!=null&&Ev(t,s,u,o))}switch(n){case"input":Ed(t),bx(t,i,!1);break;case"textarea":Ed(t),Sx(t);break;case"option":i.value!=null&&t.setAttribute("value",""+fo(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?pl(t,!!i.multiple,s,!1):i.defaultValue!=null&&pl(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Yf)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return fn(e),null;case 6:if(t&&e.stateNode!=null)gP(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(se(166));if(n=Zo(Qc.current),Zo(xr.current),Ld(e)){if(i=e.stateNode,n=e.memoizedProps,i[yr]=e,(s=i.nodeValue!==n)&&(t=si,t!==null))switch(t.tag){case 3:Rd(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Rd(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[yr]=e,e.stateNode=i}return fn(e),null;case 13:if(pt(Et),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(yt&&ni!==null&&e.mode&1&&!(e.flags&128))Ok(),Rl(),e.flags|=98560,s=!1;else if(s=Ld(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(se(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(se(317));s[yr]=e}else Rl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;fn(e),s=!1}else Ki!==null&&(py(Ki),Ki=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Et.current&1?qt===0&&(qt=3):s0())),e.updateQueue!==null&&(e.flags|=4),fn(e),null);case 4:return Nl(),oy(t,e),t===null&&Gc(e.stateNode.containerInfo),fn(e),null;case 10:return Uv(e.type._context),fn(e),null;case 17:return Wn(e.type)&&Qf(),fn(e),null;case 19:if(pt(Et),s=e.memoizedState,s===null)return fn(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Gu(s,!1);else{if(qt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=rp(t),o!==null){for(e.flags|=128,Gu(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ut(Et,Et.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ot()>Ml&&(e.flags|=128,i=!0,Gu(s,!1),e.lanes=4194304)}else{if(!i)if(t=rp(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Gu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!yt)return fn(e),null}else 2*Ot()-s.renderingStartTime>Ml&&n!==1073741824&&(e.flags|=128,i=!0,Gu(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ot(),e.sibling=null,n=Et.current,ut(Et,i?n&1|2:n&1),e):(fn(e),null);case 22:case 23:return r0(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?ti&1073741824&&(fn(e),e.subtreeFlags&6&&(e.flags|=8192)):fn(e),null;case 24:return null;case 25:return null}throw Error(se(156,e.tag))}function r4(t,e){switch(jv(e),e.tag){case 1:return Wn(e.type)&&Qf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Nl(),pt(Hn),pt(En),Gv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return qv(e),null;case 13:if(pt(Et),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(se(340));Rl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return pt(Et),null;case 4:return Nl(),null;case 10:return Uv(e.type._context),null;case 22:case 23:return r0(),null;case 24:return null;default:return null}}var Md=!1,_n=!1,s4=typeof WeakSet=="function"?WeakSet:Set,ge=null;function cl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Ct(t,e,i)}else n.current=null}function ay(t,e,n){try{n()}catch(i){Ct(t,e,i)}}var f1=!1;function o4(t,e){if(H_=Gf,t=xk(),Dv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,d=0,m=t,g=null;t:for(;;){for(var _;m!==n||r!==0&&m.nodeType!==3||(l=o+r),m!==s||i!==0&&m.nodeType!==3||(u=o+i),m.nodeType===3&&(o+=m.nodeValue.length),(_=m.firstChild)!==null;)g=m,m=_;for(;;){if(m===t)break t;if(g===n&&++h===r&&(l=o),g===s&&++d===i&&(u=o),(_=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(W_={focusedElem:t,selectionRange:n},Gf=!1,ge=e;ge!==null;)if(e=ge,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ge=t;else for(;ge!==null;){e=ge;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var x=w.memoizedProps,C=w.memoizedState,E=e.stateNode,k=E.getSnapshotBeforeUpdate(e.elementType===e.type?x:qi(e.type,x),C);E.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var P=e.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(j){Ct(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,ge=t;break}ge=e.return}return w=f1,f1=!1,w}function Sc(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&ay(e,n,s)}r=r.next}while(r!==i)}}function sm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function ly(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function _P(t){var e=t.alternate;e!==null&&(t.alternate=null,_P(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[yr],delete e[Zc],delete e[K_],delete e[UN],delete e[$N])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function yP(t){return t.tag===5||t.tag===3||t.tag===4}function p1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||yP(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function uy(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Yf));else if(i!==4&&(t=t.child,t!==null))for(uy(t,e,n),t=t.sibling;t!==null;)uy(t,e,n),t=t.sibling}function cy(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(cy(t,e,n),t=t.sibling;t!==null;)cy(t,e,n),t=t.sibling}var rn=null,Gi=!1;function Ls(t,e,n){for(n=n.child;n!==null;)vP(t,e,n),n=n.sibling}function vP(t,e,n){if(wr&&typeof wr.onCommitFiberUnmount=="function")try{wr.onCommitFiberUnmount(Qp,n)}catch{}switch(n.tag){case 5:_n||cl(n,e);case 6:var i=rn,r=Gi;rn=null,Ls(t,e,n),rn=i,Gi=r,rn!==null&&(Gi?(t=rn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):rn.removeChild(n.stateNode));break;case 18:rn!==null&&(Gi?(t=rn,n=n.stateNode,t.nodeType===8?Sg(t.parentNode,n):t.nodeType===1&&Sg(t,n),Hc(t)):Sg(rn,n.stateNode));break;case 4:i=rn,r=Gi,rn=n.stateNode.containerInfo,Gi=!0,Ls(t,e,n),rn=i,Gi=r;break;case 0:case 11:case 14:case 15:if(!_n&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&ay(n,e,o),r=r.next}while(r!==i)}Ls(t,e,n);break;case 1:if(!_n&&(cl(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(l){Ct(n,e,l)}Ls(t,e,n);break;case 21:Ls(t,e,n);break;case 22:n.mode&1?(_n=(i=_n)||n.memoizedState!==null,Ls(t,e,n),_n=i):Ls(t,e,n);break;default:Ls(t,e,n)}}function m1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new s4),e.forEach(function(i){var r=m4.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Wi(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:rn=l.stateNode,Gi=!1;break e;case 3:rn=l.stateNode.containerInfo,Gi=!0;break e;case 4:rn=l.stateNode.containerInfo,Gi=!0;break e}l=l.return}if(rn===null)throw Error(se(160));vP(s,o,r),rn=null,Gi=!1;var u=r.alternate;u!==null&&(u.return=null),r.return=null}catch(h){Ct(r,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)wP(e,t),e=e.sibling}function wP(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wi(e,t),hr(t),i&4){try{Sc(3,t,t.return),sm(3,t)}catch(x){Ct(t,t.return,x)}try{Sc(5,t,t.return)}catch(x){Ct(t,t.return,x)}}break;case 1:Wi(e,t),hr(t),i&512&&n!==null&&cl(n,n.return);break;case 5:if(Wi(e,t),hr(t),i&512&&n!==null&&cl(n,n.return),t.flags&32){var r=t.stateNode;try{zc(r,"")}catch(x){Ct(t,t.return,x)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&UT(r,s),O_(l,o);var h=O_(l,s);for(o=0;o<u.length;o+=2){var d=u[o],m=u[o+1];d==="style"?GT(r,m):d==="dangerouslySetInnerHTML"?WT(r,m):d==="children"?zc(r,m):Ev(r,d,m,h)}switch(l){case"input":I_(r,s);break;case"textarea":$T(r,s);break;case"select":var g=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var _=s.value;_!=null?pl(r,!!s.multiple,_,!1):g!==!!s.multiple&&(s.defaultValue!=null?pl(r,!!s.multiple,s.defaultValue,!0):pl(r,!!s.multiple,s.multiple?[]:"",!1))}r[Zc]=s}catch(x){Ct(t,t.return,x)}}break;case 6:if(Wi(e,t),hr(t),i&4){if(t.stateNode===null)throw Error(se(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(x){Ct(t,t.return,x)}}break;case 3:if(Wi(e,t),hr(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Hc(e.containerInfo)}catch(x){Ct(t,t.return,x)}break;case 4:Wi(e,t),hr(t);break;case 13:Wi(e,t),hr(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(n0=Ot())),i&4&&m1(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(_n=(h=_n)||d,Wi(e,t),_n=h):Wi(e,t),hr(t),i&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!d&&t.mode&1)for(ge=t,d=t.child;d!==null;){for(m=ge=d;ge!==null;){switch(g=ge,_=g.child,g.tag){case 0:case 11:case 14:case 15:Sc(4,g,g.return);break;case 1:cl(g,g.return);var w=g.stateNode;if(typeof w.componentWillUnmount=="function"){i=g,n=g.return;try{e=i,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(x){Ct(i,n,x)}}break;case 5:cl(g,g.return);break;case 22:if(g.memoizedState!==null){_1(m);continue}}_!==null?(_.return=g,ge=_):_1(m)}d=d.sibling}e:for(d=null,m=t;;){if(m.tag===5){if(d===null){d=m;try{r=m.stateNode,h?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=qT("display",o))}catch(x){Ct(t,t.return,x)}}}else if(m.tag===6){if(d===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(x){Ct(t,t.return,x)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;d===m&&(d=null),m=m.return}d===m&&(d=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Wi(e,t),hr(t),i&4&&m1(t);break;case 21:break;default:Wi(e,t),hr(t)}}function hr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(yP(n)){var i=n;break e}n=n.return}throw Error(se(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(zc(r,""),i.flags&=-33);var s=p1(t);cy(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,l=p1(t);uy(t,l,o);break;default:throw Error(se(161))}}catch(u){Ct(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function a4(t,e,n){ge=t,xP(t)}function xP(t,e,n){for(var i=(t.mode&1)!==0;ge!==null;){var r=ge,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Md;if(!o){var l=r.alternate,u=l!==null&&l.memoizedState!==null||_n;l=Md;var h=_n;if(Md=o,(_n=u)&&!h)for(ge=r;ge!==null;)o=ge,u=o.child,o.tag===22&&o.memoizedState!==null?y1(r):u!==null?(u.return=o,ge=u):y1(r);for(;s!==null;)ge=s,xP(s),s=s.sibling;ge=r,Md=l,_n=h}g1(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,ge=s):g1(t)}}function g1(t){for(;ge!==null;){var e=ge;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:_n||sm(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!_n)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:qi(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&e1(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}e1(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var d=h.memoizedState;if(d!==null){var m=d.dehydrated;m!==null&&Hc(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}_n||e.flags&512&&ly(e)}catch(g){Ct(e,e.return,g)}}if(e===t){ge=null;break}if(n=e.sibling,n!==null){n.return=e.return,ge=n;break}ge=e.return}}function _1(t){for(;ge!==null;){var e=ge;if(e===t){ge=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ge=n;break}ge=e.return}}function y1(t){for(;ge!==null;){var e=ge;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{sm(4,e)}catch(u){Ct(e,n,u)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(u){Ct(e,r,u)}}var s=e.return;try{ly(e)}catch(u){Ct(e,s,u)}break;case 5:var o=e.return;try{ly(e)}catch(u){Ct(e,o,u)}}}catch(u){Ct(e,e.return,u)}if(e===t){ge=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ge=l;break}ge=e.return}}var l4=Math.ceil,ap=vs.ReactCurrentDispatcher,e0=vs.ReactCurrentOwner,Ci=vs.ReactCurrentBatchConfig,Ge=0,en=null,Ut=null,an=0,ti=0,hl=xo(0),qt=0,th=null,aa=0,om=0,t0=0,Tc=null,zn=null,n0=0,Ml=1/0,Yr=null,lp=!1,hy=null,to=null,Dd=!1,Ws=null,up=0,kc=0,dy=null,vf=-1,wf=0;function Rn(){return Ge&6?Ot():vf!==-1?vf:vf=Ot()}function no(t){return t.mode&1?Ge&2&&an!==0?an&-an:WN.transition!==null?(wf===0&&(wf=sk()),wf):(t=tt,t!==0||(t=window.event,t=t===void 0?16:dk(t.type)),t):1}function tr(t,e,n,i){if(50<kc)throw kc=0,dy=null,Error(se(185));xh(t,n,i),(!(Ge&2)||t!==en)&&(t===en&&(!(Ge&2)&&(om|=n),qt===4&&Vs(t,an)),qn(t,i),n===1&&Ge===0&&!(e.mode&1)&&(Ml=Ot()+500,nm&&bo()))}function qn(t,e){var n=t.callbackNode;WL(t,e);var i=qf(t,t===en?an:0);if(i===0)n!==null&&Px(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Px(n),e===1)t.tag===0?HN(v1.bind(null,t)):Rk(v1.bind(null,t)),zN(function(){!(Ge&6)&&bo()}),n=null;else{switch(ok(i)){case 1:n=Cv;break;case 4:n=ik;break;case 16:n=Wf;break;case 536870912:n=rk;break;default:n=Wf}n=IP(n,bP.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function bP(t,e){if(vf=-1,wf=0,Ge&6)throw Error(se(327));var n=t.callbackNode;if(vl()&&t.callbackNode!==n)return null;var i=qf(t,t===en?an:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=cp(t,i);else{e=i;var r=Ge;Ge|=2;var s=SP();(en!==t||an!==e)&&(Yr=null,Ml=Ot()+500,Jo(t,e));do try{h4();break}catch(l){EP(t,l)}while(!0);Bv(),ap.current=s,Ge=r,Ut!==null?e=0:(en=null,an=0,e=qt)}if(e!==0){if(e===2&&(r=V_(t),r!==0&&(i=r,e=fy(t,r))),e===1)throw n=th,Jo(t,0),Vs(t,i),qn(t,Ot()),n;if(e===6)Vs(t,i);else{if(r=t.current.alternate,!(i&30)&&!u4(r)&&(e=cp(t,i),e===2&&(s=V_(t),s!==0&&(i=s,e=fy(t,s))),e===1))throw n=th,Jo(t,0),Vs(t,i),qn(t,Ot()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(se(345));case 2:$o(t,zn,Yr);break;case 3:if(Vs(t,i),(i&130023424)===i&&(e=n0+500-Ot(),10<e)){if(qf(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Rn(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=G_($o.bind(null,t,zn,Yr),e);break}$o(t,zn,Yr);break;case 4:if(Vs(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-er(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Ot()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*l4(i/1960))-i,10<i){t.timeoutHandle=G_($o.bind(null,t,zn,Yr),i);break}$o(t,zn,Yr);break;case 5:$o(t,zn,Yr);break;default:throw Error(se(329))}}}return qn(t,Ot()),t.callbackNode===n?bP.bind(null,t):null}function fy(t,e){var n=Tc;return t.current.memoizedState.isDehydrated&&(Jo(t,e).flags|=256),t=cp(t,e),t!==2&&(e=zn,zn=n,e!==null&&py(e)),t}function py(t){zn===null?zn=t:zn.push.apply(zn,t)}function u4(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!nr(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Vs(t,e){for(e&=~t0,e&=~om,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-er(e),i=1<<n;t[n]=-1,e&=~i}}function v1(t){if(Ge&6)throw Error(se(327));vl();var e=qf(t,0);if(!(e&1))return qn(t,Ot()),null;var n=cp(t,e);if(t.tag!==0&&n===2){var i=V_(t);i!==0&&(e=i,n=fy(t,i))}if(n===1)throw n=th,Jo(t,0),Vs(t,e),qn(t,Ot()),n;if(n===6)throw Error(se(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$o(t,zn,Yr),qn(t,Ot()),null}function i0(t,e){var n=Ge;Ge|=1;try{return t(e)}finally{Ge=n,Ge===0&&(Ml=Ot()+500,nm&&bo())}}function la(t){Ws!==null&&Ws.tag===0&&!(Ge&6)&&vl();var e=Ge;Ge|=1;var n=Ci.transition,i=tt;try{if(Ci.transition=null,tt=1,t)return t()}finally{tt=i,Ci.transition=n,Ge=e,!(Ge&6)&&bo()}}function r0(){ti=hl.current,pt(hl)}function Jo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,VN(n)),Ut!==null)for(n=Ut.return;n!==null;){var i=n;switch(jv(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Qf();break;case 3:Nl(),pt(Hn),pt(En),Gv();break;case 5:qv(i);break;case 4:Nl();break;case 13:pt(Et);break;case 19:pt(Et);break;case 10:Uv(i.type._context);break;case 22:case 23:r0()}n=n.return}if(en=t,Ut=t=io(t.current,null),an=ti=e,qt=0,th=null,t0=om=aa=0,zn=Tc=null,Ko!==null){for(e=0;e<Ko.length;e++)if(n=Ko[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}Ko=null}return t}function EP(t,e){do{var n=Ut;try{if(Bv(),gf.current=op,sp){for(var i=St.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}sp=!1}if(oa=0,Jt=Ht=St=null,Ec=!1,Xc=0,e0.current=null,n===null||n.return===null){qt=1,th=e,Ut=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=an,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,d=l,m=d.tag;if(!(d.mode&1)&&(m===0||m===11||m===15)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var _=o1(o);if(_!==null){_.flags&=-257,a1(_,o,l,s,e),_.mode&1&&s1(s,h,e),e=_,u=h;var w=e.updateQueue;if(w===null){var x=new Set;x.add(u),e.updateQueue=x}else w.add(u);break e}else{if(!(e&1)){s1(s,h,e),s0();break e}u=Error(se(426))}}else if(yt&&l.mode&1){var C=o1(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),a1(C,o,l,s,e),Vv(Ol(u,l));break e}}s=u=Ol(u,l),qt!==4&&(qt=2),Tc===null?Tc=[s]:Tc.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var E=oP(s,u,e);Jx(s,E);break e;case 1:l=u;var k=s.type,P=s.stateNode;if(!(s.flags&128)&&(typeof k.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(to===null||!to.has(P)))){s.flags|=65536,e&=-e,s.lanes|=e;var j=aP(s,l,e);Jx(s,j);break e}}s=s.return}while(s!==null)}kP(n)}catch(W){e=W,Ut===n&&n!==null&&(Ut=n=n.return);continue}break}while(!0)}function SP(){var t=ap.current;return ap.current=op,t===null?op:t}function s0(){(qt===0||qt===3||qt===2)&&(qt=4),en===null||!(aa&268435455)&&!(om&268435455)||Vs(en,an)}function cp(t,e){var n=Ge;Ge|=2;var i=SP();(en!==t||an!==e)&&(Yr=null,Jo(t,e));do try{c4();break}catch(r){EP(t,r)}while(!0);if(Bv(),Ge=n,ap.current=i,Ut!==null)throw Error(se(261));return en=null,an=0,qt}function c4(){for(;Ut!==null;)TP(Ut)}function h4(){for(;Ut!==null&&!DL();)TP(Ut)}function TP(t){var e=CP(t.alternate,t,ti);t.memoizedProps=t.pendingProps,e===null?kP(t):Ut=e,e0.current=null}function kP(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=r4(n,e),n!==null){n.flags&=32767,Ut=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qt=6,Ut=null;return}}else if(n=i4(n,e,ti),n!==null){Ut=n;return}if(e=e.sibling,e!==null){Ut=e;return}Ut=e=t}while(e!==null);qt===0&&(qt=5)}function $o(t,e,n){var i=tt,r=Ci.transition;try{Ci.transition=null,tt=1,d4(t,e,n,i)}finally{Ci.transition=r,tt=i}return null}function d4(t,e,n,i){do vl();while(Ws!==null);if(Ge&6)throw Error(se(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(se(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(qL(t,s),t===en&&(Ut=en=null,an=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Dd||(Dd=!0,IP(Wf,function(){return vl(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ci.transition,Ci.transition=null;var o=tt;tt=1;var l=Ge;Ge|=4,e0.current=null,o4(t,n),wP(n,t),LN(W_),Gf=!!H_,W_=H_=null,t.current=n,a4(n),FL(),Ge=l,tt=o,Ci.transition=s}else t.current=n;if(Dd&&(Dd=!1,Ws=t,up=r),s=t.pendingLanes,s===0&&(to=null),zL(n.stateNode),qn(t,Ot()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(lp)throw lp=!1,t=hy,hy=null,t;return up&1&&t.tag!==0&&vl(),s=t.pendingLanes,s&1?t===dy?kc++:(kc=0,dy=t):kc=0,bo(),null}function vl(){if(Ws!==null){var t=ok(up),e=Ci.transition,n=tt;try{if(Ci.transition=null,tt=16>t?16:t,Ws===null)var i=!1;else{if(t=Ws,Ws=null,up=0,Ge&6)throw Error(se(331));var r=Ge;for(Ge|=4,ge=t.current;ge!==null;){var s=ge,o=s.child;if(ge.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(ge=h;ge!==null;){var d=ge;switch(d.tag){case 0:case 11:case 15:Sc(8,d,s)}var m=d.child;if(m!==null)m.return=d,ge=m;else for(;ge!==null;){d=ge;var g=d.sibling,_=d.return;if(_P(d),d===h){ge=null;break}if(g!==null){g.return=_,ge=g;break}ge=_}}}var w=s.alternate;if(w!==null){var x=w.child;if(x!==null){w.child=null;do{var C=x.sibling;x.sibling=null,x=C}while(x!==null)}}ge=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ge=o;else e:for(;ge!==null;){if(s=ge,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Sc(9,s,s.return)}var E=s.sibling;if(E!==null){E.return=s.return,ge=E;break e}ge=s.return}}var k=t.current;for(ge=k;ge!==null;){o=ge;var P=o.child;if(o.subtreeFlags&2064&&P!==null)P.return=o,ge=P;else e:for(o=k;ge!==null;){if(l=ge,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:sm(9,l)}}catch(W){Ct(l,l.return,W)}if(l===o){ge=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,ge=j;break e}ge=l.return}}if(Ge=r,bo(),wr&&typeof wr.onPostCommitFiberRoot=="function")try{wr.onPostCommitFiberRoot(Qp,t)}catch{}i=!0}return i}finally{tt=n,Ci.transition=e}}return!1}function w1(t,e,n){e=Ol(n,e),e=oP(t,e,1),t=eo(t,e,1),e=Rn(),t!==null&&(xh(t,1,e),qn(t,e))}function Ct(t,e,n){if(t.tag===3)w1(t,t,n);else for(;e!==null;){if(e.tag===3){w1(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(to===null||!to.has(i))){t=Ol(n,t),t=aP(e,t,1),e=eo(e,t,1),t=Rn(),e!==null&&(xh(e,1,t),qn(e,t));break}}e=e.return}}function f4(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Rn(),t.pingedLanes|=t.suspendedLanes&n,en===t&&(an&n)===n&&(qt===4||qt===3&&(an&130023424)===an&&500>Ot()-n0?Jo(t,0):t0|=n),qn(t,e)}function PP(t,e){e===0&&(t.mode&1?(e=kd,kd<<=1,!(kd&130023424)&&(kd=4194304)):e=1);var n=Rn();t=us(t,e),t!==null&&(xh(t,e,n),qn(t,n))}function p4(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),PP(t,n)}function m4(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(se(314))}i!==null&&i.delete(e),PP(t,n)}var CP;CP=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Hn.current)$n=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return $n=!1,n4(t,e,n);$n=!!(t.flags&131072)}else $n=!1,yt&&e.flags&1048576&&Lk(e,ep,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;yf(t,e),t=e.pendingProps;var r=Al(e,En.current);yl(e,n),r=Zv(null,e,i,t,r,n);var s=Yv();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Wn(i)?(s=!0,Xf(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Hv(e),r.updater=rm,e.stateNode=r,r._reactInternals=e,ey(e,i,t,n),e=iy(null,e,i,!0,s,n)):(e.tag=0,yt&&s&&Fv(e),An(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(yf(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=_4(i),t=qi(i,t),r){case 0:e=ny(null,e,i,t,n);break e;case 1:e=c1(null,e,i,t,n);break e;case 11:e=l1(null,e,i,t,n);break e;case 14:e=u1(null,e,i,qi(i.type,t),n);break e}throw Error(se(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:qi(i,r),ny(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:qi(i,r),c1(t,e,i,r,n);case 3:e:{if(hP(e),t===null)throw Error(se(387));i=e.pendingProps,s=e.memoizedState,r=s.element,jk(t,e),ip(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Ol(Error(se(423)),e),e=h1(t,e,i,n,r);break e}else if(i!==r){r=Ol(Error(se(424)),e),e=h1(t,e,i,n,r);break e}else for(ni=Js(e.stateNode.containerInfo.firstChild),si=e,yt=!0,Ki=null,n=Dk(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Rl(),i===r){e=cs(t,e,n);break e}An(t,e,i,n)}e=e.child}return e;case 5:return Vk(e),t===null&&Q_(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,q_(i,r)?o=null:s!==null&&q_(i,s)&&(e.flags|=32),cP(t,e),An(t,e,o,n),e.child;case 6:return t===null&&Q_(e),null;case 13:return dP(t,e,n);case 4:return Wv(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Ll(e,null,i,n):An(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:qi(i,r),l1(t,e,i,r,n);case 7:return An(t,e,e.pendingProps,n),e.child;case 8:return An(t,e,e.pendingProps.children,n),e.child;case 12:return An(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,ut(tp,i._currentValue),i._currentValue=o,s!==null)if(nr(s.value,o)){if(s.children===r.children&&!Hn.current){e=cs(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===i){if(s.tag===1){u=ss(-1,n&-n),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var d=h.pending;d===null?u.next=u:(u.next=d.next,d.next=u),h.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),X_(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(se(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),X_(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}An(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,yl(e,n),r=Ri(r),i=i(r),e.flags|=1,An(t,e,i,n),e.child;case 14:return i=e.type,r=qi(i,e.pendingProps),r=qi(i.type,r),u1(t,e,i,r,n);case 15:return lP(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:qi(i,r),yf(t,e),e.tag=1,Wn(i)?(t=!0,Xf(e)):t=!1,yl(e,n),sP(e,i,r),ey(e,i,r,n),iy(null,e,i,!0,t,n);case 19:return fP(t,e,n);case 22:return uP(t,e,n)}throw Error(se(156,e.tag))};function IP(t,e){return nk(t,e)}function g4(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ki(t,e,n,i){return new g4(t,e,n,i)}function o0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _4(t){if(typeof t=="function")return o0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Tv)return 11;if(t===kv)return 14}return 2}function io(t,e){var n=t.alternate;return n===null?(n=ki(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function xf(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")o0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case tl:return ea(n.children,r,s,e);case Sv:o=8,r|=8;break;case S_:return t=ki(12,n,e,r|2),t.elementType=S_,t.lanes=s,t;case T_:return t=ki(13,n,e,r),t.elementType=T_,t.lanes=s,t;case k_:return t=ki(19,n,e,r),t.elementType=k_,t.lanes=s,t;case VT:return am(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case FT:o=10;break e;case jT:o=9;break e;case Tv:o=11;break e;case kv:o=14;break e;case Ds:o=16,i=null;break e}throw Error(se(130,t==null?t:typeof t,""))}return e=ki(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function ea(t,e,n,i){return t=ki(7,t,i,e),t.lanes=n,t}function am(t,e,n,i){return t=ki(22,t,i,e),t.elementType=VT,t.lanes=n,t.stateNode={isHidden:!1},t}function Lg(t,e,n){return t=ki(6,t,null,e),t.lanes=n,t}function Ng(t,e,n){return e=ki(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function y4(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fg(0),this.expirationTimes=fg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fg(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function a0(t,e,n,i,r,s,o,l,u){return t=new y4(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ki(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hv(s),t}function v4(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:el,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function AP(t){if(!t)return po;t=t._reactInternals;e:{if(_a(t)!==t||t.tag!==1)throw Error(se(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Wn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(se(171))}if(t.tag===1){var n=t.type;if(Wn(n))return Ak(t,n,e)}return e}function RP(t,e,n,i,r,s,o,l,u){return t=a0(n,i,!0,t,r,s,o,l,u),t.context=AP(null),n=t.current,i=Rn(),r=no(n),s=ss(i,r),s.callback=e??null,eo(n,s,r),t.current.lanes=r,xh(t,r,i),qn(t,i),t}function lm(t,e,n,i){var r=e.current,s=Rn(),o=no(r);return n=AP(n),e.context===null?e.context=n:e.pendingContext=n,e=ss(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=eo(r,e,o),t!==null&&(tr(t,r,o,s),mf(t,r,o)),o}function hp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function x1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function l0(t,e){x1(t,e),(t=t.alternate)&&x1(t,e)}function w4(){return null}var LP=typeof reportError=="function"?reportError:function(t){console.error(t)};function u0(t){this._internalRoot=t}um.prototype.render=u0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(se(409));lm(t,e,null,null)};um.prototype.unmount=u0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;la(function(){lm(null,t,null,null)}),e[ls]=null}};function um(t){this._internalRoot=t}um.prototype.unstable_scheduleHydration=function(t){if(t){var e=uk();t={blockedOn:null,target:t,priority:e};for(var n=0;n<js.length&&e!==0&&e<js[n].priority;n++);js.splice(n,0,t),n===0&&hk(t)}};function c0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function cm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function b1(){}function x4(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var h=hp(o);s.call(h)}}var o=RP(e,i,t,0,null,!1,!1,"",b1);return t._reactRootContainer=o,t[ls]=o.current,Gc(t.nodeType===8?t.parentNode:t),la(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var l=i;i=function(){var h=hp(u);l.call(h)}}var u=a0(t,0,!1,null,null,!1,!1,"",b1);return t._reactRootContainer=u,t[ls]=u.current,Gc(t.nodeType===8?t.parentNode:t),la(function(){lm(e,u,n,i)}),u}function hm(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var l=r;r=function(){var u=hp(o);l.call(u)}}lm(e,o,t,r)}else o=x4(n,e,t,r,i);return hp(o)}ak=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=oc(e.pendingLanes);n!==0&&(Iv(e,n|1),qn(e,Ot()),!(Ge&6)&&(Ml=Ot()+500,bo()))}break;case 13:la(function(){var i=us(t,1);if(i!==null){var r=Rn();tr(i,t,1,r)}}),l0(t,1)}};Av=function(t){if(t.tag===13){var e=us(t,134217728);if(e!==null){var n=Rn();tr(e,t,134217728,n)}l0(t,134217728)}};lk=function(t){if(t.tag===13){var e=no(t),n=us(t,e);if(n!==null){var i=Rn();tr(n,t,e,i)}l0(t,e)}};uk=function(){return tt};ck=function(t,e){var n=tt;try{return tt=t,e()}finally{tt=n}};D_=function(t,e,n){switch(e){case"input":if(I_(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=tm(i);if(!r)throw Error(se(90));BT(i),I_(i,r)}}}break;case"textarea":$T(t,n);break;case"select":e=n.value,e!=null&&pl(t,!!n.multiple,e,!1)}};YT=i0;QT=la;var b4={usingClientEntryPoint:!1,Events:[Eh,sl,tm,KT,ZT,i0]},Ku={findFiberByHostInstance:Go,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},E4={bundleType:Ku.bundleType,version:Ku.version,rendererPackageName:Ku.rendererPackageName,rendererConfig:Ku.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ek(t),t===null?null:t.stateNode},findFiberByHostInstance:Ku.findFiberByHostInstance||w4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fd.isDisabled&&Fd.supportsFiber)try{Qp=Fd.inject(E4),wr=Fd}catch{}}li.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=b4;li.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c0(e))throw Error(se(200));return v4(t,e,null,n)};li.createRoot=function(t,e){if(!c0(t))throw Error(se(299));var n=!1,i="",r=LP;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=a0(t,1,!1,null,null,n,!1,i,r),t[ls]=e.current,Gc(t.nodeType===8?t.parentNode:t),new u0(e)};li.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(se(188)):(t=Object.keys(t).join(","),Error(se(268,t)));return t=ek(e),t=t===null?null:t.stateNode,t};li.flushSync=function(t){return la(t)};li.hydrate=function(t,e,n){if(!cm(e))throw Error(se(200));return hm(null,t,e,!0,n)};li.hydrateRoot=function(t,e,n){if(!c0(t))throw Error(se(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=LP;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=RP(e,null,t,1,n??null,r,!1,s,o),t[ls]=e.current,Gc(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new um(e)};li.render=function(t,e,n){if(!cm(e))throw Error(se(200));return hm(null,t,e,!1,n)};li.unmountComponentAtNode=function(t){if(!cm(t))throw Error(se(40));return t._reactRootContainer?(la(function(){hm(null,null,t,!1,function(){t._reactRootContainer=null,t[ls]=null})}),!0):!1};li.unstable_batchedUpdates=i0;li.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!cm(n))throw Error(se(200));if(t==null||t._reactInternals===void 0)throw Error(se(38));return hm(t,e,n,!1,i)};li.version="18.3.1-next-f1338f8080-20240426";function NP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(NP)}catch(t){console.error(t)}}NP(),NT.exports=li;var S4=NT.exports,E1=S4;b_.createRoot=E1.createRoot,b_.hydrateRoot=E1.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nh(){return nh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},nh.apply(this,arguments)}var qs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(qs||(qs={}));const S1="popstate";function T4(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:l}=i.location;return my("",{pathname:s,search:o,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:dp(r)}return P4(e,n,null,t)}function It(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function OP(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function k4(){return Math.random().toString(36).substr(2,8)}function T1(t,e){return{usr:t.state,key:t.key,idx:e}}function my(t,e,n,i){return n===void 0&&(n=null),nh({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Xl(e):e,{state:n,key:e&&e.key||i||k4()})}function dp(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Xl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function P4(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,l=qs.Pop,u=null,h=d();h==null&&(h=0,o.replaceState(nh({},o.state,{idx:h}),""));function d(){return(o.state||{idx:null}).idx}function m(){l=qs.Pop;let C=d(),E=C==null?null:C-h;h=C,u&&u({action:l,location:x.location,delta:E})}function g(C,E){l=qs.Push;let k=my(x.location,C,E);h=d()+1;let P=T1(k,h),j=x.createHref(k);try{o.pushState(P,"",j)}catch(W){if(W instanceof DOMException&&W.name==="DataCloneError")throw W;r.location.assign(j)}s&&u&&u({action:l,location:x.location,delta:1})}function _(C,E){l=qs.Replace;let k=my(x.location,C,E);h=d();let P=T1(k,h),j=x.createHref(k);o.replaceState(P,"",j),s&&u&&u({action:l,location:x.location,delta:0})}function w(C){let E=r.location.origin!=="null"?r.location.origin:r.location.href,k=typeof C=="string"?C:dp(C);return k=k.replace(/ $/,"%20"),It(E,"No window.location.(origin|href) available to create URL for href: "+k),new URL(k,E)}let x={get action(){return l},get location(){return t(r,o)},listen(C){if(u)throw new Error("A history only accepts one active listener");return r.addEventListener(S1,m),u=C,()=>{r.removeEventListener(S1,m),u=null}},createHref(C){return e(r,C)},createURL:w,encodeLocation(C){let E=w(C);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:g,replace:_,go(C){return o.go(C)}};return x}var k1;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(k1||(k1={}));function C4(t,e,n){return n===void 0&&(n="/"),I4(t,e,n)}function I4(t,e,n,i){let r=typeof e=="string"?Xl(e):e,s=Dl(r.pathname||"/",n);if(s==null)return null;let o=MP(t);A4(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let h=B4(s);l=V4(o[u],h)}return l}function MP(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,l)=>{let u={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(It(u.relativePath.startsWith(i),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(i.length));let h=ro([i,u.relativePath]),d=n.concat(u);s.children&&s.children.length>0&&(It(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),MP(s.children,e,d,h)),!(s.path==null&&!s.index)&&e.push({path:h,score:F4(h,s.index),routesMeta:d})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))r(s,o);else for(let u of DP(s.path))r(s,o,u)}),e}function DP(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=DP(i.join("/")),l=[];return l.push(...o.map(u=>u===""?s:[s,u].join("/"))),r&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function A4(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:j4(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const R4=/^:[\w-]+$/,L4=3,N4=2,O4=1,M4=10,D4=-2,P1=t=>t==="*";function F4(t,e){let n=t.split("/"),i=n.length;return n.some(P1)&&(i+=D4),e&&(i+=N4),n.filter(r=>!P1(r)).reduce((r,s)=>r+(R4.test(s)?L4:s===""?O4:M4),i)}function j4(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function V4(t,e,n){let{routesMeta:i}=t,r={},s="/",o=[];for(let l=0;l<i.length;++l){let u=i[l],h=l===i.length-1,d=s==="/"?e:e.slice(s.length)||"/",m=gy({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},d),g=u.route;if(!m)return null;Object.assign(r,m.params),o.push({params:r,pathname:ro([s,m.pathname]),pathnameBase:W4(ro([s,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(s=ro([s,m.pathnameBase]))}return o}function gy(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=z4(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:i.reduce((h,d,m)=>{let{paramName:g,isOptional:_}=d;if(g==="*"){let x=l[m]||"";o=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const w=l[m];return _&&!w?h[g]=void 0:h[g]=(w||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:o,pattern:t}}function z4(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),OP(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(i.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function B4(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return OP(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Dl(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function U4(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Xl(t):t;return{pathname:n?n.startsWith("/")?n:$4(n,e):e,search:q4(i),hash:G4(r)}}function $4(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Og(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function H4(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function FP(t,e){let n=H4(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function jP(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=Xl(t):(r=nh({},t),It(!r.pathname||!r.pathname.includes("?"),Og("?","pathname","search",r)),It(!r.pathname||!r.pathname.includes("#"),Og("#","pathname","hash",r)),It(!r.search||!r.search.includes("#"),Og("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!i&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;r.pathname=g.join("/")}l=m>=0?e[m]:"/"}let u=U4(r,l),h=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||d)&&(u.pathname+="/"),u}const ro=t=>t.join("/").replace(/\/\/+/g,"/"),W4=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),q4=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,G4=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function K4(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const VP=["post","put","patch","delete"];new Set(VP);const Z4=["get",...VP];new Set(Z4);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ih(){return ih=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ih.apply(this,arguments)}const dm=$.createContext(null),zP=$.createContext(null),Eo=$.createContext(null),fm=$.createContext(null),ya=$.createContext({outlet:null,matches:[],isDataRoute:!1}),BP=$.createContext(null);function Y4(t,e){let{relative:n}=e===void 0?{}:e;Th()||It(!1);let{basename:i,navigator:r}=$.useContext(Eo),{hash:s,pathname:o,search:l}=mm(t,{relative:n}),u=o;return i!=="/"&&(u=o==="/"?i:ro([i,o])),r.createHref({pathname:u,search:l,hash:s})}function Th(){return $.useContext(fm)!=null}function Jl(){return Th()||It(!1),$.useContext(fm).location}function UP(t){$.useContext(Eo).static||$.useLayoutEffect(t)}function pm(){let{isDataRoute:t}=$.useContext(ya);return t?uO():Q4()}function Q4(){Th()||It(!1);let t=$.useContext(dm),{basename:e,future:n,navigator:i}=$.useContext(Eo),{matches:r}=$.useContext(ya),{pathname:s}=Jl(),o=JSON.stringify(FP(r,n.v7_relativeSplatPath)),l=$.useRef(!1);return UP(()=>{l.current=!0}),$.useCallback(function(h,d){if(d===void 0&&(d={}),!l.current)return;if(typeof h=="number"){i.go(h);return}let m=jP(h,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:ro([e,m.pathname])),(d.replace?i.replace:i.push)(m,d.state,d)},[e,i,o,s,t])}function mm(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=$.useContext(Eo),{matches:r}=$.useContext(ya),{pathname:s}=Jl(),o=JSON.stringify(FP(r,i.v7_relativeSplatPath));return $.useMemo(()=>jP(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function X4(t,e){return J4(t,e)}function J4(t,e,n,i){Th()||It(!1);let{navigator:r,static:s}=$.useContext(Eo),{matches:o}=$.useContext(ya),l=o[o.length-1],u=l?l.params:{};l&&l.pathname;let h=l?l.pathnameBase:"/";l&&l.route;let d=Jl(),m;if(e){var g;let E=typeof e=="string"?Xl(e):e;h==="/"||(g=E.pathname)!=null&&g.startsWith(h)||It(!1),m=E}else m=d;let _=m.pathname||"/",w=_;if(h!=="/"){let E=h.replace(/^\//,"").split("/");w="/"+_.replace(/^\//,"").split("/").slice(E.length).join("/")}let x=C4(t,{pathname:w}),C=rO(x&&x.map(E=>Object.assign({},E,{params:Object.assign({},u,E.params),pathname:ro([h,r.encodeLocation?r.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?h:ro([h,r.encodeLocation?r.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),o,n,i);return e&&C?$.createElement(fm.Provider,{value:{location:ih({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:qs.Pop}},C):C}function eO(){let t=lO(),e=K4(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return $.createElement($.Fragment,null,$.createElement("h2",null,"Unexpected Application Error!"),$.createElement("h3",{style:{fontStyle:"italic"}},e),n?$.createElement("pre",{style:r},n):null,null)}const tO=$.createElement(eO,null);class nO extends $.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?$.createElement(ya.Provider,{value:this.props.routeContext},$.createElement(BP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function iO(t){let{routeContext:e,match:n,children:i}=t,r=$.useContext(dm);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),$.createElement(ya.Provider,{value:e},i)}function rO(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(r=n)==null?void 0:r.errors;if(l!=null){let d=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);d>=0||It(!1),o=o.slice(0,Math.min(o.length,d+1))}let u=!1,h=-1;if(n&&i&&i.v7_partialHydration)for(let d=0;d<o.length;d++){let m=o[d];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=d),m.route.id){let{loaderData:g,errors:_}=n,w=m.route.loader&&g[m.route.id]===void 0&&(!_||_[m.route.id]===void 0);if(m.route.lazy||w){u=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((d,m,g)=>{let _,w=!1,x=null,C=null;n&&(_=l&&m.route.id?l[m.route.id]:void 0,x=m.route.errorElement||tO,u&&(h<0&&g===0?(cO("route-fallback"),w=!0,C=null):h===g&&(w=!0,C=m.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,g+1)),k=()=>{let P;return _?P=x:w?P=C:m.route.Component?P=$.createElement(m.route.Component,null):m.route.element?P=m.route.element:P=d,$.createElement(iO,{match:m,routeContext:{outlet:d,matches:E,isDataRoute:n!=null},children:P})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?$.createElement(nO,{location:n.location,revalidation:n.revalidation,component:x,error:_,children:k(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):k()},null)}var $P=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}($P||{}),HP=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(HP||{});function sO(t){let e=$.useContext(dm);return e||It(!1),e}function oO(t){let e=$.useContext(zP);return e||It(!1),e}function aO(t){let e=$.useContext(ya);return e||It(!1),e}function WP(t){let e=aO(),n=e.matches[e.matches.length-1];return n.route.id||It(!1),n.route.id}function lO(){var t;let e=$.useContext(BP),n=oO(),i=WP();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function uO(){let{router:t}=sO($P.UseNavigateStable),e=WP(HP.UseNavigateStable),n=$.useRef(!1);return UP(()=>{n.current=!0}),$.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,ih({fromRouteId:e},s)))},[t,e])}const C1={};function cO(t,e,n){C1[t]||(C1[t]=!0)}function hO(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Gr(t){It(!1)}function dO(t){let{basename:e="/",children:n=null,location:i,navigationType:r=qs.Pop,navigator:s,static:o=!1,future:l}=t;Th()&&It(!1);let u=e.replace(/^\/*/,"/"),h=$.useMemo(()=>({basename:u,navigator:s,static:o,future:ih({v7_relativeSplatPath:!1},l)}),[u,l,s,o]);typeof i=="string"&&(i=Xl(i));let{pathname:d="/",search:m="",hash:g="",state:_=null,key:w="default"}=i,x=$.useMemo(()=>{let C=Dl(d,u);return C==null?null:{location:{pathname:C,search:m,hash:g,state:_,key:w},navigationType:r}},[u,d,m,g,_,w,r]);return x==null?null:$.createElement(Eo.Provider,{value:h},$.createElement(fm.Provider,{children:n,value:x}))}function fO(t){let{children:e,location:n}=t;return X4(_y(e),n)}new Promise(()=>{});function _y(t,e){e===void 0&&(e=[]);let n=[];return $.Children.forEach(t,(i,r)=>{if(!$.isValidElement(i))return;let s=[...e,r];if(i.type===$.Fragment){n.push.apply(n,_y(i.props.children,s));return}i.type!==Gr&&It(!1),!i.props.index||!i.props.children||It(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=_y(i.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fp(){return fp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},fp.apply(this,arguments)}function qP(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function pO(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function mO(t,e){return t.button===0&&(!e||e==="_self")&&!pO(t)}const gO=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],_O=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],yO="6";try{window.__reactRouterVersion=yO}catch{}const vO=$.createContext({isTransitioning:!1}),wO="startTransition",I1=fL[wO];function xO(t){let{basename:e,children:n,future:i,window:r}=t,s=$.useRef();s.current==null&&(s.current=T4({window:r,v5Compat:!0}));let o=s.current,[l,u]=$.useState({action:o.action,location:o.location}),{v7_startTransition:h}=i||{},d=$.useCallback(m=>{h&&I1?I1(()=>u(m)):u(m)},[u,h]);return $.useLayoutEffect(()=>o.listen(d),[o,d]),$.useEffect(()=>hO(i),[i]),$.createElement(dO,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:i})}const bO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",EO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,GP=$.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:l,target:u,to:h,preventScrollReset:d,viewTransition:m}=e,g=qP(e,gO),{basename:_}=$.useContext(Eo),w,x=!1;if(typeof h=="string"&&EO.test(h)&&(w=h,bO))try{let P=new URL(window.location.href),j=h.startsWith("//")?new URL(P.protocol+h):new URL(h),W=Dl(j.pathname,_);j.origin===P.origin&&W!=null?h=W+j.search+j.hash:x=!0}catch{}let C=Y4(h,{relative:r}),E=TO(h,{replace:o,state:l,target:u,preventScrollReset:d,relative:r,viewTransition:m});function k(P){i&&i(P),P.defaultPrevented||E(P)}return $.createElement("a",fp({},g,{href:w||C,onClick:x||s?i:k,ref:n,target:u}))}),Ka=$.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:s="",end:o=!1,style:l,to:u,viewTransition:h,children:d}=e,m=qP(e,_O),g=mm(u,{relative:m.relative}),_=Jl(),w=$.useContext(zP),{navigator:x,basename:C}=$.useContext(Eo),E=w!=null&&kO(g)&&h===!0,k=x.encodeLocation?x.encodeLocation(g).pathname:g.pathname,P=_.pathname,j=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;r||(P=P.toLowerCase(),j=j?j.toLowerCase():null,k=k.toLowerCase()),j&&C&&(j=Dl(j,C)||j);const W=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let z=P===k||!o&&P.startsWith(k)&&P.charAt(W)==="/",R=j!=null&&(j===k||!o&&j.startsWith(k)&&j.charAt(k.length)==="/"),I={isActive:z,isPending:R,isTransitioning:E},N=z?i:void 0,F;typeof s=="function"?F=s(I):F=[s,z?"active":null,R?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let D=typeof l=="function"?l(I):l;return $.createElement(GP,fp({},m,{"aria-current":N,className:F,ref:n,style:D,to:u,viewTransition:h}),typeof d=="function"?d(I):d)});var yy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(yy||(yy={}));var A1;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(A1||(A1={}));function SO(t){let e=$.useContext(dm);return e||It(!1),e}function TO(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,u=pm(),h=Jl(),d=mm(t,{relative:o});return $.useCallback(m=>{if(mO(m,n)){m.preventDefault();let g=i!==void 0?i:dp(h)===dp(d);u(t,{replace:g,state:r,preventScrollReset:s,relative:o,viewTransition:l})}},[h,u,d,i,r,n,t,s,o,l])}function kO(t,e){e===void 0&&(e={});let n=$.useContext(vO);n==null&&It(!1);let{basename:i}=SO(yy.useViewTransitionState),r=mm(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Dl(n.currentLocation.pathname,i)||n.currentLocation.pathname,o=Dl(n.nextLocation.pathname,i)||n.nextLocation.pathname;return gy(r.pathname,o)!=null||gy(r.pathname,s)!=null}var R1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},PO=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],o=t[n++],l=t[n++],u=((r&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},ZP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,l=o?t[r+1]:0,u=r+2<t.length,h=u?t[r+2]:0,d=s>>2,m=(s&3)<<4|l>>4;let g=(l&15)<<2|h>>6,_=h&63;u||(_=64,o||(g=64)),i.push(n[d],n[m],n[g],n[_])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(KP(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):PO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],l=r<t.length?n[t.charAt(r)]:0;++r;const h=r<t.length?n[t.charAt(r)]:64;++r;const m=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||l==null||h==null||m==null)throw new CO;const g=s<<2|l>>4;if(i.push(g),h!==64){const _=l<<4&240|h>>2;if(i.push(_),m!==64){const w=h<<6&192|m;i.push(w)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class CO extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const IO=function(t){const e=KP(t);return ZP.encodeByteArray(e,!0)},pp=function(t){return IO(t).replace(/\./g,"")},YP=function(t){try{return ZP.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO=()=>AO().__FIREBASE_DEFAULTS__,LO=()=>{if(typeof process>"u"||typeof R1>"u")return;const t=R1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},NO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&YP(t[1]);return e&&JSON.parse(e)},gm=()=>{try{return RO()||LO()||NO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},QP=t=>{var e,n;return(n=(e=gm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},XP=t=>{const e=QP(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},JP=()=>{var t;return(t=gm())===null||t===void 0?void 0:t.config},eC=t=>{var e;return(e=gm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[pp(JSON.stringify(n)),pp(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Sn())}function DO(){var t;const e=(t=gm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jO(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function VO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function zO(){const t=Sn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function BO(){return!DO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function UO(){try{return typeof indexedDB=="object"}catch{return!1}}function $O(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO="FirebaseError";class Rr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=HO,Object.setPrototypeOf(this,Rr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kh.prototype.create)}}class kh{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?WO(s,i):"Error",l=`${this.serviceName}: ${o} (${r}).`;return new Rr(r,l,i)}}function WO(t,e){return t.replace(qO,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const qO=/\{\$([^}]+)}/g;function GO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function mp(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(L1(s)&&L1(o)){if(!mp(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function L1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function lc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function uc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function KO(t,e){const n=new ZO(t,e);return n.subscribe.bind(n)}class ZO{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");YO(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Mg),r.error===void 0&&(r.error=Mg),r.complete===void 0&&(r.complete=Mg);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function YO(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Mg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(t){return t&&t._delegate?t._delegate:t}class hs{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new OO;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(JO(e))try{this.getOrInitializeService({instanceIdentifier:Ho})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Ho){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ho){return this.instances.has(e)}getOptions(e=Ho){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);i===l&&o.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:XO(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ho){return this.component?this.component.multipleInstances?e:Ho:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XO(t){return t===Ho?void 0:t}function JO(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new QO(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})($e||($e={}));const tM={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},nM=$e.INFO,iM={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},rM=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=iM[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class h0{constructor(e){this.name=e,this._logLevel=nM,this._logHandler=rM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const sM=(t,e)=>e.some(n=>t instanceof n);let N1,O1;function oM(){return N1||(N1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function aM(){return O1||(O1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nC=new WeakMap,vy=new WeakMap,iC=new WeakMap,Dg=new WeakMap,d0=new WeakMap;function lM(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(so(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&nC.set(n,t)}).catch(()=>{}),d0.set(e,t),e}function uM(t){if(vy.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});vy.set(t,e)}let wy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return vy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||iC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return so(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function cM(t){wy=t(wy)}function hM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Fg(this),e,...n);return iC.set(i,e.sort?e.sort():[e]),so(i)}:aM().includes(t)?function(...e){return t.apply(Fg(this),e),so(nC.get(this))}:function(...e){return so(t.apply(Fg(this),e))}}function dM(t){return typeof t=="function"?hM(t):(t instanceof IDBTransaction&&uM(t),sM(t,oM())?new Proxy(t,wy):t)}function so(t){if(t instanceof IDBRequest)return lM(t);if(Dg.has(t))return Dg.get(t);const e=dM(t);return e!==t&&(Dg.set(t,e),d0.set(e,t)),e}const Fg=t=>d0.get(t);function fM(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),l=so(o);return i&&o.addEventListener("upgradeneeded",u=>{i(so(o.result),u.oldVersion,u.newVersion,so(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const pM=["get","getKey","getAll","getAllKeys","count"],mM=["put","add","delete","clear"],jg=new Map;function M1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jg.get(e))return jg.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=mM.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||pM.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,r?"readwrite":"readonly");let h=u.store;return i&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),r&&u.done]))[0]};return jg.set(e,s),s}cM(t=>({...t,get:(e,n,i)=>M1(e,n)||t.get(e,n,i),has:(e,n)=>!!M1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_M(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function _M(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xy="@firebase/app",D1="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds=new h0("@firebase/app"),yM="@firebase/app-compat",vM="@firebase/analytics-compat",wM="@firebase/analytics",xM="@firebase/app-check-compat",bM="@firebase/app-check",EM="@firebase/auth",SM="@firebase/auth-compat",TM="@firebase/database",kM="@firebase/data-connect",PM="@firebase/database-compat",CM="@firebase/functions",IM="@firebase/functions-compat",AM="@firebase/installations",RM="@firebase/installations-compat",LM="@firebase/messaging",NM="@firebase/messaging-compat",OM="@firebase/performance",MM="@firebase/performance-compat",DM="@firebase/remote-config",FM="@firebase/remote-config-compat",jM="@firebase/storage",VM="@firebase/storage-compat",zM="@firebase/firestore",BM="@firebase/vertexai-preview",UM="@firebase/firestore-compat",$M="firebase",HM="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by="[DEFAULT]",WM={[xy]:"fire-core",[yM]:"fire-core-compat",[wM]:"fire-analytics",[vM]:"fire-analytics-compat",[bM]:"fire-app-check",[xM]:"fire-app-check-compat",[EM]:"fire-auth",[SM]:"fire-auth-compat",[TM]:"fire-rtdb",[kM]:"fire-data-connect",[PM]:"fire-rtdb-compat",[CM]:"fire-fn",[IM]:"fire-fn-compat",[AM]:"fire-iid",[RM]:"fire-iid-compat",[LM]:"fire-fcm",[NM]:"fire-fcm-compat",[OM]:"fire-perf",[MM]:"fire-perf-compat",[DM]:"fire-rc",[FM]:"fire-rc-compat",[jM]:"fire-gcs",[VM]:"fire-gcs-compat",[zM]:"fire-fst",[UM]:"fire-fst-compat",[BM]:"fire-vertex","fire-js":"fire-js",[$M]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp=new Map,qM=new Map,Ey=new Map;function F1(t,e){try{t.container.addComponent(e)}catch(n){ds.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function mo(t){const e=t.name;if(Ey.has(e))return ds.debug(`There were multiple attempts to register component ${e}.`),!1;Ey.set(e,t);for(const n of gp.values())F1(n,t);for(const n of qM.values())F1(n,t);return!0}function _m(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Zi(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},oo=new kh("app","Firebase",GM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new hs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw oo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va=HM;function rC(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:by,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw oo.create("bad-app-name",{appName:String(r)});if(n||(n=JP()),!n)throw oo.create("no-options");const s=gp.get(r);if(s){if(mp(n,s.options)&&mp(i,s.config))return s;throw oo.create("duplicate-app",{appName:r})}const o=new eM(r);for(const u of Ey.values())o.addComponent(u);const l=new KM(n,i,o);return gp.set(r,l),l}function f0(t=by){const e=gp.get(t);if(!e&&t===by&&JP())return rC();if(!e)throw oo.create("no-app",{appName:t});return e}function Ii(t,e,n){var i;let r=(i=WM[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ds.warn(l.join(" "));return}mo(new hs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM="firebase-heartbeat-database",YM=1,rh="firebase-heartbeat-store";let Vg=null;function sC(){return Vg||(Vg=fM(ZM,YM,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(rh)}catch(n){console.warn(n)}}}}).catch(t=>{throw oo.create("idb-open",{originalErrorMessage:t.message})})),Vg}async function QM(t){try{const n=(await sC()).transaction(rh),i=await n.objectStore(rh).get(oC(t));return await n.done,i}catch(e){if(e instanceof Rr)ds.warn(e.message);else{const n=oo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ds.warn(n.message)}}}async function j1(t,e){try{const i=(await sC()).transaction(rh,"readwrite");await i.objectStore(rh).put(e,oC(t)),await i.done}catch(n){if(n instanceof Rr)ds.warn(n.message);else{const i=oo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ds.warn(i.message)}}}function oC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM=1024,JM=30*24*60*60*1e3;class eD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new nD(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=V1();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=JM}),this._storage.overwrite(this._heartbeatsCache))}catch(i){ds.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=V1(),{heartbeatsToSend:i,unsentEntries:r}=tD(this._heartbeatsCache.heartbeats),s=pp(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ds.warn(n),""}}}function V1(){return new Date().toISOString().substring(0,10)}function tD(t,e=XM){const n=[];let i=t.slice();for(const r of t){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),z1(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),z1(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class nD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return UO()?$O().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await QM(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return j1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return j1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function z1(t){return pp(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(t){mo(new hs("platform-logger",e=>new gM(e),"PRIVATE")),mo(new hs("heartbeat",e=>new eD(e),"PRIVATE")),Ii(xy,D1,t),Ii(xy,D1,"esm2017"),Ii("fire-js","")}iD("");function p0(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function aC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rD=aC,lC=new kh("auth","Firebase",aC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p=new h0("@firebase/auth");function sD(t,...e){_p.logLevel<=$e.WARN&&_p.warn(`Auth (${va}): ${t}`,...e)}function bf(t,...e){_p.logLevel<=$e.ERROR&&_p.error(`Auth (${va}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ni(t,...e){throw g0(t,...e)}function br(t,...e){return g0(t,...e)}function m0(t,e,n){const i=Object.assign(Object.assign({},rD()),{[e]:n});return new kh("auth","Firebase",i).create(e,{appName:t.name})}function Er(t){return m0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function oD(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&Ni(t,"argument-error"),m0(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function g0(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return lC.create(t,...e)}function Te(t,e,...n){if(!t)throw g0(e,...n)}function ns(t){const e="INTERNAL ASSERTION FAILED: "+t;throw bf(e),new Error(e)}function fs(t,e){t||ns(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function aD(){return B1()==="http:"||B1()==="https:"}function B1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aD()||jO()||"connection"in navigator)?navigator.onLine:!0}function uD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n){this.shortDelay=e,this.longDelay=n,fs(n>e,"Short delay should be less than long delay!"),this.isMobile=MO()||VO()}get(){return lD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(t,e){fs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ns("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ns("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ns("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD=new Ch(3e4,6e4);function So(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ws(t,e,n,i,r={}){return cC(t,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const l=Ph(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:u},s);return FO()||(h.referrerPolicy="no-referrer"),uC.fetch()(hC(t,t.config.apiHost,n,l),h)})}async function cC(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},cD),e);try{const r=new fD(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw jd(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw jd(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw jd(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw jd(t,"user-disabled",o);const d=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw m0(t,d,h);Ni(t,d)}}catch(r){if(r instanceof Rr)throw r;Ni(t,"network-request-failed",{message:String(r)})}}async function Ih(t,e,n,i,r={}){const s=await ws(t,e,n,i,r);return"mfaPendingCredential"in s&&Ni(t,"multi-factor-auth-required",{_serverResponse:s}),s}function hC(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?_0(t.config,r):`${t.config.apiScheme}://${r}`}function dD(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class fD{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(br(this.auth,"network-request-failed")),hD.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function jd(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=br(t,e,i);return r.customData._tokenResponse=n,r}function U1(t){return t!==void 0&&t.enterprise!==void 0}class pD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return dD(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function mD(t,e){return ws(t,"GET","/v2/recaptchaConfig",So(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gD(t,e){return ws(t,"POST","/v1/accounts:delete",e)}async function dC(t,e){return ws(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function _D(t,e=!1){const n=At(t),i=await n.getIdToken(e),r=y0(i);Te(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Pc(zg(r.auth_time)),issuedAtTime:Pc(zg(r.iat)),expirationTime:Pc(zg(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function zg(t){return Number(t)*1e3}function y0(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return bf("JWT malformed, contained fewer than 3 sections"),null;try{const r=YP(n);return r?JSON.parse(r):(bf("Failed to decode base64 JWT payload"),null)}catch(r){return bf("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function $1(t){const e=y0(t);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fl(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Rr&&yD(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function yD({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pc(this.lastLoginAt),this.creationTime=Pc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yp(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Fl(t,dC(n,{idToken:i}));Te(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?fC(s.providerUserInfo):[],l=xD(t.providerData,o),u=t.isAnonymous,h=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),d=u?h:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Ty(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,m)}async function wD(t){const e=At(t);await yp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xD(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function fC(t){return t.map(e=>{var{providerId:n}=e,i=p0(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bD(t,e){const n=await cC(t,{},async()=>{const i=Ph({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=hC(t,r,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",uC.fetch()(o,{method:"POST",headers:l,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ED(t,e){return ws(t,"POST","/v2/accounts:revokeToken",So(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const n=$1(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await bD(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new wl;return i&&(Te(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(Te(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(Te(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wl,this.toJSON())}_performRefresh(){return ns("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ns(t,e){Te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class is{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=p0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ty(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Fl(this,this.stsTokenManager.getToken(this.auth,e));return Te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return _D(this,e)}reload(){return wD(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new is(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await yp(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Zi(this.auth.app))return Promise.reject(Er(this.auth));const e=await this.getIdToken();return await Fl(this,gD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,l,u,h,d;const m=(i=n.displayName)!==null&&i!==void 0?i:void 0,g=(r=n.email)!==null&&r!==void 0?r:void 0,_=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,w=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(l=n.tenantId)!==null&&l!==void 0?l:void 0,C=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,E=(h=n.createdAt)!==null&&h!==void 0?h:void 0,k=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:P,emailVerified:j,isAnonymous:W,providerData:z,stsTokenManager:R}=n;Te(P&&R,e,"internal-error");const I=wl.fromJSON(this.name,R);Te(typeof P=="string",e,"internal-error"),Ns(m,e.name),Ns(g,e.name),Te(typeof j=="boolean",e,"internal-error"),Te(typeof W=="boolean",e,"internal-error"),Ns(_,e.name),Ns(w,e.name),Ns(x,e.name),Ns(C,e.name),Ns(E,e.name),Ns(k,e.name);const N=new is({uid:P,auth:e,email:g,emailVerified:j,displayName:m,isAnonymous:W,photoURL:w,phoneNumber:_,tenantId:x,stsTokenManager:I,createdAt:E,lastLoginAt:k});return z&&Array.isArray(z)&&(N.providerData=z.map(F=>Object.assign({},F))),C&&(N._redirectEventId=C),N}static async _fromIdTokenResponse(e,n,i=!1){const r=new wl;r.updateFromServerResponse(n);const s=new is({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await yp(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];Te(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?fC(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),l=new wl;l.updateFromIdToken(i);const u=new is({uid:r.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Ty(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H1=new Map;function rs(t){fs(t instanceof Function,"Expected a class definition");let e=H1.get(t);return e?(fs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,H1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}pC.type="NONE";const W1=pC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(t,e,n){return`firebase:${t}:${e}:${n}`}class xl{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Ef(this.userKey,r.apiKey,s),this.fullPersistenceKey=Ef("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?is._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new xl(rs(W1),e,i);const r=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=r[0]||rs(W1);const o=Ef(i,e.config.apiKey,e.name);let l=null;for(const h of n)try{const d=await h._get(o);if(d){const m=is._fromJSON(e,d);h!==s&&(l=m),s=h;break}}catch{}const u=r.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new xl(s,e,i):(s=u[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(o)}catch{}})),new xl(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wC(e))return"Blackberry";if(xC(e))return"Webos";if(gC(e))return"Safari";if((e.includes("chrome/")||_C(e))&&!e.includes("edge/"))return"Chrome";if(vC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function mC(t=Sn()){return/firefox\//i.test(t)}function gC(t=Sn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _C(t=Sn()){return/crios\//i.test(t)}function yC(t=Sn()){return/iemobile/i.test(t)}function vC(t=Sn()){return/android/i.test(t)}function wC(t=Sn()){return/blackberry/i.test(t)}function xC(t=Sn()){return/webos/i.test(t)}function v0(t=Sn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function SD(t=Sn()){var e;return v0(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function TD(){return zO()&&document.documentMode===10}function bC(t=Sn()){return v0(t)||vC(t)||xC(t)||wC(t)||/windows phone/i.test(t)||yC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(t,e=[]){let n;switch(t){case"Browser":n=q1(Sn());break;case"Worker":n=`${q1(Sn())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${va}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((o,l)=>{try{const u=e(s);o(u)}catch(u){l(u)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PD(t,e={}){return ws(t,"GET","/v2/passwordPolicy",So(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD=6;class ID{constructor(e){var n,i,r,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:CD,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(r=u.containsLowercaseLetter)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new G1(this),this.idTokenSubscription=new G1(this),this.beforeStateQueue=new kD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=rs(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await xl.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await dC(this,{idToken:e}),i=await is._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Zi(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await yp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=uD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Zi(this.app))return Promise.reject(Er(this));const n=e?At(e):null;return n&&Te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Zi(this.app)?Promise.reject(Er(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Zi(this.app)?Promise.reject(Er(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(rs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await PD(this),n=new ID(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new kh("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await ED(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&rs(e)||this._popupRedirectResolver;Te(n,this,"argument-error"),this.redirectPersistenceManager=await xl.create(this,[rs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,i,r);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=EC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&sD(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function xs(t){return At(t)}class G1{constructor(e){this.auth=e,this.observer=null,this.addObserver=KO(n=>this.observer=n)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ym={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RD(t){ym=t}function SC(t){return ym.loadJS(t)}function LD(){return ym.recaptchaEnterpriseScript}function ND(){return ym.gapiScript}function OD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const MD="recaptcha-enterprise",DD="NO_RECAPTCHA";class FD{constructor(e){this.type=MD,this.auth=xs(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{mD(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new pD(u);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,o(h.siteKey)}}).catch(u=>{l(u)})})}function r(s,o,l){const u=window.grecaptcha;U1(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(h=>{o(h)}).catch(()=>{o(DD)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(l=>{if(!n&&U1(window.grecaptcha))r(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=LD();u.length!==0&&(u+=l),SC(u).then(()=>{r(l,s,o)}).catch(h=>{o(h)})}}).catch(l=>{o(l)})})}}async function K1(t,e,n,i=!1){const r=new FD(t);let s;try{s=await r.verify(n)}catch{s=await r.verify(n,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function ky(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await K1(t,e,n,n==="getOobCode");return i(t,s)}else return i(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await K1(t,e,n,n==="getOobCode");return i(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(t,e){const n=_m(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(mp(s,e??{}))return r;Ni(r,"already-initialized")}return n.initialize({options:e})}function VD(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(rs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function zD(t,e,n){const i=xs(t);Te(i._canInitEmulator,i,"emulator-config-failed"),Te(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=TC(e),{host:o,port:l}=BD(e),u=l===null?"":`:${l}`;i.config.emulator={url:`${s}//${o}${u}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),UD()}function TC(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function BD(t){const e=TC(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:Z1(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:Z1(o)}}}function Z1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function UD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ns("not implemented")}_getIdTokenResponse(e){return ns("not implemented")}_linkToIdToken(e,n){return ns("not implemented")}_getReauthenticationResolver(e){return ns("not implemented")}}async function $D(t,e){return ws(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HD(t,e){return Ih(t,"POST","/v1/accounts:signInWithPassword",So(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WD(t,e){return Ih(t,"POST","/v1/accounts:signInWithEmailLink",So(t,e))}async function qD(t,e){return Ih(t,"POST","/v1/accounts:signInWithEmailLink",So(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh extends w0{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new sh(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new sh(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ky(e,n,"signInWithPassword",HD);case"emailLink":return WD(e,{email:this._email,oobCode:this._password});default:Ni(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ky(e,i,"signUpPassword",$D);case"emailLink":return qD(e,{idToken:n,email:this._email,oobCode:this._password});default:Ni(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bl(t,e){return Ih(t,"POST","/v1/accounts:signInWithIdp",So(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD="http://localhost";class ua extends w0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ua(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ni("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=p0(n,["providerId","signInMethod"]);if(!i||!r)return null;const o=new ua(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return bl(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,bl(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,bl(e,n)}buildRequest(){const e={requestUri:GD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ph(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ZD(t){const e=lc(uc(t)).link,n=e?lc(uc(e)).deep_link_id:null,i=lc(uc(t)).deep_link_id;return(i?lc(uc(i)).link:null)||i||n||e||t}class x0{constructor(e){var n,i,r,s,o,l;const u=lc(uc(e)),h=(n=u.apiKey)!==null&&n!==void 0?n:null,d=(i=u.oobCode)!==null&&i!==void 0?i:null,m=KD((r=u.mode)!==null&&r!==void 0?r:null);Te(h&&d&&m,"argument-error"),this.apiKey=h,this.operation=m,this.code=d,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=ZD(e);try{return new x0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(){this.providerId=eu.PROVIDER_ID}static credential(e,n){return sh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=x0.parseLink(n);return Te(i,"argument-error"),sh._fromEmailAndCode(e,i.code,i.tenantId)}}eu.PROVIDER_ID="password";eu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";eu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah extends b0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs extends Ah{constructor(){super("facebook.com")}static credential(e){return ua._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zs.credential(e.oauthAccessToken)}catch{return null}}}zs.FACEBOOK_SIGN_IN_METHOD="facebook.com";zs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends Ah{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ua._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Jr.credential(n,i)}catch{return null}}}Jr.GOOGLE_SIGN_IN_METHOD="google.com";Jr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends Ah{constructor(){super("github.com")}static credential(e){return ua._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bs.credential(e.oauthAccessToken)}catch{return null}}}Bs.GITHUB_SIGN_IN_METHOD="github.com";Bs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends Ah{constructor(){super("twitter.com")}static credential(e,n){return ua._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Us.credentialFromTaggedObject(e)}static credentialFromError(e){return Us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Us.credential(n,i)}catch{return null}}}Us.TWITTER_SIGN_IN_METHOD="twitter.com";Us.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YD(t,e){return Ih(t,"POST","/v1/accounts:signUp",So(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await is._fromIdTokenResponse(e,i,r),o=Y1(i);return new ca({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=Y1(i);return new ca({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function Y1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp extends Rr{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,vp.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new vp(e,n,i,r)}}function kC(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?vp._fromErrorAndOperation(t,s,e,i):s})}async function QD(t,e,n=!1){const i=await Fl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ca._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XD(t,e,n=!1){const{auth:i}=t;if(Zi(i.app))return Promise.reject(Er(i));const r="reauthenticate";try{const s=await Fl(t,kC(i,r,e,t),n);Te(s.idToken,i,"internal-error");const o=y0(s.idToken);Te(o,i,"internal-error");const{sub:l}=o;return Te(t.uid===l,i,"user-mismatch"),ca._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ni(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PC(t,e,n=!1){if(Zi(t.app))return Promise.reject(Er(t));const i="signIn",r=await kC(t,i,e),s=await ca._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function JD(t,e){return PC(xs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CC(t){const e=xs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function IC(t,e,n){if(Zi(t.app))return Promise.reject(Er(t));const i=xs(t),o=await ky(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",YD).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&CC(t),u}),l=await ca._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(l.user),l}function e6(t,e,n){return Zi(t.app)?Promise.reject(Er(t)):JD(At(t),eu.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&CC(t),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t6(t,e){return ws(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AC(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const i=At(t),s={idToken:await i.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Fl(i,t6(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const l=i.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=i.displayName,l.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}function n6(t,e,n,i){return At(t).onIdTokenChanged(e,n,i)}function i6(t,e,n){return At(t).beforeAuthStateChanged(e,n)}function E0(t,e,n,i){return At(t).onAuthStateChanged(e,n,i)}function r6(t){return At(t).signOut()}const wp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(wp,"1"),this.storage.removeItem(wp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6=1e3,o6=10;class LC extends RC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);TD()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,o6):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},s6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}LC.type="LOCAL";const a6=LC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC extends RC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}NC.type="SESSION";const OC=NC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l6(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new vm(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const l=Array.from(o).map(async h=>h(n.origin,s)),u=await l6(l);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((l,u)=>{const h=S0("",20);r.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(m){const g=m;if(g.data.eventId===h)switch(g.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(g.data.response);break;default:clearTimeout(d),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(){return window}function c6(t){Sr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(){return typeof Sr().WorkerGlobalScope<"u"&&typeof Sr().importScripts=="function"}async function h6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function d6(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function f6(){return MC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC="firebaseLocalStorageDb",p6=1,xp="firebaseLocalStorage",FC="fbase_key";class Rh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function wm(t,e){return t.transaction([xp],e?"readwrite":"readonly").objectStore(xp)}function m6(){const t=indexedDB.deleteDatabase(DC);return new Rh(t).toPromise()}function Py(){const t=indexedDB.open(DC,p6);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(xp,{keyPath:FC})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(xp)?e(i):(i.close(),await m6(),e(await Py()))})})}async function Q1(t,e,n){const i=wm(t,!0).put({[FC]:e,value:n});return new Rh(i).toPromise()}async function g6(t,e){const n=wm(t,!1).get(e),i=await new Rh(n).toPromise();return i===void 0?null:i.value}function X1(t,e){const n=wm(t,!0).delete(e);return new Rh(n).toPromise()}const _6=800,y6=3;class jC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Py(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>y6)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return MC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vm._getInstance(f6()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await h6(),!this.activeServiceWorker)return;this.sender=new u6(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||d6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Py();return await Q1(e,wp,"1"),await X1(e,wp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Q1(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>g6(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>X1(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=wm(r,!1).getAll();return new Rh(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jC.type="LOCAL";const v6=jC;new Ch(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VC(t,e){return e?rs(e):(Te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0 extends w0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return bl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return bl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function w6(t){return PC(t.auth,new T0(t),t.bypassAuthState)}function x6(t){const{auth:e,user:n}=t;return Te(n,e,"internal-error"),XD(n,new T0(t),t.bypassAuthState)}async function b6(t){const{auth:e,user:n}=t;return Te(n,e,"internal-error"),QD(n,new T0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return w6;case"linkViaPopup":case"linkViaRedirect":return b6;case"reauthViaPopup":case"reauthViaRedirect":return x6;default:Ni(this.auth,"internal-error")}}resolve(e){fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E6=new Ch(2e3,1e4);class dl extends zC{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,dl.currentPopupAction&&dl.currentPopupAction.cancel(),dl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){fs(this.filter.length===1,"Popup operations only handle one event");const e=S0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(br(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(br(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,dl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(br(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,E6.get())};e()}}dl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S6="pendingRedirect",Sf=new Map;class T6 extends zC{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Sf.get(this.auth._key());if(!e){try{const i=await k6(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Sf.set(this.auth._key(),e)}return this.bypassAuthState||Sf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function k6(t,e){const n=UC(e),i=BC(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}async function P6(t,e){return BC(t)._set(UC(e),"true")}function C6(t,e){Sf.set(t._key(),e)}function BC(t){return rs(t._redirectPersistence)}function UC(t){return Ef(S6,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I6(t,e,n){return A6(t,e,n)}async function A6(t,e,n){if(Zi(t.app))return Promise.reject(Er(t));const i=xs(t);oD(t,e,b0),await i._initializationPromise;const r=VC(i,n);return await P6(r,i),r._openRedirect(i,e,"signInViaRedirect")}async function R6(t,e){return await xs(t)._initializationPromise,$C(t,e,!1)}async function $C(t,e,n=!1){if(Zi(t.app))return Promise.reject(Er(t));const i=xs(t),r=VC(i,e),o=await new T6(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L6=10*60*1e3;class N6{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!O6(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!HC(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(br(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=L6&&this.cachedEventUids.clear(),this.cachedEventUids.has(J1(e))}saveEventToCache(e){this.cachedEventUids.add(J1(e)),this.lastProcessedEventTime=Date.now()}}function J1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function HC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function O6(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return HC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M6(t,e={}){return ws(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,F6=/^https?/;async function j6(t){if(t.config.emulator)return;const{authorizedDomains:e}=await M6(t);for(const n of e)try{if(V6(n))return}catch{}Ni(t,"unauthorized-domain")}function V6(t){const e=Sy(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!F6.test(n))return!1;if(D6.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z6=new Ch(3e4,6e4);function eb(){const t=Sr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function B6(t){return new Promise((e,n)=>{var i,r,s;function o(){eb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{eb(),n(br(t,"network-request-failed"))},timeout:z6.get()})}if(!((r=(i=Sr().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=Sr().gapi)===null||s===void 0)&&s.load)o();else{const l=OD("iframefcb");return Sr()[l]=()=>{gapi.load?o():n(br(t,"network-request-failed"))},SC(`${ND()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Tf=null,e})}let Tf=null;function U6(t){return Tf=Tf||B6(t),Tf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $6=new Ch(5e3,15e3),H6="__/auth/iframe",W6="emulator/auth/iframe",q6={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},G6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function K6(t){const e=t.config;Te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?_0(e,W6):`https://${t.config.authDomain}/${H6}`,i={apiKey:e.apiKey,appName:t.name,v:va},r=G6.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${Ph(i).slice(1)}`}async function Z6(t){const e=await U6(t),n=Sr().gapi;return Te(n,t,"internal-error"),e.open({where:document.body,url:K6(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:q6,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=br(t,"network-request-failed"),l=Sr().setTimeout(()=>{s(o)},$6.get());function u(){Sr().clearTimeout(l),r(i)}i.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Q6=500,X6=600,J6="_blank",eF="http://localhost";class tb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function tF(t,e,n,i=Q6,r=X6){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u=Object.assign(Object.assign({},Y6),{width:i.toString(),height:r.toString(),top:s,left:o}),h=Sn().toLowerCase();n&&(l=_C(h)?J6:n),mC(h)&&(e=e||eF,u.scrollbars="yes");const d=Object.entries(u).reduce((g,[_,w])=>`${g}${_}=${w},`,"");if(SD(h)&&l!=="_self")return nF(e||"",l),new tb(null);const m=window.open(e||"",l,d);Te(m,t,"popup-blocked");try{m.focus()}catch{}return new tb(m)}function nF(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iF="__/auth/handler",rF="emulator/auth/handler",sF=encodeURIComponent("fac");async function nb(t,e,n,i,r,s){Te(t.config.authDomain,t,"auth-domain-config-required"),Te(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:va,eventId:r};if(e instanceof b0){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",GO(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,m]of Object.entries({}))o[d]=m}if(e instanceof Ah){const d=e.getScopes().filter(m=>m!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await t._getAppCheckToken(),h=u?`#${sF}=${encodeURIComponent(u)}`:"";return`${oF(t)}?${Ph(l).slice(1)}${h}`}function oF({config:t}){return t.emulator?_0(t,rF):`https://${t.authDomain}/${iF}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bg="webStorageSupport";class aF{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=OC,this._completeRedirectFn=$C,this._overrideRedirectResult=C6}async _openPopup(e,n,i,r){var s;fs((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await nb(e,n,i,Sy(),r);return tF(e,o,S0())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await nb(e,n,i,Sy(),r);return c6(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(fs(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await Z6(e),i=new N6(e);return n.register("authEvent",r=>(Te(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bg,{type:Bg},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[Bg];o!==void 0&&n(!!o),Ni(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=j6(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return bC()||gC()||v0()}}const lF=aF;var ib="@firebase/auth",rb="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hF(t){mo(new hs("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=i.options;Te(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:EC(t)},h=new AD(i,r,s,u);return VD(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),mo(new hs("auth-internal",e=>{const n=xs(e.getProvider("auth").getImmediate());return(i=>new uF(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ii(ib,rb,cF(t)),Ii(ib,rb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dF=5*60,fF=eC("authIdTokenMaxAge")||dF;let sb=null;const pF=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>fF)return;const r=n==null?void 0:n.token;sb!==r&&(sb=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function tu(t=f0()){const e=_m(t,"auth");if(e.isInitialized())return e.getImmediate();const n=jD(t,{popupRedirectResolver:lF,persistence:[v6,a6,OC]}),i=eC("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const o=pF(s.toString());i6(n,o,()=>o(n.currentUser)),n6(n,l=>o(l))}}const r=QP("auth");return r&&zD(n,`http://${r}`),n}function mF(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}RD({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=br("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",mF().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hF("Browser");var WC={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ob=Ji.createContext&&Ji.createContext(WC),ao=function(){return ao=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},ao.apply(this,arguments)},gF=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n};function qC(t){return t&&t.map(function(e,n){return Ji.createElement(e.tag,ao({key:n},e.attr),qC(e.child))})}function Ft(t){return function(e){return Ji.createElement(_F,ao({attr:ao({},t.attr)},e),qC(t.child))}}function _F(t){var e=function(n){var i=t.attr,r=t.size,s=t.title,o=gF(t,["attr","size","title"]),l=r||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),Ji.createElement("svg",ao({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,o,{className:u,style:ao(ao({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&Ji.createElement("title",null,s),t.children)};return ob!==void 0?Ji.createElement(ob.Consumer,null,function(n){return e(n)}):e(WC)}function yF(t){return Ft({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"}}]})(t)}function vF(t){return Ft({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"}}]})(t)}function wF(t){return Ft({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"}}]})(t)}function xF(t){return Ft({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"}}]})(t)}function bF(t){return Ft({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"}}]})(t)}function EF(t){return Ft({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M176 216h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16H176c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16zm-16 80c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16H176c-8.84 0-16 7.16-16 16v16zm96 121.13c-16.42 0-32.84-5.06-46.86-15.19L0 250.86V464c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V250.86L302.86 401.94c-14.02 10.12-30.44 15.19-46.86 15.19zm237.61-254.18c-8.85-6.94-17.24-13.47-29.61-22.81V96c0-26.51-21.49-48-48-48h-77.55c-3.04-2.2-5.87-4.26-9.04-6.56C312.6 29.17 279.2-.35 256 0c-23.2-.35-56.59 29.17-73.41 41.44-3.17 2.3-6 4.36-9.04 6.56H96c-26.51 0-48 21.49-48 48v44.14c-12.37 9.33-20.76 15.87-29.61 22.81A47.995 47.995 0 0 0 0 200.72v10.65l96 69.35V96h320v184.72l96-69.35v-10.65c0-14.74-6.78-28.67-18.39-37.77z"}}]})(t)}function SF(t){return Ft({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"}}]})(t)}function GC(t){return Ft({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z"}}]})(t)}function TF(t){return Ft({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"}}]})(t)}function KC(t){return Ft({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 0c-69.59 0-126 56.41-126 126 0 56.26 82.35 158.8 113.9 196.02 6.39 7.54 17.82 7.54 24.2 0C331.65 284.8 414 182.26 414 126 414 56.41 357.59 0 288 0zm0 168c-23.2 0-42-18.8-42-42s18.8-42 42-42 42 18.8 42 42-18.8 42-42 42zM20.12 215.95A32.006 32.006 0 0 0 0 245.66v250.32c0 11.32 11.43 19.06 21.94 14.86L160 448V214.92c-8.84-15.98-16.07-31.54-21.25-46.42L20.12 215.95zM288 359.67c-14.07 0-27.38-6.18-36.51-16.96-19.66-23.2-40.57-49.62-59.49-76.72v182l192 64V266c-18.92 27.09-39.82 53.52-59.49 76.72-9.13 10.77-22.44 16.95-36.51 16.95zm266.06-198.51L416 224v288l139.88-55.95A31.996 31.996 0 0 0 576 426.34V176.02c0-11.32-11.43-19.06-21.94-14.86z"}}]})(t)}function kF(t){return Ft({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"}}]})(t)}function PF(t){return Ft({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M493.4 24.6l-104-24c-11.3-2.6-22.9 3.3-27.5 13.9l-48 112c-4.2 9.8-1.4 21.3 6.9 28l60.6 49.6c-36 76.7-98.9 140.5-177.2 177.2l-49.6-60.6c-6.8-8.3-18.2-11.1-28-6.9l-112 48C3.9 366.5-2 378.1.6 389.4l24 104C27.1 504.2 36.7 512 48 512c256.1 0 464-207.5 464-464 0-11.2-7.7-20.9-18.6-23.4z"}}]})(t)}function CF(t){return Ft({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}}]})(t)}function IF(t){return Ft({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M500.33 0h-47.41a12 12 0 0 0-12 12.57l4 82.76A247.42 247.42 0 0 0 256 8C119.34 8 7.9 119.53 8 256.19 8.1 393.07 119.1 504 256 504a247.1 247.1 0 0 0 166.18-63.91 12 12 0 0 0 .48-17.43l-34-34a12 12 0 0 0-16.38-.55A176 176 0 1 1 402.1 157.8l-101.53-4.87a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12h200.33a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12z"}}]})(t)}function ZC(t){return Ft({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"}}]})(t)}function AF(t){return Ft({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"}}]})(t)}function bp(t){return Ft({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"}}]})(t)}function Cy(t){return Ft({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M128 160h320v192H128V160zm400 96c0 26.51 21.49 48 48 48v96c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48v-96c26.51 0 48-21.49 48-48s-21.49-48-48-48v-96c0-26.51 21.49-48 48-48h480c26.51 0 48 21.49 48 48v96c-26.51 0-48 21.49-48 48zm-48-104c0-13.255-10.745-24-24-24H120c-13.255 0-24 10.745-24 24v208c0 13.255 10.745 24 24 24h336c13.255 0 24-10.745 24-24V152z"}}]})(t)}function RF(t){return Ft({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}}]})(t)}function LF(t){return Ft({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm95.8 32.6L272 480l-32-136 32-56h-96l32 56-32 136-47.8-191.4C56.9 292 0 350.3 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-72.1-56.9-130.4-128.2-133.8z"}}]})(t)}function NF(t){return Ft({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"}}]})(t)}const OF=({sidebarOpen:t,toggleSidebar:e})=>{const n=async()=>{const o=tu();try{await r6(o)}catch(l){console.error("Sign out error",l)}},i="flex items-center px-4 py-3 text-jdc-white hover:bg-jdc-dark-gray rounded transition-colors duration-150",r="active-link",s=S.jsxs(S.Fragment,{children:[S.jsx("li",{children:S.jsxs(Ka,{to:"/dashboard",className:({isActive:o})=>`${i} ${o?r:""}`,onClick:window.innerWidth<1024?e:void 0,children:[S.jsx(wF,{className:"icon"})," Tableau de Bord"]})}),S.jsx("li",{children:S.jsxs(Ka,{to:"/sap",className:({isActive:o})=>`${i} ${o?r:""}`,onClick:window.innerWidth<1024?e:void 0,children:[S.jsx(Cy,{className:"icon"})," Tickets SAP"]})}),S.jsx("li",{children:S.jsxs(Ka,{to:"/sap/create",className:({isActive:o})=>`${i} ${o?r:""}`,onClick:window.innerWidth<1024?e:void 0,children:[S.jsx(CF,{className:"icon"})," Créer Ticket"]})}),S.jsx("li",{children:S.jsxs(Ka,{to:"/envois",className:({isActive:o})=>`${i} ${o?r:""}`,onClick:window.innerWidth<1024?e:void 0,children:[S.jsx(KC,{className:"icon"})," Envois"]})}),S.jsx("li",{children:S.jsxs(Ka,{to:"/article-search",className:({isActive:o})=>`${i} ${o?r:""}`,onClick:window.innerWidth<1024?e:void 0,children:[S.jsx(ZC,{className:"icon"})," Recherche Article"]})}),S.jsx("li",{children:S.jsxs(Ka,{to:"/admin",className:({isActive:o})=>`${i} ${o?r:""}`,onClick:window.innerWidth<1024?e:void 0,children:[S.jsx(NF,{className:"icon"})," Admin"]})})]});return S.jsxs(S.Fragment,{children:[S.jsx("div",{className:`fixed inset-0 z-30 bg-black bg-opacity-50 transition-opacity lg:hidden ${t?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:e,"aria-hidden":"true"}),S.jsxs("aside",{className:`fixed inset-y-0 left-0 z-40 w-64 sidebar transform transition-transform duration-300 ease-in-out lg:translate-x-0 ${t?"translate-x-0":"-translate-x-full"} flex flex-col`,children:[S.jsx("div",{className:"flex items-center justify-center h-20 border-b border-base-300",children:S.jsx(GP,{to:"/",className:"text-2xl font-bold text-jdc-yellow px-4",children:"JDC SAP"})}),S.jsx("nav",{className:"flex-1 px-2 py-4 space-y-2 overflow-y-auto",children:S.jsxs("ul",{className:"menu p-0",children:[" ",s]})}),S.jsx("div",{className:"px-4 py-4 border-t border-base-300",children:S.jsxs("button",{onClick:n,className:`${i} w-full justify-start`,children:[S.jsx(AF,{className:"icon"})," Déconnexion"]})})]})]})},Vd=({title:t,value:e,icon:n,loading:i=!1,error:r=!1,increase:s=0})=>S.jsxs("div",{className:"dashboard-tile flex flex-col p-4 rounded-md bg-jdc-dark-gray border border-base-300 items-center text-center",children:[S.jsxs("div",{className:"flex flex-col items-center space-y-2 mb-2",children:[S.jsx("div",{className:"p-3 rounded-full bg-jdc-black text-jdc-yellow",children:i?S.jsx(bp,{className:"animate-spin h-6 w-6"}):r?S.jsx(SF,{className:"h-6 w-6 text-red-500"}):n}),S.jsxs("div",{children:[S.jsx("p",{className:"text-sm text-jdc-light-gray font-medium uppercase tracking-wider",children:t}),S.jsx("p",{className:"text-2xl font-semibold text-jdc-white",children:i?"...":r?"Erreur":e})]})]}),s!==0&&!i&&!r&&S.jsx("div",{className:"mt-1 text-sm text-jdc-green",children:s>0?`+${s} depuis hier`:`${s} depuis hier`})]}),MF=({envoisCount:t,ticketsCount:e,loading:n,error:i,envoisCountYesterday:r=0,ticketsCountYesterday:s=0,rmaTicketsCount:o,rmaTicketsCountYesterday:l=0,clientCtnCount:u,clientCtnCountYesterday:h=0,newTicketsCount:d,newTicketsCountYesterday:m=0})=>{const g=e-s,_=o-l,w=u-h,x=d-m;return S.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:[S.jsx(Vd,{title:"Tickets SAP Actifs",value:e,icon:S.jsx(Cy,{className:"h-6 w-6"}),loading:n,error:!!i,increase:g}),S.jsx(Vd,{title:"Envoi depuis CTN chez le client",value:u,icon:S.jsx(KC,{className:"h-6 w-6"}),loading:n,error:!!i,increase:w}),S.jsx(Vd,{title:"Tickets Demande de RMA",value:o,icon:S.jsx(EF,{className:"h-6 w-6"}),loading:n,error:!!i,increase:_}),S.jsx(Vd,{title:"Tickets Nouveaux",value:d,icon:S.jsx(Cy,{className:"h-6 w-6"}),loading:n,error:!!i,increase:x})]})};var Iy={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(jc,function(n){var i="1.9.4";function r(a){var c,p,y,b;for(p=1,y=arguments.length;p<y;p++){b=arguments[p];for(c in b)a[c]=b[c]}return a}var s=Object.create||function(){function a(){}return function(c){return a.prototype=c,new a}}();function o(a,c){var p=Array.prototype.slice;if(a.bind)return a.bind.apply(a,p.call(arguments,1));var y=p.call(arguments,2);return function(){return a.apply(c,y.length?y.concat(p.call(arguments)):arguments)}}var l=0;function u(a){return"_leaflet_id"in a||(a._leaflet_id=++l),a._leaflet_id}function h(a,c,p){var y,b,A,H;return H=function(){y=!1,b&&(A.apply(p,b),b=!1)},A=function(){y?b=arguments:(a.apply(p,arguments),setTimeout(H,c),y=!0)},A}function d(a,c,p){var y=c[1],b=c[0],A=y-b;return a===y&&p?a:((a-b)%A+A)%A+b}function m(){return!1}function g(a,c){if(c===!1)return a;var p=Math.pow(10,c===void 0?6:c);return Math.round(a*p)/p}function _(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function w(a){return _(a).split(/\s+/)}function x(a,c){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?s(a.options):{});for(var p in c)a.options[p]=c[p];return a.options}function C(a,c,p){var y=[];for(var b in a)y.push(encodeURIComponent(p?b.toUpperCase():b)+"="+encodeURIComponent(a[b]));return(!c||c.indexOf("?")===-1?"?":"&")+y.join("&")}var E=/\{ *([\w_ -]+) *\}/g;function k(a,c){return a.replace(E,function(p,y){var b=c[y];if(b===void 0)throw new Error("No value provided for variable "+p);return typeof b=="function"&&(b=b(c)),b})}var P=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function j(a,c){for(var p=0;p<a.length;p++)if(a[p]===c)return p;return-1}var W="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function z(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var R=0;function I(a){var c=+new Date,p=Math.max(0,16-(c-R));return R=c+p,window.setTimeout(a,p)}var N=window.requestAnimationFrame||z("RequestAnimationFrame")||I,F=window.cancelAnimationFrame||z("CancelAnimationFrame")||z("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function D(a,c,p){if(p&&N===I)a.call(c);else return N.call(window,o(a,c))}function B(a){a&&F.call(window,a)}var V={__proto__:null,extend:r,create:s,bind:o,get lastId(){return l},stamp:u,throttle:h,wrapNum:d,falseFn:m,formatNum:g,trim:_,splitWords:w,setOptions:x,getParamString:C,template:k,isArray:P,indexOf:j,emptyImageUrl:W,requestFn:N,cancelFn:F,requestAnimFrame:D,cancelAnimFrame:B};function ee(){}ee.extend=function(a){var c=function(){x(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},p=c.__super__=this.prototype,y=s(p);y.constructor=c,c.prototype=y;for(var b in this)Object.prototype.hasOwnProperty.call(this,b)&&b!=="prototype"&&b!=="__super__"&&(c[b]=this[b]);return a.statics&&r(c,a.statics),a.includes&&(te(a.includes),r.apply(null,[y].concat(a.includes))),r(y,a),delete y.statics,delete y.includes,y.options&&(y.options=p.options?s(p.options):{},r(y.options,a.options)),y._initHooks=[],y.callInitHooks=function(){if(!this._initHooksCalled){p.callInitHooks&&p.callInitHooks.call(this),this._initHooksCalled=!0;for(var A=0,H=y._initHooks.length;A<H;A++)y._initHooks[A].call(this)}},c},ee.include=function(a){var c=this.prototype.options;return r(this.prototype,a),a.options&&(this.prototype.options=c,this.mergeOptions(a.options)),this},ee.mergeOptions=function(a){return r(this.prototype.options,a),this},ee.addInitHook=function(a){var c=Array.prototype.slice.call(arguments,1),p=typeof a=="function"?a:function(){this[a].apply(this,c)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(p),this};function te(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=P(a)?a:[a];for(var c=0;c<a.length;c++)a[c]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ae={on:function(a,c,p){if(typeof a=="object")for(var y in a)this._on(y,a[y],c);else{a=w(a);for(var b=0,A=a.length;b<A;b++)this._on(a[b],c,p)}return this},off:function(a,c,p){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var y in a)this._off(y,a[y],c);else{a=w(a);for(var b=arguments.length===1,A=0,H=a.length;A<H;A++)b?this._off(a[A]):this._off(a[A],c,p)}return this},_on:function(a,c,p,y){if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}if(this._listens(a,c,p)===!1){p===this&&(p=void 0);var b={fn:c,ctx:p};y&&(b.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(b)}},_off:function(a,c,p){var y,b,A;if(this._events&&(y=this._events[a],!!y)){if(arguments.length===1){if(this._firingCount)for(b=0,A=y.length;b<A;b++)y[b].fn=m;delete this._events[a];return}if(typeof c!="function"){console.warn("wrong listener type: "+typeof c);return}var H=this._listens(a,c,p);if(H!==!1){var G=y[H];this._firingCount&&(G.fn=m,this._events[a]=y=y.slice()),y.splice(H,1)}}},fire:function(a,c,p){if(!this.listens(a,p))return this;var y=r({},c,{type:a,target:this,sourceTarget:c&&c.sourceTarget||this});if(this._events){var b=this._events[a];if(b){this._firingCount=this._firingCount+1||1;for(var A=0,H=b.length;A<H;A++){var G=b[A],Z=G.fn;G.once&&this.off(a,Z,G.ctx),Z.call(G.ctx||this,y)}this._firingCount--}}return p&&this._propagateEvent(y),this},listens:function(a,c,p,y){typeof a!="string"&&console.warn('"string" type argument expected');var b=c;typeof c!="function"&&(y=!!c,b=void 0,p=void 0);var A=this._events&&this._events[a];if(A&&A.length&&this._listens(a,b,p)!==!1)return!0;if(y){for(var H in this._eventParents)if(this._eventParents[H].listens(a,c,p,y))return!0}return!1},_listens:function(a,c,p){if(!this._events)return!1;var y=this._events[a]||[];if(!c)return!!y.length;p===this&&(p=void 0);for(var b=0,A=y.length;b<A;b++)if(y[b].fn===c&&y[b].ctx===p)return b;return!1},once:function(a,c,p){if(typeof a=="object")for(var y in a)this._on(y,a[y],c,!0);else{a=w(a);for(var b=0,A=a.length;b<A;b++)this._on(a[b],c,p,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[u(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[u(a)],this},_propagateEvent:function(a){for(var c in this._eventParents)this._eventParents[c].fire(a.type,r({layer:a.target,propagatedFrom:a.target},a),!0)}};ae.addEventListener=ae.on,ae.removeEventListener=ae.clearAllEventListeners=ae.off,ae.addOneTimeEventListener=ae.once,ae.fireEvent=ae.fire,ae.hasEventListeners=ae.listens;var ue=ee.extend(ae);function K(a,c,p){this.x=p?Math.round(a):a,this.y=p?Math.round(c):c}var he=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};K.prototype={clone:function(){return new K(this.x,this.y)},add:function(a){return this.clone()._add(M(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(M(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new K(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new K(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=he(this.x),this.y=he(this.y),this},distanceTo:function(a){a=M(a);var c=a.x-this.x,p=a.y-this.y;return Math.sqrt(c*c+p*p)},equals:function(a){return a=M(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=M(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+g(this.x)+", "+g(this.y)+")"}};function M(a,c,p){return a instanceof K?a:P(a)?new K(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new K(a.x,a.y):new K(a,c,p)}function fe(a,c){if(a)for(var p=c?[a,c]:a,y=0,b=p.length;y<b;y++)this.extend(p[y])}fe.prototype={extend:function(a){var c,p;if(!a)return this;if(a instanceof K||typeof a[0]=="number"||"x"in a)c=p=M(a);else if(a=ce(a),c=a.min,p=a.max,!c||!p)return this;return!this.min&&!this.max?(this.min=c.clone(),this.max=p.clone()):(this.min.x=Math.min(c.x,this.min.x),this.max.x=Math.max(p.x,this.max.x),this.min.y=Math.min(c.y,this.min.y),this.max.y=Math.max(p.y,this.max.y)),this},getCenter:function(a){return M((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return M(this.min.x,this.max.y)},getTopRight:function(){return M(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var c,p;return typeof a[0]=="number"||a instanceof K?a=M(a):a=ce(a),a instanceof fe?(c=a.min,p=a.max):c=p=a,c.x>=this.min.x&&p.x<=this.max.x&&c.y>=this.min.y&&p.y<=this.max.y},intersects:function(a){a=ce(a);var c=this.min,p=this.max,y=a.min,b=a.max,A=b.x>=c.x&&y.x<=p.x,H=b.y>=c.y&&y.y<=p.y;return A&&H},overlaps:function(a){a=ce(a);var c=this.min,p=this.max,y=a.min,b=a.max,A=b.x>c.x&&y.x<p.x,H=b.y>c.y&&y.y<p.y;return A&&H},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var c=this.min,p=this.max,y=Math.abs(c.x-p.x)*a,b=Math.abs(c.y-p.y)*a;return ce(M(c.x-y,c.y-b),M(p.x+y,p.y+b))},equals:function(a){return a?(a=ce(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function ce(a,c){return!a||a instanceof fe?a:new fe(a,c)}function U(a,c){if(a)for(var p=c?[a,c]:a,y=0,b=p.length;y<b;y++)this.extend(p[y])}U.prototype={extend:function(a){var c=this._southWest,p=this._northEast,y,b;if(a instanceof we)y=a,b=a;else if(a instanceof U){if(y=a._southWest,b=a._northEast,!y||!b)return this}else return a?this.extend(pe(a)||be(a)):this;return!c&&!p?(this._southWest=new we(y.lat,y.lng),this._northEast=new we(b.lat,b.lng)):(c.lat=Math.min(y.lat,c.lat),c.lng=Math.min(y.lng,c.lng),p.lat=Math.max(b.lat,p.lat),p.lng=Math.max(b.lng,p.lng)),this},pad:function(a){var c=this._southWest,p=this._northEast,y=Math.abs(c.lat-p.lat)*a,b=Math.abs(c.lng-p.lng)*a;return new U(new we(c.lat-y,c.lng-b),new we(p.lat+y,p.lng+b))},getCenter:function(){return new we((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new we(this.getNorth(),this.getWest())},getSouthEast:function(){return new we(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof we||"lat"in a?a=pe(a):a=be(a);var c=this._southWest,p=this._northEast,y,b;return a instanceof U?(y=a.getSouthWest(),b=a.getNorthEast()):y=b=a,y.lat>=c.lat&&b.lat<=p.lat&&y.lng>=c.lng&&b.lng<=p.lng},intersects:function(a){a=be(a);var c=this._southWest,p=this._northEast,y=a.getSouthWest(),b=a.getNorthEast(),A=b.lat>=c.lat&&y.lat<=p.lat,H=b.lng>=c.lng&&y.lng<=p.lng;return A&&H},overlaps:function(a){a=be(a);var c=this._southWest,p=this._northEast,y=a.getSouthWest(),b=a.getNorthEast(),A=b.lat>c.lat&&y.lat<p.lat,H=b.lng>c.lng&&y.lng<p.lng;return A&&H},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,c){return a?(a=be(a),this._southWest.equals(a.getSouthWest(),c)&&this._northEast.equals(a.getNorthEast(),c)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function be(a,c){return a instanceof U?a:new U(a,c)}function we(a,c,p){if(isNaN(a)||isNaN(c))throw new Error("Invalid LatLng object: ("+a+", "+c+")");this.lat=+a,this.lng=+c,p!==void 0&&(this.alt=+p)}we.prototype={equals:function(a,c){if(!a)return!1;a=pe(a);var p=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return p<=(c===void 0?1e-9:c)},toString:function(a){return"LatLng("+g(this.lat,a)+", "+g(this.lng,a)+")"},distanceTo:function(a){return Fe.distance(this,pe(a))},wrap:function(){return Fe.wrapLatLng(this)},toBounds:function(a){var c=180*a/40075017,p=c/Math.cos(Math.PI/180*this.lat);return be([this.lat-c,this.lng-p],[this.lat+c,this.lng+p])},clone:function(){return new we(this.lat,this.lng,this.alt)}};function pe(a,c,p){return a instanceof we?a:P(a)&&typeof a[0]!="object"?a.length===3?new we(a[0],a[1],a[2]):a.length===2?new we(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new we(a.lat,"lng"in a?a.lng:a.lon,a.alt):c===void 0?null:new we(a,c,p)}var Ie={latLngToPoint:function(a,c){var p=this.projection.project(a),y=this.scale(c);return this.transformation._transform(p,y)},pointToLatLng:function(a,c){var p=this.scale(c),y=this.transformation.untransform(a,p);return this.projection.unproject(y)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var c=this.projection.bounds,p=this.scale(a),y=this.transformation.transform(c.min,p),b=this.transformation.transform(c.max,p);return new fe(y,b)},infinite:!1,wrapLatLng:function(a){var c=this.wrapLng?d(a.lng,this.wrapLng,!0):a.lng,p=this.wrapLat?d(a.lat,this.wrapLat,!0):a.lat,y=a.alt;return new we(p,c,y)},wrapLatLngBounds:function(a){var c=a.getCenter(),p=this.wrapLatLng(c),y=c.lat-p.lat,b=c.lng-p.lng;if(y===0&&b===0)return a;var A=a.getSouthWest(),H=a.getNorthEast(),G=new we(A.lat-y,A.lng-b),Z=new we(H.lat-y,H.lng-b);return new U(G,Z)}},Fe=r({},Ie,{wrapLng:[-180,180],R:6371e3,distance:function(a,c){var p=Math.PI/180,y=a.lat*p,b=c.lat*p,A=Math.sin((c.lat-a.lat)*p/2),H=Math.sin((c.lng-a.lng)*p/2),G=A*A+Math.cos(y)*Math.cos(b)*H*H,Z=2*Math.atan2(Math.sqrt(G),Math.sqrt(1-G));return this.R*Z}}),vt=6378137,Rt={R:vt,MAX_LATITUDE:85.0511287798,project:function(a){var c=Math.PI/180,p=this.MAX_LATITUDE,y=Math.max(Math.min(p,a.lat),-p),b=Math.sin(y*c);return new K(this.R*a.lng*c,this.R*Math.log((1+b)/(1-b))/2)},unproject:function(a){var c=180/Math.PI;return new we((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*c,a.x*c/this.R)},bounds:function(){var a=vt*Math.PI;return new fe([-a,-a],[a,a])}()};function ht(a,c,p,y){if(P(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=c,this._c=p,this._d=y}ht.prototype={transform:function(a,c){return this._transform(a.clone(),c)},_transform:function(a,c){return c=c||1,a.x=c*(this._a*a.x+this._b),a.y=c*(this._c*a.y+this._d),a},untransform:function(a,c){return c=c||1,new K((a.x/c-this._b)/this._a,(a.y/c-this._d)/this._c)}};function mt(a,c,p,y){return new ht(a,c,p,y)}var Kt=r({},Fe,{code:"EPSG:3857",projection:Rt,transformation:function(){var a=.5/(Math.PI*Rt.R);return mt(a,.5,-a,.5)}()}),On=r({},Kt,{code:"EPSG:900913"});function ci(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function Di(a,c){var p="",y,b,A,H,G,Z;for(y=0,A=a.length;y<A;y++){for(G=a[y],b=0,H=G.length;b<H;b++)Z=G[b],p+=(b?"L":"M")+Z.x+" "+Z.y;p+=c?ye.svg?"z":"x":""}return p||"M0 0"}var Fi=document.documentElement.style,ji="ActiveXObject"in window,sr=ji&&!document.addEventListener,hi="msLaunchUri"in navigator&&!("documentMode"in document),Vi=pi("webkit"),Or=pi("android"),or=pi("android 2")||pi("android 3"),wt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),bs=Or&&pi("Google")&&wt<537&&!("AudioNode"in window),Y=!!window.opera,ie=!hi&&pi("chrome"),xe=pi("gecko")&&!Vi&&!Y&&!ji,Ne=!ie&&pi("safari"),ze=pi("phantom"),Zt="OTransition"in Fi,Ye=navigator.platform.indexOf("Win")===0,kn=ji&&"transition"in Fi,di="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!or,fi="MozPerspective"in Fi,tn=!window.L_DISABLE_3D&&(kn||di||fi)&&!Zt&&!ze,Mn=typeof orientation<"u"||pi("mobile"),Pn=Mn&&Vi,Wh=Mn&&di,du=!window.PointerEvent&&window.MSPointerEvent,Es=!!(window.PointerEvent||du),Ea="ontouchstart"in window||!!window.TouchEvent,fu=!window.L_NO_TOUCH&&(Ea||Es),Mr=Mn&&Y,qh=Mn&&xe,Sa=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Gh=function(){var a=!1;try{var c=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",m,c),window.removeEventListener("testPassiveEventSupport",m,c)}catch{}return a}(),Co=function(){return!!document.createElement("canvas").getContext}(),Ta=!!(document.createElementNS&&ci("svg").createSVGRect),nn=!!Ta&&function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Kh=!Ta&&function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var c=a.firstChild;return c.style.behavior="url(#default#VML)",c&&typeof c.adj=="object"}catch{return!1}}(),Io=navigator.platform.indexOf("Mac")===0,Ao=navigator.platform.indexOf("Linux")===0;function pi(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var ye={ie:ji,ielt9:sr,edge:hi,webkit:Vi,android:Or,android23:or,androidStock:bs,opera:Y,chrome:ie,gecko:xe,safari:Ne,phantom:ze,opera12:Zt,win:Ye,ie3d:kn,webkit3d:di,gecko3d:fi,any3d:tn,mobile:Mn,mobileWebkit:Pn,mobileWebkit3d:Wh,msPointer:du,pointer:Es,touch:fu,touchNative:Ea,mobileOpera:Mr,mobileGecko:qh,retina:Sa,passiveEvents:Gh,canvas:Co,svg:Ta,vml:Kh,inlineSvg:nn,mac:Io,linux:Ao},Dr=ye.msPointer?"MSPointerDown":"pointerdown",Zh=ye.msPointer?"MSPointerMove":"pointermove",Yh=ye.msPointer?"MSPointerUp":"pointerup",Ro=ye.msPointer?"MSPointerCancel":"pointercancel",ka={touchstart:Dr,touchmove:Zh,touchend:Yh,touchcancel:Ro},Pa={touchstart:Ia,touchmove:Ca,touchend:Ca,touchcancel:Ca},zi={},Bi=!1;function Qh(a,c,p){return c==="touchstart"&&Jh(),Pa[c]?(p=Pa[c].bind(this,p),a.addEventListener(ka[c],p,!1),p):(console.warn("wrong event specified:",c),m)}function Xh(a,c,p){if(!ka[c]){console.warn("wrong event specified:",c);return}a.removeEventListener(ka[c],p,!1)}function pu(a){zi[a.pointerId]=a}function mu(a){zi[a.pointerId]&&(zi[a.pointerId]=a)}function gu(a){delete zi[a.pointerId]}function Jh(){Bi||(document.addEventListener(Dr,pu,!0),document.addEventListener(Zh,mu,!0),document.addEventListener(Yh,gu,!0),document.addEventListener(Ro,gu,!0),Bi=!0)}function Ca(a,c){if(c.pointerType!==(c.MSPOINTER_TYPE_MOUSE||"mouse")){c.touches=[];for(var p in zi)c.touches.push(zi[p]);c.changedTouches=[c],a(c)}}function Ia(a,c){c.MSPOINTER_TYPE_TOUCH&&c.pointerType===c.MSPOINTER_TYPE_TOUCH&&xt(c),Ca(a,c)}function ed(a){var c={},p,y;for(y in a)p=a[y],c[y]=p&&p.bind?p.bind(a):p;return a=c,c.type="dblclick",c.detail=2,c.isTrusted=!1,c._simulated=!0,c}var _u=200;function Lo(a,c){a.addEventListener("dblclick",c);var p=0,y;function b(A){if(A.detail!==1){y=A.detail;return}if(!(A.pointerType==="mouse"||A.sourceCapabilities&&!A.sourceCapabilities.firesTouchEvents)){var H=Iu(A);if(!(H.some(function(Z){return Z instanceof HTMLLabelElement&&Z.attributes.for})&&!H.some(function(Z){return Z instanceof HTMLInputElement||Z instanceof HTMLSelectElement}))){var G=Date.now();G-p<=_u?(y++,y===2&&c(ed(A))):y=1,p=G}}}return a.addEventListener("click",b),{dblclick:c,simDblclick:b}}function Fr(a,c){a.removeEventListener("dblclick",c.dblclick),a.removeEventListener("click",c.simDblclick)}var No=Vr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Oo=Vr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),yu=Oo==="webkitTransition"||Oo==="OTransition"?Oo+"End":"transitionend";function vu(a){return typeof a=="string"?document.getElementById(a):a}function Ss(a,c){var p=a.style[c]||a.currentStyle&&a.currentStyle[c];if((!p||p==="auto")&&document.defaultView){var y=document.defaultView.getComputedStyle(a,null);p=y?y[c]:null}return p==="auto"?null:p}function Be(a,c,p){var y=document.createElement(a);return y.className=c||"",p&&p.appendChild(y),y}function st(a){var c=a.parentNode;c&&c.removeChild(a)}function Mo(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function jr(a){var c=a.parentNode;c&&c.lastChild!==a&&c.appendChild(a)}function Ts(a){var c=a.parentNode;c&&c.firstChild!==a&&c.insertBefore(a,c.firstChild)}function wu(a,c){if(a.classList!==void 0)return a.classList.contains(c);var p=mi(a);return p.length>0&&new RegExp("(^|\\s)"+c+"(\\s|$)").test(p)}function Le(a,c){if(a.classList!==void 0)for(var p=w(c),y=0,b=p.length;y<b;y++)a.classList.add(p[y]);else if(!wu(a,c)){var A=mi(a);xu(a,(A?A+" ":"")+c)}}function gt(a,c){a.classList!==void 0?a.classList.remove(c):xu(a,_((" "+mi(a)+" ").replace(" "+c+" "," ")))}function xu(a,c){a.className.baseVal===void 0?a.className=c:a.className.baseVal=c}function mi(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function Pt(a,c){"opacity"in a.style?a.style.opacity=c:"filter"in a.style&&Aa(a,c)}function Aa(a,c){var p=!1,y="DXImageTransform.Microsoft.Alpha";try{p=a.filters.item(y)}catch{if(c===1)return}c=Math.round(c*100),p?(p.Enabled=c!==100,p.Opacity=c):a.style.filter+=" progid:"+y+"(opacity="+c+")"}function Vr(a){for(var c=document.documentElement.style,p=0;p<a.length;p++)if(a[p]in c)return a[p];return!1}function ar(a,c,p){var y=c||new K(0,0);a.style[No]=(ye.ie3d?"translate("+y.x+"px,"+y.y+"px)":"translate3d("+y.x+"px,"+y.y+"px,0)")+(p?" scale("+p+")":"")}function Pe(a,c){a._leaflet_pos=c,ye.any3d?ar(a,c):(a.style.left=c.x+"px",a.style.top=c.y+"px")}function gi(a){return a._leaflet_pos||new K(0,0)}var Ui,$i,bu;if("onselectstart"in document)Ui=function(){Ee(window,"selectstart",xt)},$i=function(){it(window,"selectstart",xt)};else{var ks=Vr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ui=function(){if(ks){var a=document.documentElement.style;bu=a[ks],a[ks]="none"}},$i=function(){ks&&(document.documentElement.style[ks]=bu,bu=void 0)}}function Eu(){Ee(window,"dragstart",xt)}function Su(){it(window,"dragstart",xt)}var Ra,Tu;function zr(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(Qn(),Ra=a,Tu=a.style.outlineStyle,a.style.outlineStyle="none",Ee(window,"keydown",Qn))}function Qn(){Ra&&(Ra.style.outlineStyle=Tu,Ra=void 0,Tu=void 0,it(window,"keydown",Qn))}function ku(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function La(a){var c=a.getBoundingClientRect();return{x:c.width/a.offsetWidth||1,y:c.height/a.offsetHeight||1,boundingClientRect:c}}var td={__proto__:null,TRANSFORM:No,TRANSITION:Oo,TRANSITION_END:yu,get:vu,getStyle:Ss,create:Be,remove:st,empty:Mo,toFront:jr,toBack:Ts,hasClass:wu,addClass:Le,removeClass:gt,setClass:xu,getClass:mi,setOpacity:Pt,testProp:Vr,setTransform:ar,setPosition:Pe,getPosition:gi,get disableTextSelection(){return Ui},get enableTextSelection(){return $i},disableImageDrag:Eu,enableImageDrag:Su,preventOutline:zr,restoreOutline:Qn,getSizedParentNode:ku,getScale:La};function Ee(a,c,p,y){if(c&&typeof c=="object")for(var b in c)Pu(a,b,c[b],p);else{c=w(c);for(var A=0,H=c.length;A<H;A++)Pu(a,c[A],p,y)}return this}var _i="_leaflet_events";function it(a,c,p,y){if(arguments.length===1)nd(a),delete a[_i];else if(c&&typeof c=="object")for(var b in c)Cu(a,b,c[b],p);else if(c=w(c),arguments.length===2)nd(a,function(G){return j(c,G)!==-1});else for(var A=0,H=c.length;A<H;A++)Cu(a,c[A],p,y);return this}function nd(a,c){for(var p in a[_i]){var y=p.split(/\d/)[0];(!c||c(y))&&Cu(a,y,null,null,p)}}var yi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Pu(a,c,p,y){var b=c+u(p)+(y?"_"+u(y):"");if(a[_i]&&a[_i][b])return this;var A=function(G){return p.call(y||a,G||window.event)},H=A;!ye.touchNative&&ye.pointer&&c.indexOf("touch")===0?A=Qh(a,c,A):ye.touch&&c==="dblclick"?A=Lo(a,A):"addEventListener"in a?c==="touchstart"||c==="touchmove"||c==="wheel"||c==="mousewheel"?a.addEventListener(yi[c]||c,A,ye.passiveEvents?{passive:!1}:!1):c==="mouseenter"||c==="mouseleave"?(A=function(G){G=G||window.event,Au(a,G)&&H(G)},a.addEventListener(yi[c],A,!1)):a.addEventListener(c,H,!1):a.attachEvent("on"+c,A),a[_i]=a[_i]||{},a[_i][b]=A}function Cu(a,c,p,y,b){b=b||c+u(p)+(y?"_"+u(y):"");var A=a[_i]&&a[_i][b];if(!A)return this;!ye.touchNative&&ye.pointer&&c.indexOf("touch")===0?Xh(a,c,A):ye.touch&&c==="dblclick"?Fr(a,A):"removeEventListener"in a?a.removeEventListener(yi[c]||c,A,!1):a.detachEvent("on"+c,A),a[_i][b]=null}function vi(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function Ps(a){return Pu(a,"wheel",vi),this}function Cs(a){return Ee(a,"mousedown touchstart dblclick contextmenu",vi),a._leaflet_disable_click=!0,this}function xt(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function Xn(a){return xt(a),vi(a),this}function Iu(a){if(a.composedPath)return a.composedPath();for(var c=[],p=a.target;p;)c.push(p),p=p.parentNode;return c}function Na(a,c){if(!c)return new K(a.clientX,a.clientY);var p=La(c),y=p.boundingClientRect;return new K((a.clientX-y.left)/p.x-c.clientLeft,(a.clientY-y.top)/p.y-c.clientTop)}var _t=ye.linux&&ye.chrome?window.devicePixelRatio:ye.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function id(a){return ye.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/_t:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function Au(a,c){var p=c.relatedTarget;if(!p)return!0;try{for(;p&&p!==a;)p=p.parentNode}catch{return!1}return p!==a}var rd={__proto__:null,on:Ee,off:it,stopPropagation:vi,disableScrollPropagation:Ps,disableClickPropagation:Cs,preventDefault:xt,stop:Xn,getPropagationPath:Iu,getMousePosition:Na,getWheelDelta:id,isExternalTarget:Au,addListener:Ee,removeListener:it},Ru=ue.extend({run:function(a,c,p,y){this.stop(),this._el=a,this._inProgress=!0,this._duration=p||.25,this._easeOutPower=1/Math.max(y||.5,.2),this._startPos=gi(a),this._offset=c.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(a){var c=+new Date-this._startTime,p=this._duration*1e3;c<p?this._runFrame(this._easeOut(c/p),a):(this._runFrame(1),this._complete())},_runFrame:function(a,c){var p=this._startPos.add(this._offset.multiplyBy(a));c&&p._round(),Pe(this._el,p),this.fire("step")},_complete:function(){B(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),je=ue.extend({options:{crs:Kt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,c){c=x(this,c),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),c.maxBounds&&this.setMaxBounds(c.maxBounds),c.zoom!==void 0&&(this._zoom=this._limitZoom(c.zoom)),c.center&&c.zoom!==void 0&&this.setView(pe(c.center),c.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Oo&&ye.any3d&&!ye.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ee(this._proxy,yu,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,c,p){if(c=c===void 0?this._zoom:this._limitZoom(c),a=this._limitCenter(pe(a),c,this.options.maxBounds),p=p||{},this._stop(),this._loaded&&!p.reset&&p!==!0){p.animate!==void 0&&(p.zoom=r({animate:p.animate},p.zoom),p.pan=r({animate:p.animate,duration:p.duration},p.pan));var y=this._zoom!==c?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,c,p.zoom):this._tryAnimatedPan(a,p.pan);if(y)return clearTimeout(this._sizeTimer),this}return this._resetView(a,c,p.pan&&p.pan.noMoveStart),this},setZoom:function(a,c){return this._loaded?this.setView(this.getCenter(),a,{zoom:c}):(this._zoom=a,this)},zoomIn:function(a,c){return a=a||(ye.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,c)},zoomOut:function(a,c){return a=a||(ye.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,c)},setZoomAround:function(a,c,p){var y=this.getZoomScale(c),b=this.getSize().divideBy(2),A=a instanceof K?a:this.latLngToContainerPoint(a),H=A.subtract(b).multiplyBy(1-1/y),G=this.containerPointToLatLng(b.add(H));return this.setView(G,c,{zoom:p})},_getBoundsCenterZoom:function(a,c){c=c||{},a=a.getBounds?a.getBounds():be(a);var p=M(c.paddingTopLeft||c.padding||[0,0]),y=M(c.paddingBottomRight||c.padding||[0,0]),b=this.getBoundsZoom(a,!1,p.add(y));if(b=typeof c.maxZoom=="number"?Math.min(c.maxZoom,b):b,b===1/0)return{center:a.getCenter(),zoom:b};var A=y.subtract(p).divideBy(2),H=this.project(a.getSouthWest(),b),G=this.project(a.getNorthEast(),b),Z=this.unproject(H.add(G).divideBy(2).add(A),b);return{center:Z,zoom:b}},fitBounds:function(a,c){if(a=be(a),!a.isValid())throw new Error("Bounds are not valid.");var p=this._getBoundsCenterZoom(a,c);return this.setView(p.center,p.zoom,c)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,c){return this.setView(a,this._zoom,{pan:c})},panBy:function(a,c){if(a=M(a).round(),c=c||{},!a.x&&!a.y)return this.fire("moveend");if(c.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ru,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),c.noMoveStart||this.fire("movestart"),c.animate!==!1){Le(this._mapPane,"leaflet-pan-anim");var p=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,p,c.duration||.25,c.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,c,p){if(p=p||{},p.animate===!1||!ye.any3d)return this.setView(a,c,p);this._stop();var y=this.project(this.getCenter()),b=this.project(a),A=this.getSize(),H=this._zoom;a=pe(a),c=c===void 0?H:c;var G=Math.max(A.x,A.y),Z=G*this.getZoomScale(H,c),ne=b.distanceTo(y)||1,me=1.42,Se=me*me;function De(Vt){var wd=Vt?-1:1,WR=Vt?Z:G,qR=Z*Z-G*G+wd*Se*Se*ne*ne,GR=2*WR*Se*ne,ag=qR/GR,px=Math.sqrt(ag*ag+1)-ag,KR=px<1e-9?-18:Math.log(px);return KR}function In(Vt){return(Math.exp(Vt)-Math.exp(-Vt))/2}function Qt(Vt){return(Math.exp(Vt)+Math.exp(-Vt))/2}function xi(Vt){return In(Vt)/Qt(Vt)}var Fn=De(0);function qa(Vt){return G*(Qt(Fn)/Qt(Fn+me*Vt))}function BR(Vt){return G*(Qt(Fn)*xi(Fn+me*Vt)-In(Fn))/Se}function UR(Vt){return 1-Math.pow(1-Vt,1.5)}var $R=Date.now(),dx=(De(1)-Fn)/me,HR=p.duration?1e3*p.duration:1e3*dx*.8;function fx(){var Vt=(Date.now()-$R)/HR,wd=UR(Vt)*dx;Vt<=1?(this._flyToFrame=D(fx,this),this._move(this.unproject(y.add(b.subtract(y).multiplyBy(BR(wd)/ne)),H),this.getScaleZoom(G/qa(wd),H),{flyTo:!0})):this._move(a,c)._moveEnd(!0)}return this._moveStart(!0,p.noMoveStart),fx.call(this),this},flyToBounds:function(a,c){var p=this._getBoundsCenterZoom(a,c);return this.flyTo(p.center,p.zoom,c)},setMaxBounds:function(a){return a=be(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var c=this.options.minZoom;return this.options.minZoom=a,this._loaded&&c!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var c=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&c!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,c){this._enforcingBounds=!0;var p=this.getCenter(),y=this._limitCenter(p,this._zoom,be(a));return p.equals(y)||this.panTo(y,c),this._enforcingBounds=!1,this},panInside:function(a,c){c=c||{};var p=M(c.paddingTopLeft||c.padding||[0,0]),y=M(c.paddingBottomRight||c.padding||[0,0]),b=this.project(this.getCenter()),A=this.project(a),H=this.getPixelBounds(),G=ce([H.min.add(p),H.max.subtract(y)]),Z=G.getSize();if(!G.contains(A)){this._enforcingBounds=!0;var ne=A.subtract(G.getCenter()),me=G.extend(A).getSize().subtract(Z);b.x+=ne.x<0?-me.x:me.x,b.y+=ne.y<0?-me.y:me.y,this.panTo(this.unproject(b),c),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=r({animate:!1,pan:!0},a===!0?{animate:!0}:a);var c=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var p=this.getSize(),y=c.divideBy(2).round(),b=p.divideBy(2).round(),A=y.subtract(b);return!A.x&&!A.y?this:(a.animate&&a.pan?this.panBy(A):(a.pan&&this._rawPanBy(A),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:c,newSize:p}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=r({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var c=o(this._handleGeolocationResponse,this),p=o(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(c,p,a):navigator.geolocation.getCurrentPosition(c,p,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var c=a.code,p=a.message||(c===1?"permission denied":c===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:c,message:"Geolocation error: "+p+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var c=a.coords.latitude,p=a.coords.longitude,y=new we(c,p),b=y.toBounds(a.coords.accuracy*2),A=this._locateOptions;if(A.setView){var H=this.getBoundsZoom(b);this.setView(y,A.maxZoom?Math.min(H,A.maxZoom):H)}var G={latlng:y,bounds:b,timestamp:a.timestamp};for(var Z in a.coords)typeof a.coords[Z]=="number"&&(G[Z]=a.coords[Z]);this.fire("locationfound",G)}},addHandler:function(a,c){if(!c)return this;var p=this[a]=new c(this);return this._handlers.push(p),this.options[a]&&p.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),st(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(B(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)st(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,c){var p="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),y=Be("div",p,c||this._mapPane);return a&&(this._panes[a]=y),y},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),c=this.unproject(a.getBottomLeft()),p=this.unproject(a.getTopRight());return new U(c,p)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,c,p){a=be(a),p=M(p||[0,0]);var y=this.getZoom()||0,b=this.getMinZoom(),A=this.getMaxZoom(),H=a.getNorthWest(),G=a.getSouthEast(),Z=this.getSize().subtract(p),ne=ce(this.project(G,y),this.project(H,y)).getSize(),me=ye.any3d?this.options.zoomSnap:1,Se=Z.x/ne.x,De=Z.y/ne.y,In=c?Math.max(Se,De):Math.min(Se,De);return y=this.getScaleZoom(In,y),me&&(y=Math.round(y/(me/100))*(me/100),y=c?Math.ceil(y/me)*me:Math.floor(y/me)*me),Math.max(b,Math.min(A,y))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new K(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,c){var p=this._getTopLeftPoint(a,c);return new fe(p,p.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,c){var p=this.options.crs;return c=c===void 0?this._zoom:c,p.scale(a)/p.scale(c)},getScaleZoom:function(a,c){var p=this.options.crs;c=c===void 0?this._zoom:c;var y=p.zoom(a*p.scale(c));return isNaN(y)?1/0:y},project:function(a,c){return c=c===void 0?this._zoom:c,this.options.crs.latLngToPoint(pe(a),c)},unproject:function(a,c){return c=c===void 0?this._zoom:c,this.options.crs.pointToLatLng(M(a),c)},layerPointToLatLng:function(a){var c=M(a).add(this.getPixelOrigin());return this.unproject(c)},latLngToLayerPoint:function(a){var c=this.project(pe(a))._round();return c._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(pe(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(be(a))},distance:function(a,c){return this.options.crs.distance(pe(a),pe(c))},containerPointToLayerPoint:function(a){return M(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return M(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var c=this.containerPointToLayerPoint(M(a));return this.layerPointToLatLng(c)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(pe(a)))},mouseEventToContainerPoint:function(a){return Na(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var c=this._container=vu(a);if(c){if(c._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ee(c,"scroll",this._onScroll,this),this._containerId=u(c)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&ye.any3d,Le(a,"leaflet-container"+(ye.touch?" leaflet-touch":"")+(ye.retina?" leaflet-retina":"")+(ye.ielt9?" leaflet-oldie":"")+(ye.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var c=Ss(a,"position");c!=="absolute"&&c!=="relative"&&c!=="fixed"&&c!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Pe(this._mapPane,new K(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Le(a.markerPane,"leaflet-zoom-hide"),Le(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,c,p){Pe(this._mapPane,new K(0,0));var y=!this._loaded;this._loaded=!0,c=this._limitZoom(c),this.fire("viewprereset");var b=this._zoom!==c;this._moveStart(b,p)._move(a,c)._moveEnd(b),this.fire("viewreset"),y&&this.fire("load")},_moveStart:function(a,c){return a&&this.fire("zoomstart"),c||this.fire("movestart"),this},_move:function(a,c,p,y){c===void 0&&(c=this._zoom);var b=this._zoom!==c;return this._zoom=c,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),y?p&&p.pinch&&this.fire("zoom",p):((b||p&&p.pinch)&&this.fire("zoom",p),this.fire("move",p)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return B(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){Pe(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[u(this._container)]=this;var c=a?it:Ee;c(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&c(window,"resize",this._onResize,this),ye.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){B(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,c){for(var p=[],y,b=c==="mouseout"||c==="mouseover",A=a.target||a.srcElement,H=!1;A;){if(y=this._targets[u(A)],y&&(c==="click"||c==="preclick")&&this._draggableMoved(y)){H=!0;break}if(y&&y.listens(c,!0)&&(b&&!Au(A,a)||(p.push(y),b))||A===this._container)break;A=A.parentNode}return!p.length&&!H&&!b&&this.listens(c,!0)&&(p=[this]),p},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var c=a.target||a.srcElement;if(!(!this._loaded||c._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(c))){var p=a.type;p==="mousedown"&&zr(c),this._fireDOMEvent(a,p)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,c,p){if(a.type==="click"){var y=r({},a);y.type="preclick",this._fireDOMEvent(y,y.type,p)}var b=this._findEventTargets(a,c);if(p){for(var A=[],H=0;H<p.length;H++)p[H].listens(c,!0)&&A.push(p[H]);b=A.concat(b)}if(b.length){c==="contextmenu"&&xt(a);var G=b[0],Z={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var ne=G.getLatLng&&(!G._radius||G._radius<=10);Z.containerPoint=ne?this.latLngToContainerPoint(G.getLatLng()):this.mouseEventToContainerPoint(a),Z.layerPoint=this.containerPointToLayerPoint(Z.containerPoint),Z.latlng=ne?G.getLatLng():this.layerPointToLatLng(Z.layerPoint)}for(H=0;H<b.length;H++)if(b[H].fire(c,Z,!0),Z.originalEvent._stopped||b[H].options.bubblingMouseEvents===!1&&j(this._mouseEvents,c)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,c=this._handlers.length;a<c;a++)this._handlers[a].disable()},whenReady:function(a,c){return this._loaded?a.call(c||this,{target:this}):this.on("load",a,c),this},_getMapPanePos:function(){return gi(this._mapPane)||new K(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,c){var p=a&&c!==void 0?this._getNewPixelOrigin(a,c):this.getPixelOrigin();return p.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,c){var p=this.getSize()._divideBy(2);return this.project(a,c)._subtract(p)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,c,p){var y=this._getNewPixelOrigin(p,c);return this.project(a,c)._subtract(y)},_latLngBoundsToNewLayerBounds:function(a,c,p){var y=this._getNewPixelOrigin(p,c);return ce([this.project(a.getSouthWest(),c)._subtract(y),this.project(a.getNorthWest(),c)._subtract(y),this.project(a.getSouthEast(),c)._subtract(y),this.project(a.getNorthEast(),c)._subtract(y)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,c,p){if(!p)return a;var y=this.project(a,c),b=this.getSize().divideBy(2),A=new fe(y.subtract(b),y.add(b)),H=this._getBoundsOffset(A,p,c);return Math.abs(H.x)<=1&&Math.abs(H.y)<=1?a:this.unproject(y.add(H),c)},_limitOffset:function(a,c){if(!c)return a;var p=this.getPixelBounds(),y=new fe(p.min.add(a),p.max.add(a));return a.add(this._getBoundsOffset(y,c))},_getBoundsOffset:function(a,c,p){var y=ce(this.project(c.getNorthEast(),p),this.project(c.getSouthWest(),p)),b=y.min.subtract(a.min),A=y.max.subtract(a.max),H=this._rebound(b.x,-A.x),G=this._rebound(b.y,-A.y);return new K(H,G)},_rebound:function(a,c){return a+c>0?Math.round(a-c)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(c))},_limitZoom:function(a){var c=this.getMinZoom(),p=this.getMaxZoom(),y=ye.any3d?this.options.zoomSnap:1;return y&&(a=Math.round(a/y)*y),Math.max(c,Math.min(p,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){gt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,c){var p=this._getCenterOffset(a)._trunc();return(c&&c.animate)!==!0&&!this.getSize().contains(p)?!1:(this.panBy(p,c),!0)},_createAnimProxy:function(){var a=this._proxy=Be("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(c){var p=No,y=this._proxy.style[p];ar(this._proxy,this.project(c.center,c.zoom),this.getZoomScale(c.zoom,1)),y===this._proxy.style[p]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){st(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),c=this.getZoom();ar(this._proxy,this.project(a,c),this.getZoomScale(c,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,c,p){if(this._animatingZoom)return!0;if(p=p||{},!this._zoomAnimated||p.animate===!1||this._nothingToAnimate()||Math.abs(c-this._zoom)>this.options.zoomAnimationThreshold)return!1;var y=this.getZoomScale(c),b=this._getCenterOffset(a)._divideBy(1-1/y);return p.animate!==!0&&!this.getSize().contains(b)?!1:(D(function(){this._moveStart(!0,p.noMoveStart||!1)._animateZoom(a,c,!0)},this),!0)},_animateZoom:function(a,c,p,y){this._mapPane&&(p&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=c,Le(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:c,noUpdate:y}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&gt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Oa(a,c){return new je(a,c)}var Dn=ee.extend({options:{position:"topright"},initialize:function(a){x(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var c=this._map;return c&&c.removeControl(this),this.options.position=a,c&&c.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var c=this._container=this.onAdd(a),p=this.getPosition(),y=a._controlCorners[p];return Le(c,"leaflet-control"),p.indexOf("bottom")!==-1?y.insertBefore(c,y.firstChild):y.appendChild(c),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(st(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),Cn=function(a){return new Dn(a)};je.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},c="leaflet-",p=this._controlContainer=Be("div",c+"control-container",this._container);function y(b,A){var H=c+b+" "+c+A;a[b+A]=Be("div",H,p)}y("top","left"),y("top","right"),y("bottom","left"),y("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)st(this._controlCorners[a]);st(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Lu=Dn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,c,p,y){return p<y?-1:y<p?1:0}},initialize:function(a,c,p){x(this,p),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var y in a)this._addLayer(a[y],y);for(y in c)this._addLayer(c[y],y,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return Dn.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,c){return this._addLayer(a,c),this._map?this._update():this},addOverlay:function(a,c){return this._addLayer(a,c,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var c=this._getLayer(u(a));return c&&this._layers.splice(this._layers.indexOf(c),1),this._map?this._update():this},expand:function(){Le(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(Le(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):gt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return gt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",c=this._container=Be("div",a),p=this.options.collapsed;c.setAttribute("aria-haspopup",!0),Cs(c),Ps(c);var y=this._section=Be("section",a+"-list");p&&(this._map.on("click",this.collapse,this),Ee(c,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var b=this._layersLink=Be("a",a+"-toggle",c);b.href="#",b.title="Layers",b.setAttribute("role","button"),Ee(b,{keydown:function(A){A.keyCode===13&&this._expandSafely()},click:function(A){xt(A),this._expandSafely()}},this),p||this.expand(),this._baseLayersList=Be("div",a+"-base",y),this._separator=Be("div",a+"-separator",y),this._overlaysList=Be("div",a+"-overlays",y),c.appendChild(y)},_getLayer:function(a){for(var c=0;c<this._layers.length;c++)if(this._layers[c]&&u(this._layers[c].layer)===a)return this._layers[c]},_addLayer:function(a,c,p){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:c,overlay:p}),this.options.sortLayers&&this._layers.sort(o(function(y,b){return this.options.sortFunction(y.layer,b.layer,y.name,b.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Mo(this._baseLayersList),Mo(this._overlaysList),this._layerControlInputs=[];var a,c,p,y,b=0;for(p=0;p<this._layers.length;p++)y=this._layers[p],this._addItem(y),c=c||y.overlay,a=a||!y.overlay,b+=y.overlay?0:1;return this.options.hideSingleBase&&(a=a&&b>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=c&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var c=this._getLayer(u(a.target)),p=c.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;p&&this._map.fire(p,c)},_createRadioElement:function(a,c){var p='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(c?' checked="checked"':"")+"/>",y=document.createElement("div");return y.innerHTML=p,y.firstChild},_addItem:function(a){var c=document.createElement("label"),p=this._map.hasLayer(a.layer),y;a.overlay?(y=document.createElement("input"),y.type="checkbox",y.className="leaflet-control-layers-selector",y.defaultChecked=p):y=this._createRadioElement("leaflet-base-layers_"+u(this),p),this._layerControlInputs.push(y),y.layerId=u(a.layer),Ee(y,"click",this._onInputClick,this);var b=document.createElement("span");b.innerHTML=" "+a.name;var A=document.createElement("span");c.appendChild(A),A.appendChild(y),A.appendChild(b);var H=a.overlay?this._overlaysList:this._baseLayersList;return H.appendChild(c),this._checkDisabledLayers(),c},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,c,p,y=[],b=[];this._handlingClick=!0;for(var A=a.length-1;A>=0;A--)c=a[A],p=this._getLayer(c.layerId).layer,c.checked?y.push(p):c.checked||b.push(p);for(A=0;A<b.length;A++)this._map.hasLayer(b[A])&&this._map.removeLayer(b[A]);for(A=0;A<y.length;A++)this._map.hasLayer(y[A])||this._map.addLayer(y[A]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,c,p,y=this._map.getZoom(),b=a.length-1;b>=0;b--)c=a[b],p=this._getLayer(c.layerId).layer,c.disabled=p.options.minZoom!==void 0&&y<p.options.minZoom||p.options.maxZoom!==void 0&&y>p.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,Ee(a,"click",xt),this.expand();var c=this;setTimeout(function(){it(a,"click",xt),c._preventClick=!1})}}),tg=function(a,c,p){return new Lu(a,c,p)},Br=Dn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var c="leaflet-control-zoom",p=Be("div",c+" leaflet-bar"),y=this.options;return this._zoomInButton=this._createButton(y.zoomInText,y.zoomInTitle,c+"-in",p,this._zoomIn),this._zoomOutButton=this._createButton(y.zoomOutText,y.zoomOutTitle,c+"-out",p,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),p},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,c,p,y,b){var A=Be("a",p,y);return A.innerHTML=a,A.href="#",A.title=c,A.setAttribute("role","button"),A.setAttribute("aria-label",c),Cs(A),Ee(A,"click",Xn),Ee(A,"click",b,this),Ee(A,"click",this._refocusOnMap,this),A},_updateDisabled:function(){var a=this._map,c="leaflet-disabled";gt(this._zoomInButton,c),gt(this._zoomOutButton,c),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(Le(this._zoomOutButton,c),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(Le(this._zoomInButton,c),this._zoomInButton.setAttribute("aria-disabled","true"))}});je.mergeOptions({zoomControl:!0}),je.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Br,this.addControl(this.zoomControl))});var sd=function(a){return new Br(a)},Ma=Dn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var c="leaflet-control-scale",p=Be("div",c),y=this.options;return this._addScales(y,c+"-line",p),a.on(y.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),p},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,c,p){a.metric&&(this._mScale=Be("div",c,p)),a.imperial&&(this._iScale=Be("div",c,p))},_update:function(){var a=this._map,c=a.getSize().y/2,p=a.distance(a.containerPointToLatLng([0,c]),a.containerPointToLatLng([this.options.maxWidth,c]));this._updateScales(p)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var c=this._getRoundNum(a),p=c<1e3?c+" m":c/1e3+" km";this._updateScale(this._mScale,p,c/a)},_updateImperial:function(a){var c=a*3.2808399,p,y,b;c>5280?(p=c/5280,y=this._getRoundNum(p),this._updateScale(this._iScale,y+" mi",y/p)):(b=this._getRoundNum(c),this._updateScale(this._iScale,b+" ft",b/c))},_updateScale:function(a,c,p){a.style.width=Math.round(this.options.maxWidth*p)+"px",a.innerHTML=c},_getRoundNum:function(a){var c=Math.pow(10,(Math.floor(a)+"").length-1),p=a/c;return p=p>=10?10:p>=5?5:p>=3?3:p>=2?2:1,c*p}}),Da=function(a){return new Ma(a)},od='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Is=Dn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ye.inlineSvg?od+" ":"")+"Leaflet</a>"},initialize:function(a){x(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=Be("div","leaflet-control-attribution"),Cs(this._container);for(var c in a._layers)a._layers[c].getAttribution&&this.addAttribution(a._layers[c].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var c in this._attributions)this._attributions[c]&&a.push(c);var p=[];this.options.prefix&&p.push(this.options.prefix),a.length&&p.push(a.join(", ")),this._container.innerHTML=p.join(' <span aria-hidden="true">|</span> ')}}});je.mergeOptions({attributionControl:!0}),je.addInitHook(function(){this.options.attributionControl&&new Is().addTo(this)});var ng=function(a){return new Is(a)};Dn.Layers=Lu,Dn.Zoom=Br,Dn.Scale=Ma,Dn.Attribution=Is,Cn.layers=tg,Cn.zoom=sd,Cn.scale=Da,Cn.attribution=ng;var Jn=ee.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Jn.addTo=function(a,c){return a.addHandler(c,this),this};var Do={Events:ae},Nu=ye.touch?"touchstart mousedown":"mousedown",Hi=ue.extend({options:{clickTolerance:3},initialize:function(a,c,p,y){x(this,y),this._element=a,this._dragStartTarget=c||a,this._preventOutline=p},enable:function(){this._enabled||(Ee(this._dragStartTarget,Nu,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Hi._dragging===this&&this.finishDrag(!0),it(this._dragStartTarget,Nu,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!wu(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){Hi._dragging===this&&this.finishDrag();return}if(!(Hi._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(Hi._dragging=this,this._preventOutline&&zr(this._element),Eu(),Ui(),!this._moving)){this.fire("down");var c=a.touches?a.touches[0]:a,p=ku(this._element);this._startPoint=new K(c.clientX,c.clientY),this._startPos=gi(this._element),this._parentScale=La(p);var y=a.type==="mousedown";Ee(document,y?"mousemove":"touchmove",this._onMove,this),Ee(document,y?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var c=a.touches&&a.touches.length===1?a.touches[0]:a,p=new K(c.clientX,c.clientY)._subtract(this._startPoint);!p.x&&!p.y||Math.abs(p.x)+Math.abs(p.y)<this.options.clickTolerance||(p.x/=this._parentScale.x,p.y/=this._parentScale.y,xt(a),this._moved||(this.fire("dragstart"),this._moved=!0,Le(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Le(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(p),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),Pe(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){gt(document.body,"leaflet-dragging"),this._lastTarget&&(gt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),it(document,"mousemove touchmove",this._onMove,this),it(document,"mouseup touchend touchcancel",this._onUp,this),Su(),$i();var c=this._moved&&this._moving;this._moving=!1,Hi._dragging=!1,c&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function Fa(a,c,p){var y,b=[1,4,2,8],A,H,G,Z,ne,me,Se,De;for(A=0,me=a.length;A<me;A++)a[A]._code=lr(a[A],c);for(G=0;G<4;G++){for(Se=b[G],y=[],A=0,me=a.length,H=me-1;A<me;H=A++)Z=a[A],ne=a[H],Z._code&Se?ne._code&Se||(De=Yt(ne,Z,Se,c,p),De._code=lr(De,c),y.push(De)):(ne._code&Se&&(De=Yt(ne,Z,Se,c,p),De._code=lr(De,c),y.push(De)),y.push(Z));a=y}return a}function ja(a,c){var p,y,b,A,H,G,Z,ne,me;if(!a||a.length===0)throw new Error("latlngs not passed");f(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var Se=pe([0,0]),De=be(a),In=De.getNorthWest().distanceTo(De.getSouthWest())*De.getNorthEast().distanceTo(De.getNorthWest());In<1700&&(Se=Va(a));var Qt=a.length,xi=[];for(p=0;p<Qt;p++){var Fn=pe(a[p]);xi.push(c.project(pe([Fn.lat-Se.lat,Fn.lng-Se.lng])))}for(G=Z=ne=0,p=0,y=Qt-1;p<Qt;y=p++)b=xi[p],A=xi[y],H=b.y*A.x-A.y*b.x,Z+=(b.x+A.x)*H,ne+=(b.y+A.y)*H,G+=H*3;G===0?me=xi[0]:me=[Z/G,ne/G];var qa=c.unproject(M(me));return pe([qa.lat+Se.lat,qa.lng+Se.lng])}function Va(a){for(var c=0,p=0,y=0,b=0;b<a.length;b++){var A=pe(a[b]);c+=A.lat,p+=A.lng,y++}return pe([c/y,p/y])}var za={__proto__:null,clipPolygon:Fa,polygonCenter:ja,centroid:Va};function Ou(a,c){if(!c||!a.length)return a.slice();var p=c*c;return a=ld(a,p),a=ad(a,p),a}function Mu(a,c,p){return Math.sqrt(wi(a,c,p,!0))}function Ur(a,c,p){return wi(a,c,p)}function ad(a,c){var p=a.length,y=typeof Uint8Array<"u"?Uint8Array:Array,b=new y(p);b[0]=b[p-1]=1,Ba(a,b,c,0,p-1);var A,H=[];for(A=0;A<p;A++)b[A]&&H.push(a[A]);return H}function Ba(a,c,p,y,b){var A=0,H,G,Z;for(G=y+1;G<=b-1;G++)Z=wi(a[G],a[y],a[b],!0),Z>A&&(H=G,A=Z);A>p&&(c[H]=1,Ba(a,c,p,y,H),Ba(a,c,p,H,b))}function ld(a,c){for(var p=[a[0]],y=1,b=0,A=a.length;y<A;y++)ud(a[y],a[b])>c&&(p.push(a[y]),b=y);return b<A-1&&p.push(a[A-1]),p}var Du;function Fo(a,c,p,y,b){var A=y?Du:lr(a,p),H=lr(c,p),G,Z,ne;for(Du=H;;){if(!(A|H))return[a,c];if(A&H)return!1;G=A||H,Z=Yt(a,c,G,p,b),ne=lr(Z,p),G===A?(a=Z,A=ne):(c=Z,H=ne)}}function Yt(a,c,p,y,b){var A=c.x-a.x,H=c.y-a.y,G=y.min,Z=y.max,ne,me;return p&8?(ne=a.x+A*(Z.y-a.y)/H,me=Z.y):p&4?(ne=a.x+A*(G.y-a.y)/H,me=G.y):p&2?(ne=Z.x,me=a.y+H*(Z.x-a.x)/A):p&1&&(ne=G.x,me=a.y+H*(G.x-a.x)/A),new K(ne,me,b)}function lr(a,c){var p=0;return a.x<c.min.x?p|=1:a.x>c.max.x&&(p|=2),a.y<c.min.y?p|=4:a.y>c.max.y&&(p|=8),p}function ud(a,c){var p=c.x-a.x,y=c.y-a.y;return p*p+y*y}function wi(a,c,p,y){var b=c.x,A=c.y,H=p.x-b,G=p.y-A,Z=H*H+G*G,ne;return Z>0&&(ne=((a.x-b)*H+(a.y-A)*G)/Z,ne>1?(b=p.x,A=p.y):ne>0&&(b+=H*ne,A+=G*ne)),H=a.x-b,G=a.y-A,y?H*H+G*G:new K(b,A)}function f(a){return!P(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function v(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),f(a)}function T(a,c){var p,y,b,A,H,G,Z,ne;if(!a||a.length===0)throw new Error("latlngs not passed");f(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var me=pe([0,0]),Se=be(a),De=Se.getNorthWest().distanceTo(Se.getSouthWest())*Se.getNorthEast().distanceTo(Se.getNorthWest());De<1700&&(me=Va(a));var In=a.length,Qt=[];for(p=0;p<In;p++){var xi=pe(a[p]);Qt.push(c.project(pe([xi.lat-me.lat,xi.lng-me.lng])))}for(p=0,y=0;p<In-1;p++)y+=Qt[p].distanceTo(Qt[p+1])/2;if(y===0)ne=Qt[0];else for(p=0,A=0;p<In-1;p++)if(H=Qt[p],G=Qt[p+1],b=H.distanceTo(G),A+=b,A>y){Z=(A-y)/b,ne=[G.x-Z*(G.x-H.x),G.y-Z*(G.y-H.y)];break}var Fn=c.unproject(M(ne));return pe([Fn.lat+me.lat,Fn.lng+me.lng])}var O={__proto__:null,simplify:Ou,pointToSegmentDistance:Mu,closestPointOnSegment:Ur,clipSegment:Fo,_getEdgeIntersection:Yt,_getBitCode:lr,_sqClosestPointOnSegment:wi,isFlat:f,_flat:v,polylineCenter:T},q={project:function(a){return new K(a.lng,a.lat)},unproject:function(a){return new we(a.y,a.x)},bounds:new fe([-180,-90],[180,90])},Q={R:6378137,R_MINOR:6356752314245179e-9,bounds:new fe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var c=Math.PI/180,p=this.R,y=a.lat*c,b=this.R_MINOR/p,A=Math.sqrt(1-b*b),H=A*Math.sin(y),G=Math.tan(Math.PI/4-y/2)/Math.pow((1-H)/(1+H),A/2);return y=-p*Math.log(Math.max(G,1e-10)),new K(a.lng*c*p,y)},unproject:function(a){for(var c=180/Math.PI,p=this.R,y=this.R_MINOR/p,b=Math.sqrt(1-y*y),A=Math.exp(-a.y/p),H=Math.PI/2-2*Math.atan(A),G=0,Z=.1,ne;G<15&&Math.abs(Z)>1e-7;G++)ne=b*Math.sin(H),ne=Math.pow((1-ne)/(1+ne),b/2),Z=Math.PI/2-2*Math.atan(A*ne)-H,H+=Z;return new we(H*c,a.x*c/p)}},le={__proto__:null,LonLat:q,Mercator:Q,SphericalMercator:Rt},Xe=r({},Fe,{code:"EPSG:3395",projection:Q,transformation:function(){var a=.5/(Math.PI*Q.R);return mt(a,.5,-a,.5)}()}),jt=r({},Fe,{code:"EPSG:4326",projection:q,transformation:mt(1/180,1,-1/180,.5)}),He=r({},Ie,{projection:q,transformation:mt(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,c){var p=c.lng-a.lng,y=c.lat-a.lat;return Math.sqrt(p*p+y*y)},infinite:!0});Ie.Earth=Fe,Ie.EPSG3395=Xe,Ie.EPSG3857=Kt,Ie.EPSG900913=On,Ie.EPSG4326=jt,Ie.Simple=He;var rt=ue.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[u(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[u(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var c=a.target;if(c.hasLayer(this)){if(this._map=c,this._zoomAnimated=c._zoomAnimated,this.getEvents){var p=this.getEvents();c.on(p,this),this.once("remove",function(){c.off(p,this)},this)}this.onAdd(c),this.fire("add"),c.fire("layeradd",{layer:this})}}});je.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var c=u(a);return this._layers[c]?this:(this._layers[c]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var c=u(a);return this._layers[c]?(this._loaded&&a.onRemove(this),delete this._layers[c],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return u(a)in this._layers},eachLayer:function(a,c){for(var p in this._layers)a.call(c,this._layers[p]);return this},_addLayers:function(a){a=a?P(a)?a:[a]:[];for(var c=0,p=a.length;c<p;c++)this.addLayer(a[c])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[u(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var c=u(a);this._zoomBoundLayers[c]&&(delete this._zoomBoundLayers[c],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,c=-1/0,p=this._getZoomSpan();for(var y in this._zoomBoundLayers){var b=this._zoomBoundLayers[y].options;a=b.minZoom===void 0?a:Math.min(a,b.minZoom),c=b.maxZoom===void 0?c:Math.max(c,b.maxZoom)}this._layersMaxZoom=c===-1/0?void 0:c,this._layersMinZoom=a===1/0?void 0:a,p!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var bt=rt.extend({initialize:function(a,c){x(this,c),this._layers={};var p,y;if(a)for(p=0,y=a.length;p<y;p++)this.addLayer(a[p])},addLayer:function(a){var c=this.getLayerId(a);return this._layers[c]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var c=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[c]&&this._map.removeLayer(this._layers[c]),delete this._layers[c],this},hasLayer:function(a){var c=typeof a=="number"?a:this.getLayerId(a);return c in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var c=Array.prototype.slice.call(arguments,1),p,y;for(p in this._layers)y=this._layers[p],y[a]&&y[a].apply(y,c);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,c){for(var p in this._layers)a.call(c,this._layers[p]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return u(a)}}),As=function(a,c){return new bt(a,c)},Lt=bt.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),bt.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),bt.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new U;for(var c in this._layers){var p=this._layers[c];a.extend(p.getBounds?p.getBounds():p.getLatLng())}return a}}),Ua=function(a,c){return new Lt(a,c)},ur=ee.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){x(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,c){var p=this._getIconUrl(a);if(!p){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var y=this._createImg(p,c&&c.tagName==="IMG"?c:null);return this._setIconStyles(y,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),y},_setIconStyles:function(a,c){var p=this.options,y=p[c+"Size"];typeof y=="number"&&(y=[y,y]);var b=M(y),A=M(c==="shadow"&&p.shadowAnchor||p.iconAnchor||b&&b.divideBy(2,!0));a.className="leaflet-marker-"+c+" "+(p.className||""),A&&(a.style.marginLeft=-A.x+"px",a.style.marginTop=-A.y+"px"),b&&(a.style.width=b.x+"px",a.style.height=b.y+"px")},_createImg:function(a,c){return c=c||document.createElement("img"),c.src=a,c},_getIconUrl:function(a){return ye.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function bR(a){return new ur(a)}var Fu=ur.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof Fu.imagePath!="string"&&(Fu.imagePath=this._detectIconPath()),(this.options.imagePath||Fu.imagePath)+ur.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var c=function(p,y,b){var A=y.exec(p);return A&&A[b]};return a=c(a,/^url\((['"])?(.+)\1\)$/,2),a&&c(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=Be("div","leaflet-default-icon-path",document.body),c=Ss(a,"background-image")||Ss(a,"backgroundImage");if(document.body.removeChild(a),c=this._stripUrl(c),c)return c;var p=document.querySelector('link[href$="leaflet.css"]');return p?p.href.substring(0,p.href.length-11-1):""}}),Gw=Jn.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new Hi(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Le(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&gt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var c=this._marker,p=c._map,y=this._marker.options.autoPanSpeed,b=this._marker.options.autoPanPadding,A=gi(c._icon),H=p.getPixelBounds(),G=p.getPixelOrigin(),Z=ce(H.min._subtract(G).add(b),H.max._subtract(G).subtract(b));if(!Z.contains(A)){var ne=M((Math.max(Z.max.x,A.x)-Z.max.x)/(H.max.x-Z.max.x)-(Math.min(Z.min.x,A.x)-Z.min.x)/(H.min.x-Z.min.x),(Math.max(Z.max.y,A.y)-Z.max.y)/(H.max.y-Z.max.y)-(Math.min(Z.min.y,A.y)-Z.min.y)/(H.min.y-Z.min.y)).multiplyBy(y);p.panBy(ne,{animate:!1}),this._draggable._newPos._add(ne),this._draggable._startPos._add(ne),Pe(c._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=D(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(B(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,a)))},_onDrag:function(a){var c=this._marker,p=c._shadow,y=gi(c._icon),b=c._map.layerPointToLatLng(y);p&&Pe(p,y),c._latlng=b,a.latlng=b,a.oldLatLng=this._oldLatLng,c.fire("move",a).fire("drag",a)},_onDragEnd:function(a){B(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),cd=rt.extend({options:{icon:new Fu,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,c){x(this,c),this._latlng=pe(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var c=this._latlng;return this._latlng=pe(a),this.update(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,c="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),p=a.icon.createIcon(this._icon),y=!1;p!==this._icon&&(this._icon&&this._removeIcon(),y=!0,a.title&&(p.title=a.title),p.tagName==="IMG"&&(p.alt=a.alt||"")),Le(p,c),a.keyboard&&(p.tabIndex="0",p.setAttribute("role","button")),this._icon=p,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ee(p,"focus",this._panOnFocus,this);var b=a.icon.createShadow(this._shadow),A=!1;b!==this._shadow&&(this._removeShadow(),A=!0),b&&(Le(b,c),b.alt=""),this._shadow=b,a.opacity<1&&this._updateOpacity(),y&&this.getPane().appendChild(this._icon),this._initInteraction(),b&&A&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&it(this._icon,"focus",this._panOnFocus,this),st(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&st(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&Pe(this._icon,a),this._shadow&&Pe(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var c=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(c)},_initInteraction:function(){if(this.options.interactive&&(Le(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Gw)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Gw(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&Pt(this._icon,a),this._shadow&&Pt(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var c=this.options.icon.options,p=c.iconSize?M(c.iconSize):M(0,0),y=c.iconAnchor?M(c.iconAnchor):M(0,0);a.panInside(this._latlng,{paddingTopLeft:y,paddingBottomRight:p.subtract(y)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ER(a,c){return new cd(a,c)}var Rs=rt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return x(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),hd=Rs.extend({options:{fill:!0,radius:10},initialize:function(a,c){x(this,c),this._latlng=pe(a),this._radius=this.options.radius},setLatLng:function(a){var c=this._latlng;return this._latlng=pe(a),this.redraw(),this.fire("move",{oldLatLng:c,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var c=a&&a.radius||this._radius;return Rs.prototype.setStyle.call(this,a),this.setRadius(c),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,c=this._radiusY||a,p=this._clickTolerance(),y=[a+p,c+p];this._pxBounds=new fe(this._point.subtract(y),this._point.add(y))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function SR(a,c){return new hd(a,c)}var ig=hd.extend({initialize:function(a,c,p){if(typeof c=="number"&&(c=r({},p,{radius:c})),x(this,c),this._latlng=pe(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new U(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:Rs.prototype.setStyle,_project:function(){var a=this._latlng.lng,c=this._latlng.lat,p=this._map,y=p.options.crs;if(y.distance===Fe.distance){var b=Math.PI/180,A=this._mRadius/Fe.R/b,H=p.project([c+A,a]),G=p.project([c-A,a]),Z=H.add(G).divideBy(2),ne=p.unproject(Z).lat,me=Math.acos((Math.cos(A*b)-Math.sin(c*b)*Math.sin(ne*b))/(Math.cos(c*b)*Math.cos(ne*b)))/b;(isNaN(me)||me===0)&&(me=A/Math.cos(Math.PI/180*c)),this._point=Z.subtract(p.getPixelOrigin()),this._radius=isNaN(me)?0:Z.x-p.project([ne,a-me]).x,this._radiusY=Z.y-H.y}else{var Se=y.unproject(y.project(this._latlng).subtract([this._mRadius,0]));this._point=p.latLngToLayerPoint(this._latlng),this._radius=this._point.x-p.latLngToLayerPoint(Se).x}this._updateBounds()}});function TR(a,c,p){return new ig(a,c,p)}var $r=Rs.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,c){x(this,c),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var c=1/0,p=null,y=wi,b,A,H=0,G=this._parts.length;H<G;H++)for(var Z=this._parts[H],ne=1,me=Z.length;ne<me;ne++){b=Z[ne-1],A=Z[ne];var Se=y(a,b,A,!0);Se<c&&(c=Se,p=y(a,b,A))}return p&&(p.distance=Math.sqrt(c)),p},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return T(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,c){return c=c||this._defaultShape(),a=pe(a),c.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new U,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return f(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var c=[],p=f(a),y=0,b=a.length;y<b;y++)p?(c[y]=pe(a[y]),this._bounds.extend(c[y])):c[y]=this._convertLatLngs(a[y]);return c},_project:function(){var a=new fe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),c=new K(a,a);this._rawPxBounds&&(this._pxBounds=new fe([this._rawPxBounds.min.subtract(c),this._rawPxBounds.max.add(c)]))},_projectLatlngs:function(a,c,p){var y=a[0]instanceof we,b=a.length,A,H;if(y){for(H=[],A=0;A<b;A++)H[A]=this._map.latLngToLayerPoint(a[A]),p.extend(H[A]);c.push(H)}else for(A=0;A<b;A++)this._projectLatlngs(a[A],c,p)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var c=this._parts,p,y,b,A,H,G,Z;for(p=0,b=0,A=this._rings.length;p<A;p++)for(Z=this._rings[p],y=0,H=Z.length;y<H-1;y++)G=Fo(Z[y],Z[y+1],a,y,!0),G&&(c[b]=c[b]||[],c[b].push(G[0]),(G[1]!==Z[y+1]||y===H-2)&&(c[b].push(G[1]),b++))}},_simplifyPoints:function(){for(var a=this._parts,c=this.options.smoothFactor,p=0,y=a.length;p<y;p++)a[p]=Ou(a[p],c)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,c){var p,y,b,A,H,G,Z=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(p=0,A=this._parts.length;p<A;p++)for(G=this._parts[p],y=0,H=G.length,b=H-1;y<H;b=y++)if(!(!c&&y===0)&&Mu(a,G[b],G[y])<=Z)return!0;return!1}});function kR(a,c){return new $r(a,c)}$r._flat=v;var $a=$r.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ja(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var c=$r.prototype._convertLatLngs.call(this,a),p=c.length;return p>=2&&c[0]instanceof we&&c[0].equals(c[p-1])&&c.pop(),c},_setLatLngs:function(a){$r.prototype._setLatLngs.call(this,a),f(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return f(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,c=this.options.weight,p=new K(c,c);if(a=new fe(a.min.subtract(p),a.max.add(p)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var y=0,b=this._rings.length,A;y<b;y++)A=Fa(this._rings[y],a,!0),A.length&&this._parts.push(A)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var c=!1,p,y,b,A,H,G,Z,ne;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(A=0,Z=this._parts.length;A<Z;A++)for(p=this._parts[A],H=0,ne=p.length,G=ne-1;H<ne;G=H++)y=p[H],b=p[G],y.y>a.y!=b.y>a.y&&a.x<(b.x-y.x)*(a.y-y.y)/(b.y-y.y)+y.x&&(c=!c);return c||$r.prototype._containsPoint.call(this,a,!0)}});function PR(a,c){return new $a(a,c)}var Hr=Lt.extend({initialize:function(a,c){x(this,c),this._layers={},a&&this.addData(a)},addData:function(a){var c=P(a)?a:a.features,p,y,b;if(c){for(p=0,y=c.length;p<y;p++)b=c[p],(b.geometries||b.geometry||b.features||b.coordinates)&&this.addData(b);return this}var A=this.options;if(A.filter&&!A.filter(a))return this;var H=dd(a,A);return H?(H.feature=md(a),H.defaultOptions=H.options,this.resetStyle(H),A.onEachFeature&&A.onEachFeature(a,H),this.addLayer(H)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=r({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(c){this._setLayerStyle(c,a)},this)},_setLayerStyle:function(a,c){a.setStyle&&(typeof c=="function"&&(c=c(a.feature)),a.setStyle(c))}});function dd(a,c){var p=a.type==="Feature"?a.geometry:a,y=p?p.coordinates:null,b=[],A=c&&c.pointToLayer,H=c&&c.coordsToLatLng||rg,G,Z,ne,me;if(!y&&!p)return null;switch(p.type){case"Point":return G=H(y),Kw(A,a,G,c);case"MultiPoint":for(ne=0,me=y.length;ne<me;ne++)G=H(y[ne]),b.push(Kw(A,a,G,c));return new Lt(b);case"LineString":case"MultiLineString":return Z=fd(y,p.type==="LineString"?0:1,H),new $r(Z,c);case"Polygon":case"MultiPolygon":return Z=fd(y,p.type==="Polygon"?1:2,H),new $a(Z,c);case"GeometryCollection":for(ne=0,me=p.geometries.length;ne<me;ne++){var Se=dd({geometry:p.geometries[ne],type:"Feature",properties:a.properties},c);Se&&b.push(Se)}return new Lt(b);case"FeatureCollection":for(ne=0,me=p.features.length;ne<me;ne++){var De=dd(p.features[ne],c);De&&b.push(De)}return new Lt(b);default:throw new Error("Invalid GeoJSON object.")}}function Kw(a,c,p,y){return a?a(c,p):new cd(p,y&&y.markersInheritOptions&&y)}function rg(a){return new we(a[1],a[0],a[2])}function fd(a,c,p){for(var y=[],b=0,A=a.length,H;b<A;b++)H=c?fd(a[b],c-1,p):(p||rg)(a[b]),y.push(H);return y}function sg(a,c){return a=pe(a),a.alt!==void 0?[g(a.lng,c),g(a.lat,c),g(a.alt,c)]:[g(a.lng,c),g(a.lat,c)]}function pd(a,c,p,y){for(var b=[],A=0,H=a.length;A<H;A++)b.push(c?pd(a[A],f(a[A])?0:c-1,p,y):sg(a[A],y));return!c&&p&&b.length>0&&b.push(b[0].slice()),b}function Ha(a,c){return a.feature?r({},a.feature,{geometry:c}):md(c)}function md(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var og={toGeoJSON:function(a){return Ha(this,{type:"Point",coordinates:sg(this.getLatLng(),a)})}};cd.include(og),ig.include(og),hd.include(og),$r.include({toGeoJSON:function(a){var c=!f(this._latlngs),p=pd(this._latlngs,c?1:0,!1,a);return Ha(this,{type:(c?"Multi":"")+"LineString",coordinates:p})}}),$a.include({toGeoJSON:function(a){var c=!f(this._latlngs),p=c&&!f(this._latlngs[0]),y=pd(this._latlngs,p?2:c?1:0,!0,a);return c||(y=[y]),Ha(this,{type:(p?"Multi":"")+"Polygon",coordinates:y})}}),bt.include({toMultiPoint:function(a){var c=[];return this.eachLayer(function(p){c.push(p.toGeoJSON(a).geometry.coordinates)}),Ha(this,{type:"MultiPoint",coordinates:c})},toGeoJSON:function(a){var c=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(c==="MultiPoint")return this.toMultiPoint(a);var p=c==="GeometryCollection",y=[];return this.eachLayer(function(b){if(b.toGeoJSON){var A=b.toGeoJSON(a);if(p)y.push(A.geometry);else{var H=md(A);H.type==="FeatureCollection"?y.push.apply(y,H.features):y.push(H)}}}),p?Ha(this,{geometries:y,type:"GeometryCollection"}):{type:"FeatureCollection",features:y}}});function Zw(a,c){return new Hr(a,c)}var CR=Zw,gd=rt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,c,p){this._url=a,this._bounds=be(c),x(this,p)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Le(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){st(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&jr(this._image),this},bringToBack:function(){return this._map&&Ts(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=be(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",c=this._image=a?this._url:Be("img");if(Le(c,"leaflet-image-layer"),this._zoomAnimated&&Le(c,"leaflet-zoom-animated"),this.options.className&&Le(c,this.options.className),c.onselectstart=m,c.onmousemove=m,c.onload=o(this.fire,this,"load"),c.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=c.src;return}c.src=this._url,c.alt=this.options.alt},_animateZoom:function(a){var c=this._map.getZoomScale(a.zoom),p=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;ar(this._image,p,c)},_reset:function(){var a=this._image,c=new fe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),p=c.getSize();Pe(a,c.min),a.style.width=p.x+"px",a.style.height=p.y+"px"},_updateOpacity:function(){Pt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),IR=function(a,c,p){return new gd(a,c,p)},Yw=gd.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",c=this._image=a?this._url:Be("video");if(Le(c,"leaflet-image-layer"),this._zoomAnimated&&Le(c,"leaflet-zoom-animated"),this.options.className&&Le(c,this.options.className),c.onselectstart=m,c.onmousemove=m,c.onloadeddata=o(this.fire,this,"load"),a){for(var p=c.getElementsByTagName("source"),y=[],b=0;b<p.length;b++)y.push(p[b].src);this._url=p.length>0?y:[c.src];return}P(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(c.style,"objectFit")&&(c.style.objectFit="fill"),c.autoplay=!!this.options.autoplay,c.loop=!!this.options.loop,c.muted=!!this.options.muted,c.playsInline=!!this.options.playsInline;for(var A=0;A<this._url.length;A++){var H=Be("source");H.src=this._url[A],c.appendChild(H)}}});function AR(a,c,p){return new Yw(a,c,p)}var Qw=gd.extend({_initImage:function(){var a=this._image=this._url;Le(a,"leaflet-image-layer"),this._zoomAnimated&&Le(a,"leaflet-zoom-animated"),this.options.className&&Le(a,this.options.className),a.onselectstart=m,a.onmousemove=m}});function RR(a,c,p){return new Qw(a,c,p)}var cr=rt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,c){a&&(a instanceof we||P(a))?(this._latlng=pe(a),x(this,c)):(x(this,a),this._source=c),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&Pt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&Pt(this._container,1),this.bringToFront(),this.options.interactive&&(Le(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(Pt(this._container,0),this._removeTimeout=setTimeout(o(st,void 0,this._container),200)):st(this._container),this.options.interactive&&(gt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=pe(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&jr(this._container),this},bringToBack:function(){return this._map&&Ts(this._container),this},_prepareOpen:function(a){var c=this._source;if(!c._map)return!1;if(c instanceof Lt){c=null;var p=this._source._layers;for(var y in p)if(p[y]._map){c=p[y];break}if(!c)return!1;this._source=c}if(!a)if(c.getCenter)a=c.getCenter();else if(c.getLatLng)a=c.getLatLng();else if(c.getBounds)a=c.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,c=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof c=="string")a.innerHTML=c;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(c)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),c=M(this.options.offset),p=this._getAnchor();this._zoomAnimated?Pe(this._container,a.add(p)):c=c.add(a).add(p);var y=this._containerBottom=-c.y,b=this._containerLeft=-Math.round(this._containerWidth/2)+c.x;this._container.style.bottom=y+"px",this._container.style.left=b+"px"}},_getAnchor:function(){return[0,0]}});je.include({_initOverlay:function(a,c,p,y){var b=c;return b instanceof a||(b=new a(y).setContent(c)),p&&b.setLatLng(p),b}}),rt.include({_initOverlay:function(a,c,p,y){var b=p;return b instanceof a?(x(b,y),b._source=this):(b=c&&!y?c:new a(y,this),b.setContent(p)),b}});var _d=cr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,cr.prototype.openOn.call(this,a)},onAdd:function(a){cr.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Rs||this._source.on("preclick",vi))},onRemove:function(a){cr.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Rs||this._source.off("preclick",vi))},getEvents:function(){var a=cr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",c=this._container=Be("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),p=this._wrapper=Be("div",a+"-content-wrapper",c);if(this._contentNode=Be("div",a+"-content",p),Cs(c),Ps(this._contentNode),Ee(c,"contextmenu",vi),this._tipContainer=Be("div",a+"-tip-container",c),this._tip=Be("div",a+"-tip",this._tipContainer),this.options.closeButton){var y=this._closeButton=Be("a",a+"-close-button",c);y.setAttribute("role","button"),y.setAttribute("aria-label","Close popup"),y.href="#close",y.innerHTML='<span aria-hidden="true">&#215;</span>',Ee(y,"click",function(b){xt(b),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,c=a.style;c.width="",c.whiteSpace="nowrap";var p=a.offsetWidth;p=Math.min(p,this.options.maxWidth),p=Math.max(p,this.options.minWidth),c.width=p+1+"px",c.whiteSpace="",c.height="";var y=a.offsetHeight,b=this.options.maxHeight,A="leaflet-popup-scrolled";b&&y>b?(c.height=b+"px",Le(a,A)):gt(a,A),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var c=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),p=this._getAnchor();Pe(this._container,c.add(p))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,c=parseInt(Ss(this._container,"marginBottom"),10)||0,p=this._container.offsetHeight+c,y=this._containerWidth,b=new K(this._containerLeft,-p-this._containerBottom);b._add(gi(this._container));var A=a.layerPointToContainerPoint(b),H=M(this.options.autoPanPadding),G=M(this.options.autoPanPaddingTopLeft||H),Z=M(this.options.autoPanPaddingBottomRight||H),ne=a.getSize(),me=0,Se=0;A.x+y+Z.x>ne.x&&(me=A.x+y-ne.x+Z.x),A.x-me-G.x<0&&(me=A.x-G.x),A.y+p+Z.y>ne.y&&(Se=A.y+p-ne.y+Z.y),A.y-Se-G.y<0&&(Se=A.y-G.y),(me||Se)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([me,Se]))}},_getAnchor:function(){return M(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),LR=function(a,c){return new _d(a,c)};je.mergeOptions({closePopupOnClick:!0}),je.include({openPopup:function(a,c,p){return this._initOverlay(_d,a,c,p).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),rt.include({bindPopup:function(a,c){return this._popup=this._initOverlay(_d,this._popup,a,c),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof Lt||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){Xn(a);var c=a.layer||a.target;if(this._popup._source===c&&!(c instanceof Rs)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=c,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var yd=cr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){cr.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){cr.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=cr.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",c=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Be("div",c),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+u(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var c,p,y=this._map,b=this._container,A=y.latLngToContainerPoint(y.getCenter()),H=y.layerPointToContainerPoint(a),G=this.options.direction,Z=b.offsetWidth,ne=b.offsetHeight,me=M(this.options.offset),Se=this._getAnchor();G==="top"?(c=Z/2,p=ne):G==="bottom"?(c=Z/2,p=0):G==="center"?(c=Z/2,p=ne/2):G==="right"?(c=0,p=ne/2):G==="left"?(c=Z,p=ne/2):H.x<A.x?(G="right",c=0,p=ne/2):(G="left",c=Z+(me.x+Se.x)*2,p=ne/2),a=a.subtract(M(c,p,!0)).add(me).add(Se),gt(b,"leaflet-tooltip-right"),gt(b,"leaflet-tooltip-left"),gt(b,"leaflet-tooltip-top"),gt(b,"leaflet-tooltip-bottom"),Le(b,"leaflet-tooltip-"+G),Pe(b,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&Pt(this._container,a)},_animateZoom:function(a){var c=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(c)},_getAnchor:function(){return M(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),NR=function(a,c){return new yd(a,c)};je.include({openTooltip:function(a,c,p){return this._initOverlay(yd,a,c,p).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),rt.include({bindTooltip:function(a,c){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(yd,this._tooltip,a,c),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var c=a?"off":"on",p={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?p.add=this._openTooltip:(p.mouseover=this._openTooltip,p.mouseout=this.closeTooltip,p.click=this._openTooltip,this._map?this._addFocusListeners():p.add=this._addFocusListeners),this._tooltip.options.sticky&&(p.mousemove=this._moveTooltip),this[c](p),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof Lt||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var c=typeof a.getElement=="function"&&a.getElement();c&&(Ee(c,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),Ee(c,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var c=typeof a.getElement=="function"&&a.getElement();c&&c.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var c=this;this._map.once("moveend",function(){c._openOnceFlag=!1,c._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var c=a.latlng,p,y;this._tooltip.options.sticky&&a.originalEvent&&(p=this._map.mouseEventToContainerPoint(a.originalEvent),y=this._map.containerPointToLayerPoint(p),c=this._map.layerPointToLatLng(y)),this._tooltip.setLatLng(c)}});var Xw=ur.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var c=a&&a.tagName==="DIV"?a:document.createElement("div"),p=this.options;if(p.html instanceof Element?(Mo(c),c.appendChild(p.html)):c.innerHTML=p.html!==!1?p.html:"",p.bgPos){var y=M(p.bgPos);c.style.backgroundPosition=-y.x+"px "+-y.y+"px"}return this._setIconStyles(c,"icon"),c},createShadow:function(){return null}});function OR(a){return new Xw(a)}ur.Default=Fu;var ju=rt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ye.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){x(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),st(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(jr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ts(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=h(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof K?a:new K(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var c=this.getPane().children,p=-a(-1/0,1/0),y=0,b=c.length,A;y<b;y++)A=c[y].style.zIndex,c[y]!==this._container&&A&&(p=a(p,+A));isFinite(p)&&(this.options.zIndex=p+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ye.ielt9){Pt(this._container,this.options.opacity);var a=+new Date,c=!1,p=!1;for(var y in this._tiles){var b=this._tiles[y];if(!(!b.current||!b.loaded)){var A=Math.min(1,(a-b.loaded)/200);Pt(b.el,A),A<1?c=!0:(b.active?p=!0:this._onOpaqueTile(b),b.active=!0)}}p&&!this._noPrune&&this._pruneTiles(),c&&(B(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=Be("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,c=this.options.maxZoom;if(a!==void 0){for(var p in this._levels)p=Number(p),this._levels[p].el.children.length||p===a?(this._levels[p].el.style.zIndex=c-Math.abs(a-p),this._onUpdateLevel(p)):(st(this._levels[p].el),this._removeTilesAtZoom(p),this._onRemoveLevel(p),delete this._levels[p]);var y=this._levels[a],b=this._map;return y||(y=this._levels[a]={},y.el=Be("div","leaflet-tile-container leaflet-zoom-animated",this._container),y.el.style.zIndex=c,y.origin=b.project(b.unproject(b.getPixelOrigin()),a).round(),y.zoom=a,this._setZoomTransform(y,b.getCenter(),b.getZoom()),m(y.el.offsetWidth),this._onCreateLevel(y)),this._level=y,y}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(this._map){var a,c,p=this._map.getZoom();if(p>this.options.maxZoom||p<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)c=this._tiles[a],c.retain=c.current;for(a in this._tiles)if(c=this._tiles[a],c.current&&!c.active){var y=c.coords;this._retainParent(y.x,y.y,y.z,y.z-5)||this._retainChildren(y.x,y.y,y.z,y.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var c in this._tiles)this._tiles[c].coords.z===a&&this._removeTile(c)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)st(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,c,p,y){var b=Math.floor(a/2),A=Math.floor(c/2),H=p-1,G=new K(+b,+A);G.z=+H;var Z=this._tileCoordsToKey(G),ne=this._tiles[Z];return ne&&ne.active?(ne.retain=!0,!0):(ne&&ne.loaded&&(ne.retain=!0),H>y?this._retainParent(b,A,H,y):!1)},_retainChildren:function(a,c,p,y){for(var b=2*a;b<2*a+2;b++)for(var A=2*c;A<2*c+2;A++){var H=new K(b,A);H.z=p+1;var G=this._tileCoordsToKey(H),Z=this._tiles[G];if(Z&&Z.active){Z.retain=!0;continue}else Z&&Z.loaded&&(Z.retain=!0);p+1<y&&this._retainChildren(b,A,p+1,y)}},_resetView:function(a){var c=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),c,c)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var c=this.options;return c.minNativeZoom!==void 0&&a<c.minNativeZoom?c.minNativeZoom:c.maxNativeZoom!==void 0&&c.maxNativeZoom<a?c.maxNativeZoom:a},_setView:function(a,c,p,y){var b=Math.round(c);this.options.maxZoom!==void 0&&b>this.options.maxZoom||this.options.minZoom!==void 0&&b<this.options.minZoom?b=void 0:b=this._clampZoom(b);var A=this.options.updateWhenZooming&&b!==this._tileZoom;(!y||A)&&(this._tileZoom=b,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),b!==void 0&&this._update(a),p||this._pruneTiles(),this._noPrune=!!p),this._setZoomTransforms(a,c)},_setZoomTransforms:function(a,c){for(var p in this._levels)this._setZoomTransform(this._levels[p],a,c)},_setZoomTransform:function(a,c,p){var y=this._map.getZoomScale(p,a.zoom),b=a.origin.multiplyBy(y).subtract(this._map._getNewPixelOrigin(c,p)).round();ye.any3d?ar(a.el,b,y):Pe(a.el,b)},_resetGrid:function(){var a=this._map,c=a.options.crs,p=this._tileSize=this.getTileSize(),y=this._tileZoom,b=this._map.getPixelWorldBounds(this._tileZoom);b&&(this._globalTileRange=this._pxBoundsToTileRange(b)),this._wrapX=c.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,c.wrapLng[0]],y).x/p.x),Math.ceil(a.project([0,c.wrapLng[1]],y).x/p.y)],this._wrapY=c.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([c.wrapLat[0],0],y).y/p.x),Math.ceil(a.project([c.wrapLat[1],0],y).y/p.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var c=this._map,p=c._animatingZoom?Math.max(c._animateToZoom,c.getZoom()):c.getZoom(),y=c.getZoomScale(p,this._tileZoom),b=c.project(a,this._tileZoom).floor(),A=c.getSize().divideBy(y*2);return new fe(b.subtract(A),b.add(A))},_update:function(a){var c=this._map;if(c){var p=this._clampZoom(c.getZoom());if(a===void 0&&(a=c.getCenter()),this._tileZoom!==void 0){var y=this._getTiledPixelBounds(a),b=this._pxBoundsToTileRange(y),A=b.getCenter(),H=[],G=this.options.keepBuffer,Z=new fe(b.getBottomLeft().subtract([G,-G]),b.getTopRight().add([G,-G]));if(!(isFinite(b.min.x)&&isFinite(b.min.y)&&isFinite(b.max.x)&&isFinite(b.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ne in this._tiles){var me=this._tiles[ne].coords;(me.z!==this._tileZoom||!Z.contains(new K(me.x,me.y)))&&(this._tiles[ne].current=!1)}if(Math.abs(p-this._tileZoom)>1){this._setView(a,p);return}for(var Se=b.min.y;Se<=b.max.y;Se++)for(var De=b.min.x;De<=b.max.x;De++){var In=new K(De,Se);if(In.z=this._tileZoom,!!this._isValidTile(In)){var Qt=this._tiles[this._tileCoordsToKey(In)];Qt?Qt.current=!0:H.push(In)}}if(H.sort(function(Fn,qa){return Fn.distanceTo(A)-qa.distanceTo(A)}),H.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var xi=document.createDocumentFragment();for(De=0;De<H.length;De++)this._addTile(H[De],xi);this._level.el.appendChild(xi)}}}},_isValidTile:function(a){var c=this._map.options.crs;if(!c.infinite){var p=this._globalTileRange;if(!c.wrapLng&&(a.x<p.min.x||a.x>p.max.x)||!c.wrapLat&&(a.y<p.min.y||a.y>p.max.y))return!1}if(!this.options.bounds)return!0;var y=this._tileCoordsToBounds(a);return be(this.options.bounds).overlaps(y)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var c=this._map,p=this.getTileSize(),y=a.scaleBy(p),b=y.add(p),A=c.unproject(y,a.z),H=c.unproject(b,a.z);return[A,H]},_tileCoordsToBounds:function(a){var c=this._tileCoordsToNwSe(a),p=new U(c[0],c[1]);return this.options.noWrap||(p=this._map.wrapLatLngBounds(p)),p},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var c=a.split(":"),p=new K(+c[0],+c[1]);return p.z=+c[2],p},_removeTile:function(a){var c=this._tiles[a];c&&(st(c.el),delete this._tiles[a],this.fire("tileunload",{tile:c.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){Le(a,"leaflet-tile");var c=this.getTileSize();a.style.width=c.x+"px",a.style.height=c.y+"px",a.onselectstart=m,a.onmousemove=m,ye.ielt9&&this.options.opacity<1&&Pt(a,this.options.opacity)},_addTile:function(a,c){var p=this._getTilePos(a),y=this._tileCoordsToKey(a),b=this.createTile(this._wrapCoords(a),o(this._tileReady,this,a));this._initTile(b),this.createTile.length<2&&D(o(this._tileReady,this,a,null,b)),Pe(b,p),this._tiles[y]={el:b,coords:a,current:!0},c.appendChild(b),this.fire("tileloadstart",{tile:b,coords:a})},_tileReady:function(a,c,p){c&&this.fire("tileerror",{error:c,tile:p,coords:a});var y=this._tileCoordsToKey(a);p=this._tiles[y],p&&(p.loaded=+new Date,this._map._fadeAnimated?(Pt(p.el,0),B(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(p.active=!0,this._pruneTiles()),c||(Le(p.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:p.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ye.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var c=new K(this._wrapX?d(a.x,this._wrapX):a.x,this._wrapY?d(a.y,this._wrapY):a.y);return c.z=a.z,c},_pxBoundsToTileRange:function(a){var c=this.getTileSize();return new fe(a.min.unscaleBy(c).floor(),a.max.unscaleBy(c).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function MR(a){return new ju(a)}var Wa=ju.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,c){this._url=a,c=x(this,c),c.detectRetina&&ye.retina&&c.maxZoom>0?(c.tileSize=Math.floor(c.tileSize/2),c.zoomReverse?(c.zoomOffset--,c.minZoom=Math.min(c.maxZoom,c.minZoom+1)):(c.zoomOffset++,c.maxZoom=Math.max(c.minZoom,c.maxZoom-1)),c.minZoom=Math.max(0,c.minZoom)):c.zoomReverse?c.minZoom=Math.min(c.maxZoom,c.minZoom):c.maxZoom=Math.max(c.minZoom,c.maxZoom),typeof c.subdomains=="string"&&(c.subdomains=c.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,c){return this._url===a&&c===void 0&&(c=!0),this._url=a,c||this.redraw(),this},createTile:function(a,c){var p=document.createElement("img");return Ee(p,"load",o(this._tileOnLoad,this,c,p)),Ee(p,"error",o(this._tileOnError,this,c,p)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(p.referrerPolicy=this.options.referrerPolicy),p.alt="",p.src=this.getTileUrl(a),p},getTileUrl:function(a){var c={r:ye.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var p=this._globalTileRange.max.y-a.y;this.options.tms&&(c.y=p),c["-y"]=p}return k(this._url,r(c,this.options))},_tileOnLoad:function(a,c){ye.ielt9?setTimeout(o(a,this,null,c),0):a(null,c)},_tileOnError:function(a,c,p){var y=this.options.errorTileUrl;y&&c.getAttribute("src")!==y&&(c.src=y),a(p,c)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,c=this.options.maxZoom,p=this.options.zoomReverse,y=this.options.zoomOffset;return p&&(a=c-a),a+y},_getSubdomain:function(a){var c=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[c]},_abortLoading:function(){var a,c;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(c=this._tiles[a].el,c.onload=m,c.onerror=m,!c.complete)){c.src=W;var p=this._tiles[a].coords;st(c),delete this._tiles[a],this.fire("tileabort",{tile:c,coords:p})}},_removeTile:function(a){var c=this._tiles[a];if(c)return c.el.setAttribute("src",W),ju.prototype._removeTile.call(this,a)},_tileReady:function(a,c,p){if(!(!this._map||p&&p.getAttribute("src")===W))return ju.prototype._tileReady.call(this,a,c,p)}});function Jw(a,c){return new Wa(a,c)}var ex=Wa.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,c){this._url=a;var p=r({},this.defaultWmsParams);for(var y in c)y in this.options||(p[y]=c[y]);c=x(this,c);var b=c.detectRetina&&ye.retina?2:1,A=this.getTileSize();p.width=A.x*b,p.height=A.y*b,this.wmsParams=p},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var c=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[c]=this._crs.code,Wa.prototype.onAdd.call(this,a)},getTileUrl:function(a){var c=this._tileCoordsToNwSe(a),p=this._crs,y=ce(p.project(c[0]),p.project(c[1])),b=y.min,A=y.max,H=(this._wmsVersion>=1.3&&this._crs===jt?[b.y,b.x,A.y,A.x]:[b.x,b.y,A.x,A.y]).join(","),G=Wa.prototype.getTileUrl.call(this,a);return G+C(this.wmsParams,G,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+H},setParams:function(a,c){return r(this.wmsParams,a),c||this.redraw(),this}});function DR(a,c){return new ex(a,c)}Wa.WMS=ex,Jw.wms=DR;var Wr=rt.extend({options:{padding:.1},initialize:function(a){x(this,a),u(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Le(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,c){var p=this._map.getZoomScale(c,this._zoom),y=this._map.getSize().multiplyBy(.5+this.options.padding),b=this._map.project(this._center,c),A=y.multiplyBy(-p).add(b).subtract(this._map._getNewPixelOrigin(a,c));ye.any3d?ar(this._container,A,p):Pe(this._container,A)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,c=this._map.getSize(),p=this._map.containerPointToLayerPoint(c.multiplyBy(-a)).round();this._bounds=new fe(p,p.add(c.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),tx=Wr.extend({options:{tolerance:0},getEvents:function(){var a=Wr.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Wr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");Ee(a,"mousemove",this._onMouseMove,this),Ee(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ee(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){B(this._redrawRequest),delete this._ctx,st(this._container),it(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var c in this._layers)a=this._layers[c],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Wr.prototype._update.call(this);var a=this._bounds,c=this._container,p=a.getSize(),y=ye.retina?2:1;Pe(c,a.min),c.width=y*p.x,c.height=y*p.y,c.style.width=p.x+"px",c.style.height=p.y+"px",ye.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){Wr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[u(a)]=a;var c=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=c),this._drawLast=c,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var c=a._order,p=c.next,y=c.prev;p?p.prev=y:this._drawLast=y,y?y.next=p:this._drawFirst=p,delete a._order,delete this._layers[u(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var c=a.options.dashArray.split(/[, ]+/),p=[],y,b;for(b=0;b<c.length;b++){if(y=Number(c[b]),isNaN(y))return;p.push(y)}a.options._dashArray=p}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var c=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new fe,this._redrawBounds.extend(a._pxBounds.min.subtract([c,c])),this._redrawBounds.extend(a._pxBounds.max.add([c,c]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var c=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,c.x,c.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,c=this._redrawBounds;if(this._ctx.save(),c){var p=c.getSize();this._ctx.beginPath(),this._ctx.rect(c.min.x,c.min.y,p.x,p.y),this._ctx.clip()}this._drawing=!0;for(var y=this._drawFirst;y;y=y.next)a=y.layer,(!c||a._pxBounds&&a._pxBounds.intersects(c))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,c){if(this._drawing){var p,y,b,A,H=a._parts,G=H.length,Z=this._ctx;if(G){for(Z.beginPath(),p=0;p<G;p++){for(y=0,b=H[p].length;y<b;y++)A=H[p][y],Z[y?"lineTo":"moveTo"](A.x,A.y);c&&Z.closePath()}this._fillStroke(Z,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var c=a._point,p=this._ctx,y=Math.max(Math.round(a._radius),1),b=(Math.max(Math.round(a._radiusY),1)||y)/y;b!==1&&(p.save(),p.scale(1,b)),p.beginPath(),p.arc(c.x,c.y/b,y,0,Math.PI*2,!1),b!==1&&p.restore(),this._fillStroke(p,a)}},_fillStroke:function(a,c){var p=c.options;p.fill&&(a.globalAlpha=p.fillOpacity,a.fillStyle=p.fillColor||p.color,a.fill(p.fillRule||"evenodd")),p.stroke&&p.weight!==0&&(a.setLineDash&&a.setLineDash(c.options&&c.options._dashArray||[]),a.globalAlpha=p.opacity,a.lineWidth=p.weight,a.strokeStyle=p.color,a.lineCap=p.lineCap,a.lineJoin=p.lineJoin,a.stroke())},_onClick:function(a){for(var c=this._map.mouseEventToLayerPoint(a),p,y,b=this._drawFirst;b;b=b.next)p=b.layer,p.options.interactive&&p._containsPoint(c)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(p))&&(y=p);this._fireEvent(y?[y]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var c=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,c)}},_handleMouseOut:function(a){var c=this._hoveredLayer;c&&(gt(this._container,"leaflet-interactive"),this._fireEvent([c],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,c){if(!this._mouseHoverThrottled){for(var p,y,b=this._drawFirst;b;b=b.next)p=b.layer,p.options.interactive&&p._containsPoint(c)&&(y=p);y!==this._hoveredLayer&&(this._handleMouseOut(a),y&&(Le(this._container,"leaflet-interactive"),this._fireEvent([y],a,"mouseover"),this._hoveredLayer=y)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,c,p){this._map._fireDOMEvent(c,p||c.type,a)},_bringToFront:function(a){var c=a._order;if(c){var p=c.next,y=c.prev;if(p)p.prev=y;else return;y?y.next=p:p&&(this._drawFirst=p),c.prev=this._drawLast,this._drawLast.next=c,c.next=null,this._drawLast=c,this._requestRedraw(a)}},_bringToBack:function(a){var c=a._order;if(c){var p=c.next,y=c.prev;if(y)y.next=p;else return;p?p.prev=y:y&&(this._drawLast=y),c.prev=null,c.next=this._drawFirst,this._drawFirst.prev=c,this._drawFirst=c,this._requestRedraw(a)}}});function nx(a){return ye.canvas?new tx(a):null}var Vu=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),FR={_initContainer:function(){this._container=Be("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Wr.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var c=a._container=Vu("shape");Le(c,"leaflet-vml-shape "+(this.options.className||"")),c.coordsize="1 1",a._path=Vu("path"),c.appendChild(a._path),this._updateStyle(a),this._layers[u(a)]=a},_addPath:function(a){var c=a._container;this._container.appendChild(c),a.options.interactive&&a.addInteractiveTarget(c)},_removePath:function(a){var c=a._container;st(c),a.removeInteractiveTarget(c),delete this._layers[u(a)]},_updateStyle:function(a){var c=a._stroke,p=a._fill,y=a.options,b=a._container;b.stroked=!!y.stroke,b.filled=!!y.fill,y.stroke?(c||(c=a._stroke=Vu("stroke")),b.appendChild(c),c.weight=y.weight+"px",c.color=y.color,c.opacity=y.opacity,y.dashArray?c.dashStyle=P(y.dashArray)?y.dashArray.join(" "):y.dashArray.replace(/( *, *)/g," "):c.dashStyle="",c.endcap=y.lineCap.replace("butt","flat"),c.joinstyle=y.lineJoin):c&&(b.removeChild(c),a._stroke=null),y.fill?(p||(p=a._fill=Vu("fill")),b.appendChild(p),p.color=y.fillColor||y.color,p.opacity=y.fillOpacity):p&&(b.removeChild(p),a._fill=null)},_updateCircle:function(a){var c=a._point.round(),p=Math.round(a._radius),y=Math.round(a._radiusY||p);this._setPath(a,a._empty()?"M0 0":"AL "+c.x+","+c.y+" "+p+","+y+" 0,"+65535*360)},_setPath:function(a,c){a._path.v=c},_bringToFront:function(a){jr(a._container)},_bringToBack:function(a){Ts(a._container)}},vd=ye.vml?Vu:ci,zu=Wr.extend({_initContainer:function(){this._container=vd("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=vd("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){st(this._container),it(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Wr.prototype._update.call(this);var a=this._bounds,c=a.getSize(),p=this._container;(!this._svgSize||!this._svgSize.equals(c))&&(this._svgSize=c,p.setAttribute("width",c.x),p.setAttribute("height",c.y)),Pe(p,a.min),p.setAttribute("viewBox",[a.min.x,a.min.y,c.x,c.y].join(" ")),this.fire("update")}},_initPath:function(a){var c=a._path=vd("path");a.options.className&&Le(c,a.options.className),a.options.interactive&&Le(c,"leaflet-interactive"),this._updateStyle(a),this._layers[u(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){st(a._path),a.removeInteractiveTarget(a._path),delete this._layers[u(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var c=a._path,p=a.options;c&&(p.stroke?(c.setAttribute("stroke",p.color),c.setAttribute("stroke-opacity",p.opacity),c.setAttribute("stroke-width",p.weight),c.setAttribute("stroke-linecap",p.lineCap),c.setAttribute("stroke-linejoin",p.lineJoin),p.dashArray?c.setAttribute("stroke-dasharray",p.dashArray):c.removeAttribute("stroke-dasharray"),p.dashOffset?c.setAttribute("stroke-dashoffset",p.dashOffset):c.removeAttribute("stroke-dashoffset")):c.setAttribute("stroke","none"),p.fill?(c.setAttribute("fill",p.fillColor||p.color),c.setAttribute("fill-opacity",p.fillOpacity),c.setAttribute("fill-rule",p.fillRule||"evenodd")):c.setAttribute("fill","none"))},_updatePoly:function(a,c){this._setPath(a,Di(a._parts,c))},_updateCircle:function(a){var c=a._point,p=Math.max(Math.round(a._radius),1),y=Math.max(Math.round(a._radiusY),1)||p,b="a"+p+","+y+" 0 1,0 ",A=a._empty()?"M0 0":"M"+(c.x-p)+","+c.y+b+p*2+",0 "+b+-p*2+",0 ";this._setPath(a,A)},_setPath:function(a,c){a._path.setAttribute("d",c)},_bringToFront:function(a){jr(a._path)},_bringToBack:function(a){Ts(a._path)}});ye.vml&&zu.include(FR);function ix(a){return ye.svg||ye.vml?new zu(a):null}je.include({getRenderer:function(a){var c=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return c||(c=this._renderer=this._createRenderer()),this.hasLayer(c)||this.addLayer(c),c},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var c=this._paneRenderers[a];return c===void 0&&(c=this._createRenderer({pane:a}),this._paneRenderers[a]=c),c},_createRenderer:function(a){return this.options.preferCanvas&&nx(a)||ix(a)}});var rx=$a.extend({initialize:function(a,c){$a.prototype.initialize.call(this,this._boundsToLatLngs(a),c)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=be(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function jR(a,c){return new rx(a,c)}zu.create=vd,zu.pointsToPath=Di,Hr.geometryToLayer=dd,Hr.coordsToLatLng=rg,Hr.coordsToLatLngs=fd,Hr.latLngToCoords=sg,Hr.latLngsToCoords=pd,Hr.getFeature=Ha,Hr.asFeature=md,je.mergeOptions({boxZoom:!0});var sx=Jn.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){Ee(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){it(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){st(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ui(),Eu(),this._startPoint=this._map.mouseEventToContainerPoint(a),Ee(document,{contextmenu:Xn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=Be("div","leaflet-zoom-box",this._container),Le(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var c=new fe(this._point,this._startPoint),p=c.getSize();Pe(this._box,c.min),this._box.style.width=p.x+"px",this._box.style.height=p.y+"px"},_finish:function(){this._moved&&(st(this._box),gt(this._container,"leaflet-crosshair")),$i(),Su(),it(document,{contextmenu:Xn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var c=new U(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(c).fire("boxzoomend",{boxZoomBounds:c})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});je.addInitHook("addHandler","boxZoom",sx),je.mergeOptions({doubleClickZoom:!0});var ox=Jn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var c=this._map,p=c.getZoom(),y=c.options.zoomDelta,b=a.originalEvent.shiftKey?p-y:p+y;c.options.doubleClickZoom==="center"?c.setZoom(b):c.setZoomAround(a.containerPoint,b)}});je.addInitHook("addHandler","doubleClickZoom",ox),je.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ax=Jn.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new Hi(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}Le(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){gt(this._map._container,"leaflet-grab"),gt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var c=be(this._map.options.maxBounds);this._offsetLimit=ce(this._map.latLngToContainerPoint(c.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(c.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var c=this._lastTime=+new Date,p=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(p),this._times.push(c),this._prunePositions(c)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),c=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=c.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,c){return a-(a-c)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),c=this._offsetLimit;a.x<c.min.x&&(a.x=this._viscousLimit(a.x,c.min.x)),a.y<c.min.y&&(a.y=this._viscousLimit(a.y,c.min.y)),a.x>c.max.x&&(a.x=this._viscousLimit(a.x,c.max.x)),a.y>c.max.y&&(a.y=this._viscousLimit(a.y,c.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,c=Math.round(a/2),p=this._initialWorldOffset,y=this._draggable._newPos.x,b=(y-c+p)%a+c-p,A=(y+c+p)%a-c-p,H=Math.abs(b+p)<Math.abs(A+p)?b:A;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=H},_onDragEnd:function(a){var c=this._map,p=c.options,y=!p.inertia||a.noInertia||this._times.length<2;if(c.fire("dragend",a),y)c.fire("moveend");else{this._prunePositions(+new Date);var b=this._lastPos.subtract(this._positions[0]),A=(this._lastTime-this._times[0])/1e3,H=p.easeLinearity,G=b.multiplyBy(H/A),Z=G.distanceTo([0,0]),ne=Math.min(p.inertiaMaxSpeed,Z),me=G.multiplyBy(ne/Z),Se=ne/(p.inertiaDeceleration*H),De=me.multiplyBy(-Se/2).round();!De.x&&!De.y?c.fire("moveend"):(De=c._limitOffset(De,c.options.maxBounds),D(function(){c.panBy(De,{duration:Se,easeLinearity:H,noMoveStart:!0,animate:!0})}))}}});je.addInitHook("addHandler","dragging",ax),je.mergeOptions({keyboard:!0,keyboardPanDelta:80});var lx=Jn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),Ee(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),it(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,c=document.documentElement,p=a.scrollTop||c.scrollTop,y=a.scrollLeft||c.scrollLeft;this._map._container.focus(),window.scrollTo(y,p)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var c=this._panKeys={},p=this.keyCodes,y,b;for(y=0,b=p.left.length;y<b;y++)c[p.left[y]]=[-1*a,0];for(y=0,b=p.right.length;y<b;y++)c[p.right[y]]=[a,0];for(y=0,b=p.down.length;y<b;y++)c[p.down[y]]=[0,a];for(y=0,b=p.up.length;y<b;y++)c[p.up[y]]=[0,-1*a]},_setZoomDelta:function(a){var c=this._zoomKeys={},p=this.keyCodes,y,b;for(y=0,b=p.zoomIn.length;y<b;y++)c[p.zoomIn[y]]=a;for(y=0,b=p.zoomOut.length;y<b;y++)c[p.zoomOut[y]]=-a},_addHooks:function(){Ee(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){it(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var c=a.keyCode,p=this._map,y;if(c in this._panKeys){if(!p._panAnim||!p._panAnim._inProgress)if(y=this._panKeys[c],a.shiftKey&&(y=M(y).multiplyBy(3)),p.options.maxBounds&&(y=p._limitOffset(M(y),p.options.maxBounds)),p.options.worldCopyJump){var b=p.wrapLatLng(p.unproject(p.project(p.getCenter()).add(y)));p.panTo(b)}else p.panBy(y)}else if(c in this._zoomKeys)p.setZoom(p.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[c]);else if(c===27&&p._popup&&p._popup.options.closeOnEscapeKey)p.closePopup();else return;Xn(a)}}});je.addInitHook("addHandler","keyboard",lx),je.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ux=Jn.extend({addHooks:function(){Ee(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){it(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var c=id(a),p=this._map.options.wheelDebounceTime;this._delta+=c,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var y=Math.max(p-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),y),Xn(a)},_performZoom:function(){var a=this._map,c=a.getZoom(),p=this._map.options.zoomSnap||0;a._stop();var y=this._delta/(this._map.options.wheelPxPerZoomLevel*4),b=4*Math.log(2/(1+Math.exp(-Math.abs(y))))/Math.LN2,A=p?Math.ceil(b/p)*p:b,H=a._limitZoom(c+(this._delta>0?A:-A))-c;this._delta=0,this._startTime=null,H&&(a.options.scrollWheelZoom==="center"?a.setZoom(c+H):a.setZoomAround(this._lastMousePos,c+H))}});je.addInitHook("addHandler","scrollWheelZoom",ux);var VR=600;je.mergeOptions({tapHold:ye.touchNative&&ye.safari&&ye.mobile,tapTolerance:15});var cx=Jn.extend({addHooks:function(){Ee(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){it(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var c=a.touches[0];this._startPos=this._newPos=new K(c.clientX,c.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(Ee(document,"touchend",xt),Ee(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",c))},this),VR),Ee(document,"touchend touchcancel contextmenu",this._cancel,this),Ee(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){it(document,"touchend",xt),it(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),it(document,"touchend touchcancel contextmenu",this._cancel,this),it(document,"touchmove",this._onMove,this)},_onMove:function(a){var c=a.touches[0];this._newPos=new K(c.clientX,c.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,c){var p=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY});p._simulated=!0,c.target.dispatchEvent(p)}});je.addInitHook("addHandler","tapHold",cx),je.mergeOptions({touchZoom:ye.touch,bounceAtZoomLimits:!0});var hx=Jn.extend({addHooks:function(){Le(this._map._container,"leaflet-touch-zoom"),Ee(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){gt(this._map._container,"leaflet-touch-zoom"),it(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var c=this._map;if(!(!a.touches||a.touches.length!==2||c._animatingZoom||this._zooming)){var p=c.mouseEventToContainerPoint(a.touches[0]),y=c.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=c.getSize()._divideBy(2),this._startLatLng=c.containerPointToLatLng(this._centerPoint),c.options.touchZoom!=="center"&&(this._pinchStartLatLng=c.containerPointToLatLng(p.add(y)._divideBy(2))),this._startDist=p.distanceTo(y),this._startZoom=c.getZoom(),this._moved=!1,this._zooming=!0,c._stop(),Ee(document,"touchmove",this._onTouchMove,this),Ee(document,"touchend touchcancel",this._onTouchEnd,this),xt(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var c=this._map,p=c.mouseEventToContainerPoint(a.touches[0]),y=c.mouseEventToContainerPoint(a.touches[1]),b=p.distanceTo(y)/this._startDist;if(this._zoom=c.getScaleZoom(b,this._startZoom),!c.options.bounceAtZoomLimits&&(this._zoom<c.getMinZoom()&&b<1||this._zoom>c.getMaxZoom()&&b>1)&&(this._zoom=c._limitZoom(this._zoom)),c.options.touchZoom==="center"){if(this._center=this._startLatLng,b===1)return}else{var A=p._add(y)._divideBy(2)._subtract(this._centerPoint);if(b===1&&A.x===0&&A.y===0)return;this._center=c.unproject(c.project(this._pinchStartLatLng,this._zoom).subtract(A),this._zoom)}this._moved||(c._moveStart(!0,!1),this._moved=!0),B(this._animRequest);var H=o(c._move,c,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(H,this,!0),xt(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,B(this._animRequest),it(document,"touchmove",this._onTouchMove,this),it(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});je.addInitHook("addHandler","touchZoom",hx),je.BoxZoom=sx,je.DoubleClickZoom=ox,je.Drag=ax,je.Keyboard=lx,je.ScrollWheelZoom=ux,je.TapHold=cx,je.TouchZoom=hx,n.Bounds=fe,n.Browser=ye,n.CRS=Ie,n.Canvas=tx,n.Circle=ig,n.CircleMarker=hd,n.Class=ee,n.Control=Dn,n.DivIcon=Xw,n.DivOverlay=cr,n.DomEvent=rd,n.DomUtil=td,n.Draggable=Hi,n.Evented=ue,n.FeatureGroup=Lt,n.GeoJSON=Hr,n.GridLayer=ju,n.Handler=Jn,n.Icon=ur,n.ImageOverlay=gd,n.LatLng=we,n.LatLngBounds=U,n.Layer=rt,n.LayerGroup=bt,n.LineUtil=O,n.Map=je,n.Marker=cd,n.Mixin=Do,n.Path=Rs,n.Point=K,n.PolyUtil=za,n.Polygon=$a,n.Polyline=$r,n.Popup=_d,n.PosAnimation=Ru,n.Projection=le,n.Rectangle=rx,n.Renderer=Wr,n.SVG=zu,n.SVGOverlay=Qw,n.TileLayer=Wa,n.Tooltip=yd,n.Transformation=ht,n.Util=V,n.VideoOverlay=Yw,n.bind=o,n.bounds=ce,n.canvas=nx,n.circle=TR,n.circleMarker=SR,n.control=Cn,n.divIcon=OR,n.extend=r,n.featureGroup=Ua,n.geoJSON=Zw,n.geoJson=CR,n.gridLayer=MR,n.icon=bR,n.imageOverlay=IR,n.latLng=pe,n.latLngBounds=be,n.layerGroup=As,n.map=Oa,n.marker=ER,n.point=M,n.polygon=PR,n.polyline=kR,n.popup=LR,n.rectangle=jR,n.setOptions=x,n.stamp=u,n.svg=ix,n.svgOverlay=RR,n.tileLayer=Jw,n.tooltip=NR,n.transformation=mt,n.version=i,n.videoOverlay=AR;var zR=window.L;n.noConflict=function(){return window.L=zR,this},window.L=n})})(Iy,Iy.exports);var DF=Iy.exports;const cc=Zp(DF);function YC(t,e){return function(){return t.apply(e,arguments)}}const{toString:FF}=Object.prototype,{getPrototypeOf:k0}=Object,xm=(t=>e=>{const n=FF.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),rr=t=>(t=t.toLowerCase(),e=>xm(e)===t),bm=t=>e=>typeof e===t,{isArray:nu}=Array,oh=bm("undefined");function jF(t){return t!==null&&!oh(t)&&t.constructor!==null&&!oh(t.constructor)&&oi(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const QC=rr("ArrayBuffer");function VF(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&QC(t.buffer),e}const zF=bm("string"),oi=bm("function"),XC=bm("number"),Em=t=>t!==null&&typeof t=="object",BF=t=>t===!0||t===!1,kf=t=>{if(xm(t)!=="object")return!1;const e=k0(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},UF=rr("Date"),$F=rr("File"),HF=rr("Blob"),WF=rr("FileList"),qF=t=>Em(t)&&oi(t.pipe),GF=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||oi(t.append)&&((e=xm(t))==="formdata"||e==="object"&&oi(t.toString)&&t.toString()==="[object FormData]"))},KF=rr("URLSearchParams"),[ZF,YF,QF,XF]=["ReadableStream","Request","Response","Headers"].map(rr),JF=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Lh(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let i,r;if(typeof t!="object"&&(t=[t]),nu(t))for(i=0,r=t.length;i<r;i++)e.call(null,t[i],i,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let l;for(i=0;i<o;i++)l=s[i],e.call(null,t[l],l,t)}}function JC(t,e){e=e.toLowerCase();const n=Object.keys(t);let i=n.length,r;for(;i-- >0;)if(r=n[i],e===r.toLowerCase())return r;return null}const Yo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,eI=t=>!oh(t)&&t!==Yo;function Ay(){const{caseless:t}=eI(this)&&this||{},e={},n=(i,r)=>{const s=t&&JC(e,r)||r;kf(e[s])&&kf(i)?e[s]=Ay(e[s],i):kf(i)?e[s]=Ay({},i):nu(i)?e[s]=i.slice():e[s]=i};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&Lh(arguments[i],n);return e}const e3=(t,e,n,{allOwnKeys:i}={})=>(Lh(e,(r,s)=>{n&&oi(r)?t[s]=YC(r,n):t[s]=r},{allOwnKeys:i}),t),t3=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),n3=(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},i3=(t,e,n,i)=>{let r,s,o;const l={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),s=r.length;s-- >0;)o=r[s],(!i||i(o,t,e))&&!l[o]&&(e[o]=t[o],l[o]=!0);t=n!==!1&&k0(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},r3=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return i!==-1&&i===n},s3=t=>{if(!t)return null;if(nu(t))return t;let e=t.length;if(!XC(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},o3=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&k0(Uint8Array)),a3=(t,e)=>{const i=(t&&t[Symbol.iterator]).call(t);let r;for(;(r=i.next())&&!r.done;){const s=r.value;e.call(t,s[0],s[1])}},l3=(t,e)=>{let n;const i=[];for(;(n=t.exec(e))!==null;)i.push(n);return i},u3=rr("HTMLFormElement"),c3=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,r){return i.toUpperCase()+r}),ab=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),h3=rr("RegExp"),tI=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};Lh(n,(r,s)=>{let o;(o=e(r,s,t))!==!1&&(i[s]=o||r)}),Object.defineProperties(t,i)},d3=t=>{tI(t,(e,n)=>{if(oi(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(oi(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},f3=(t,e)=>{const n={},i=r=>{r.forEach(s=>{n[s]=!0})};return nu(t)?i(t):i(String(t).split(e)),n},p3=()=>{},m3=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function g3(t){return!!(t&&oi(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const _3=t=>{const e=new Array(10),n=(i,r)=>{if(Em(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[r]=i;const s=nu(i)?[]:{};return Lh(i,(o,l)=>{const u=n(o,r+1);!oh(u)&&(s[l]=u)}),e[r]=void 0,s}}return i};return n(t,0)},y3=rr("AsyncFunction"),v3=t=>t&&(Em(t)||oi(t))&&oi(t.then)&&oi(t.catch),nI=((t,e)=>t?setImmediate:e?((n,i)=>(Yo.addEventListener("message",({source:r,data:s})=>{r===Yo&&s===n&&i.length&&i.shift()()},!1),r=>{i.push(r),Yo.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",oi(Yo.postMessage)),w3=typeof queueMicrotask<"u"?queueMicrotask.bind(Yo):typeof process<"u"&&process.nextTick||nI,X={isArray:nu,isArrayBuffer:QC,isBuffer:jF,isFormData:GF,isArrayBufferView:VF,isString:zF,isNumber:XC,isBoolean:BF,isObject:Em,isPlainObject:kf,isReadableStream:ZF,isRequest:YF,isResponse:QF,isHeaders:XF,isUndefined:oh,isDate:UF,isFile:$F,isBlob:HF,isRegExp:h3,isFunction:oi,isStream:qF,isURLSearchParams:KF,isTypedArray:o3,isFileList:WF,forEach:Lh,merge:Ay,extend:e3,trim:JF,stripBOM:t3,inherits:n3,toFlatObject:i3,kindOf:xm,kindOfTest:rr,endsWith:r3,toArray:s3,forEachEntry:a3,matchAll:l3,isHTMLForm:u3,hasOwnProperty:ab,hasOwnProp:ab,reduceDescriptors:tI,freezeMethods:d3,toObjectSet:f3,toCamelCase:c3,noop:p3,toFiniteNumber:m3,findKey:JC,global:Yo,isContextDefined:eI,isSpecCompliantForm:g3,toJSONObject:_3,isAsyncFn:y3,isThenable:v3,setImmediate:nI,asap:w3};function Me(t,e,n,i,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),r&&(this.response=r,this.status=r.status?r.status:null)}X.inherits(Me,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:X.toJSONObject(this.config),code:this.code,status:this.status}}});const iI=Me.prototype,rI={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{rI[t]={value:t}});Object.defineProperties(Me,rI);Object.defineProperty(iI,"isAxiosError",{value:!0});Me.from=(t,e,n,i,r,s)=>{const o=Object.create(iI);return X.toFlatObject(t,o,function(u){return u!==Error.prototype},l=>l!=="isAxiosError"),Me.call(o,t.message,e,n,i,r),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const x3=null;function Ry(t){return X.isPlainObject(t)||X.isArray(t)}function sI(t){return X.endsWith(t,"[]")?t.slice(0,-2):t}function lb(t,e,n){return t?t.concat(e).map(function(r,s){return r=sI(r),!n&&s?"["+r+"]":r}).join(n?".":""):e}function b3(t){return X.isArray(t)&&!t.some(Ry)}const E3=X.toFlatObject(X,{},null,function(e){return/^is[A-Z]/.test(e)});function Sm(t,e,n){if(!X.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=X.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,C){return!X.isUndefined(C[x])});const i=n.metaTokens,r=n.visitor||d,s=n.dots,o=n.indexes,u=(n.Blob||typeof Blob<"u"&&Blob)&&X.isSpecCompliantForm(e);if(!X.isFunction(r))throw new TypeError("visitor must be a function");function h(w){if(w===null)return"";if(X.isDate(w))return w.toISOString();if(!u&&X.isBlob(w))throw new Me("Blob is not supported. Use a Buffer instead.");return X.isArrayBuffer(w)||X.isTypedArray(w)?u&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function d(w,x,C){let E=w;if(w&&!C&&typeof w=="object"){if(X.endsWith(x,"{}"))x=i?x:x.slice(0,-2),w=JSON.stringify(w);else if(X.isArray(w)&&b3(w)||(X.isFileList(w)||X.endsWith(x,"[]"))&&(E=X.toArray(w)))return x=sI(x),E.forEach(function(P,j){!(X.isUndefined(P)||P===null)&&e.append(o===!0?lb([x],j,s):o===null?x:x+"[]",h(P))}),!1}return Ry(w)?!0:(e.append(lb(C,x,s),h(w)),!1)}const m=[],g=Object.assign(E3,{defaultVisitor:d,convertValue:h,isVisitable:Ry});function _(w,x){if(!X.isUndefined(w)){if(m.indexOf(w)!==-1)throw Error("Circular reference detected in "+x.join("."));m.push(w),X.forEach(w,function(E,k){(!(X.isUndefined(E)||E===null)&&r.call(e,E,X.isString(k)?k.trim():k,x,g))===!0&&_(E,x?x.concat(k):[k])}),m.pop()}}if(!X.isObject(t))throw new TypeError("data must be an object");return _(t),e}function ub(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function P0(t,e){this._pairs=[],t&&Sm(t,this,e)}const oI=P0.prototype;oI.append=function(e,n){this._pairs.push([e,n])};oI.toString=function(e){const n=e?function(i){return e.call(this,i,ub)}:ub;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function S3(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function aI(t,e,n){if(!e)return t;const i=n&&n.encode||S3;X.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let s;if(r?s=r(e,n):s=X.isURLSearchParams(e)?e.toString():new P0(e,n).toString(i),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class cb{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){X.forEach(this.handlers,function(i){i!==null&&e(i)})}}const lI={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},T3=typeof URLSearchParams<"u"?URLSearchParams:P0,k3=typeof FormData<"u"?FormData:null,P3=typeof Blob<"u"?Blob:null,C3={isBrowser:!0,classes:{URLSearchParams:T3,FormData:k3,Blob:P3},protocols:["http","https","file","blob","url","data"]},C0=typeof window<"u"&&typeof document<"u",Ly=typeof navigator=="object"&&navigator||void 0,I3=C0&&(!Ly||["ReactNative","NativeScript","NS"].indexOf(Ly.product)<0),A3=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",R3=C0&&window.location.href||"http://localhost",L3=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:C0,hasStandardBrowserEnv:I3,hasStandardBrowserWebWorkerEnv:A3,navigator:Ly,origin:R3},Symbol.toStringTag,{value:"Module"})),vn={...L3,...C3};function N3(t,e){return Sm(t,new vn.classes.URLSearchParams,Object.assign({visitor:function(n,i,r,s){return vn.isNode&&X.isBuffer(n)?(this.append(i,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function O3(t){return X.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function M3(t){const e={},n=Object.keys(t);let i;const r=n.length;let s;for(i=0;i<r;i++)s=n[i],e[s]=t[s];return e}function uI(t){function e(n,i,r,s){let o=n[s++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),u=s>=n.length;return o=!o&&X.isArray(r)?r.length:o,u?(X.hasOwnProp(r,o)?r[o]=[r[o],i]:r[o]=i,!l):((!r[o]||!X.isObject(r[o]))&&(r[o]=[]),e(n,i,r[o],s)&&X.isArray(r[o])&&(r[o]=M3(r[o])),!l)}if(X.isFormData(t)&&X.isFunction(t.entries)){const n={};return X.forEachEntry(t,(i,r)=>{e(O3(i),r,n,0)}),n}return null}function D3(t,e,n){if(X.isString(t))try{return(e||JSON.parse)(t),X.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}const Nh={transitional:lI,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const i=n.getContentType()||"",r=i.indexOf("application/json")>-1,s=X.isObject(e);if(s&&X.isHTMLForm(e)&&(e=new FormData(e)),X.isFormData(e))return r?JSON.stringify(uI(e)):e;if(X.isArrayBuffer(e)||X.isBuffer(e)||X.isStream(e)||X.isFile(e)||X.isBlob(e)||X.isReadableStream(e))return e;if(X.isArrayBufferView(e))return e.buffer;if(X.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return N3(e,this.formSerializer).toString();if((l=X.isFileList(e))||i.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Sm(l?{"files[]":e}:e,u&&new u,this.formSerializer)}}return s||r?(n.setContentType("application/json",!1),D3(e)):e}],transformResponse:[function(e){const n=this.transitional||Nh.transitional,i=n&&n.forcedJSONParsing,r=this.responseType==="json";if(X.isResponse(e)||X.isReadableStream(e))return e;if(e&&X.isString(e)&&(i&&!this.responseType||r)){const o=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(l){if(o)throw l.name==="SyntaxError"?Me.from(l,Me.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:vn.classes.FormData,Blob:vn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};X.forEach(["delete","get","head","post","put","patch"],t=>{Nh.headers[t]={}});const F3=X.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),j3=t=>{const e={};let n,i,r;return t&&t.split(`
`).forEach(function(o){r=o.indexOf(":"),n=o.substring(0,r).trim().toLowerCase(),i=o.substring(r+1).trim(),!(!n||e[n]&&F3[n])&&(n==="set-cookie"?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e},hb=Symbol("internals");function Zu(t){return t&&String(t).trim().toLowerCase()}function Pf(t){return t===!1||t==null?t:X.isArray(t)?t.map(Pf):String(t)}function V3(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}const z3=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Ug(t,e,n,i,r){if(X.isFunction(i))return i.call(this,e,n);if(r&&(e=n),!!X.isString(e)){if(X.isString(i))return e.indexOf(i)!==-1;if(X.isRegExp(i))return i.test(e)}}function B3(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,i)=>n.toUpperCase()+i)}function U3(t,e){const n=X.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(r,s,o){return this[i].call(this,e,r,s,o)},configurable:!0})})}let Gn=class{constructor(e){e&&this.set(e)}set(e,n,i){const r=this;function s(l,u,h){const d=Zu(u);if(!d)throw new Error("header name must be a non-empty string");const m=X.findKey(r,d);(!m||r[m]===void 0||h===!0||h===void 0&&r[m]!==!1)&&(r[m||u]=Pf(l))}const o=(l,u)=>X.forEach(l,(h,d)=>s(h,d,u));if(X.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(X.isString(e)&&(e=e.trim())&&!z3(e))o(j3(e),n);else if(X.isHeaders(e))for(const[l,u]of e.entries())s(u,l,i);else e!=null&&s(n,e,i);return this}get(e,n){if(e=Zu(e),e){const i=X.findKey(this,e);if(i){const r=this[i];if(!n)return r;if(n===!0)return V3(r);if(X.isFunction(n))return n.call(this,r,i);if(X.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Zu(e),e){const i=X.findKey(this,e);return!!(i&&this[i]!==void 0&&(!n||Ug(this,this[i],i,n)))}return!1}delete(e,n){const i=this;let r=!1;function s(o){if(o=Zu(o),o){const l=X.findKey(i,o);l&&(!n||Ug(i,i[l],l,n))&&(delete i[l],r=!0)}}return X.isArray(e)?e.forEach(s):s(e),r}clear(e){const n=Object.keys(this);let i=n.length,r=!1;for(;i--;){const s=n[i];(!e||Ug(this,this[s],s,e,!0))&&(delete this[s],r=!0)}return r}normalize(e){const n=this,i={};return X.forEach(this,(r,s)=>{const o=X.findKey(i,s);if(o){n[o]=Pf(r),delete n[s];return}const l=e?B3(s):String(s).trim();l!==s&&delete n[s],n[l]=Pf(r),i[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return X.forEach(this,(i,r)=>{i!=null&&i!==!1&&(n[r]=e&&X.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const i=new this(e);return n.forEach(r=>i.set(r)),i}static accessor(e){const i=(this[hb]=this[hb]={accessors:{}}).accessors,r=this.prototype;function s(o){const l=Zu(o);i[l]||(U3(r,o),i[l]=!0)}return X.isArray(e)?e.forEach(s):s(e),this}};Gn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);X.reduceDescriptors(Gn.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(i){this[n]=i}}});X.freezeMethods(Gn);function $g(t,e){const n=this||Nh,i=e||n,r=Gn.from(i.headers);let s=i.data;return X.forEach(t,function(l){s=l.call(n,s,r.normalize(),e?e.status:void 0)}),r.normalize(),s}function cI(t){return!!(t&&t.__CANCEL__)}function iu(t,e,n){Me.call(this,t??"canceled",Me.ERR_CANCELED,e,n),this.name="CanceledError"}X.inherits(iu,Me,{__CANCEL__:!0});function hI(t,e,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):e(new Me("Request failed with status code "+n.status,[Me.ERR_BAD_REQUEST,Me.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function $3(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function H3(t,e){t=t||10;const n=new Array(t),i=new Array(t);let r=0,s=0,o;return e=e!==void 0?e:1e3,function(u){const h=Date.now(),d=i[s];o||(o=h),n[r]=u,i[r]=h;let m=s,g=0;for(;m!==r;)g+=n[m++],m=m%t;if(r=(r+1)%t,r===s&&(s=(s+1)%t),h-o<e)return;const _=d&&h-d;return _?Math.round(g*1e3/_):void 0}}function W3(t,e){let n=0,i=1e3/e,r,s;const o=(h,d=Date.now())=>{n=d,r=null,s&&(clearTimeout(s),s=null),t.apply(null,h)};return[(...h)=>{const d=Date.now(),m=d-n;m>=i?o(h,d):(r=h,s||(s=setTimeout(()=>{s=null,o(r)},i-m)))},()=>r&&o(r)]}const Ep=(t,e,n=3)=>{let i=0;const r=H3(50,250);return W3(s=>{const o=s.loaded,l=s.lengthComputable?s.total:void 0,u=o-i,h=r(u),d=o<=l;i=o;const m={loaded:o,total:l,progress:l?o/l:void 0,bytes:u,rate:h||void 0,estimated:h&&l&&d?(l-o)/h:void 0,event:s,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(m)},n)},db=(t,e)=>{const n=t!=null;return[i=>e[0]({lengthComputable:n,total:t,loaded:i}),e[1]]},fb=t=>(...e)=>X.asap(()=>t(...e)),q3=vn.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,vn.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(vn.origin),vn.navigator&&/(msie|trident)/i.test(vn.navigator.userAgent)):()=>!0,G3=vn.hasStandardBrowserEnv?{write(t,e,n,i,r,s){const o=[t+"="+encodeURIComponent(e)];X.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),X.isString(i)&&o.push("path="+i),X.isString(r)&&o.push("domain="+r),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function K3(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Z3(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function dI(t,e,n){let i=!K3(e);return t&&(i||n==!1)?Z3(t,e):e}const pb=t=>t instanceof Gn?{...t}:t;function ha(t,e){e=e||{};const n={};function i(h,d,m,g){return X.isPlainObject(h)&&X.isPlainObject(d)?X.merge.call({caseless:g},h,d):X.isPlainObject(d)?X.merge({},d):X.isArray(d)?d.slice():d}function r(h,d,m,g){if(X.isUndefined(d)){if(!X.isUndefined(h))return i(void 0,h,m,g)}else return i(h,d,m,g)}function s(h,d){if(!X.isUndefined(d))return i(void 0,d)}function o(h,d){if(X.isUndefined(d)){if(!X.isUndefined(h))return i(void 0,h)}else return i(void 0,d)}function l(h,d,m){if(m in e)return i(h,d);if(m in t)return i(void 0,h)}const u={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(h,d,m)=>r(pb(h),pb(d),m,!0)};return X.forEach(Object.keys(Object.assign({},t,e)),function(d){const m=u[d]||r,g=m(t[d],e[d],d);X.isUndefined(g)&&m!==l||(n[d]=g)}),n}const fI=t=>{const e=ha({},t);let{data:n,withXSRFToken:i,xsrfHeaderName:r,xsrfCookieName:s,headers:o,auth:l}=e;e.headers=o=Gn.from(o),e.url=aI(dI(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let u;if(X.isFormData(n)){if(vn.hasStandardBrowserEnv||vn.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((u=o.getContentType())!==!1){const[h,...d]=u?u.split(";").map(m=>m.trim()).filter(Boolean):[];o.setContentType([h||"multipart/form-data",...d].join("; "))}}if(vn.hasStandardBrowserEnv&&(i&&X.isFunction(i)&&(i=i(e)),i||i!==!1&&q3(e.url))){const h=r&&s&&G3.read(s);h&&o.set(r,h)}return e},Y3=typeof XMLHttpRequest<"u",Q3=Y3&&function(t){return new Promise(function(n,i){const r=fI(t);let s=r.data;const o=Gn.from(r.headers).normalize();let{responseType:l,onUploadProgress:u,onDownloadProgress:h}=r,d,m,g,_,w;function x(){_&&_(),w&&w(),r.cancelToken&&r.cancelToken.unsubscribe(d),r.signal&&r.signal.removeEventListener("abort",d)}let C=new XMLHttpRequest;C.open(r.method.toUpperCase(),r.url,!0),C.timeout=r.timeout;function E(){if(!C)return;const P=Gn.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),W={data:!l||l==="text"||l==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:P,config:t,request:C};hI(function(R){n(R),x()},function(R){i(R),x()},W),C=null}"onloadend"in C?C.onloadend=E:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(E)},C.onabort=function(){C&&(i(new Me("Request aborted",Me.ECONNABORTED,t,C)),C=null)},C.onerror=function(){i(new Me("Network Error",Me.ERR_NETWORK,t,C)),C=null},C.ontimeout=function(){let j=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const W=r.transitional||lI;r.timeoutErrorMessage&&(j=r.timeoutErrorMessage),i(new Me(j,W.clarifyTimeoutError?Me.ETIMEDOUT:Me.ECONNABORTED,t,C)),C=null},s===void 0&&o.setContentType(null),"setRequestHeader"in C&&X.forEach(o.toJSON(),function(j,W){C.setRequestHeader(W,j)}),X.isUndefined(r.withCredentials)||(C.withCredentials=!!r.withCredentials),l&&l!=="json"&&(C.responseType=r.responseType),h&&([g,w]=Ep(h,!0),C.addEventListener("progress",g)),u&&C.upload&&([m,_]=Ep(u),C.upload.addEventListener("progress",m),C.upload.addEventListener("loadend",_)),(r.cancelToken||r.signal)&&(d=P=>{C&&(i(!P||P.type?new iu(null,t,C):P),C.abort(),C=null)},r.cancelToken&&r.cancelToken.subscribe(d),r.signal&&(r.signal.aborted?d():r.signal.addEventListener("abort",d)));const k=$3(r.url);if(k&&vn.protocols.indexOf(k)===-1){i(new Me("Unsupported protocol "+k+":",Me.ERR_BAD_REQUEST,t));return}C.send(s||null)})},X3=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let i=new AbortController,r;const s=function(h){if(!r){r=!0,l();const d=h instanceof Error?h:this.reason;i.abort(d instanceof Me?d:new iu(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,s(new Me(`timeout ${e} of ms exceeded`,Me.ETIMEDOUT))},e);const l=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(h=>{h.unsubscribe?h.unsubscribe(s):h.removeEventListener("abort",s)}),t=null)};t.forEach(h=>h.addEventListener("abort",s));const{signal:u}=i;return u.unsubscribe=()=>X.asap(l),u}},J3=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let i=0,r;for(;i<n;)r=i+e,yield t.slice(i,r),i=r},e5=async function*(t,e){for await(const n of t5(t))yield*J3(n,e)},t5=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:i}=await e.read();if(n)break;yield i}}finally{await e.cancel()}},mb=(t,e,n,i)=>{const r=e5(t,e);let s=0,o,l=u=>{o||(o=!0,i&&i(u))};return new ReadableStream({async pull(u){try{const{done:h,value:d}=await r.next();if(h){l(),u.close();return}let m=d.byteLength;if(n){let g=s+=m;n(g)}u.enqueue(new Uint8Array(d))}catch(h){throw l(h),h}},cancel(u){return l(u),r.return()}},{highWaterMark:2})},Tm=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",pI=Tm&&typeof ReadableStream=="function",n5=Tm&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),mI=(t,...e)=>{try{return!!t(...e)}catch{return!1}},i5=pI&&mI(()=>{let t=!1;const e=new Request(vn.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),gb=64*1024,Ny=pI&&mI(()=>X.isReadableStream(new Response("").body)),Sp={stream:Ny&&(t=>t.body)};Tm&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Sp[e]&&(Sp[e]=X.isFunction(t[e])?n=>n[e]():(n,i)=>{throw new Me(`Response type '${e}' is not supported`,Me.ERR_NOT_SUPPORT,i)})})})(new Response);const r5=async t=>{if(t==null)return 0;if(X.isBlob(t))return t.size;if(X.isSpecCompliantForm(t))return(await new Request(vn.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(X.isArrayBufferView(t)||X.isArrayBuffer(t))return t.byteLength;if(X.isURLSearchParams(t)&&(t=t+""),X.isString(t))return(await n5(t)).byteLength},s5=async(t,e)=>{const n=X.toFiniteNumber(t.getContentLength());return n??r5(e)},o5=Tm&&(async t=>{let{url:e,method:n,data:i,signal:r,cancelToken:s,timeout:o,onDownloadProgress:l,onUploadProgress:u,responseType:h,headers:d,withCredentials:m="same-origin",fetchOptions:g}=fI(t);h=h?(h+"").toLowerCase():"text";let _=X3([r,s&&s.toAbortSignal()],o),w;const x=_&&_.unsubscribe&&(()=>{_.unsubscribe()});let C;try{if(u&&i5&&n!=="get"&&n!=="head"&&(C=await s5(d,i))!==0){let W=new Request(e,{method:"POST",body:i,duplex:"half"}),z;if(X.isFormData(i)&&(z=W.headers.get("content-type"))&&d.setContentType(z),W.body){const[R,I]=db(C,Ep(fb(u)));i=mb(W.body,gb,R,I)}}X.isString(m)||(m=m?"include":"omit");const E="credentials"in Request.prototype;w=new Request(e,{...g,signal:_,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:i,duplex:"half",credentials:E?m:void 0});let k=await fetch(w);const P=Ny&&(h==="stream"||h==="response");if(Ny&&(l||P&&x)){const W={};["status","statusText","headers"].forEach(N=>{W[N]=k[N]});const z=X.toFiniteNumber(k.headers.get("content-length")),[R,I]=l&&db(z,Ep(fb(l),!0))||[];k=new Response(mb(k.body,gb,R,()=>{I&&I(),x&&x()}),W)}h=h||"text";let j=await Sp[X.findKey(Sp,h)||"text"](k,t);return!P&&x&&x(),await new Promise((W,z)=>{hI(W,z,{data:j,headers:Gn.from(k.headers),status:k.status,statusText:k.statusText,config:t,request:w})})}catch(E){throw x&&x(),E&&E.name==="TypeError"&&/fetch/i.test(E.message)?Object.assign(new Me("Network Error",Me.ERR_NETWORK,t,w),{cause:E.cause||E}):Me.from(E,E&&E.code,t,w)}}),Oy={http:x3,xhr:Q3,fetch:o5};X.forEach(Oy,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const _b=t=>`- ${t}`,a5=t=>X.isFunction(t)||t===null||t===!1,gI={getAdapter:t=>{t=X.isArray(t)?t:[t];const{length:e}=t;let n,i;const r={};for(let s=0;s<e;s++){n=t[s];let o;if(i=n,!a5(n)&&(i=Oy[(o=String(n)).toLowerCase()],i===void 0))throw new Me(`Unknown adapter '${o}'`);if(i)break;r[o||"#"+s]=i}if(!i){const s=Object.entries(r).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(_b).join(`
`):" "+_b(s[0]):"as no adapter specified";throw new Me("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return i},adapters:Oy};function Hg(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new iu(null,t)}function yb(t){return Hg(t),t.headers=Gn.from(t.headers),t.data=$g.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),gI.getAdapter(t.adapter||Nh.adapter)(t).then(function(i){return Hg(t),i.data=$g.call(t,t.transformResponse,i),i.headers=Gn.from(i.headers),i},function(i){return cI(i)||(Hg(t),i&&i.response&&(i.response.data=$g.call(t,t.transformResponse,i.response),i.response.headers=Gn.from(i.response.headers))),Promise.reject(i)})}const _I="1.8.4",km={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{km[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});const vb={};km.transitional=function(e,n,i){function r(s,o){return"[Axios v"+_I+"] Transitional option '"+s+"'"+o+(i?". "+i:"")}return(s,o,l)=>{if(e===!1)throw new Me(r(o," has been removed"+(n?" in "+n:"")),Me.ERR_DEPRECATED);return n&&!vb[o]&&(vb[o]=!0,console.warn(r(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,l):!0}};km.spelling=function(e){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function l5(t,e,n){if(typeof t!="object")throw new Me("options must be an object",Me.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let r=i.length;for(;r-- >0;){const s=i[r],o=e[s];if(o){const l=t[s],u=l===void 0||o(l,s,t);if(u!==!0)throw new Me("option "+s+" must be "+u,Me.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Me("Unknown option "+s,Me.ERR_BAD_OPTION)}}const Cf={assertOptions:l5,validators:km},dr=Cf.validators;let ta=class{constructor(e){this.defaults=e,this.interceptors={request:new cb,response:new cb}}async request(e,n){try{return await this._request(e,n)}catch(i){if(i instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const s=r.stack?r.stack.replace(/^.+\n/,""):"";try{i.stack?s&&!String(i.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+s):i.stack=s}catch{}}throw i}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=ha(this.defaults,n);const{transitional:i,paramsSerializer:r,headers:s}=n;i!==void 0&&Cf.assertOptions(i,{silentJSONParsing:dr.transitional(dr.boolean),forcedJSONParsing:dr.transitional(dr.boolean),clarifyTimeoutError:dr.transitional(dr.boolean)},!1),r!=null&&(X.isFunction(r)?n.paramsSerializer={serialize:r}:Cf.assertOptions(r,{encode:dr.function,serialize:dr.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Cf.assertOptions(n,{baseUrl:dr.spelling("baseURL"),withXsrfToken:dr.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&X.merge(s.common,s[n.method]);s&&X.forEach(["delete","get","head","post","put","patch","common"],w=>{delete s[w]}),n.headers=Gn.concat(o,s);const l=[];let u=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(n)===!1||(u=u&&x.synchronous,l.unshift(x.fulfilled,x.rejected))});const h=[];this.interceptors.response.forEach(function(x){h.push(x.fulfilled,x.rejected)});let d,m=0,g;if(!u){const w=[yb.bind(this),void 0];for(w.unshift.apply(w,l),w.push.apply(w,h),g=w.length,d=Promise.resolve(n);m<g;)d=d.then(w[m++],w[m++]);return d}g=l.length;let _=n;for(m=0;m<g;){const w=l[m++],x=l[m++];try{_=w(_)}catch(C){x.call(this,C);break}}try{d=yb.call(this,_)}catch(w){return Promise.reject(w)}for(m=0,g=h.length;m<g;)d=d.then(h[m++],h[m++]);return d}getUri(e){e=ha(this.defaults,e);const n=dI(e.baseURL,e.url,e.allowAbsoluteUrls);return aI(n,e.params,e.paramsSerializer)}};X.forEach(["delete","get","head","options"],function(e){ta.prototype[e]=function(n,i){return this.request(ha(i||{},{method:e,url:n,data:(i||{}).data}))}});X.forEach(["post","put","patch"],function(e){function n(i){return function(s,o,l){return this.request(ha(l||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}ta.prototype[e]=n(),ta.prototype[e+"Form"]=n(!0)});let u5=class yI{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const i=this;this.promise.then(r=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](r);i._listeners=null}),this.promise.then=r=>{let s;const o=new Promise(l=>{i.subscribe(l),s=l}).then(r);return o.cancel=function(){i.unsubscribe(s)},o},e(function(s,o,l){i.reason||(i.reason=new iu(s,o,l),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=i=>{e.abort(i)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new yI(function(r){e=r}),cancel:e}}};function c5(t){return function(n){return t.apply(null,n)}}function h5(t){return X.isObject(t)&&t.isAxiosError===!0}const My={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(My).forEach(([t,e])=>{My[e]=t});function vI(t){const e=new ta(t),n=YC(ta.prototype.request,e);return X.extend(n,ta.prototype,e,{allOwnKeys:!0}),X.extend(n,e,null,{allOwnKeys:!0}),n.create=function(r){return vI(ha(t,r))},n}const Dt=vI(Nh);Dt.Axios=ta;Dt.CanceledError=iu;Dt.CancelToken=u5;Dt.isCancel=cI;Dt.VERSION=_I;Dt.toFormData=Sm;Dt.AxiosError=Me;Dt.Cancel=Dt.CanceledError;Dt.all=function(e){return Promise.all(e)};Dt.spread=c5;Dt.isAxiosError=h5;Dt.mergeConfig=ha;Dt.AxiosHeaders=Gn;Dt.formToJSON=t=>uI(X.isHTMLForm(t)?new FormData(t):t);Dt.getAdapter=gI.getAdapter;Dt.HttpStatusCode=My;Dt.default=Dt;const{Axios:fG,AxiosError:pG,CanceledError:mG,isCancel:gG,CancelToken:_G,VERSION:yG,all:vG,Cancel:wG,isAxiosError:xG,spread:bG,toFormData:EG,AxiosHeaders:SG,HttpStatusCode:TG,formToJSON:kG,getAdapter:PG,mergeConfig:CG}=Dt;var d5="firebase",f5="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ii(d5,f5,"app");var wb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var na,wI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,I){function N(){}N.prototype=I.prototype,R.D=I.prototype,R.prototype=new N,R.prototype.constructor=R,R.C=function(F,D,B){for(var V=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)V[ee-2]=arguments[ee];return I.prototype[D].apply(F,V)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(R,I,N){N||(N=0);var F=Array(16);if(typeof I=="string")for(var D=0;16>D;++D)F[D]=I.charCodeAt(N++)|I.charCodeAt(N++)<<8|I.charCodeAt(N++)<<16|I.charCodeAt(N++)<<24;else for(D=0;16>D;++D)F[D]=I[N++]|I[N++]<<8|I[N++]<<16|I[N++]<<24;I=R.g[0],N=R.g[1],D=R.g[2];var B=R.g[3],V=I+(B^N&(D^B))+F[0]+3614090360&4294967295;I=N+(V<<7&4294967295|V>>>25),V=B+(D^I&(N^D))+F[1]+3905402710&4294967295,B=I+(V<<12&4294967295|V>>>20),V=D+(N^B&(I^N))+F[2]+606105819&4294967295,D=B+(V<<17&4294967295|V>>>15),V=N+(I^D&(B^I))+F[3]+3250441966&4294967295,N=D+(V<<22&4294967295|V>>>10),V=I+(B^N&(D^B))+F[4]+4118548399&4294967295,I=N+(V<<7&4294967295|V>>>25),V=B+(D^I&(N^D))+F[5]+1200080426&4294967295,B=I+(V<<12&4294967295|V>>>20),V=D+(N^B&(I^N))+F[6]+2821735955&4294967295,D=B+(V<<17&4294967295|V>>>15),V=N+(I^D&(B^I))+F[7]+4249261313&4294967295,N=D+(V<<22&4294967295|V>>>10),V=I+(B^N&(D^B))+F[8]+1770035416&4294967295,I=N+(V<<7&4294967295|V>>>25),V=B+(D^I&(N^D))+F[9]+2336552879&4294967295,B=I+(V<<12&4294967295|V>>>20),V=D+(N^B&(I^N))+F[10]+4294925233&4294967295,D=B+(V<<17&4294967295|V>>>15),V=N+(I^D&(B^I))+F[11]+2304563134&4294967295,N=D+(V<<22&4294967295|V>>>10),V=I+(B^N&(D^B))+F[12]+1804603682&4294967295,I=N+(V<<7&4294967295|V>>>25),V=B+(D^I&(N^D))+F[13]+4254626195&4294967295,B=I+(V<<12&4294967295|V>>>20),V=D+(N^B&(I^N))+F[14]+2792965006&4294967295,D=B+(V<<17&4294967295|V>>>15),V=N+(I^D&(B^I))+F[15]+1236535329&4294967295,N=D+(V<<22&4294967295|V>>>10),V=I+(D^B&(N^D))+F[1]+4129170786&4294967295,I=N+(V<<5&4294967295|V>>>27),V=B+(N^D&(I^N))+F[6]+3225465664&4294967295,B=I+(V<<9&4294967295|V>>>23),V=D+(I^N&(B^I))+F[11]+643717713&4294967295,D=B+(V<<14&4294967295|V>>>18),V=N+(B^I&(D^B))+F[0]+3921069994&4294967295,N=D+(V<<20&4294967295|V>>>12),V=I+(D^B&(N^D))+F[5]+3593408605&4294967295,I=N+(V<<5&4294967295|V>>>27),V=B+(N^D&(I^N))+F[10]+38016083&4294967295,B=I+(V<<9&4294967295|V>>>23),V=D+(I^N&(B^I))+F[15]+3634488961&4294967295,D=B+(V<<14&4294967295|V>>>18),V=N+(B^I&(D^B))+F[4]+3889429448&4294967295,N=D+(V<<20&4294967295|V>>>12),V=I+(D^B&(N^D))+F[9]+568446438&4294967295,I=N+(V<<5&4294967295|V>>>27),V=B+(N^D&(I^N))+F[14]+3275163606&4294967295,B=I+(V<<9&4294967295|V>>>23),V=D+(I^N&(B^I))+F[3]+4107603335&4294967295,D=B+(V<<14&4294967295|V>>>18),V=N+(B^I&(D^B))+F[8]+1163531501&4294967295,N=D+(V<<20&4294967295|V>>>12),V=I+(D^B&(N^D))+F[13]+2850285829&4294967295,I=N+(V<<5&4294967295|V>>>27),V=B+(N^D&(I^N))+F[2]+4243563512&4294967295,B=I+(V<<9&4294967295|V>>>23),V=D+(I^N&(B^I))+F[7]+1735328473&4294967295,D=B+(V<<14&4294967295|V>>>18),V=N+(B^I&(D^B))+F[12]+2368359562&4294967295,N=D+(V<<20&4294967295|V>>>12),V=I+(N^D^B)+F[5]+4294588738&4294967295,I=N+(V<<4&4294967295|V>>>28),V=B+(I^N^D)+F[8]+2272392833&4294967295,B=I+(V<<11&4294967295|V>>>21),V=D+(B^I^N)+F[11]+1839030562&4294967295,D=B+(V<<16&4294967295|V>>>16),V=N+(D^B^I)+F[14]+4259657740&4294967295,N=D+(V<<23&4294967295|V>>>9),V=I+(N^D^B)+F[1]+2763975236&4294967295,I=N+(V<<4&4294967295|V>>>28),V=B+(I^N^D)+F[4]+1272893353&4294967295,B=I+(V<<11&4294967295|V>>>21),V=D+(B^I^N)+F[7]+4139469664&4294967295,D=B+(V<<16&4294967295|V>>>16),V=N+(D^B^I)+F[10]+3200236656&4294967295,N=D+(V<<23&4294967295|V>>>9),V=I+(N^D^B)+F[13]+681279174&4294967295,I=N+(V<<4&4294967295|V>>>28),V=B+(I^N^D)+F[0]+3936430074&4294967295,B=I+(V<<11&4294967295|V>>>21),V=D+(B^I^N)+F[3]+3572445317&4294967295,D=B+(V<<16&4294967295|V>>>16),V=N+(D^B^I)+F[6]+76029189&4294967295,N=D+(V<<23&4294967295|V>>>9),V=I+(N^D^B)+F[9]+3654602809&4294967295,I=N+(V<<4&4294967295|V>>>28),V=B+(I^N^D)+F[12]+3873151461&4294967295,B=I+(V<<11&4294967295|V>>>21),V=D+(B^I^N)+F[15]+530742520&4294967295,D=B+(V<<16&4294967295|V>>>16),V=N+(D^B^I)+F[2]+3299628645&4294967295,N=D+(V<<23&4294967295|V>>>9),V=I+(D^(N|~B))+F[0]+4096336452&4294967295,I=N+(V<<6&4294967295|V>>>26),V=B+(N^(I|~D))+F[7]+1126891415&4294967295,B=I+(V<<10&4294967295|V>>>22),V=D+(I^(B|~N))+F[14]+2878612391&4294967295,D=B+(V<<15&4294967295|V>>>17),V=N+(B^(D|~I))+F[5]+4237533241&4294967295,N=D+(V<<21&4294967295|V>>>11),V=I+(D^(N|~B))+F[12]+1700485571&4294967295,I=N+(V<<6&4294967295|V>>>26),V=B+(N^(I|~D))+F[3]+2399980690&4294967295,B=I+(V<<10&4294967295|V>>>22),V=D+(I^(B|~N))+F[10]+4293915773&4294967295,D=B+(V<<15&4294967295|V>>>17),V=N+(B^(D|~I))+F[1]+2240044497&4294967295,N=D+(V<<21&4294967295|V>>>11),V=I+(D^(N|~B))+F[8]+1873313359&4294967295,I=N+(V<<6&4294967295|V>>>26),V=B+(N^(I|~D))+F[15]+4264355552&4294967295,B=I+(V<<10&4294967295|V>>>22),V=D+(I^(B|~N))+F[6]+2734768916&4294967295,D=B+(V<<15&4294967295|V>>>17),V=N+(B^(D|~I))+F[13]+1309151649&4294967295,N=D+(V<<21&4294967295|V>>>11),V=I+(D^(N|~B))+F[4]+4149444226&4294967295,I=N+(V<<6&4294967295|V>>>26),V=B+(N^(I|~D))+F[11]+3174756917&4294967295,B=I+(V<<10&4294967295|V>>>22),V=D+(I^(B|~N))+F[2]+718787259&4294967295,D=B+(V<<15&4294967295|V>>>17),V=N+(B^(D|~I))+F[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(D+(V<<21&4294967295|V>>>11))&4294967295,R.g[2]=R.g[2]+D&4294967295,R.g[3]=R.g[3]+B&4294967295}i.prototype.u=function(R,I){I===void 0&&(I=R.length);for(var N=I-this.blockSize,F=this.B,D=this.h,B=0;B<I;){if(D==0)for(;B<=N;)r(this,R,B),B+=this.blockSize;if(typeof R=="string"){for(;B<I;)if(F[D++]=R.charCodeAt(B++),D==this.blockSize){r(this,F),D=0;break}}else for(;B<I;)if(F[D++]=R[B++],D==this.blockSize){r(this,F),D=0;break}}this.h=D,this.o+=I},i.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;var N=8*this.o;for(I=R.length-8;I<R.length;++I)R[I]=N&255,N/=256;for(this.u(R),R=Array(16),I=N=0;4>I;++I)for(var F=0;32>F;F+=8)R[N++]=this.g[I]>>>F&255;return R};function s(R,I){var N=l;return Object.prototype.hasOwnProperty.call(N,R)?N[R]:N[R]=I(R)}function o(R,I){this.h=I;for(var N=[],F=!0,D=R.length-1;0<=D;D--){var B=R[D]|0;F&&B==I||(N[D]=B,F=!1)}this.g=N}var l={};function u(R){return-128<=R&&128>R?s(R,function(I){return new o([I|0],0>I?-1:0)}):new o([R|0],0>R?-1:0)}function h(R){if(isNaN(R)||!isFinite(R))return m;if(0>R)return C(h(-R));for(var I=[],N=1,F=0;R>=N;F++)I[F]=R/N|0,N*=4294967296;return new o(I,0)}function d(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return C(d(R.substring(1),I));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=h(Math.pow(I,8)),F=m,D=0;D<R.length;D+=8){var B=Math.min(8,R.length-D),V=parseInt(R.substring(D,D+B),I);8>B?(B=h(Math.pow(I,B)),F=F.j(B).add(h(V))):(F=F.j(N),F=F.add(h(V)))}return F}var m=u(0),g=u(1),_=u(16777216);t=o.prototype,t.m=function(){if(x(this))return-C(this).m();for(var R=0,I=1,N=0;N<this.g.length;N++){var F=this.i(N);R+=(0<=F?F:4294967296+F)*I,I*=4294967296}return R},t.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(w(this))return"0";if(x(this))return"-"+C(this).toString(R);for(var I=h(Math.pow(R,6)),N=this,F="";;){var D=j(N,I).g;N=E(N,D.j(I));var B=((0<N.g.length?N.g[0]:N.h)>>>0).toString(R);if(N=D,w(N))return B+F;for(;6>B.length;)B="0"+B;F=B+F}},t.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function w(R){if(R.h!=0)return!1;for(var I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function x(R){return R.h==-1}t.l=function(R){return R=E(this,R),x(R)?-1:w(R)?0:1};function C(R){for(var I=R.g.length,N=[],F=0;F<I;F++)N[F]=~R.g[F];return new o(N,~R.h).add(g)}t.abs=function(){return x(this)?C(this):this},t.add=function(R){for(var I=Math.max(this.g.length,R.g.length),N=[],F=0,D=0;D<=I;D++){var B=F+(this.i(D)&65535)+(R.i(D)&65535),V=(B>>>16)+(this.i(D)>>>16)+(R.i(D)>>>16);F=V>>>16,B&=65535,V&=65535,N[D]=V<<16|B}return new o(N,N[N.length-1]&-2147483648?-1:0)};function E(R,I){return R.add(C(I))}t.j=function(R){if(w(this)||w(R))return m;if(x(this))return x(R)?C(this).j(C(R)):C(C(this).j(R));if(x(R))return C(this.j(C(R)));if(0>this.l(_)&&0>R.l(_))return h(this.m()*R.m());for(var I=this.g.length+R.g.length,N=[],F=0;F<2*I;F++)N[F]=0;for(F=0;F<this.g.length;F++)for(var D=0;D<R.g.length;D++){var B=this.i(F)>>>16,V=this.i(F)&65535,ee=R.i(D)>>>16,te=R.i(D)&65535;N[2*F+2*D]+=V*te,k(N,2*F+2*D),N[2*F+2*D+1]+=B*te,k(N,2*F+2*D+1),N[2*F+2*D+1]+=V*ee,k(N,2*F+2*D+1),N[2*F+2*D+2]+=B*ee,k(N,2*F+2*D+2)}for(F=0;F<I;F++)N[F]=N[2*F+1]<<16|N[2*F];for(F=I;F<2*I;F++)N[F]=0;return new o(N,0)};function k(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function P(R,I){this.g=R,this.h=I}function j(R,I){if(w(I))throw Error("division by zero");if(w(R))return new P(m,m);if(x(R))return I=j(C(R),I),new P(C(I.g),C(I.h));if(x(I))return I=j(R,C(I)),new P(C(I.g),I.h);if(30<R.g.length){if(x(R)||x(I))throw Error("slowDivide_ only works with positive integers.");for(var N=g,F=I;0>=F.l(R);)N=W(N),F=W(F);var D=z(N,1),B=z(F,1);for(F=z(F,2),N=z(N,2);!w(F);){var V=B.add(F);0>=V.l(R)&&(D=D.add(N),B=V),F=z(F,1),N=z(N,1)}return I=E(R,D.j(I)),new P(D,I)}for(D=m;0<=R.l(I);){for(N=Math.max(1,Math.floor(R.m()/I.m())),F=Math.ceil(Math.log(N)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),B=h(N),V=B.j(I);x(V)||0<V.l(R);)N-=F,B=h(N),V=B.j(I);w(B)&&(B=g),D=D.add(B),R=E(R,V)}return new P(D,R)}t.A=function(R){return j(this,R).h},t.and=function(R){for(var I=Math.max(this.g.length,R.g.length),N=[],F=0;F<I;F++)N[F]=this.i(F)&R.i(F);return new o(N,this.h&R.h)},t.or=function(R){for(var I=Math.max(this.g.length,R.g.length),N=[],F=0;F<I;F++)N[F]=this.i(F)|R.i(F);return new o(N,this.h|R.h)},t.xor=function(R){for(var I=Math.max(this.g.length,R.g.length),N=[],F=0;F<I;F++)N[F]=this.i(F)^R.i(F);return new o(N,this.h^R.h)};function W(R){for(var I=R.g.length+1,N=[],F=0;F<I;F++)N[F]=R.i(F)<<1|R.i(F-1)>>>31;return new o(N,R.h)}function z(R,I){var N=I>>5;I%=32;for(var F=R.g.length-N,D=[],B=0;B<F;B++)D[B]=0<I?R.i(B+N)>>>I|R.i(B+N+1)<<32-I:R.i(B+N);return new o(D,R.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,wI=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=d,na=o}).apply(typeof wb<"u"?wb:typeof self<"u"?self:typeof window<"u"?window:{});var zd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xI,hc,bI,If,Dy,EI,SI,TI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,v,T){return f==Array.prototype||f==Object.prototype||(f[v]=T.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof zd=="object"&&zd];for(var v=0;v<f.length;++v){var T=f[v];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var i=n(this);function r(f,v){if(v)e:{var T=i;f=f.split(".");for(var O=0;O<f.length-1;O++){var q=f[O];if(!(q in T))break e;T=T[q]}f=f[f.length-1],O=T[f],v=v(O),v!=O&&v!=null&&e(T,f,{configurable:!0,writable:!0,value:v})}}function s(f,v){f instanceof String&&(f+="");var T=0,O=!1,q={next:function(){if(!O&&T<f.length){var Q=T++;return{value:v(Q,f[Q]),done:!1}}return O=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}r("Array.prototype.values",function(f){return f||function(){return s(this,function(v,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(f){var v=typeof f;return v=v!="object"?v:f?Array.isArray(f)?"array":v:"null",v=="array"||v=="object"&&typeof f.length=="number"}function h(f){var v=typeof f;return v=="object"&&f!=null||v=="function"}function d(f,v,T){return f.call.apply(f.bind,arguments)}function m(f,v,T){if(!f)throw Error();if(2<arguments.length){var O=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,O),f.apply(v,q)}}return function(){return f.apply(v,arguments)}}function g(f,v,T){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:m,g.apply(null,arguments)}function _(f,v){var T=Array.prototype.slice.call(arguments,1);return function(){var O=T.slice();return O.push.apply(O,arguments),f.apply(this,O)}}function w(f,v){function T(){}T.prototype=v.prototype,f.aa=v.prototype,f.prototype=new T,f.prototype.constructor=f,f.Qb=function(O,q,Q){for(var le=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)le[Xe-2]=arguments[Xe];return v.prototype[q].apply(O,le)}}function x(f){const v=f.length;if(0<v){const T=Array(v);for(let O=0;O<v;O++)T[O]=f[O];return T}return[]}function C(f,v){for(let T=1;T<arguments.length;T++){const O=arguments[T];if(u(O)){const q=f.length||0,Q=O.length||0;f.length=q+Q;for(let le=0;le<Q;le++)f[q+le]=O[le]}else f.push(O)}}class E{constructor(v,T){this.i=v,this.j=T,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function k(f){return/^[\s\xa0]*$/.test(f)}function P(){var f=l.navigator;return f&&(f=f.userAgent)?f:""}function j(f){return j[" "](f),f}j[" "]=function(){};var W=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function z(f,v,T){for(const O in f)v.call(T,f[O],O,f)}function R(f,v){for(const T in f)v.call(void 0,f[T],T,f)}function I(f){const v={};for(const T in f)v[T]=f[T];return v}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(f,v){let T,O;for(let q=1;q<arguments.length;q++){O=arguments[q];for(T in O)f[T]=O[T];for(let Q=0;Q<N.length;Q++)T=N[Q],Object.prototype.hasOwnProperty.call(O,T)&&(f[T]=O[T])}}function D(f){var v=1;f=f.split(":");const T=[];for(;0<v&&f.length;)T.push(f.shift()),v--;return f.length&&T.push(f.join(":")),T}function B(f){l.setTimeout(()=>{throw f},0)}function V(){var f=he;let v=null;return f.g&&(v=f.g,f.g=f.g.next,f.g||(f.h=null),v.next=null),v}class ee{constructor(){this.h=this.g=null}add(v,T){const O=te.get();O.set(v,T),this.h?this.h.next=O:this.g=O,this.h=O}}var te=new E(()=>new ae,f=>f.reset());class ae{constructor(){this.next=this.g=this.h=null}set(v,T){this.h=v,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,K=!1,he=new ee,M=()=>{const f=l.Promise.resolve(void 0);ue=()=>{f.then(fe)}};var fe=()=>{for(var f;f=V();){try{f.h.call(f.g)}catch(T){B(T)}var v=te;v.j(f),100>v.h&&(v.h++,f.next=v.g,v.g=f)}K=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(f,v){this.type=f,this.g=this.target=v,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var be=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var f=!1,v=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const T=()=>{};l.addEventListener("test",T,v),l.removeEventListener("test",T,v)}catch{}return f}();function we(f,v){if(U.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var T=this.type=f.type,O=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=v,v=f.relatedTarget){if(W){e:{try{j(v.nodeName);var q=!0;break e}catch{}q=!1}q||(v=null)}}else T=="mouseover"?v=f.fromElement:T=="mouseout"&&(v=f.toElement);this.relatedTarget=v,O?(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:pe[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&we.aa.h.call(this)}}w(we,U);var pe={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var Ie="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function vt(f,v,T,O,q){this.listener=f,this.proxy=null,this.src=v,this.type=T,this.capture=!!O,this.ha=q,this.key=++Fe,this.da=this.fa=!1}function Rt(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function ht(f){this.src=f,this.g={},this.h=0}ht.prototype.add=function(f,v,T,O,q){var Q=f.toString();f=this.g[Q],f||(f=this.g[Q]=[],this.h++);var le=Kt(f,v,O,q);return-1<le?(v=f[le],T||(v.fa=!1)):(v=new vt(v,this.src,Q,!!O,q),v.fa=T,f.push(v)),v};function mt(f,v){var T=v.type;if(T in f.g){var O=f.g[T],q=Array.prototype.indexOf.call(O,v,void 0),Q;(Q=0<=q)&&Array.prototype.splice.call(O,q,1),Q&&(Rt(v),f.g[T].length==0&&(delete f.g[T],f.h--))}}function Kt(f,v,T,O){for(var q=0;q<f.length;++q){var Q=f[q];if(!Q.da&&Q.listener==v&&Q.capture==!!T&&Q.ha==O)return q}return-1}var On="closure_lm_"+(1e6*Math.random()|0),ci={};function Di(f,v,T,O,q){if(Array.isArray(v)){for(var Q=0;Q<v.length;Q++)Di(f,v[Q],T,O,q);return null}return T=bs(T),f&&f[Ie]?f.K(v,T,h(O)?!!O.capture:!1,q):Fi(f,v,T,!1,O,q)}function Fi(f,v,T,O,q,Q){if(!v)throw Error("Invalid event type");var le=h(q)?!!q.capture:!!q,Xe=or(f);if(Xe||(f[On]=Xe=new ht(f)),T=Xe.add(v,T,O,le,Q),T.proxy)return T;if(O=ji(),T.proxy=O,O.src=f,O.listener=T,f.addEventListener)be||(q=le),q===void 0&&(q=!1),f.addEventListener(v.toString(),O,q);else if(f.attachEvent)f.attachEvent(Vi(v.toString()),O);else if(f.addListener&&f.removeListener)f.addListener(O);else throw Error("addEventListener and attachEvent are unavailable.");return T}function ji(){function f(T){return v.call(f.src,f.listener,T)}const v=Or;return f}function sr(f,v,T,O,q){if(Array.isArray(v))for(var Q=0;Q<v.length;Q++)sr(f,v[Q],T,O,q);else O=h(O)?!!O.capture:!!O,T=bs(T),f&&f[Ie]?(f=f.i,v=String(v).toString(),v in f.g&&(Q=f.g[v],T=Kt(Q,T,O,q),-1<T&&(Rt(Q[T]),Array.prototype.splice.call(Q,T,1),Q.length==0&&(delete f.g[v],f.h--)))):f&&(f=or(f))&&(v=f.g[v.toString()],f=-1,v&&(f=Kt(v,T,O,q)),(T=-1<f?v[f]:null)&&hi(T))}function hi(f){if(typeof f!="number"&&f&&!f.da){var v=f.src;if(v&&v[Ie])mt(v.i,f);else{var T=f.type,O=f.proxy;v.removeEventListener?v.removeEventListener(T,O,f.capture):v.detachEvent?v.detachEvent(Vi(T),O):v.addListener&&v.removeListener&&v.removeListener(O),(T=or(v))?(mt(T,f),T.h==0&&(T.src=null,v[On]=null)):Rt(f)}}}function Vi(f){return f in ci?ci[f]:ci[f]="on"+f}function Or(f,v){if(f.da)f=!0;else{v=new we(v,this);var T=f.listener,O=f.ha||f.src;f.fa&&hi(f),f=T.call(O,v)}return f}function or(f){return f=f[On],f instanceof ht?f:null}var wt="__closure_events_fn_"+(1e9*Math.random()>>>0);function bs(f){return typeof f=="function"?f:(f[wt]||(f[wt]=function(v){return f.handleEvent(v)}),f[wt])}function Y(){ce.call(this),this.i=new ht(this),this.M=this,this.F=null}w(Y,ce),Y.prototype[Ie]=!0,Y.prototype.removeEventListener=function(f,v,T,O){sr(this,f,v,T,O)};function ie(f,v){var T,O=f.F;if(O)for(T=[];O;O=O.F)T.push(O);if(f=f.M,O=v.type||v,typeof v=="string")v=new U(v,f);else if(v instanceof U)v.target=v.target||f;else{var q=v;v=new U(O,f),F(v,q)}if(q=!0,T)for(var Q=T.length-1;0<=Q;Q--){var le=v.g=T[Q];q=xe(le,O,!0,v)&&q}if(le=v.g=f,q=xe(le,O,!0,v)&&q,q=xe(le,O,!1,v)&&q,T)for(Q=0;Q<T.length;Q++)le=v.g=T[Q],q=xe(le,O,!1,v)&&q}Y.prototype.N=function(){if(Y.aa.N.call(this),this.i){var f=this.i,v;for(v in f.g){for(var T=f.g[v],O=0;O<T.length;O++)Rt(T[O]);delete f.g[v],f.h--}}this.F=null},Y.prototype.K=function(f,v,T,O){return this.i.add(String(f),v,!1,T,O)},Y.prototype.L=function(f,v,T,O){return this.i.add(String(f),v,!0,T,O)};function xe(f,v,T,O){if(v=f.i.g[String(v)],!v)return!0;v=v.concat();for(var q=!0,Q=0;Q<v.length;++Q){var le=v[Q];if(le&&!le.da&&le.capture==T){var Xe=le.listener,jt=le.ha||le.src;le.fa&&mt(f.i,le),q=Xe.call(jt,O)!==!1&&q}}return q&&!O.defaultPrevented}function Ne(f,v,T){if(typeof f=="function")T&&(f=g(f,T));else if(f&&typeof f.handleEvent=="function")f=g(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:l.setTimeout(f,v||0)}function ze(f){f.g=Ne(()=>{f.g=null,f.i&&(f.i=!1,ze(f))},f.l);const v=f.h;f.h=null,f.m.apply(null,v)}class Zt extends ce{constructor(v,T){super(),this.m=v,this.l=T,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:ze(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ye(f){ce.call(this),this.h=f,this.g={}}w(Ye,ce);var kn=[];function di(f){z(f.g,function(v,T){this.g.hasOwnProperty(T)&&hi(v)},f),f.g={}}Ye.prototype.N=function(){Ye.aa.N.call(this),di(this)},Ye.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fi=l.JSON.stringify,tn=l.JSON.parse,Mn=class{stringify(f){return l.JSON.stringify(f,void 0)}parse(f){return l.JSON.parse(f,void 0)}};function Pn(){}Pn.prototype.h=null;function Wh(f){return f.h||(f.h=f.i())}function du(){}var Es={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ea(){U.call(this,"d")}w(Ea,U);function fu(){U.call(this,"c")}w(fu,U);var Mr={},qh=null;function Sa(){return qh=qh||new Y}Mr.La="serverreachability";function Gh(f){U.call(this,Mr.La,f)}w(Gh,U);function Co(f){const v=Sa();ie(v,new Gh(v))}Mr.STAT_EVENT="statevent";function Ta(f,v){U.call(this,Mr.STAT_EVENT,f),this.stat=v}w(Ta,U);function nn(f){const v=Sa();ie(v,new Ta(v,f))}Mr.Ma="timingevent";function Kh(f,v){U.call(this,Mr.Ma,f),this.size=v}w(Kh,U);function Io(f,v){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){f()},v)}function Ao(){this.g=!0}Ao.prototype.xa=function(){this.g=!1};function pi(f,v,T,O,q,Q){f.info(function(){if(f.g)if(Q)for(var le="",Xe=Q.split("&"),jt=0;jt<Xe.length;jt++){var He=Xe[jt].split("=");if(1<He.length){var rt=He[0];He=He[1];var bt=rt.split("_");le=2<=bt.length&&bt[1]=="type"?le+(rt+"="+He+"&"):le+(rt+"=redacted&")}}else le=null;else le=Q;return"XMLHTTP REQ ("+O+") [attempt "+q+"]: "+v+`
`+T+`
`+le})}function ye(f,v,T,O,q,Q,le){f.info(function(){return"XMLHTTP RESP ("+O+") [ attempt "+q+"]: "+v+`
`+T+`
`+Q+" "+le})}function Dr(f,v,T,O){f.info(function(){return"XMLHTTP TEXT ("+v+"): "+Yh(f,T)+(O?" "+O:"")})}function Zh(f,v){f.info(function(){return"TIMEOUT: "+v})}Ao.prototype.info=function(){};function Yh(f,v){if(!f.g)return v;if(!v)return null;try{var T=JSON.parse(v);if(T){for(f=0;f<T.length;f++)if(Array.isArray(T[f])){var O=T[f];if(!(2>O.length)){var q=O[1];if(Array.isArray(q)&&!(1>q.length)){var Q=q[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var le=1;le<q.length;le++)q[le]=""}}}}return fi(T)}catch{return v}}var Ro={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ka={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Pa;function zi(){}w(zi,Pn),zi.prototype.g=function(){return new XMLHttpRequest},zi.prototype.i=function(){return{}},Pa=new zi;function Bi(f,v,T,O){this.j=f,this.i=v,this.l=T,this.R=O||1,this.U=new Ye(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qh}function Qh(){this.i=null,this.g="",this.h=!1}var Xh={},pu={};function mu(f,v,T){f.L=1,f.v=gi(Pt(v)),f.m=T,f.P=!0,gu(f,null)}function gu(f,v){f.F=Date.now(),Ia(f),f.A=Pt(f.v);var T=f.A,O=f.R;Array.isArray(O)||(O=[String(O)]),td(T.i,"t",O),f.C=0,T=f.j.J,f.h=new Qh,f.g=ld(f.j,T?v:null,!f.m),0<f.O&&(f.M=new Zt(g(f.Y,f,f.g),f.O)),v=f.U,T=f.g,O=f.ca;var q="readystatechange";Array.isArray(q)||(q&&(kn[0]=q.toString()),q=kn);for(var Q=0;Q<q.length;Q++){var le=Di(T,q[Q],O||v.handleEvent,!1,v.h||v);if(!le)break;v.g[le.key]=le}v=f.H?I(f.H):{},f.m?(f.u||(f.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,v)):(f.u="GET",f.g.ea(f.A,f.u,null,v)),Co(),pi(f.i,f.u,f.A,f.l,f.R,f.m)}Bi.prototype.ca=function(f){f=f.target;const v=this.M;v&&Cn(f)==3?v.j():this.Y(f)},Bi.prototype.Y=function(f){try{if(f==this.g)e:{const bt=Cn(this.g);var v=this.g.Ba();const As=this.g.Z();if(!(3>bt)&&(bt!=3||this.g&&(this.h.h||this.g.oa()||Lu(this.g)))){this.J||bt!=4||v==7||(v==8||0>=As?Co(3):Co(2)),_u(this);var T=this.g.Z();this.X=T;t:if(Jh(this)){var O=Lu(this.g);f="";var q=O.length,Q=Cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fr(this),Lo(this);var le="";break t}this.h.i=new l.TextDecoder}for(v=0;v<q;v++)this.h.h=!0,f+=this.h.i.decode(O[v],{stream:!(Q&&v==q-1)});O.length=0,this.h.g+=f,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=T==200,ye(this.i,this.u,this.A,this.l,this.R,bt,T),this.o){if(this.T&&!this.K){t:{if(this.g){var Xe,jt=this.g;if((Xe=jt.g?jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(Xe)){var He=Xe;break t}}He=null}if(T=He)Dr(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,No(this,T);else{this.o=!1,this.s=3,nn(12),Fr(this),Lo(this);break e}}if(this.P){T=!0;let Lt;for(;!this.J&&this.C<le.length;)if(Lt=Ca(this,le),Lt==pu){bt==4&&(this.s=4,nn(14),T=!1),Dr(this.i,this.l,null,"[Incomplete Response]");break}else if(Lt==Xh){this.s=4,nn(15),Dr(this.i,this.l,le,"[Invalid Chunk]"),T=!1;break}else Dr(this.i,this.l,Lt,null),No(this,Lt);if(Jh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),bt!=4||le.length!=0||this.h.h||(this.s=1,nn(16),T=!1),this.o=this.o&&T,!T)Dr(this.i,this.l,le,"[Invalid Chunked Response]"),Fr(this),Lo(this);else if(0<le.length&&!this.W){this.W=!0;var rt=this.j;rt.g==this&&rt.ba&&!rt.M&&(rt.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),ja(rt),rt.M=!0,nn(11))}}else Dr(this.i,this.l,le,null),No(this,le);bt==4&&Fr(this),this.o&&!this.J&&(bt==4?Ou(this.j,this):(this.o=!1,Ia(this)))}else tg(this.g),T==400&&0<le.indexOf("Unknown SID")?(this.s=3,nn(12)):(this.s=0,nn(13)),Fr(this),Lo(this)}}}catch{}finally{}};function Jh(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Ca(f,v){var T=f.C,O=v.indexOf(`
`,T);return O==-1?pu:(T=Number(v.substring(T,O)),isNaN(T)?Xh:(O+=1,O+T>v.length?pu:(v=v.slice(O,O+T),f.C=O+T,v)))}Bi.prototype.cancel=function(){this.J=!0,Fr(this)};function Ia(f){f.S=Date.now()+f.I,ed(f,f.I)}function ed(f,v){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Io(g(f.ba,f),v)}function _u(f){f.B&&(l.clearTimeout(f.B),f.B=null)}Bi.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Zh(this.i,this.A),this.L!=2&&(Co(),nn(17)),Fr(this),this.s=2,Lo(this)):ed(this,this.S-f)};function Lo(f){f.j.G==0||f.J||Ou(f.j,f)}function Fr(f){_u(f);var v=f.M;v&&typeof v.ma=="function"&&v.ma(),f.M=null,di(f.U),f.g&&(v=f.g,f.g=null,v.abort(),v.ma())}function No(f,v){try{var T=f.j;if(T.G!=0&&(T.g==f||Be(T.h,f))){if(!f.K&&Be(T.h,f)&&T.G==3){try{var O=T.Da.g.parse(v)}catch{O=null}if(Array.isArray(O)&&O.length==3){var q=O;if(q[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<f.F)za(T),Da(T);else break e;Fa(T),nn(18)}}else T.za=q[1],0<T.za-T.T&&37500>q[2]&&T.F&&T.v==0&&!T.C&&(T.C=Io(g(T.Za,T),6e3));if(1>=Ss(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else Ur(T,11)}else if((f.K||T.g==f)&&za(T),!k(v))for(q=T.Da.g.parse(v),v=0;v<q.length;v++){let He=q[v];if(T.T=He[0],He=He[1],T.G==2)if(He[0]=="c"){T.K=He[1],T.ia=He[2];const rt=He[3];rt!=null&&(T.la=rt,T.j.info("VER="+T.la));const bt=He[4];bt!=null&&(T.Aa=bt,T.j.info("SVER="+T.Aa));const As=He[5];As!=null&&typeof As=="number"&&0<As&&(O=1.5*As,T.L=O,T.j.info("backChannelRequestTimeoutMs_="+O)),O=T;const Lt=f.g;if(Lt){const Ua=Lt.g?Lt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ua){var Q=O.h;Q.g||Ua.indexOf("spdy")==-1&&Ua.indexOf("quic")==-1&&Ua.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(st(Q,Q.h),Q.h=null))}if(O.D){const ur=Lt.g?Lt.g.getResponseHeader("X-HTTP-Session-Id"):null;ur&&(O.ya=ur,Pe(O.I,O.D,ur))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-f.F,T.j.info("Handshake RTT: "+T.R+"ms")),O=T;var le=f;if(O.qa=Ba(O,O.J?O.ia:null,O.W),le.K){Mo(O.h,le);var Xe=le,jt=O.L;jt&&(Xe.I=jt),Xe.B&&(_u(Xe),Ia(Xe)),O.g=le}else Hi(O);0<T.i.length&&Is(T)}else He[0]!="stop"&&He[0]!="close"||Ur(T,7);else T.G==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?Ur(T,7):Ma(T):He[0]!="noop"&&T.l&&T.l.ta(He),T.v=0)}}Co(4)}catch{}}var Oo=class{constructor(f,v){this.g=f,this.map=v}};function yu(f){this.l=f||10,l.PerformanceNavigationTiming?(f=l.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function vu(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function Ss(f){return f.h?1:f.g?f.g.size:0}function Be(f,v){return f.h?f.h==v:f.g?f.g.has(v):!1}function st(f,v){f.g?f.g.add(v):f.h=v}function Mo(f,v){f.h&&f.h==v?f.h=null:f.g&&f.g.has(v)&&f.g.delete(v)}yu.prototype.cancel=function(){if(this.i=jr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function jr(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let v=f.i;for(const T of f.g.values())v=v.concat(T.D);return v}return x(f.i)}function Ts(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(u(f)){for(var v=[],T=f.length,O=0;O<T;O++)v.push(f[O]);return v}v=[],T=0;for(O in f)v[T++]=f[O];return v}function wu(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(u(f)||typeof f=="string"){var v=[];f=f.length;for(var T=0;T<f;T++)v.push(T);return v}v=[],T=0;for(const O in f)v[T++]=O;return v}}}function Le(f,v){if(f.forEach&&typeof f.forEach=="function")f.forEach(v,void 0);else if(u(f)||typeof f=="string")Array.prototype.forEach.call(f,v,void 0);else for(var T=wu(f),O=Ts(f),q=O.length,Q=0;Q<q;Q++)v.call(void 0,O[Q],T&&T[Q],f)}var gt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xu(f,v){if(f){f=f.split("&");for(var T=0;T<f.length;T++){var O=f[T].indexOf("="),q=null;if(0<=O){var Q=f[T].substring(0,O);q=f[T].substring(O+1)}else Q=f[T];v(Q,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function mi(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof mi){this.h=f.h,Aa(this,f.j),this.o=f.o,this.g=f.g,Vr(this,f.s),this.l=f.l;var v=f.i,T=new zr;T.i=v.i,v.g&&(T.g=new Map(v.g),T.h=v.h),ar(this,T),this.m=f.m}else f&&(v=String(f).match(gt))?(this.h=!1,Aa(this,v[1]||"",!0),this.o=Ui(v[2]||""),this.g=Ui(v[3]||"",!0),Vr(this,v[4]),this.l=Ui(v[5]||"",!0),ar(this,v[6]||"",!0),this.m=Ui(v[7]||"")):(this.h=!1,this.i=new zr(null,this.h))}mi.prototype.toString=function(){var f=[],v=this.j;v&&f.push($i(v,ks,!0),":");var T=this.g;return(T||v=="file")&&(f.push("//"),(v=this.o)&&f.push($i(v,ks,!0),"@"),f.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&f.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&f.push("/"),f.push($i(T,T.charAt(0)=="/"?Su:Eu,!0))),(T=this.i.toString())&&f.push("?",T),(T=this.m)&&f.push("#",$i(T,Tu)),f.join("")};function Pt(f){return new mi(f)}function Aa(f,v,T){f.j=T?Ui(v,!0):v,f.j&&(f.j=f.j.replace(/:$/,""))}function Vr(f,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);f.s=v}else f.s=null}function ar(f,v,T){v instanceof zr?(f.i=v,_i(f.i,f.h)):(T||(v=$i(v,Ra)),f.i=new zr(v,f.h))}function Pe(f,v,T){f.i.set(v,T)}function gi(f){return Pe(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Ui(f,v){return f?v?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function $i(f,v,T){return typeof f=="string"?(f=encodeURI(f).replace(v,bu),T&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function bu(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var ks=/[#\/\?@]/g,Eu=/[#\?:]/g,Su=/[#\?]/g,Ra=/[#\?@]/g,Tu=/#/g;function zr(f,v){this.h=this.g=null,this.i=f||null,this.j=!!v}function Qn(f){f.g||(f.g=new Map,f.h=0,f.i&&xu(f.i,function(v,T){f.add(decodeURIComponent(v.replace(/\+/g," ")),T)}))}t=zr.prototype,t.add=function(f,v){Qn(this),this.i=null,f=Ee(this,f);var T=this.g.get(f);return T||this.g.set(f,T=[]),T.push(v),this.h+=1,this};function ku(f,v){Qn(f),v=Ee(f,v),f.g.has(v)&&(f.i=null,f.h-=f.g.get(v).length,f.g.delete(v))}function La(f,v){return Qn(f),v=Ee(f,v),f.g.has(v)}t.forEach=function(f,v){Qn(this),this.g.forEach(function(T,O){T.forEach(function(q){f.call(v,q,O,this)},this)},this)},t.na=function(){Qn(this);const f=Array.from(this.g.values()),v=Array.from(this.g.keys()),T=[];for(let O=0;O<v.length;O++){const q=f[O];for(let Q=0;Q<q.length;Q++)T.push(v[O])}return T},t.V=function(f){Qn(this);let v=[];if(typeof f=="string")La(this,f)&&(v=v.concat(this.g.get(Ee(this,f))));else{f=Array.from(this.g.values());for(let T=0;T<f.length;T++)v=v.concat(f[T])}return v},t.set=function(f,v){return Qn(this),this.i=null,f=Ee(this,f),La(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[v]),this.h+=1,this},t.get=function(f,v){return f?(f=this.V(f),0<f.length?String(f[0]):v):v};function td(f,v,T){ku(f,v),0<T.length&&(f.i=null,f.g.set(Ee(f,v),x(T)),f.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],v=Array.from(this.g.keys());for(var T=0;T<v.length;T++){var O=v[T];const Q=encodeURIComponent(String(O)),le=this.V(O);for(O=0;O<le.length;O++){var q=Q;le[O]!==""&&(q+="="+encodeURIComponent(String(le[O]))),f.push(q)}}return this.i=f.join("&")};function Ee(f,v){return v=String(v),f.j&&(v=v.toLowerCase()),v}function _i(f,v){v&&!f.j&&(Qn(f),f.i=null,f.g.forEach(function(T,O){var q=O.toLowerCase();O!=q&&(ku(this,O),td(this,q,T))},f)),f.j=v}function it(f,v){const T=new Ao;if(l.Image){const O=new Image;O.onload=_(yi,T,"TestLoadImage: loaded",!0,v,O),O.onerror=_(yi,T,"TestLoadImage: error",!1,v,O),O.onabort=_(yi,T,"TestLoadImage: abort",!1,v,O),O.ontimeout=_(yi,T,"TestLoadImage: timeout",!1,v,O),l.setTimeout(function(){O.ontimeout&&O.ontimeout()},1e4),O.src=f}else v(!1)}function nd(f,v){const T=new Ao,O=new AbortController,q=setTimeout(()=>{O.abort(),yi(T,"TestPingServer: timeout",!1,v)},1e4);fetch(f,{signal:O.signal}).then(Q=>{clearTimeout(q),Q.ok?yi(T,"TestPingServer: ok",!0,v):yi(T,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(q),yi(T,"TestPingServer: error",!1,v)})}function yi(f,v,T,O,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),O(T)}catch{}}function Pu(){this.g=new Mn}function Cu(f,v,T){const O=T||"";try{Le(f,function(q,Q){let le=q;h(q)&&(le=fi(q)),v.push(O+Q+"="+encodeURIComponent(le))})}catch(q){throw v.push(O+"type="+encodeURIComponent("_badmap")),q}}function vi(f){this.l=f.Ub||null,this.j=f.eb||!1}w(vi,Pn),vi.prototype.g=function(){return new Ps(this.l,this.j)},vi.prototype.i=function(f){return function(){return f}}({});function Ps(f,v){Y.call(this),this.D=f,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Ps,Y),t=Ps.prototype,t.open=function(f,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=v,this.readyState=1,Xn(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(v.body=f),(this.D||l).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xt(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Xn(this)),this.g&&(this.readyState=3,Xn(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Cs(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Cs(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var v=f.value?f.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!f.done}))&&(this.response=this.responseText+=v)}f.done?xt(this):Xn(this),this.readyState==3&&Cs(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,xt(this))},t.Qa=function(f){this.g&&(this.response=f,xt(this))},t.ga=function(){this.g&&xt(this)};function xt(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Xn(f)}t.setRequestHeader=function(f,v){this.u.append(f,v)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],v=this.h.entries();for(var T=v.next();!T.done;)T=T.value,f.push(T[0]+": "+T[1]),T=v.next();return f.join(`\r
`)};function Xn(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Ps.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Iu(f){let v="";return z(f,function(T,O){v+=O,v+=":",v+=T,v+=`\r
`}),v}function Na(f,v,T){e:{for(O in T){var O=!1;break e}O=!0}O||(T=Iu(T),typeof f=="string"?T!=null&&encodeURIComponent(String(T)):Pe(f,v,T))}function _t(f){Y.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(_t,Y);var id=/^https?$/i,Au=["POST","PUT"];t=_t.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,v,T,O){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);v=v?v.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Pa.g(),this.v=this.o?Wh(this.o):Wh(Pa),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(v,String(f),!0),this.B=!1}catch(Q){rd(this,Q);return}if(f=T||"",T=new Map(this.headers),O)if(Object.getPrototypeOf(O)===Object.prototype)for(var q in O)T.set(q,O[q]);else if(typeof O.keys=="function"&&typeof O.get=="function")for(const Q of O.keys())T.set(Q,O.get(Q));else throw Error("Unknown input type for opt_headers: "+String(O));O=Array.from(T.keys()).find(Q=>Q.toLowerCase()=="content-type"),q=l.FormData&&f instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Au,v,void 0))||O||q||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,le]of T)this.g.setRequestHeader(Q,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Dn(this),this.u=!0,this.g.send(f),this.u=!1}catch(Q){rd(this,Q)}};function rd(f,v){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=v,f.m=5,Ru(f),Oa(f)}function Ru(f){f.A||(f.A=!0,ie(f,"complete"),ie(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,ie(this,"complete"),ie(this,"abort"),Oa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oa(this,!0)),_t.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?je(this):this.bb())},t.bb=function(){je(this)};function je(f){if(f.h&&typeof o<"u"&&(!f.v[1]||Cn(f)!=4||f.Z()!=2)){if(f.u&&Cn(f)==4)Ne(f.Ea,0,f);else if(ie(f,"readystatechange"),Cn(f)==4){f.h=!1;try{const le=f.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var T;if(!(T=v)){var O;if(O=le===0){var q=String(f.D).match(gt)[1]||null;!q&&l.self&&l.self.location&&(q=l.self.location.protocol.slice(0,-1)),O=!id.test(q?q.toLowerCase():"")}T=O}if(T)ie(f,"complete"),ie(f,"success");else{f.m=6;try{var Q=2<Cn(f)?f.g.statusText:""}catch{Q=""}f.l=Q+" ["+f.Z()+"]",Ru(f)}}finally{Oa(f)}}}}function Oa(f,v){if(f.g){Dn(f);const T=f.g,O=f.v[0]?()=>{}:null;f.g=null,f.v=null,v||ie(f,"ready");try{T.onreadystatechange=O}catch{}}}function Dn(f){f.I&&(l.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function Cn(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<Cn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var v=this.g.responseText;return f&&v.indexOf(f)==0&&(v=v.substring(f.length)),tn(v)}};function Lu(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function tg(f){const v={};f=(f.g&&2<=Cn(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let O=0;O<f.length;O++){if(k(f[O]))continue;var T=D(f[O]);const q=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const Q=v[q]||[];v[q]=Q,Q.push(T)}R(v,function(O){return O.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Br(f,v,T){return T&&T.internalChannelParams&&T.internalChannelParams[f]||v}function sd(f){this.Aa=0,this.i=[],this.j=new Ao,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Br("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Br("baseRetryDelayMs",5e3,f),this.cb=Br("retryDelaySeedMs",1e4,f),this.Wa=Br("forwardChannelMaxRetries",2,f),this.wa=Br("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new yu(f&&f.concurrentRequestLimit),this.Da=new Pu,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=sd.prototype,t.la=8,t.G=1,t.connect=function(f,v,T,O){nn(0),this.W=f,this.H=v||{},T&&O!==void 0&&(this.H.OSID=T,this.H.OAID=O),this.F=this.X,this.I=Ba(this,null,this.W),Is(this)};function Ma(f){if(od(f),f.G==3){var v=f.U++,T=Pt(f.I);if(Pe(T,"SID",f.K),Pe(T,"RID",v),Pe(T,"TYPE","terminate"),Do(f,T),v=new Bi(f,f.j,v),v.L=2,v.v=gi(Pt(T)),T=!1,l.navigator&&l.navigator.sendBeacon)try{T=l.navigator.sendBeacon(v.v.toString(),"")}catch{}!T&&l.Image&&(new Image().src=v.v,T=!0),T||(v.g=ld(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Ia(v)}ad(f)}function Da(f){f.g&&(ja(f),f.g.cancel(),f.g=null)}function od(f){Da(f),f.u&&(l.clearTimeout(f.u),f.u=null),za(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&l.clearTimeout(f.s),f.s=null)}function Is(f){if(!vu(f.h)&&!f.s){f.s=!0;var v=f.Ga;ue||M(),K||(ue(),K=!0),he.add(v,f),f.B=0}}function ng(f,v){return Ss(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=v.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Io(g(f.Ga,f,v),Mu(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const q=new Bi(this,this.j,f);let Q=this.o;if(this.S&&(Q?(Q=I(Q),F(Q,this.S)):Q=this.S),this.m!==null||this.O||(q.H=Q,Q=null),this.P)e:{for(var v=0,T=0;T<this.i.length;T++){t:{var O=this.i[T];if("__data__"in O.map&&(O=O.map.__data__,typeof O=="string")){O=O.length;break t}O=void 0}if(O===void 0)break;if(v+=O,4096<v){v=T;break e}if(v===4096||T===this.i.length-1){v=T+1;break e}}v=1e3}else v=1e3;v=Nu(this,q,v),T=Pt(this.I),Pe(T,"RID",f),Pe(T,"CVER",22),this.D&&Pe(T,"X-HTTP-Session-Id",this.D),Do(this,T),Q&&(this.O?v="headers="+encodeURIComponent(String(Iu(Q)))+"&"+v:this.m&&Na(T,this.m,Q)),st(this.h,q),this.Ua&&Pe(T,"TYPE","init"),this.P?(Pe(T,"$req",v),Pe(T,"SID","null"),q.T=!0,mu(q,T,null)):mu(q,T,v),this.G=2}}else this.G==3&&(f?Jn(this,f):this.i.length==0||vu(this.h)||Jn(this))};function Jn(f,v){var T;v?T=v.l:T=f.U++;const O=Pt(f.I);Pe(O,"SID",f.K),Pe(O,"RID",T),Pe(O,"AID",f.T),Do(f,O),f.m&&f.o&&Na(O,f.m,f.o),T=new Bi(f,f.j,T,f.B+1),f.m===null&&(T.H=f.o),v&&(f.i=v.D.concat(f.i)),v=Nu(f,T,1e3),T.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),st(f.h,T),mu(T,O,v)}function Do(f,v){f.H&&z(f.H,function(T,O){Pe(v,O,T)}),f.l&&Le({},function(T,O){Pe(v,O,T)})}function Nu(f,v,T){T=Math.min(f.i.length,T);var O=f.l?g(f.l.Na,f.l,f):null;e:{var q=f.i;let Q=-1;for(;;){const le=["count="+T];Q==-1?0<T?(Q=q[0].g,le.push("ofs="+Q)):Q=0:le.push("ofs="+Q);let Xe=!0;for(let jt=0;jt<T;jt++){let He=q[jt].g;const rt=q[jt].map;if(He-=Q,0>He)Q=Math.max(0,q[jt].g-100),Xe=!1;else try{Cu(rt,le,"req"+He+"_")}catch{O&&O(rt)}}if(Xe){O=le.join("&");break e}}}return f=f.i.splice(0,T),v.D=f,O}function Hi(f){if(!f.g&&!f.u){f.Y=1;var v=f.Fa;ue||M(),K||(ue(),K=!0),he.add(v,f),f.v=0}}function Fa(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Io(g(f.Fa,f),Mu(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,Va(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Io(g(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nn(10),Da(this),Va(this))};function ja(f){f.A!=null&&(l.clearTimeout(f.A),f.A=null)}function Va(f){f.g=new Bi(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var v=Pt(f.qa);Pe(v,"RID","rpc"),Pe(v,"SID",f.K),Pe(v,"AID",f.T),Pe(v,"CI",f.F?"0":"1"),!f.F&&f.ja&&Pe(v,"TO",f.ja),Pe(v,"TYPE","xmlhttp"),Do(f,v),f.m&&f.o&&Na(v,f.m,f.o),f.L&&(f.g.I=f.L);var T=f.g;f=f.ia,T.L=1,T.v=gi(Pt(v)),T.m=null,T.P=!0,gu(T,f)}t.Za=function(){this.C!=null&&(this.C=null,Da(this),Fa(this),nn(19))};function za(f){f.C!=null&&(l.clearTimeout(f.C),f.C=null)}function Ou(f,v){var T=null;if(f.g==v){za(f),ja(f),f.g=null;var O=2}else if(Be(f.h,v))T=v.D,Mo(f.h,v),O=1;else return;if(f.G!=0){if(v.o)if(O==1){T=v.m?v.m.length:0,v=Date.now()-v.F;var q=f.B;O=Sa(),ie(O,new Kh(O,T)),Is(f)}else Hi(f);else if(q=v.s,q==3||q==0&&0<v.X||!(O==1&&ng(f,v)||O==2&&Fa(f)))switch(T&&0<T.length&&(v=f.h,v.i=v.i.concat(T)),q){case 1:Ur(f,5);break;case 4:Ur(f,10);break;case 3:Ur(f,6);break;default:Ur(f,2)}}}function Mu(f,v){let T=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(T*=2),T*v}function Ur(f,v){if(f.j.info("Error code "+v),v==2){var T=g(f.fb,f),O=f.Xa;const q=!O;O=new mi(O||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Aa(O,"https"),gi(O),q?it(O.toString(),T):nd(O.toString(),T)}else nn(2);f.G=0,f.l&&f.l.sa(v),ad(f),od(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),nn(2)):(this.j.info("Failed to ping google.com"),nn(1))};function ad(f){if(f.G=0,f.ka=[],f.l){const v=jr(f.h);(v.length!=0||f.i.length!=0)&&(C(f.ka,v),C(f.ka,f.i),f.h.i.length=0,x(f.i),f.i.length=0),f.l.ra()}}function Ba(f,v,T){var O=T instanceof mi?Pt(T):new mi(T);if(O.g!="")v&&(O.g=v+"."+O.g),Vr(O,O.s);else{var q=l.location;O=q.protocol,v=v?v+"."+q.hostname:q.hostname,q=+q.port;var Q=new mi(null);O&&Aa(Q,O),v&&(Q.g=v),q&&Vr(Q,q),T&&(Q.l=T),O=Q}return T=f.D,v=f.ya,T&&v&&Pe(O,T,v),Pe(O,"VER",f.la),Do(f,O),O}function ld(f,v,T){if(v&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=f.Ca&&!f.pa?new _t(new vi({eb:T})):new _t(f.pa),v.Ha(f.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Du(){}t=Du.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Fo(){}Fo.prototype.g=function(f,v){return new Yt(f,v)};function Yt(f,v){Y.call(this),this.g=new sd(v),this.l=f,this.h=v&&v.messageUrlParams||null,f=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(f?f["X-WebChannel-Content-Type"]=v.messageContentType:f={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(f?f["X-WebChannel-Client-Profile"]=v.va:f={"X-WebChannel-Client-Profile":v.va}),this.g.S=f,(f=v&&v.Sb)&&!k(f)&&(this.g.m=f),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!k(v)&&(this.g.D=v,f=this.h,f!==null&&v in f&&(f=this.h,v in f&&delete f[v])),this.j=new wi(this)}w(Yt,Y),Yt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Yt.prototype.close=function(){Ma(this.g)},Yt.prototype.o=function(f){var v=this.g;if(typeof f=="string"){var T={};T.__data__=f,f=T}else this.u&&(T={},T.__data__=fi(f),f=T);v.i.push(new Oo(v.Ya++,f)),v.G==3&&Is(v)},Yt.prototype.N=function(){this.g.l=null,delete this.j,Ma(this.g),delete this.g,Yt.aa.N.call(this)};function lr(f){Ea.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var v=f.__sm__;if(v){e:{for(const T in v){f=T;break e}f=void 0}(this.i=f)&&(f=this.i,v=v!==null&&f in v?v[f]:void 0),this.data=v}else this.data=f}w(lr,Ea);function ud(){fu.call(this),this.status=1}w(ud,fu);function wi(f){this.g=f}w(wi,Du),wi.prototype.ua=function(){ie(this.g,"a")},wi.prototype.ta=function(f){ie(this.g,new lr(f))},wi.prototype.sa=function(f){ie(this.g,new ud)},wi.prototype.ra=function(){ie(this.g,"b")},Fo.prototype.createWebChannel=Fo.prototype.g,Yt.prototype.send=Yt.prototype.o,Yt.prototype.open=Yt.prototype.m,Yt.prototype.close=Yt.prototype.close,TI=function(){return new Fo},SI=function(){return Sa()},EI=Mr,Dy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ro.NO_ERROR=0,Ro.TIMEOUT=8,Ro.HTTP_ERROR=6,If=Ro,ka.COMPLETE="complete",bI=ka,du.EventType=Es,Es.OPEN="a",Es.CLOSE="b",Es.ERROR="c",Es.MESSAGE="d",Y.prototype.listen=Y.prototype.K,hc=du,_t.prototype.listenOnce=_t.prototype.L,_t.prototype.getLastError=_t.prototype.Ka,_t.prototype.getLastErrorCode=_t.prototype.Ba,_t.prototype.getStatus=_t.prototype.Z,_t.prototype.getResponseJson=_t.prototype.Oa,_t.prototype.getResponseText=_t.prototype.oa,_t.prototype.send=_t.prototype.ea,_t.prototype.setWithCredentials=_t.prototype.Ha,xI=_t}).apply(typeof zd<"u"?zd:typeof self<"u"?self:typeof window<"u"?window:{});const xb="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gn.UNAUTHENTICATED=new gn(null),gn.GOOGLE_CREDENTIALS=new gn("google-credentials-uid"),gn.FIRST_PARTY=new gn("first-party-uid"),gn.MOCK_USER=new gn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ru="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=new h0("@firebase/firestore");function Yu(){return da.logLevel}function _e(t,...e){if(da.logLevel<=$e.DEBUG){const n=e.map(I0);da.debug(`Firestore (${ru}): ${t}`,...n)}}function ps(t,...e){if(da.logLevel<=$e.ERROR){const n=e.map(I0);da.error(`Firestore (${ru}): ${t}`,...n)}}function jl(t,...e){if(da.logLevel<=$e.WARN){const n=e.map(I0);da.warn(`Firestore (${ru}): ${t}`,...n)}}function I0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(t="Unexpected state"){const e=`FIRESTORE (${ru}) INTERNAL ASSERTION FAILED: `+t;throw ps(e),new Error(e)}function nt(t,e){t||Ce()}function Re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Rr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class p5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(gn.UNAUTHENTICATED))}shutdown(){}}class m5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class g5{constructor(e){this.t=e,this.currentUser=gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){nt(this.o===void 0);let i=this.i;const r=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve();let s=new os;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new os,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},l=u=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new os)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(nt(typeof i.accessToken=="string"),new kI(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string"),new gn(e)}}class _5{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=gn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class y5{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new _5(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(gn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class v5{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class w5{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){nt(this.o===void 0);const i=s=>{s.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,_e("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(nt(typeof n.token=="string"),this.R=n.token,new v5(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=x5(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}}function Ke(t,e){return t<e?-1:t>e?1:0}function Vl(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new de(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new de(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Gt.fromMillis(Date.now())}static fromDate(e){return Gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Gt(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new Gt(0,0))}static max(){return new Ae(new Gt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e,n,i){n===void 0?n=0:n>e.length&&Ce(),i===void 0?i=e.length-n:i>e.length-n&&Ce(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return ah.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ah?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class lt extends ah{construct(e,n,i){return new lt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new de(J.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new lt(n)}static emptyPath(){return new lt([])}}const b5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class on extends ah{construct(e,n,i){return new on(e,n,i)}static isValidIdentifier(e){return b5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),on.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new on(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new de(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<e.length;){const l=e[r];if(l==="\\"){if(r+1===e.length)throw new de(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new de(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,r+=2}else l==="`"?(o=!o,r++):l!=="."||o?(i+=l,r++):(s(),r++)}if(s(),o)throw new de(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new on(n)}static emptyPath(){return new on([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(lt.fromString(e))}static fromName(e){return new ve(lt.fromString(e).popFirst(5))}static empty(){return new ve(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return lt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new lt(e.slice()))}}function E5(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Ae.fromTimestamp(i===1e9?new Gt(n+1,0):new Gt(n,i));return new go(r,ve.empty(),e)}function S5(t){return new go(t.readTime,t.key,-1)}class go{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new go(Ae.min(),ve.empty(),-1)}static max(){return new go(Ae.max(),ve.empty(),-1)}}function T5(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ve.comparator(t.documentKey,e.documentKey),n!==0?n:Ke(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class P5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oh(t){if(t.code!==J.FAILED_PRECONDITION||t.message!==k5)throw t;_e("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ce(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new re((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof re?n:re.resolve(n)}catch(n){return re.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):re.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):re.reject(n)}static resolve(e){return new re((n,i)=>{n(e)})}static reject(e){return new re((n,i)=>{i(e)})}static waitFor(e){return new re((n,i)=>{let r=0,s=0,o=!1;e.forEach(l=>{++r,l.next(()=>{++s,o&&s===r&&n()},u=>i(u))}),o=!0,s===r&&n()})}static or(e){let n=re.resolve(!1);for(const i of e)n=n.next(r=>r?re.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new re((i,r)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next(d=>{o[h]=d,++l,l===s&&i(o)},d=>r(d))}})}static doWhile(e,n){return new re((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}function C5(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Mh(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}A0.oe=-1;function Pm(t){return t==null}function Tp(t){return t===0&&1/t==-1/0}function I5(t){return typeof t=="number"&&Number.isInteger(t)&&!Tp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function wa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function CI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e,n){this.comparator=e,this.root=n||sn.EMPTY}insert(e,n){return new kt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,sn.BLACK,null,null))}remove(e){return new kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bd(this.root,e,this.comparator,!0)}}class Bd{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sn{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??sn.RED,this.left=r??sn.EMPTY,this.right=s??sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new sn(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return sn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ce();const e=this.left.check();if(e!==this.right.check())throw Ce();return e+(this.isRed()?0:1)}}sn.EMPTY=null,sn.RED=!0,sn.BLACK=!1;sn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce()}get value(){throw Ce()}get color(){throw Ce()}get left(){throw Ce()}get right(){throw Ce()}copy(e,n,i,r,s){return this}insert(e,n,i){return new sn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.comparator=e,this.data=new kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Eb(this.data.getIterator())}getIteratorFrom(e){return new Eb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof ln)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ln(this.comparator);return n.data=e,n}}class Eb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this.fields=e,e.sort(on.comparator)}static empty(){return new ii([])}unionWith(e){let n=new ln(on.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new ii(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Vl(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new II("Invalid base64 string: "+s):s}}(e);return new cn(n)}static fromUint8Array(e){const n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new cn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cn.EMPTY_BYTE_STRING=new cn("");const A5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _o(t){if(nt(!!t),typeof t=="string"){let e=0;const n=A5.exec(t);if(nt(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Nt(t.seconds),nanos:Nt(t.nanos)}}function Nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function fa(t){return typeof t=="string"?cn.fromBase64String(t):cn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function R0(t){const e=t.mapValue.fields.__previous_value__;return Cm(e)?R0(e):e}function lh(t){const e=_o(t.mapValue.fields.__local_write_time__.timestampValue);return new Gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{constructor(e,n,i,r,s,o,l,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h}}class uh{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new uh("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof uh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud={mapValue:{}};function pa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Cm(t)?4:N5(t)?9007199254740991:L5(t)?10:11:Ce()}function Pr(t,e){if(t===e)return!0;const n=pa(t);if(n!==pa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return lh(t).isEqual(lh(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=_o(r.timestampValue),l=_o(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return fa(r.bytesValue).isEqual(fa(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return Nt(r.geoPointValue.latitude)===Nt(s.geoPointValue.latitude)&&Nt(r.geoPointValue.longitude)===Nt(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Nt(r.integerValue)===Nt(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Nt(r.doubleValue),l=Nt(s.doubleValue);return o===l?Tp(o)===Tp(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Vl(t.arrayValue.values||[],e.arrayValue.values||[],Pr);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},l=s.mapValue.fields||{};if(bb(o)!==bb(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Pr(o[u],l[u])))return!1;return!0}(t,e);default:return Ce()}}function ch(t,e){return(t.values||[]).find(n=>Pr(n,e))!==void 0}function zl(t,e){if(t===e)return 0;const n=pa(t),i=pa(e);if(n!==i)return Ke(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ke(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Nt(s.integerValue||s.doubleValue),u=Nt(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Sb(t.timestampValue,e.timestampValue);case 4:return Sb(lh(t),lh(e));case 5:return Ke(t.stringValue,e.stringValue);case 6:return function(s,o){const l=fa(s),u=fa(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const d=Ke(l[h],u[h]);if(d!==0)return d}return Ke(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=Ke(Nt(s.latitude),Nt(o.latitude));return l!==0?l:Ke(Nt(s.longitude),Nt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Tb(t.arrayValue,e.arrayValue);case 10:return function(s,o){var l,u,h,d;const m=s.fields||{},g=o.fields||{},_=(l=m.value)===null||l===void 0?void 0:l.arrayValue,w=(u=g.value)===null||u===void 0?void 0:u.arrayValue,x=Ke(((h=_==null?void 0:_.values)===null||h===void 0?void 0:h.length)||0,((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0);return x!==0?x:Tb(_,w)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Ud.mapValue&&o===Ud.mapValue)return 0;if(s===Ud.mapValue)return 1;if(o===Ud.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=o.fields||{},d=Object.keys(h);u.sort(),d.sort();for(let m=0;m<u.length&&m<d.length;++m){const g=Ke(u[m],d[m]);if(g!==0)return g;const _=zl(l[u[m]],h[d[m]]);if(_!==0)return _}return Ke(u.length,d.length)}(t.mapValue,e.mapValue);default:throw Ce()}}function Sb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ke(t,e);const n=_o(t),i=_o(e),r=Ke(n.seconds,i.seconds);return r!==0?r:Ke(n.nanos,i.nanos)}function Tb(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=zl(n[r],i[r]);if(s)return s}return Ke(n.length,i.length)}function Bl(t){return Fy(t)}function Fy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=_o(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return fa(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ve.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=Fy(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${Fy(n.fields[o])}`;return r+"}"}(t.mapValue):Ce()}function kp(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function jy(t){return!!t&&"integerValue"in t}function L0(t){return!!t&&"arrayValue"in t}function kb(t){return!!t&&"nullValue"in t}function Pb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Af(t){return!!t&&"mapValue"in t}function L5(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Cc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return wa(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Cc(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Cc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function N5(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.value=e}static empty(){return new Bn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Af(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cc(n)}setAll(e){let n=on.emptyPath(),i={},r=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,i,r),i={},r=[],n=l.popLast()}o?i[l.lastSegment()]=Cc(o):r.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());Af(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Pr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Af(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){wa(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new Bn(Cc(this.value))}}function AI(t){const e=[];return wa(t.fields,(n,i)=>{const r=new on([n]);if(Af(i)){const s=AI(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new ii(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,n,i,r,s,o,l){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new yn(e,0,Ae.min(),Ae.min(),Ae.min(),Bn.empty(),0)}static newFoundDocument(e,n,i,r){return new yn(e,1,n,Ae.min(),i,r,0)}static newNoDocument(e,n){return new yn(e,2,n,Ae.min(),Ae.min(),Bn.empty(),0)}static newUnknownDocument(e,n){return new yn(e,3,n,Ae.min(),Ae.min(),Bn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n){this.position=e,this.inclusive=n}}function Cb(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(s.field.isKeyField()?i=ve.comparator(ve.fromName(o.referenceValue),n.key):i=zl(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function Ib(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Pr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,n="asc"){this.field=e,this.dir=n}}function O5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{}class $t extends RI{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new D5(e,n,i):n==="array-contains"?new V5(e,i):n==="in"?new z5(e,i):n==="not-in"?new B5(e,i):n==="array-contains-any"?new U5(e,i):new $t(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new F5(e,i):new j5(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(zl(n,this.value)):n!==null&&pa(this.value)===pa(n)&&this.matchesComparison(zl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ir extends RI{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ir(e,n)}matches(e){return LI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function LI(t){return t.op==="and"}function NI(t){return M5(t)&&LI(t)}function M5(t){for(const e of t.filters)if(e instanceof ir)return!1;return!0}function Vy(t){if(t instanceof $t)return t.field.canonicalString()+t.op.toString()+Bl(t.value);if(NI(t))return t.filters.map(e=>Vy(e)).join(",");{const e=t.filters.map(n=>Vy(n)).join(",");return`${t.op}(${e})`}}function OI(t,e){return t instanceof $t?function(i,r){return r instanceof $t&&i.op===r.op&&i.field.isEqual(r.field)&&Pr(i.value,r.value)}(t,e):t instanceof ir?function(i,r){return r instanceof ir&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,l)=>s&&OI(o,r.filters[l]),!0):!1}(t,e):void Ce()}function MI(t){return t instanceof $t?function(n){return`${n.field.canonicalString()} ${n.op} ${Bl(n.value)}`}(t):t instanceof ir?function(n){return n.op.toString()+" {"+n.getFilters().map(MI).join(" ,")+"}"}(t):"Filter"}class D5 extends $t{constructor(e,n,i){super(e,n,i),this.key=ve.fromName(i.referenceValue)}matches(e){const n=ve.comparator(e.key,this.key);return this.matchesComparison(n)}}class F5 extends $t{constructor(e,n){super(e,"in",n),this.keys=DI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class j5 extends $t{constructor(e,n){super(e,"not-in",n),this.keys=DI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function DI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>ve.fromName(i.referenceValue))}class V5 extends $t{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return L0(n)&&ch(n.arrayValue,this.value)}}class z5 extends $t{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ch(this.value.arrayValue,n)}}class B5 extends $t{constructor(e,n){super(e,"not-in",n)}matches(e){if(ch(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ch(this.value.arrayValue,n)}}class U5 extends $t{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!L0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>ch(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(e,n=null,i=[],r=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function Ab(t,e=null,n=[],i=[],r=null,s=null,o=null){return new $5(t,e,n,i,r,s,o)}function N0(t){const e=Re(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Vy(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Pm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Bl(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Bl(i)).join(",")),e.ue=n}return e.ue}function O0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!O5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!OI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ib(t.startAt,e.startAt)&&Ib(t.endAt,e.endAt)}function zy(t){return ve.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,n=null,i=[],r=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function H5(t,e,n,i,r,s,o,l){return new To(t,e,n,i,r,s,o,l)}function Im(t){return new To(t)}function Rb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function M0(t){return t.collectionGroup!==null}function El(t){const e=Re(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new ln(on.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new hh(s,i))}),n.has(on.keyField().canonicalString())||e.ce.push(new hh(on.keyField(),i))}return e.ce}function Tr(t){const e=Re(t);return e.le||(e.le=W5(e,El(t))),e.le}function W5(t,e){if(t.limitType==="F")return Ab(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new hh(r.field,s)});const n=t.endAt?new Ul(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Ul(t.startAt.position,t.startAt.inclusive):null;return Ab(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function By(t,e){const n=t.filters.concat([e]);return new To(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Uy(t,e,n){return new To(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Am(t,e){return O0(Tr(t),Tr(e))&&t.limitType===e.limitType}function FI(t){return`${N0(Tr(t))}|lt:${t.limitType}`}function Qa(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>MI(r)).join(", ")}]`),Pm(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Bl(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Bl(r)).join(",")),`Target(${i})`}(Tr(t))}; limitType=${t.limitType})`}function Rm(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):ve.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of El(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(o,l,u){const h=Cb(o,l,u);return o.inclusive?h<=0:h<0}(i.startAt,El(i),r)||i.endAt&&!function(o,l,u){const h=Cb(o,l,u);return o.inclusive?h>=0:h>0}(i.endAt,El(i),r))}(t,e)}function q5(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function jI(t){return(e,n)=>{let i=!1;for(const r of El(t)){const s=G5(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function G5(t,e,n){const i=t.field.isKeyField()?ve.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),h=l.data.field(s);return u!==null&&h!==null?zl(u,h):Ce()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Ce()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){wa(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return CI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K5=new kt(ve.comparator);function ms(){return K5}const VI=new kt(ve.comparator);function dc(...t){let e=VI;for(const n of t)e=e.insert(n.key,n);return e}function zI(t){let e=VI;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Qo(){return Ic()}function BI(){return Ic()}function Ic(){return new su(t=>t.toString(),(t,e)=>t.isEqual(e))}const Z5=new kt(ve.comparator),Y5=new ln(ve.comparator);function Ue(...t){let e=Y5;for(const n of t)e=e.add(n);return e}const Q5=new ln(Ke);function X5(){return Q5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tp(e)?"-0":e}}function UI(t){return{integerValue:""+t}}function J5(t,e){return I5(e)?UI(e):D0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(){this._=void 0}}function ej(t,e,n){return t instanceof Pp?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Cm(s)&&(s=R0(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof dh?HI(t,e):t instanceof fh?WI(t,e):function(r,s){const o=$I(r,s),l=Lb(o)+Lb(r.Pe);return jy(o)&&jy(r.Pe)?UI(l):D0(r.serializer,l)}(t,e)}function tj(t,e,n){return t instanceof dh?HI(t,e):t instanceof fh?WI(t,e):n}function $I(t,e){return t instanceof Cp?function(i){return jy(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class Pp extends Lm{}class dh extends Lm{constructor(e){super(),this.elements=e}}function HI(t,e){const n=qI(e);for(const i of t.elements)n.some(r=>Pr(r,i))||n.push(i);return{arrayValue:{values:n}}}class fh extends Lm{constructor(e){super(),this.elements=e}}function WI(t,e){let n=qI(e);for(const i of t.elements)n=n.filter(r=>!Pr(r,i));return{arrayValue:{values:n}}}class Cp extends Lm{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Lb(t){return Nt(t.integerValue||t.doubleValue)}function qI(t){return L0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function nj(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof dh&&r instanceof dh||i instanceof fh&&r instanceof fh?Vl(i.elements,r.elements,Pr):i instanceof Cp&&r instanceof Cp?Pr(i.Pe,r.Pe):i instanceof Pp&&r instanceof Pp}(t.transform,e.transform)}class ij{constructor(e,n){this.version=e,this.transformResults=n}}class Ai{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ai}static exists(e){return new Ai(void 0,e)}static updateTime(e){return new Ai(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Nm{}function GI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new F0(t.key,Ai.none()):new Dh(t.key,t.data,Ai.none());{const n=t.data,i=Bn.empty();let r=new ln(on.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new ko(t.key,i,new ii(r.toArray()),Ai.none())}}function rj(t,e,n){t instanceof Dh?function(r,s,o){const l=r.value.clone(),u=Ob(r.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof ko?function(r,s,o){if(!Rf(r.precondition,s))return void s.convertToUnknownDocument(o.version);const l=Ob(r.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(KI(r)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ac(t,e,n,i){return t instanceof Dh?function(s,o,l,u){if(!Rf(s.precondition,o))return l;const h=s.value.clone(),d=Mb(s.fieldTransforms,u,o);return h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,i):t instanceof ko?function(s,o,l,u){if(!Rf(s.precondition,o))return l;const h=Mb(s.fieldTransforms,u,o),d=o.data;return d.setAll(KI(s)),d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,i):function(s,o,l){return Rf(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function sj(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=$I(i.transform,r||null);s!=null&&(n===null&&(n=Bn.empty()),n.set(i.field,s))}return n||null}function Nb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Vl(i,r,(s,o)=>nj(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Dh extends Nm{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ko extends Nm{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function KI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Ob(t,e,n){const i=new Map;nt(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,l=e.data.field(s.field);i.set(s.field,tj(o,l,n[r]))}return i}function Mb(t,e,n){const i=new Map;for(const r of t){const s=r.transform,o=n.data.field(r.field);i.set(r.field,ej(s,o,e))}return i}class F0 extends Nm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class oj extends Nm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&rj(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Ac(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Ac(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=BI();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(r.key)?null:l;const u=GI(o,l);u!==null&&i.set(r.key,u),o.isValidDocument()||o.convertToNoDocument(Ae.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ue())}isEqual(e){return this.batchId===e.batchId&&Vl(this.mutations,e.mutations,(n,i)=>Nb(n,i))&&Vl(this.baseMutations,e.baseMutations,(n,i)=>Nb(n,i))}}class j0{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){nt(e.mutations.length===i.length);let r=function(){return Z5}();const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new j0(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt,We;function cj(t){switch(t){default:return Ce();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0}}function ZI(t){if(t===void 0)return ps("GRPC error has no .code"),J.UNKNOWN;switch(t){case zt.OK:return J.OK;case zt.CANCELLED:return J.CANCELLED;case zt.UNKNOWN:return J.UNKNOWN;case zt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case zt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case zt.INTERNAL:return J.INTERNAL;case zt.UNAVAILABLE:return J.UNAVAILABLE;case zt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case zt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case zt.NOT_FOUND:return J.NOT_FOUND;case zt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case zt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case zt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case zt.ABORTED:return J.ABORTED;case zt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case zt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case zt.DATA_LOSS:return J.DATA_LOSS;default:return Ce()}}(We=zt||(zt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj=new na([4294967295,4294967295],0);function Db(t){const e=hj().encode(t),n=new wI;return n.update(e),new Uint8Array(n.digest())}function Fb(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new na([n,i],0),new na([r,s],0)]}class V0{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new fc(`Invalid padding: ${n}`);if(i<0)throw new fc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new fc(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new fc(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=na.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(na.fromNumber(i)));return r.compare(dj)===1&&(r=new na([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Db(e),[i,r]=Fb(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new V0(s,r,n);return i.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=Db(e),[i,r]=Fb(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class fc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,Fh.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Om(Ae.min(),r,new kt(Ke),ms(),Ue())}}class Fh{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Fh(i,n,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class YI{constructor(e,n){this.targetId=e,this.me=n}}class QI{constructor(e,n,i=cn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class jb{constructor(){this.fe=0,this.ge=zb(),this.pe=cn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ue(),n=Ue(),i=Ue();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Ce()}}),new Fh(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=zb()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,nt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class fj{constructor(e){this.Le=e,this.Be=new Map,this.ke=ms(),this.qe=Vb(),this.Qe=new kt(Ke)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:Ce()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const s=r.target;if(zy(s))if(i===0){const o=new ve(s.path);this.Ue(n,o,yn.newNoDocument(o,Ae.min()))}else nt(i===1);else{const o=this.Ye(n);if(o!==i){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let o,l;try{o=fa(i).toUint8Array()}catch(u){if(u instanceof II)return jl("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new V0(o,r,s)}catch(u){return jl(u instanceof fc?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,s,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&zy(l.target)){const u=new ve(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,yn.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let i=Ue();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const h=this.Je(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const r=new Om(e,n,this.Qe,this.ke,i);return this.ke=ms(),this.qe=Vb(),this.Qe=new kt(Ke),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new jb,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ln(Ke),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||_e("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new jb),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Vb(){return new kt(ve.comparator)}function zb(){return new kt(ve.comparator)}const pj={asc:"ASCENDING",desc:"DESCENDING"},mj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gj={and:"AND",or:"OR"};class _j{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function $y(t,e){return t.useProto3Json||Pm(e)?e:{value:e}}function Ip(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function XI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function yj(t,e){return Ip(t,e.toTimestamp())}function kr(t){return nt(!!t),Ae.fromTimestamp(function(n){const i=_o(n);return new Gt(i.seconds,i.nanos)}(t))}function z0(t,e){return Hy(t,e).canonicalString()}function Hy(t,e){const n=function(r){return new lt(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function JI(t){const e=lt.fromString(t);return nt(r2(e)),e}function Wy(t,e){return z0(t.databaseId,e.path)}function Wg(t,e){const n=JI(e);if(n.get(1)!==t.databaseId.projectId)throw new de(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new de(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ve(t2(n))}function e2(t,e){return z0(t.databaseId,e)}function vj(t){const e=JI(t);return e.length===4?lt.emptyPath():t2(e)}function qy(t){return new lt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function t2(t){return nt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Bb(t,e,n){return{name:Wy(t,e),fields:n.value.mapValue.fields}}function wj(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ce()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(h,d){return h.useProto3Json?(nt(d===void 0||typeof d=="string"),cn.fromBase64String(d||"")):(nt(d===void 0||d instanceof Buffer||d instanceof Uint8Array),cn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const d=h.code===void 0?J.UNKNOWN:ZI(h.code);return new de(d,h.message||"")}(o);n=new QI(i,r,s,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Wg(t,i.document.name),s=kr(i.document.updateTime),o=i.document.createTime?kr(i.document.createTime):Ae.min(),l=new Bn({mapValue:{fields:i.document.fields}}),u=yn.newFoundDocument(r,s,o,l),h=i.targetIds||[],d=i.removedTargetIds||[];n=new Lf(h,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Wg(t,i.document),s=i.readTime?kr(i.readTime):Ae.min(),o=yn.newNoDocument(r,s),l=i.removedTargetIds||[];n=new Lf([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Wg(t,i.document),s=i.removedTargetIds||[];n=new Lf([],s,r,null)}else{if(!("filter"in e))return Ce();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new uj(r,s),l=i.targetId;n=new YI(l,o)}}return n}function xj(t,e){let n;if(e instanceof Dh)n={update:Bb(t,e.key,e.value)};else if(e instanceof F0)n={delete:Wy(t,e.key)};else if(e instanceof ko)n={update:Bb(t,e.key,e.data),updateMask:Aj(e.fieldMask)};else{if(!(e instanceof oj))return Ce();n={verify:Wy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const l=o.transform;if(l instanceof Pp)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof dh)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof fh)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Cp)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw Ce()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:yj(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ce()}(t,e.precondition)),n}function bj(t,e){return t&&t.length>0?(nt(e!==void 0),t.map(n=>function(r,s){let o=r.updateTime?kr(r.updateTime):kr(s);return o.isEqual(Ae.min())&&(o=kr(s)),new ij(o,r.transformResults||[])}(n,e))):[]}function Ej(t,e){return{documents:[e2(t,e.path)]}}function Sj(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=e2(t,r);const s=function(h){if(h.length!==0)return i2(ir.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(d=>function(g){return{field:Xa(g.field),direction:Pj(g.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=$y(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:r}}function Tj(t){let e=vj(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){nt(i===1);const d=n.from[0];d.allDescendants?r=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(m){const g=n2(m);return g instanceof ir&&NI(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(w){return new hh(Ja(w.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,Pm(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,_=m.values||[];return new Ul(_,g)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const g=!m.before,_=m.values||[];return new Ul(_,g)}(n.endAt)),H5(e,r,o,s,l,"F",u,h)}function kj(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function n2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Ja(n.unaryFilter.field);return $t.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Ja(n.unaryFilter.field);return $t.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ja(n.unaryFilter.field);return $t.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ja(n.unaryFilter.field);return $t.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ce()}}(t):t.fieldFilter!==void 0?function(n){return $t.create(Ja(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ce()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ir.create(n.compositeFilter.filters.map(i=>n2(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ce()}}(n.compositeFilter.op))}(t):Ce()}function Pj(t){return pj[t]}function Cj(t){return mj[t]}function Ij(t){return gj[t]}function Xa(t){return{fieldPath:t.canonicalString()}}function Ja(t){return on.fromServerFormat(t.fieldPath)}function i2(t){return t instanceof $t?function(n){if(n.op==="=="){if(Pb(n.value))return{unaryFilter:{field:Xa(n.field),op:"IS_NAN"}};if(kb(n.value))return{unaryFilter:{field:Xa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Pb(n.value))return{unaryFilter:{field:Xa(n.field),op:"IS_NOT_NAN"}};if(kb(n.value))return{unaryFilter:{field:Xa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xa(n.field),op:Cj(n.op),value:n.value}}}(t):t instanceof ir?function(n){const i=n.getFilters().map(r=>i2(r));return i.length===1?i[0]:{compositeFilter:{op:Ij(n.op),filters:i}}}(t):Ce()}function Aj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function r2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,n,i,r,s=Ae.min(),o=Ae.min(),l=cn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Gs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Gs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e){this.ct=e}}function Lj(t){const e=Tj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Uy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(){this.un=new Oj}addToCollectionParentIndex(e,n){return this.un.add(n),re.resolve()}getCollectionParents(e,n){return re.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return re.resolve()}deleteFieldIndex(e,n){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,n){return re.resolve()}getDocumentsMatchingTarget(e,n){return re.resolve(null)}getIndexType(e,n){return re.resolve(0)}getFieldIndexes(e,n){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,n){return re.resolve(go.min())}getMinOffsetFromCollectionGroup(e,n){return re.resolve(go.min())}updateCollectionGroup(e,n,i){return re.resolve()}updateIndexEntries(e,n){return re.resolve()}}class Oj{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new ln(lt.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new ln(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new $l(0)}static kn(){return new $l(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(){this.changes=new su(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,yn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?re.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Ac(i.mutation,r,ii.empty(),Gt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Ue()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Ue()){const r=Qo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=dc();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=Qo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Ue()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,i,r){let s=ms();const o=Ic(),l=function(){return Ic()}();return n.forEach((u,h)=>{const d=i.get(h.key);r.has(h.key)&&(d===void 0||d.mutation instanceof ko)?s=s.insert(h.key,h):d!==void 0?(o.set(h.key,d.mutation.getFieldMask()),Ac(d.mutation,h,d.mutation.getFieldMask(),Gt.now())):o.set(h.key,ii.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,d)=>o.set(h,d)),n.forEach((h,d)=>{var m;return l.set(h,new Dj(d,(m=o.get(h))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const i=Ic();let r=new kt((o,l)=>o-l),s=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let d=i.get(u)||ii.empty();d=l.applyToLocalView(h,d),i.set(u,d);const m=(r.get(l.batchId)||Ue()).add(u);r=r.insert(l.batchId,m)})}).next(()=>{const o=[],l=r.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,d=u.value,m=BI();d.forEach(g=>{if(!s.has(g)){const _=GI(n.get(g),i.get(g));_!==null&&m.set(g,_),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return re.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(o){return ve.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):M0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):re.resolve(Qo());let l=-1,u=s;return o.next(h=>re.forEach(h,(d,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),s.get(d)?re.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{u=u.insert(d,g)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,Ue())).next(d=>({batchId:l,changes:zI(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ve(n)).next(i=>{let r=dc();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let o=dc();return this.indexManager.getCollectionParents(e,s).next(l=>re.forEach(l,u=>{const h=function(m,g){return new To(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,i,r).next(d=>{d.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((u,h)=>{const d=h.getKey();o.get(d)===null&&(o=o.insert(d,yn.newInvalidDocument(d)))});let l=dc();return o.forEach((u,h)=>{const d=s.get(u);d!==void 0&&Ac(d.mutation,h,ii.empty(),Gt.now()),Rm(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return re.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:kr(r.createTime)}}(n)),re.resolve()}getNamedQuery(e,n){return re.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:Lj(r.bundledQuery),readTime:kr(r.readTime)}}(n)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(){this.overlays=new kt(ve.comparator),this.Ir=new Map}getOverlay(e,n){return re.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Qo();return re.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.ht(e,n,s)}),re.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),re.resolve()}getOverlaysForCollection(e,n,i){const r=Qo(),s=n.length+1,o=new ve(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>i&&r.set(u.getKey(),u)}return re.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new kt((h,d)=>h-d);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let d=s.get(h.largestBatchId);d===null&&(d=Qo(),s=s.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=Qo(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,d)=>l.set(h,d)),!(l.size()>=r)););return re.resolve(l)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new lj(n,i));let s=this.Ir.get(n);s===void 0&&(s=Ue(),this.Ir.set(n,s)),this.Ir.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(){this.sessionToken=cn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(){this.Tr=new ln(Xt.Er),this.dr=new ln(Xt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new Xt(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new Xt(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new ve(new lt([])),i=new Xt(n,e),r=new Xt(n,e+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ve(new lt([])),i=new Xt(n,e),r=new Xt(n,e+1);let s=Ue();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Xt(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Xt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ve.comparator(e.key,n.key)||Ke(e.wr,n.wr)}static Ar(e,n){return Ke(e.wr,n.wr)||ve.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ln(Xt.Er)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new aj(s,n,i,r);this.mutationQueue.push(o);for(const l of r)this.br=this.br.add(new Xt(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return re.resolve(o)}lookupMutationBatch(e,n){return re.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),s=r<0?0:r;return re.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Xt(n,0),r=new Xt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{const l=this.Dr(o.wr);s.push(l)}),re.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new ln(Ke);return n.forEach(r=>{const s=new Xt(r,0),o=new Xt(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],l=>{i=i.add(l.wr)})}),re.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;ve.isDocumentKey(s)||(s=s.child(""));const o=new Xt(new ve(s),0);let l=new ln(Ke);return this.br.forEachWhile(u=>{const h=u.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(l=l.add(u.wr)),!0)},o),re.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){nt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return re.forEach(n.mutations,r=>{const s=new Xt(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new Xt(n,0),r=this.br.firstAfterOrEqual(i);return re.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e){this.Mr=e,this.docs=function(){return new kt(ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return re.resolve(i?i.document.mutableCopy():yn.newInvalidDocument(n))}getEntries(e,n){let i=ms();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():yn.newInvalidDocument(r))}),re.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=ms();const o=n.path,l=new ve(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:d}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||T5(S5(d),i)<=0||(r.has(d.key)||Rm(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return re.resolve(s)}getAllFromCollectionGroup(e,n,i,r){Ce()}Or(e,n){return re.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new $j(this)}getSize(e){return re.resolve(this.size)}}class $j extends Mj{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),re.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e){this.persistence=e,this.Nr=new su(n=>N0(n),O0),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.Lr=0,this.Br=new B0,this.targetCount=0,this.kr=$l.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),re.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new $l(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,re.resolve()}updateTargetData(e,n){return this.Kn(n),re.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&i.get(l.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),r++)}),re.waitFor(s).next(()=>r)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return re.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),re.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),re.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),re.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return re.resolve(i)}containsKey(e,n){return re.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(e,n){this.qr={},this.overlays={},this.Qr=new A0(0),this.Kr=!1,this.Kr=!0,this.$r=new zj,this.referenceDelegate=e(this),this.Ur=new Hj(this),this.indexManager=new Nj,this.remoteDocumentCache=function(r){return new Uj(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new Rj(n),this.Gr=new jj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Vj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new Bj(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){_e("MemoryPersistence","Starting transaction:",e);const r=new qj(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,n){return re.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class qj extends P5{constructor(e){super(),this.currentSequenceNumber=e}}class U0{constructor(e){this.persistence=e,this.Jr=new B0,this.Yr=null}static Zr(e){return new U0(e)}get Xr(){if(this.Yr)return this.Yr;throw Ce()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),re.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),re.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),re.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.Xr,i=>{const r=ve.fromPath(i);return this.ei(e,r).next(s=>{s||n.removeEntry(r,Ae.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return re.or([()=>re.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=Ue(),r=Ue();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new $0(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return BO()?8:C5(Sn())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Gj;return this.Xi(e,n,o).next(l=>{if(s.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>s.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(Yu()<=$e.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",Qa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),re.resolve()):(Yu()<=$e.DEBUG&&_e("QueryEngine","Query:",Qa(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(Yu()<=$e.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",Qa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tr(n))):re.resolve())}Yi(e,n){if(Rb(n))return re.resolve(null);let i=Tr(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Uy(n,null,"F"),i=Tr(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=Ue(...s);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,i).next(u=>{const h=this.ts(n,l);return this.ns(n,h,o,u.readTime)?this.Yi(e,Uy(n,null,"F")):this.rs(e,h,n,u)}))})))}Zi(e,n,i,r){return Rb(n)||r.isEqual(Ae.min())?re.resolve(null):this.Ji.getDocuments(e,i).next(s=>{const o=this.ts(n,s);return this.ns(n,o,i,r)?re.resolve(null):(Yu()<=$e.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Qa(n)),this.rs(e,o,n,E5(r,-1)).next(l=>l))})}ts(e,n){let i=new ln(jI(e));return n.forEach((r,s)=>{Rm(e,s)&&(i=i.add(s))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,n,i){return Yu()<=$e.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",Qa(n)),this.Ji.getDocumentsMatchingQuery(e,n,go.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new kt(Ke),this._s=new su(s=>N0(s),O0),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Fj(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Yj(t,e,n,i){return new Zj(t,e,n,i)}async function s2(t,e){const n=Re(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],l=[];let u=Ue();for(const h of r){o.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}for(const h of s){l.push(h.batchId);for(const d of h.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(i,u).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:l}))})})}function Qj(t,e){const n=Re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,d){const m=h.batch,g=m.keys();let _=re.resolve();return g.forEach(w=>{_=_.next(()=>d.getEntry(u,w)).next(x=>{const C=h.docVersions.get(w);nt(C!==null),x.version.compareTo(C)<0&&(m.applyToRemoteDocument(x,h),x.isValidDocument()&&(x.setReadTime(h.commitVersion),d.addEntry(x)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=Ue();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function o2(t){const e=Re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Xj(t,e){const n=Re(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const l=[];e.targetChanges.forEach((d,m)=>{const g=r.get(m);if(!g)return;l.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,m)));let _=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?_=_.withResumeToken(cn.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,i)),r=r.insert(m,_),function(x,C,E){return x.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(g,_,d)&&l.push(n.Ur.updateTargetData(s,_))});let u=ms(),h=Ue();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(Jj(s,o,e.documentUpdates).next(d=>{u=d.Ps,h=d.Is})),!i.isEqual(Ae.min())){const d=n.Ur.getLastRemoteSnapshotVersion(s).next(m=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));l.push(d)}return re.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.os=r,s))}function Jj(t,e,n){let i=Ue(),r=Ue();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=ms();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(Ae.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):_e("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Ps:o,Is:r}})}function eV(t,e){const n=Re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function tV(t,e){const n=Re(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(s=>s?(r=s,re.resolve(r)):n.Ur.allocateTargetId(i).next(o=>(r=new Gs(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function Gy(t,e,n){const i=Re(t),r=i.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Mh(o))throw o;_e("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function Ub(t,e,n){const i=Re(t);let r=Ae.min(),s=Ue();return i.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,d){const m=Re(u),g=m._s.get(d);return g!==void 0?re.resolve(m.os.get(g)):m.Ur.getTargetData(h,d)}(i,o,Tr(e)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,n?r:Ae.min(),n?s:Ue())).next(l=>(nV(i,q5(e),l),{documents:l,Ts:s})))}function nV(t,e,n){let i=t.us.get(e)||Ae.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.us.set(e,i)}class $b{constructor(){this.activeTargetIds=X5()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class iV{constructor(){this.so=new $b,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new $b,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){_e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){_e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $d=null;function qg(){return $d===null?$d=function(){return 268435456+Math.round(2147483648*Math.random())}():$d++,"0x"+$d.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pn="WebChannelConnection";class aV extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(n,i,r,s,o){const l=qg(),u=this.xo(n,i.toUriEncodedString());_e("RestConnection",`Sending RPC '${n}' ${l}:`,u,r);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,o),this.No(n,u,h,r).then(d=>(_e("RestConnection",`Received RPC '${n}' ${l}: `,d),d),d=>{throw jl("RestConnection",`RPC '${n}' ${l} failed with error: `,d,"url: ",u,"request:",r),d})}Lo(n,i,r,s,o,l){return this.Mo(n,i,r,s,o)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ru}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>n[o]=s),r&&r.headers.forEach((s,o)=>n[o]=s)}xo(n,i){const r=sV[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const s=qg();return new Promise((o,l)=>{const u=new xI;u.setWithCredentials(!0),u.listenOnce(bI.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case If.NO_ERROR:const d=u.getResponseJson();_e(pn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case If.TIMEOUT:_e(pn,`RPC '${e}' ${s} timed out`),l(new de(J.DEADLINE_EXCEEDED,"Request time out"));break;case If.HTTP_ERROR:const m=u.getStatus();if(_e(pn,`RPC '${e}' ${s} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const _=g==null?void 0:g.error;if(_&&_.status&&_.message){const w=function(C){const E=C.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(E)>=0?E:J.UNKNOWN}(_.status);l(new de(w,_.message))}else l(new de(J.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new de(J.UNAVAILABLE,"Connection failed."));break;default:Ce()}}finally{_e(pn,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(r);_e(pn,`RPC '${e}' ${s} sending request:`,r),u.send(n,"POST",h,i,15)})}Bo(e,n,i){const r=qg(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=TI(),l=SI(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;const d=s.join("");_e(pn,`Creating RPC '${e}' stream ${r}: ${d}`,u);const m=o.createWebChannel(d,u);let g=!1,_=!1;const w=new oV({Io:C=>{_?_e(pn,`Not sending because RPC '${e}' stream ${r} is closed:`,C):(g||(_e(pn,`Opening RPC '${e}' stream ${r} transport.`),m.open(),g=!0),_e(pn,`RPC '${e}' stream ${r} sending:`,C),m.send(C))},To:()=>m.close()}),x=(C,E,k)=>{C.listen(E,P=>{try{k(P)}catch(j){setTimeout(()=>{throw j},0)}})};return x(m,hc.EventType.OPEN,()=>{_||(_e(pn,`RPC '${e}' stream ${r} transport opened.`),w.yo())}),x(m,hc.EventType.CLOSE,()=>{_||(_=!0,_e(pn,`RPC '${e}' stream ${r} transport closed`),w.So())}),x(m,hc.EventType.ERROR,C=>{_||(_=!0,jl(pn,`RPC '${e}' stream ${r} transport errored:`,C),w.So(new de(J.UNAVAILABLE,"The operation could not be completed")))}),x(m,hc.EventType.MESSAGE,C=>{var E;if(!_){const k=C.data[0];nt(!!k);const P=k,j=P.error||((E=P[0])===null||E===void 0?void 0:E.error);if(j){_e(pn,`RPC '${e}' stream ${r} received error:`,j);const W=j.status;let z=function(N){const F=zt[N];if(F!==void 0)return ZI(F)}(W),R=j.message;z===void 0&&(z=J.INTERNAL,R="Unknown error status: "+W+" with message "+j.message),_=!0,w.So(new de(z,R)),m.close()}else _e(pn,`RPC '${e}' stream ${r} received:`,k),w.bo(k)}}),x(l,EI.STAT_EVENT,C=>{C.stat===Dy.PROXY?_e(pn,`RPC '${e}' stream ${r} detected buffering proxy`):C.stat===Dy.NOPROXY&&_e(pn,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}}function Gg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(t){return new _j(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e,n,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&_e("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,n,i,r,s,o,l,u){this.ui=e,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new a2(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(ps(n.toString()),ps("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new de(J.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return _e("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(_e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lV extends l2{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=wj(this.serializer,e),i=function(s){if(!("targetChange"in s))return Ae.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Ae.min():o.readTime?kr(o.readTime):Ae.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=qy(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=zy(u)?{documents:Ej(s,u)}:{query:Sj(s,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=XI(s,o.resumeToken);const h=$y(s,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(Ae.min())>0){l.readTime=Ip(s,o.snapshotVersion.toTimestamp());const h=$y(s,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const i=kj(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=qy(this.serializer),n.removeTarget=e,this.a_(n)}}class uV extends l2{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return nt(!!e.streamToken),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){nt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=bj(e.writeResults,e.commitTime),i=kr(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=qy(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>xj(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new de(J.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Hy(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new de(J.UNKNOWN,s.toString())})}Lo(e,n,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Hy(n,i),r,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new de(J.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class hV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ps(n),this.D_=!1):_e("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(async()=>{xa(this)&&(_e("RemoteStore","Restarting streams for network reachability change."),await async function(u){const h=Re(u);h.L_.add(4),await jh(h),h.q_.set("Unknown"),h.L_.delete(4),await Dm(h)}(this))})}),this.q_=new hV(i,r)}}async function Dm(t){if(xa(t))for(const e of t.B_)await e(!0)}async function jh(t){for(const e of t.B_)await e(!1)}function u2(t,e){const n=Re(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),G0(n)?q0(n):ou(n).r_()&&W0(n,e))}function H0(t,e){const n=Re(t),i=ou(n);n.N_.delete(e),i.r_()&&c2(n,e),n.N_.size===0&&(i.r_()?i.o_():xa(n)&&n.q_.set("Unknown"))}function W0(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ou(t).A_(e)}function c2(t,e){t.Q_.xe(e),ou(t).R_(e)}function q0(t){t.Q_=new fj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ou(t).start(),t.q_.v_()}function G0(t){return xa(t)&&!ou(t).n_()&&t.N_.size>0}function xa(t){return Re(t).L_.size===0}function h2(t){t.Q_=void 0}async function fV(t){t.q_.set("Online")}async function pV(t){t.N_.forEach((e,n)=>{W0(t,e)})}async function mV(t,e){h2(t),G0(t)?(t.q_.M_(e),q0(t)):t.q_.set("Unknown")}async function gV(t,e,n){if(t.q_.set("Online"),e instanceof QI&&e.state===2&&e.cause)try{await async function(r,s){const o=s.cause;for(const l of s.targetIds)r.N_.has(l)&&(await r.remoteSyncer.rejectListen(l,o),r.N_.delete(l),r.Q_.removeTarget(l))}(t,e)}catch(i){_e("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ap(t,i)}else if(e instanceof Lf?t.Q_.Ke(e):e instanceof YI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Ae.min()))try{const i=await o2(t.localStore);n.compareTo(i)>=0&&await function(s,o){const l=s.Q_.rt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const d=s.N_.get(h);d&&s.N_.set(h,d.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const d=s.N_.get(u);if(!d)return;s.N_.set(u,d.withResumeToken(cn.EMPTY_BYTE_STRING,d.snapshotVersion)),c2(s,u);const m=new Gs(d.target,u,h,d.sequenceNumber);W0(s,m)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(i){_e("RemoteStore","Failed to raise snapshot:",i),await Ap(t,i)}}async function Ap(t,e,n){if(!Mh(e))throw e;t.L_.add(1),await jh(t),t.q_.set("Offline"),n||(n=()=>o2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{_e("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Dm(t)})}function d2(t,e){return e().catch(n=>Ap(t,n,e))}async function Fm(t){const e=Re(t),n=yo(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;_V(e);)try{const r=await eV(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,yV(e,r)}catch(r){await Ap(e,r)}f2(e)&&p2(e)}function _V(t){return xa(t)&&t.O_.length<10}function yV(t,e){t.O_.push(e);const n=yo(t);n.r_()&&n.V_&&n.m_(e.mutations)}function f2(t){return xa(t)&&!yo(t).n_()&&t.O_.length>0}function p2(t){yo(t).start()}async function vV(t){yo(t).p_()}async function wV(t){const e=yo(t);for(const n of t.O_)e.m_(n.mutations)}async function xV(t,e,n){const i=t.O_.shift(),r=j0.from(i,e,n);await d2(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Fm(t)}async function bV(t,e){e&&yo(t).V_&&await async function(i,r){if(function(o){return cj(o)&&o!==J.ABORTED}(r.code)){const s=i.O_.shift();yo(i).s_(),await d2(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Fm(i)}}(t,e),f2(t)&&p2(t)}async function Wb(t,e){const n=Re(t);n.asyncQueue.verifyOperationInProgress(),_e("RemoteStore","RemoteStore received new credentials");const i=xa(n);n.L_.add(3),await jh(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Dm(n)}async function EV(t,e){const n=Re(t);e?(n.L_.delete(2),await Dm(n)):e||(n.L_.add(2),await jh(n),n.q_.set("Unknown"))}function ou(t){return t.K_||(t.K_=function(n,i,r){const s=Re(n);return s.w_(),new lV(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:fV.bind(null,t),Ro:pV.bind(null,t),mo:mV.bind(null,t),d_:gV.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),G0(t)?q0(t):t.q_.set("Unknown")):(await t.K_.stop(),h2(t))})),t.K_}function yo(t){return t.U_||(t.U_=function(n,i,r){const s=Re(n);return s.w_(),new uV(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:vV.bind(null,t),mo:bV.bind(null,t),f_:wV.bind(null,t),g_:xV.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Fm(t)):(await t.U_.stop(),t.O_.length>0&&(_e("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new os,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const o=Date.now()+i,l=new K0(e,n,o,r,s);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Z0(t,e){if(ps("AsyncQueue",`${e}: ${t}`),Mh(t))return new de(J.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e){this.comparator=e?(n,i)=>e(n,i)||ve.comparator(n.key,i.key):(n,i)=>ve.comparator(n.key,i.key),this.keyedMap=dc(),this.sortedSet=new kt(this.comparator)}static emptySet(e){return new Sl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Sl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Sl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(){this.W_=new kt(ve.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Ce():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Hl{constructor(e,n,i,r,s,o,l,u,h){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,i,r,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Hl(e,n,Sl.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Am(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class TV{constructor(){this.queries=Gb(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=Re(n),s=r.queries;r.queries=Gb(),s.forEach((o,l)=>{for(const u of l.j_)u.onError(i)})})(this,new de(J.ABORTED,"Firestore shutting down"))}}function Gb(){return new su(t=>FI(t),Am)}async function Y0(t,e){const n=Re(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new SV,i=e.J_()?0:1);try{switch(i){case 0:s.z_=await n.onListen(r,!0);break;case 1:s.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const l=Z0(o,`Initialization of query '${Qa(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&X0(n)}async function Q0(t,e){const n=Re(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function kV(t,e){const n=Re(t);let i=!1;for(const r of e){const s=r.query,o=n.queries.get(s);if(o){for(const l of o.j_)l.X_(r)&&(i=!0);o.z_=r}}i&&X0(n)}function PV(t,e,n){const i=Re(t),r=i.queries.get(e);if(r)for(const s of r.j_)s.onError(n);i.queries.delete(e)}function X0(t){t.Y_.forEach(e=>{e.next()})}var Ky,Kb;(Kb=Ky||(Ky={})).ea="default",Kb.Cache="cache";class J0{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Hl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Hl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ky.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e){this.key=e}}class g2{constructor(e){this.key=e}}class CV{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ue(),this.mutatedKeys=Ue(),this.Aa=jI(e),this.Ra=new Sl(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new qb,r=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,l=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((d,m)=>{const g=r.get(d),_=Rm(this.query,m)?m:null,w=!!g&&this.mutatedKeys.has(g.key),x=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let C=!1;g&&_?g.data.isEqual(_.data)?w!==x&&(i.track({type:3,doc:_}),C=!0):this.ga(g,_)||(i.track({type:2,doc:_}),C=!0,(u&&this.Aa(_,u)>0||h&&this.Aa(_,h)<0)&&(l=!0)):!g&&_?(i.track({type:0,doc:_}),C=!0):g&&!_&&(i.track({type:1,doc:g}),C=!0,(u||h)&&(l=!0)),C&&(_?(o=o.add(_),s=x?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),i.track({type:1,doc:d})}return{Ra:o,fa:i,ns:l,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,m)=>function(_,w){const x=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce()}};return x(_)-x(w)}(d.type,m.type)||this.Aa(d.doc,m.doc)),this.pa(i),r=r!=null&&r;const l=n&&!r?this.ya():[],u=this.da.size===0&&this.current&&!r?1:0,h=u!==this.Ea;return this.Ea=u,o.length!==0||h?{snapshot:new Hl(this.query,e.Ra,s,o,e.mutatedKeys,u===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new qb,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ue(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new g2(i))}),this.da.forEach(i=>{e.has(i)||n.push(new m2(i))}),n}ba(e){this.Ta=e.Ts,this.da=Ue();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Hl.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class IV{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class AV{constructor(e){this.key=e,this.va=!1}}class RV{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new su(l=>FI(l),Am),this.Ma=new Map,this.xa=new Set,this.Oa=new kt(ve.comparator),this.Na=new Map,this.La=new B0,this.Ba={},this.ka=new Map,this.qa=$l.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function LV(t,e,n=!0){const i=b2(t);let r;const s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=await _2(i,e,n,!0),r}async function NV(t,e){const n=b2(t);await _2(n,e,!0,!1)}async function _2(t,e,n,i){const r=await tV(t.localStore,Tr(e)),s=r.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return i&&(l=await OV(t,e,s,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&u2(t.remoteStore,r),l}async function OV(t,e,n,i,r){t.Ka=(m,g,_)=>async function(x,C,E,k){let P=C.view.ma(E);P.ns&&(P=await Ub(x.localStore,C.query,!1).then(({documents:R})=>C.view.ma(R,P)));const j=k&&k.targetChanges.get(C.targetId),W=k&&k.targetMismatches.get(C.targetId)!=null,z=C.view.applyChanges(P,x.isPrimaryClient,j,W);return Yb(x,C.targetId,z.wa),z.snapshot}(t,m,g,_);const s=await Ub(t.localStore,e,!0),o=new CV(e,s.Ts),l=o.ma(s.documents),u=Fh.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),h=o.applyChanges(l,t.isPrimaryClient,u);Yb(t,n,h.wa);const d=new IV(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function MV(t,e,n){const i=Re(t),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!Am(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Gy(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&H0(i.remoteStore,r.targetId),Zy(i,r.targetId)}).catch(Oh)):(Zy(i,r.targetId),await Gy(i.localStore,r.targetId,!0))}async function DV(t,e){const n=Re(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),H0(n.remoteStore,i.targetId))}async function FV(t,e,n){const i=HV(t);try{const r=await function(o,l){const u=Re(o),h=Gt.now(),d=l.reduce((_,w)=>_.add(w.key),Ue());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let w=ms(),x=Ue();return u.cs.getEntries(_,d).next(C=>{w=C,w.forEach((E,k)=>{k.isValidDocument()||(x=x.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,w)).next(C=>{m=C;const E=[];for(const k of l){const P=sj(k,m.get(k.key).overlayedDocument);P!=null&&E.push(new ko(k.key,P,AI(P.value.mapValue),Ai.exists(!0)))}return u.mutationQueue.addMutationBatch(_,h,E,l)}).next(C=>{g=C;const E=C.applyToLocalDocumentSet(m,x);return u.documentOverlayCache.saveOverlays(_,C.batchId,E)})}).then(()=>({batchId:g.batchId,changes:zI(m)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,l,u){let h=o.Ba[o.currentUser.toKey()];h||(h=new kt(Ke)),h=h.insert(l,u),o.Ba[o.currentUser.toKey()]=h}(i,r.batchId,n),await Vh(i,r.changes),await Fm(i.remoteStore)}catch(r){const s=Z0(r,"Failed to persist write");n.reject(s)}}async function y2(t,e){const n=Re(t);try{const i=await Xj(n.localStore,e);e.targetChanges.forEach((r,s)=>{const o=n.Na.get(s);o&&(nt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?nt(o.va):r.removedDocuments.size>0&&(nt(o.va),o.va=!1))}),await Vh(n,i,e)}catch(i){await Oh(i)}}function Zb(t,e,n){const i=Re(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((s,o)=>{const l=o.view.Z_(e);l.snapshot&&r.push(l.snapshot)}),function(o,l){const u=Re(o);u.onlineState=l;let h=!1;u.queries.forEach((d,m)=>{for(const g of m.j_)g.Z_(l)&&(h=!0)}),h&&X0(u)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function jV(t,e,n){const i=Re(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),s=r&&r.key;if(s){let o=new kt(ve.comparator);o=o.insert(s,yn.newNoDocument(s,Ae.min()));const l=Ue().add(s),u=new Om(Ae.min(),new Map,new kt(Ke),o,l);await y2(i,u),i.Oa=i.Oa.remove(s),i.Na.delete(e),ew(i)}else await Gy(i.localStore,e,!1).then(()=>Zy(i,e,n)).catch(Oh)}async function VV(t,e){const n=Re(t),i=e.batch.batchId;try{const r=await Qj(n.localStore,e);w2(n,i,null),v2(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Vh(n,r)}catch(r){await Oh(r)}}async function zV(t,e,n){const i=Re(t);try{const r=await function(o,l){const u=Re(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let d;return u.mutationQueue.lookupMutationBatch(h,l).next(m=>(nt(m!==null),d=m.keys(),u.mutationQueue.removeMutationBatch(h,m))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d)).next(()=>u.localDocuments.getDocuments(h,d))})}(i.localStore,e);w2(i,e,n),v2(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Vh(i,r)}catch(r){await Oh(r)}}function v2(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function w2(t,e,n){const i=Re(t);let r=i.Ba[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function Zy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||x2(t,i)})}function x2(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(H0(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),ew(t))}function Yb(t,e,n){for(const i of n)i instanceof m2?(t.La.addReference(i.key,e),BV(t,i)):i instanceof g2?(_e("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||x2(t,i.key)):Ce()}function BV(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(_e("SyncEngine","New document in limbo: "+n),t.xa.add(i),ew(t))}function ew(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ve(lt.fromString(e)),i=t.qa.next();t.Na.set(i,new AV(n)),t.Oa=t.Oa.insert(n,i),u2(t.remoteStore,new Gs(Tr(Im(n.path)),i,"TargetPurposeLimboResolution",A0.oe))}}async function Vh(t,e,n){const i=Re(t),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((l,u)=>{o.push(i.Ka(u,e,n).then(h=>{var d;if((h||n)&&i.isPrimaryClient){const m=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;i.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(h){r.push(h);const m=$0.Wi(u.targetId,h);s.push(m)}}))}),await Promise.all(o),i.Ca.d_(r),await async function(u,h){const d=Re(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>re.forEach(h,g=>re.forEach(g.$i,_=>d.persistence.referenceDelegate.addReference(m,g.targetId,_)).next(()=>re.forEach(g.Ui,_=>d.persistence.referenceDelegate.removeReference(m,g.targetId,_)))))}catch(m){if(!Mh(m))throw m;_e("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const g=m.targetId;if(!m.fromCache){const _=d.os.get(g),w=_.snapshotVersion,x=_.withLastLimboFreeSnapshotVersion(w);d.os=d.os.insert(g,x)}}}(i.localStore,s))}async function UV(t,e){const n=Re(t);if(!n.currentUser.isEqual(e)){_e("SyncEngine","User change. New user:",e.toKey());const i=await s2(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(l=>{l.forEach(u=>{u.reject(new de(J.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Vh(n,i.hs)}}function $V(t,e){const n=Re(t),i=n.Na.get(e);if(i&&i.va)return Ue().add(i.key);{let r=Ue();const s=n.Ma.get(e);if(!s)return r;for(const o of s){const l=n.Fa.get(o);r=r.unionWith(l.view.Va)}return r}}function b2(t){const e=Re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=y2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$V.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jV.bind(null,e),e.Ca.d_=kV.bind(null,e.eventManager),e.Ca.$a=PV.bind(null,e.eventManager),e}function HV(t){const e=Re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zV.bind(null,e),e}class Rp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mm(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Yj(this.persistence,new Kj,e.initialUser,this.serializer)}Ga(e){return new Wj(U0.Zr,this.serializer)}Wa(e){return new iV}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Rp.provider={build:()=>new Rp};class Yy{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Zb(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=UV.bind(null,this.syncEngine),await EV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new TV}()}createDatastore(e){const n=Mm(e.databaseInfo.databaseId),i=function(s){return new aV(s)}(e.databaseInfo);return function(s,o,l,u){return new cV(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,o,l){return new dV(i,r,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Zb(this.syncEngine,n,0),function(){return Hb.D()?new Hb:new rV}())}createSyncEngine(e,n){return function(r,s,o,l,u,h,d){const m=new RV(r,s,o,l,u,h);return d&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=Re(r);_e("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await jh(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Yy.provider={build:()=>new Yy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ps("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=gn.UNAUTHENTICATED,this.clientId=PI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{_e("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(_e("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new os;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Z0(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Kg(t,e){t.asyncQueue.verifyOperationInProgress(),_e("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await s2(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Qb(t,e){t.asyncQueue.verifyOperationInProgress();const n=await qV(t);_e("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Wb(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>Wb(e.remoteStore,r)),t._onlineComponents=e}async function qV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){_e("FirestoreClient","Using user provided OfflineComponentProvider");try{await Kg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===J.FAILED_PRECONDITION||r.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;jl("Error using user provided cache. Falling back to memory cache: "+n),await Kg(t,new Rp)}}else _e("FirestoreClient","Using default OfflineComponentProvider"),await Kg(t,new Rp);return t._offlineComponents}async function E2(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(_e("FirestoreClient","Using user provided OnlineComponentProvider"),await Qb(t,t._uninitializedComponentsProvider._online)):(_e("FirestoreClient","Using default OnlineComponentProvider"),await Qb(t,new Yy))),t._onlineComponents}function GV(t){return E2(t).then(e=>e.syncEngine)}async function Lp(t){const e=await E2(t),n=e.eventManager;return n.onListen=LV.bind(null,e.syncEngine),n.onUnlisten=MV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=NV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=DV.bind(null,e.syncEngine),n}function KV(t,e,n={}){const i=new os;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,h){const d=new tw({next:g=>{d.Za(),o.enqueueAndForget(()=>Q0(s,m));const _=g.docs.has(l);!_&&g.fromCache?h.reject(new de(J.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&g.fromCache&&u&&u.source==="server"?h.reject(new de(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(g)},error:g=>h.reject(g)}),m=new J0(Im(l.path),d,{includeMetadataChanges:!0,_a:!0});return Y0(s,m)}(await Lp(t),t.asyncQueue,e,n,i)),i.promise}function ZV(t,e,n={}){const i=new os;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,h){const d=new tw({next:g=>{d.Za(),o.enqueueAndForget(()=>Q0(s,m)),g.fromCache&&u.source==="server"?h.reject(new de(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(g)},error:g=>h.reject(g)}),m=new J0(l,d,{includeMetadataChanges:!0,_a:!0});return Y0(s,m)}(await Lp(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(t,e,n){if(!n)throw new de(J.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function YV(t,e,n,i){if(e===!0&&i===!0)throw new de(J.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Jb(t){if(!ve.isDocumentKey(t))throw new de(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function eE(t){if(ve.isDocumentKey(t))throw new de(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function jm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ce()}function Kn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new de(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=jm(t);throw new de(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new de(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new de(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=S2((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new de(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new de(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new de(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vm{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tE(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new p5;switch(i.type){case"firstParty":return new y5(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new de(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Xb.get(n);i&&(_e("ComponentProvider","Removing Datastore"),Xb.delete(n),i.terminate())}(this),Promise.resolve()}}function QV(t,e,n,i={}){var r;const s=(t=Kn(t,Vm))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&jl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let l,u;if(typeof i.mockUserToken=="string")l=i.mockUserToken,u=gn.MOCK_USER;else{l=tC(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const h=i.mockUserToken.sub||i.mockUserToken.user_id;if(!h)throw new de(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new gn(h)}t._authCredentials=new m5(new kI(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Lr(this.firestore,e,this._query)}}class xn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new lo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xn(this.firestore,e,this._key)}}class lo extends Lr{constructor(e,n,i){super(e,n,Im(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xn(this.firestore,null,new ve(e))}withConverter(e){return new lo(this.firestore,e,this._path)}}function Cr(t,e,...n){if(t=At(t),T2("collection","path",e),t instanceof Vm){const i=lt.fromString(e,...n);return eE(i),new lo(t,null,i)}{if(!(t instanceof xn||t instanceof lo))throw new de(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(lt.fromString(e,...n));return eE(i),new lo(t.firestore,null,i)}}function gs(t,e,...n){if(t=At(t),arguments.length===1&&(e=PI.newId()),T2("doc","path",e),t instanceof Vm){const i=lt.fromString(e,...n);return Jb(i),new xn(t,null,new ve(i))}{if(!(t instanceof xn||t instanceof lo))throw new de(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(lt.fromString(e,...n));return Jb(i),new xn(t.firestore,t instanceof lo?t.converter:null,new ve(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new a2(this,"async_queue_retry"),this.Vu=()=>{const i=Gg();i&&_e("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=Gg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Gg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new os;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Mh(e))throw e;_e("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(i);throw ps("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=K0.createAndSchedule(this,e,n,i,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&Ce()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function iE(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class _s extends Vm{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new nE,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nE(e),this._firestoreClient=void 0,await e}}}function k2(t,e){const n=typeof t=="object"?t:f0(),i=typeof t=="string"?t:"(default)",r=_m(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=XP("firestore");s&&QV(r,...s)}return r}function zm(t){if(t._terminated)throw new de(J.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||XV(t),t._firestoreClient}function XV(t){var e,n,i;const r=t._freezeSettings(),s=function(l,u,h,d){return new R5(l,u,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,S2(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new WV(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wl(cn.fromBase64String(e))}catch(n){throw new de(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Wl(cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new de(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new on(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new de(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new de(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV=/^__.*__$/;class ez{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ko(e,this.data,this.fieldMask,n,this.fieldTransforms):new Dh(e,this.data,n,this.fieldTransforms)}}class P2{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new ko(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function C2(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce()}}class sw{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new sw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Np(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(C2(this.Cu)&&JV.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class tz{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Mm(e)}Qu(e,n,i,r=!1){return new sw({Cu:e,methodName:n,qu:i,path:on.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zh(t){const e=t._freezeSettings(),n=Mm(t._databaseId);return new tz(t._databaseId,!!e.ignoreUndefinedProperties,n)}function I2(t,e,n,i,r,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,r);ow("Data must be an object, but it was:",o,i);const l=R2(i,o);let u,h;if(s.merge)u=new ii(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const m of s.mergeFields){const g=Qy(e,m,n);if(!o.contains(g))throw new de(J.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);N2(d,g)||d.push(g)}u=new ii(d),h=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,h=o.fieldTransforms;return new ez(new Bn(l),u,h)}class Um extends nw{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Um}}function nz(t,e,n,i){const r=t.Qu(1,e,n);ow("Data must be an object, but it was:",r,i);const s=[],o=Bn.empty();wa(i,(u,h)=>{const d=aw(e,u,n);h=At(h);const m=r.Nu(d);if(h instanceof Um)s.push(d);else{const g=Bh(h,m);g!=null&&(s.push(d),o.set(d,g))}});const l=new ii(s);return new P2(o,l,r.fieldTransforms)}function iz(t,e,n,i,r,s){const o=t.Qu(1,e,n),l=[Qy(e,i,n)],u=[r];if(s.length%2!=0)throw new de(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)l.push(Qy(e,s[g])),u.push(s[g+1]);const h=[],d=Bn.empty();for(let g=l.length-1;g>=0;--g)if(!N2(h,l[g])){const _=l[g];let w=u[g];w=At(w);const x=o.Nu(_);if(w instanceof Um)h.push(_);else{const C=Bh(w,x);C!=null&&(h.push(_),d.set(_,C))}}const m=new ii(h);return new P2(d,m,o.fieldTransforms)}function A2(t,e,n,i=!1){return Bh(n,t.Qu(i?4:3,e))}function Bh(t,e){if(L2(t=At(t)))return ow("Unsupported field value:",e,t),R2(t,e);if(t instanceof nw)return function(i,r){if(!C2(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const l of i){let u=Bh(l,r.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=At(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return J5(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Gt.fromDate(i);return{timestampValue:Ip(r.serializer,s)}}if(i instanceof Gt){const s=new Gt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ip(r.serializer,s)}}if(i instanceof iw)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Wl)return{bytesValue:XI(r.serializer,i._byteString)};if(i instanceof xn){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:z0(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof rw)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return D0(l.serializer,u)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${jm(i)}`)}(t,e)}function R2(t,e){const n={};return CI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wa(t,(i,r)=>{const s=Bh(r,e.Mu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function L2(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Gt||t instanceof iw||t instanceof Wl||t instanceof xn||t instanceof nw||t instanceof rw)}function ow(t,e,n){if(!L2(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=jm(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function Qy(t,e,n){if((e=At(e))instanceof Bm)return e._internalPath;if(typeof e=="string")return aw(t,e);throw Np("Field path arguments must be of type string or ",t,!1,void 0,n)}const rz=new RegExp("[~\\*/\\[\\]]");function aw(t,e,n){if(e.search(rz)>=0)throw Np(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Bm(...e.split("."))._internalPath}catch{throw Np(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Np(t,e,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${i}`),o&&(u+=` in document ${r}`),u+=")"),new de(J.INVALID_ARGUMENT,l+t+u)}function N2(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new xn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field($m("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class sz extends lw{data(){return super.data()}}function $m(t,e){return typeof e=="string"?aw(t,e):e instanceof Bm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new de(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class uw{}class Hm extends uw{}function Op(t,e,...n){let i=[];e instanceof uw&&i.push(e),i=i.concat(n),function(s){const o=s.filter(u=>u instanceof cw).length,l=s.filter(u=>u instanceof Wm).length;if(o>1||o>0&&l>0)throw new de(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class Wm extends Hm{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Wm(e,n,i)}_apply(e){const n=this._parse(e);return F2(e._query,n),new Lr(e.firestore,e.converter,By(e._query,n))}_parse(e){const n=zh(e.firestore);return function(s,o,l,u,h,d,m){let g;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new de(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){sE(m,d);const _=[];for(const w of m)_.push(rE(u,s,w));g={arrayValue:{values:_}}}else g=rE(u,s,m)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||sE(m,d),g=A2(l,o,m,d==="in"||d==="not-in");return $t.create(h,d,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function M2(t,e,n){const i=e,r=$m("where",t);return Wm._create(r,i,n)}class cw extends uw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new cw(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:ir.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let o=r;const l=s.getFlattenedFilters();for(const u of l)F2(o,u),o=By(o,u)}(e._query,n),new Lr(e.firestore,e.converter,By(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class hw extends Hm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new hw(e,n)}_apply(e){const n=function(r,s,o){if(r.startAt!==null)throw new de(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new de(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hh(s,o)}(e._query,this._field,this._direction);return new Lr(e.firestore,e.converter,function(r,s){const o=r.explicitOrderBy.concat([s]);return new To(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function oz(t,e="asc"){const n=e,i=$m("orderBy",t);return hw._create(i,n)}class dw extends Hm{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new dw(e,n,i)}_apply(e){const n=D2(e,this.type,this._docOrFields,this._inclusive);return new Lr(e.firestore,e.converter,function(r,s){return new To(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)}(e._query,n))}}function az(...t){return dw._create("startAt",t,!0)}class fw extends Hm{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new fw(e,n,i)}_apply(e){const n=D2(e,this.type,this._docOrFields,this._inclusive);return new Lr(e.firestore,e.converter,function(r,s){return new To(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)}(e._query,n))}}function lz(...t){return fw._create("endAt",t,!0)}function D2(t,e,n,i){if(n[0]=At(n[0]),n[0]instanceof lw)return function(s,o,l,u,h){if(!u)throw new de(J.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const d=[];for(const m of El(s))if(m.field.isKeyField())d.push(kp(o,u.key));else{const g=u.data.field(m.field);if(Cm(g))throw new de(J.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){const _=m.field.canonicalString();throw new de(J.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}d.push(g)}return new Ul(d,h)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{const r=zh(t.firestore);return function(o,l,u,h,d,m){const g=o.explicitOrderBy;if(d.length>g.length)throw new de(J.INVALID_ARGUMENT,`Too many arguments provided to ${h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const _=[];for(let w=0;w<d.length;w++){const x=d[w];if(g[w].field.isKeyField()){if(typeof x!="string")throw new de(J.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${h}(), but got a ${typeof x}`);if(!M0(o)&&x.indexOf("/")!==-1)throw new de(J.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${h}() must be a plain document ID, but '${x}' contains a slash.`);const C=o.path.child(lt.fromString(x));if(!ve.isDocumentKey(C))throw new de(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${h}() must result in a valid document path, but '${C}' is not because it contains an odd number of segments.`);const E=new ve(C);_.push(kp(l,E))}else{const C=A2(u,h,x);_.push(C)}}return new Ul(_,m)}(t._query,t.firestore._databaseId,r,e,n,i)}}function rE(t,e,n){if(typeof(n=At(n))=="string"){if(n==="")throw new de(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!M0(e)&&n.indexOf("/")!==-1)throw new de(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(lt.fromString(n));if(!ve.isDocumentKey(i))throw new de(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return kp(t,new ve(i))}if(n instanceof xn)return kp(t,n._key);throw new de(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jm(n)}.`)}function sE(t,e){if(!Array.isArray(t)||t.length===0)throw new de(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function F2(t,e){const n=function(r,s){for(const o of r)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new de(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class uz{convertValue(e,n="none"){switch(pa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(fa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return wa(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var n,i,r;const s=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Nt(o.doubleValue));return new rw(s)}convertGeoPoint(e){return new iw(Nt(e.latitude),Nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=R0(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(lh(e));default:return null}}convertTimestamp(e){const n=_o(e);return new Gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=lt.fromString(e);nt(r2(i));const r=new uh(i.get(1),i.get(3)),s=new ve(i.popFirst(5));return r.isEqual(n)||ps(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j2(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class V2 extends lw{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Nf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field($m("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Nf extends V2{data(e={}){return super.data(e)}}class z2{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new pc(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Nf(this._firestore,this._userDataWriter,i.key,i,new pc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new de(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(l=>{const u=new Nf(r._firestore,r._userDataWriter,l.doc.key,l.doc,new pc(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Nf(r._firestore,r._userDataWriter,l.doc.key,l.doc,new pc(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,d=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:cz(l.type),doc:u,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function cz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hz(t){t=Kn(t,xn);const e=Kn(t.firestore,_s);return KV(zm(e),t._key).then(n=>U2(e,t,n))}class pw extends uz{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xn(this.firestore,null,n)}}function ql(t){t=Kn(t,Lr);const e=Kn(t.firestore,_s),n=zm(e),i=new pw(e);return O2(t._query),ZV(n,t._query).then(r=>new z2(e,i,t,r))}function Mp(t,e,n){t=Kn(t,xn);const i=Kn(t.firestore,_s),r=j2(t.converter,e,n);return qm(i,[I2(zh(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Ai.none())])}function Dp(t,e,n,...i){t=Kn(t,xn);const r=Kn(t.firestore,_s),s=zh(r);let o;return o=typeof(e=At(e))=="string"||e instanceof Bm?iz(s,"updateDoc",t._key,e,n,i):nz(s,"updateDoc",t._key,e),qm(r,[o.toMutation(t._key,Ai.exists(!0))])}function dz(t){return qm(Kn(t.firestore,_s),[new F0(t._key,Ai.none())])}function B2(t,e){const n=Kn(t.firestore,_s),i=gs(t),r=j2(t.converter,e);return qm(n,[I2(zh(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Ai.exists(!1))]).then(()=>i)}function mw(t,...e){var n,i,r;t=At(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||iE(e[o])||(s=e[o],o++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(iE(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(i=m.error)===null||i===void 0?void 0:i.bind(m),e[o+2]=(r=m.complete)===null||r===void 0?void 0:r.bind(m)}let u,h,d;if(t instanceof xn)h=Kn(t.firestore,_s),d=Im(t._key.path),u={next:m=>{e[o]&&e[o](U2(h,t,m))},error:e[o+1],complete:e[o+2]};else{const m=Kn(t,Lr);h=Kn(m.firestore,_s),d=m._query;const g=new pw(h);u={next:_=>{e[o]&&e[o](new z2(h,g,m,_))},error:e[o+1],complete:e[o+2]},O2(t._query)}return function(g,_,w,x){const C=new tw(x),E=new J0(_,C,w);return g.asyncQueue.enqueueAndForget(async()=>Y0(await Lp(g),E)),()=>{C.Za(),g.asyncQueue.enqueueAndForget(async()=>Q0(await Lp(g),E))}}(zm(h),d,l,u)}function qm(t,e){return function(i,r){const s=new os;return i.asyncQueue.enqueueAndForget(async()=>FV(await GV(i),r,s)),s.promise}(zm(t),e)}function U2(t,e,n){const i=n.docs.get(e._key),r=new pw(t);return new V2(t,r,e._key,i,new pc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){ru=r})(va),mo(new hs("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),l=new _s(new g5(i.getProvider("auth-internal")),new w5(i.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new de(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uh(h.options.projectId,d)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Ii(xb,"4.7.3",e),Ii(xb,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2="firebasestorage.googleapis.com",fz="storageBucket",pz=2*60*1e3,mz=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends Rr{constructor(e,n,i=0){super(Zg(e),`Firebase Storage: ${n} (${Zg(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Nr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Zg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ir;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ir||(Ir={}));function Zg(t){return"storage/"+t}function gz(){const t="An unknown error occurred, please check the error payload for server response.";return new Nr(Ir.UNKNOWN,t)}function _z(){return new Nr(Ir.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function yz(){return new Nr(Ir.CANCELED,"User canceled the upload/download.")}function vz(t){return new Nr(Ir.INVALID_URL,"Invalid URL '"+t+"'.")}function wz(t){return new Nr(Ir.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function oE(t){return new Nr(Ir.INVALID_ARGUMENT,t)}function H2(){return new Nr(Ir.APP_DELETED,"The Firebase app was deleted.")}function xz(t){return new Nr(Ir.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Yi.makeFromUrl(e,n)}catch{return new Yi(e,"")}if(i.path==="")return i;throw wz(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function s(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+r+o,"i"),u={bucket:1,path:3};function h(j){j.path_=decodeURIComponent(j.path)}const d="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",_=new RegExp(`^https?://${m}/${d}/b/${r}/o${g}`,"i"),w={bucket:1,path:3},x=n===$2?"(?:storage.googleapis.com|storage.cloud.google.com)":n,C="([^?#]*)",E=new RegExp(`^https?://${x}/${r}/${C}`,"i"),P=[{regex:l,indices:u,postModify:s},{regex:_,indices:w,postModify:h},{regex:E,indices:{bucket:1,path:2},postModify:h}];for(let j=0;j<P.length;j++){const W=P[j],z=W.regex.exec(e);if(z){const R=z[W.indices.bucket];let I=z[W.indices.path];I||(I=""),i=new Yi(R,I),W.postModify(i);break}}if(i==null)throw vz(e);return i}}class bz{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ez(t,e,n){let i=1,r=null,s=null,o=!1,l=0;function u(){return l===2}let h=!1;function d(...C){h||(h=!0,e.apply(null,C))}function m(C){r=setTimeout(()=>{r=null,t(_,u())},C)}function g(){s&&clearTimeout(s)}function _(C,...E){if(h){g();return}if(C){g(),d.call(null,C,...E);return}if(u()||o){g(),d.call(null,C,...E);return}i<64&&(i*=2);let P;l===1?(l=2,P=0):P=(i+Math.random())*1e3,m(P)}let w=!1;function x(C){w||(w=!0,g(),!h&&(r!==null?(C||(l=2),clearTimeout(r),m(0)):C||(l=1)))}return m(0),s=setTimeout(()=>{o=!0,x(!0)},n),x}function Sz(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tz(t){return t!==void 0}function aE(t,e,n,i){if(i<e)throw oE(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw oE(`Invalid value for '${t}'. Expected ${n} or less.`)}function kz(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var Fp;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Fp||(Fp={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pz(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||r||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cz{constructor(e,n,i,r,s,o,l,u,h,d,m,g=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=h,this.progressCallback_=d,this.connectionFactory_=m,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,w)=>{this.resolve_=_,this.reject_=w,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new Hd(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=l=>{const u=l.loaded,h=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,h)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const l=s.getErrorCode()===Fp.NO_ERROR,u=s.getStatus();if(!l||Pz(u,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===Fp.ABORT;i(!1,new Hd(!1,null,d));return}const h=this.successCodes_.indexOf(u)!==-1;i(!0,new Hd(h,s))})},n=(i,r)=>{const s=this.resolve_,o=this.reject_,l=r.connection;if(r.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());Tz(u)?s(u):s()}catch(u){o(u)}else if(l!==null){const u=gz();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(r.canceled){const u=this.appDelete_?H2():yz();o(u)}else{const u=_z();o(u)}};this.canceled_?n(!1,new Hd(!1,null,!0)):this.backoffId_=Ez(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Sz(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Hd{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function Iz(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Az(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Rz(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Lz(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Nz(t,e,n,i,r,s,o=!0){const l=kz(t.urlParams),u=t.url+l,h=Object.assign({},t.headers);return Rz(h,e),Iz(h,n),Az(h,s),Lz(h,i),new Cz(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oz(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Mz(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,n){this._service=e,n instanceof Yi?this._location=n:this._location=Yi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new jp(e,n)}get root(){const e=new Yi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Mz(this._location.path)}get storage(){return this._service}get parent(){const e=Oz(this._location.path);if(e===null)return null;const n=new Yi(this._location.bucket,e);return new jp(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw xz(e)}}function lE(t,e){const n=e==null?void 0:e[fz];return n==null?null:Yi.makeFromBucketSpec(n,t)}function Dz(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:r}=i;r&&(t._overrideAuthToken=typeof r=="string"?r:tC(r,t.app.options.projectId))}class Fz{constructor(e,n,i,r,s){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=$2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=pz,this._maxUploadRetryTime=mz,this._requests=new Set,r!=null?this._bucket=Yi.makeFromBucketSpec(r,this._host):this._bucket=lE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Yi.makeFromBucketSpec(this._url,e):this._bucket=lE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){aE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){aE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new jp(this,e)}_makeRequest(e,n,i,r,s=!0){if(this._deleted)return new bz(H2());{const o=Nz(e,this._appId,i,r,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const uE="@firebase/storage",cE="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2="storage";function jz(t=f0(),e){t=At(t);const i=_m(t,W2).getImmediate({identifier:e}),r=XP("storage");return r&&Vz(i,...r),i}function Vz(t,e,n,i={}){Dz(t,e,n,i)}function zz(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new Fz(n,i,r,e,va)}function Bz(){mo(new hs(W2,zz,"PUBLIC").setMultipleInstances(!0)),Ii(uE,cE,""),Ii(uE,cE,"esm2017")}Bz();const Uz={apiKey:"AIzaSyADAy8ySvJsUP5diMyR9eIUgtPFimpydcA",authDomain:"sap-jdc.firebaseapp.com",projectId:"sap-jdc",storageBucket:"sap-jdc.appspot.com",messagingSenderId:"1079234336489",appId:"1:1079234336489:web:2428621b62a393068ec278",measurementId:"G-PRWSK0TEFZ"},gw=rC(Uz),$s=tu(gw),hn=k2(gw);jz(gw);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $z="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hz{constructor(e,n,i){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(r=>this.auth=r,()=>{}),this.messaging||n.get().then(r=>this.messaging=r,()=>{}),this.appCheck||i.get().then(r=>this.appCheck=r,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),i=await this.getMessagingToken(),r=await this.getAppCheckToken(e);return{authToken:n,messagingToken:i,appCheckToken:r}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="us-central1";class Wz{constructor(e,n,i,r,s=hE,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new Hz(n,i,r),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(s);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=hE}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}const dE="@firebase/functions",fE="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qz="auth-internal",Gz="app-check-internal",Kz="messaging-internal";function Zz(t,e){const n=(i,{instanceIdentifier:r})=>{const s=i.getProvider("app").getImmediate(),o=i.getProvider(qz),l=i.getProvider(Kz),u=i.getProvider(Gz);return new Wz(s,o,l,u,r,t)};mo(new hs($z,n,"PUBLIC").setMultipleInstances(!0)),Ii(dE,fE,e),Ii(dE,fE,"esm2017")}Zz(fetch.bind(self));const Yz="E92N49W43Y29",ys=t=>({...t,secret:Yz}),Of=async t=>{console.log(`[firebaseService] Fetching collection: ${t}`);try{const n=(await ql(Cr(hn,t))).docs.map(i=>({id:i.id,...i.data()}));return console.log(`[firebaseService] Fetched ${n.length} documents from ${t}.`),n}catch(e){throw console.error(`[firebaseService] Error fetching collection ${t}:`,e),e}},Qz=async(t,e)=>{var n;console.log(`[firebaseService] Attempting to add document to ${t}...`);try{const i=["CHR","HACCP","Kezia","Tabac"];let r={...e},s=e.statut;const o=((n=e.demandeSAP)==null?void 0:n.toLowerCase())??"";i.includes(t)&&(o.includes("demande de rma")?s="Demande de RMA":s||(s="Nouveau")),r={...r,statut:s},r.date||(r.dateCreation=new Date().toISOString(),console.warn(`[firebaseService] Document added to ${t} without a 'date' field. Added 'dateCreation' instead.`));const l=ys(r);console.log(`[firebaseService] Adding document to ${t} with data (secret included):`,l);const u=await B2(Cr(hn,t),l);return console.log(`[firebaseService] Document successfully added to ${t} with ID: ${u.id} and status: ${s}`),u.id}catch(i){throw console.error(`[firebaseService] Error adding document to ${t}:`,i),console.error("[firebaseService] Data attempted (before secret):",e),i}},Xz=async(t,e)=>{const n=$s.currentUser;console.log(`[firebaseService] Attempting to delete document: ${t}/${e}`),console.log("[firebaseService] Current auth user state during delete attempt:",n?`${n.uid} (${n.email})`:"No user authenticated");try{const i=gs(hn,t,e);await dz(i),console.log(`[firebaseService] Document ${e} from ${t} deleted successfully.`)}catch(i){throw console.error(`[firebaseService] Error deleting document ${e} from ${t}:`,i),console.error("[firebaseService] Auth state at time of error:",n?`${n.uid} (${n.email})`:"No user authenticated"),i}},Yg=async()=>{console.log("[firebaseService] Fetching sectors...");try{const t=[{id:"CHR"},{id:"HACCP"},{id:"Kezia"},{id:"Tabac"}];return console.log(`[firebaseService] Returning ${t.length} static sectors.`),t}catch(t){throw console.error("[firebaseService] Error fetching sectors:",t),t}},Jz=(t,e,n)=>{const i=Op(Cr(hn,t));return console.log(`[firebaseService] Setting up listener for collection: ${t}`),mw(i,s=>{const o=s.docs.map(l=>({id:l.id,...l.data()}));console.log(`[firebaseService] Listener received ${o.length} documents from ${t}`),e(o)},s=>{console.error(`[firebaseService] Error listening to collection ${t}:`,s),n(s)})},q2=(t,e,n)=>{const i=Cr(hn,t);return console.log(`[firebaseService] Setting up listener for tickets in sector: ${t}`),mw(i,s=>{const o=[],l=[];s.docs.forEach(u=>{var C;const h=u.data();let d=h.statut;const g=(((C=h.demandeSAP)==null?void 0:C.toLowerCase())??"").includes("demande de rma"),_=d!=="Demande de RMA";let w=!1,x={};if(g&&_?(d="Demande de RMA",x.statut=d,w=!0,console.log(`[firebaseService] Planning status update for ticket ${u.id} in ${t} to: ${d} (based on demandeSAP).`)):!d&&!g&&(d="Nouveau",x.statut=d,w=!0,console.log(`[firebaseService] Planning status update for ticket ${u.id} in ${t} to default: ${d} (was missing).`)),w){const E=ys(x);l.push(Dp(u.ref,E).catch(k=>{console.error(`[firebaseService] Failed background status update for ticket ${u.id}:`,k)}))}o.push({id:u.id,...h,statut:d,secteur:t})}),console.log(`[firebaseService] Listener received ${o.length} tickets from ${t}. Pending background updates: ${l.length}`),e(o),l.length>0&&Promise.all(l).then(()=>console.log(`[firebaseService] Finished ${l.length} background status updates (with secret) for sector ${t}.`)).catch(u=>console.error(`[firebaseService] Error during batch background status updates for sector ${t}:`,u))},s=>{console.error(`[firebaseService] Error listening to tickets for sector ${t}:`,s),n(s)})},Wd=async(t,e,n)=>{console.log(`[firebaseService] Updating ticket ${e} in ${t}`);try{const i=gs(hn,t,e);await Dp(i,ys(n)),console.log(`[firebaseService] Successfully updated ticket ${e}.`)}catch(i){throw console.error(`[firebaseService] Error updating ticket ${e} in ${t}:`,i),i}},G2=async()=>{console.log("[firebaseService] Fetching all envois (one-time)...");try{const t=await Of("Envoi");return console.log(`[firebaseService] Fetched ${t.length} envois.`),t}catch(t){throw console.error("[firebaseService] Error fetching envois:",t),t}},e9=async t=>{if(console.log(`[firebaseService] Attempting to delete multiple envois: ${t.join(", ")}`),t.length===0)return console.warn("[firebaseService] deleteMultipleEnvois called with empty ID list."),!0;try{const e=t.map(n=>Xz("Envoi",n));return await Promise.all(e),console.log(`[firebaseService] Successfully initiated deletion for ${t.length} envois.`),!0}catch(e){throw console.error("[firebaseService] Error deleting multiple envois:",e),e}},t9=(t,e)=>{console.log("[firebaseService] Setting up listener for envois count...");const n=Cr(hn,"Envoi");return mw(n,r=>{const s=r.size;console.log(`[firebaseService] Envois count listener update: ${s}`),t(s)},r=>{console.error("[firebaseService] Error listening to envois count:",r),e(r)})},K2=async t=>{console.log(`[firebaseService] Fetching geocode for address: "${t}"`);try{const e=Cr(hn,"geocodes"),n=Op(e,M2("address","==",t)),i=await ql(n);if(i.empty)return console.log(`[firebaseService] No geocode found in Firestore for address: "${t}"`),null;{const r=i.docs[0];return console.log(`[firebaseService] Geocode found for address: "${t}"`),r.data()}}catch(e){return console.error(`[firebaseService] Error fetching geocode from Firestore for "${t}":`,e),null}},n9=async(t,e,n)=>{console.log(`[firebaseService] Attempting to store geocode for address: "${t}"`);try{const i=Cr(hn,"geocodes");if(await K2(t)){console.log(`[firebaseService] Geocode already exists for address: "${t}". Skipping storage.`);return}await B2(i,ys({address:t,latitude:e,longitude:n,timestamp:new Date})),console.log(`[firebaseService] Geocode successfully stored for address: "${t}" (secret included).`)}catch(i){console.error(`[firebaseService] Error storing geocode in Firestore for "${t}":`,i)}},i9=async t=>{try{console.log("[firebaseService] Creating new user with email:",t.email);const n=(await IC($s,t.email,t.password)).user;console.log("[firebaseService] User created in Auth:",n.uid),await AC(n,{displayName:t.nom}),console.log("[firebaseService] Auth profile updated for:",n.uid);const i={uid:n.uid,email:t.email,nom:t.nom,role:t.role,secteurs:t.secteurs,dateCreation:new Date().toISOString()},r=gs(hn,"users",n.uid);await Mp(r,ys(i)),console.log("[firebaseService] User data stored in 'users' collection (secret included):",n.uid);const s={email:t.email,nom:t.nom,role:t.role,dateCreation:new Date().toISOString(),authProvider:"email"};return await Mp(gs(hn,"auth_users",n.uid),ys(s)),console.log("[firebaseService] User data stored in 'auth_users' collection (secret included):",n.uid),console.log("[firebaseService] User creation process completed successfully for:",n.uid),n.uid}catch(e){throw console.error("[firebaseService] Error creating user:",e),e.code&&console.error("[firebaseService] Firebase error code:",e.code),e}},r9=async(t,e,n)=>{try{console.log(`[firebaseService] Updating user: ${t} with data:`,e);const i=$s.currentUser,r=gs(hn,"users",t),{password:s,...o}=e;await Dp(r,ys(o)),console.log(`[firebaseService] Updated 'users' collection for ${t} (secret included).`);const l=gs(hn,"auth_users",t);try{if((await hz(l)).exists()){const h={nom:e.nom,role:e.role};await Dp(l,ys(h)),console.log(`[firebaseService] Updated 'auth_users' collection for ${t} (secret included).`)}else console.log(`[firebaseService] Document for user ${t} not found in 'auth_users'. Skipping update.`)}catch(u){console.error(`[firebaseService] Error reading 'auth_users' for ${t} during update, skipping:`,u)}if(s&&i&&i.uid===t){if(!n)throw console.warn(`[firebaseService] Password update requested for ${t} but currentPassword was not provided. Skipping password update.`),new Error("Le mot de passe actuel est requis pour mettre à jour le mot de passe.")}else s&&(!i||i.uid!==t)&&console.warn(`[firebaseService] Password update requested for ${t}, but the current authenticated user (${i==null?void 0:i.uid}) does not match or is not logged in. Skipping password update.`);return e.nom&&i&&i.uid===t?i.displayName!==e.nom&&(console.log(`[firebaseService] Updating Firebase Auth display name for ${t} to: ${e.nom}`),await AC(i,{displayName:e.nom}),console.log(`[firebaseService] Firebase Auth display name updated for ${t}.`)):e.nom&&(!i||i.uid!==t)&&console.warn(`[firebaseService] Display name update requested for ${t}, but the current authenticated user (${i==null?void 0:i.uid}) does not match or is not logged in. Skipping Auth profile update.`),console.log(`[firebaseService] User update process completed for ${t}.`),!0}catch(i){throw console.error(`[firebaseService] General error updating user ${t}:`,i),i.message.includes("mot de passe")?i:new Error("Erreur lors de la mise à jour de l'utilisateur.")}},_w=async()=>{try{console.log("[firebaseService] Fetching users...");const t=Cr(hn,"users"),n=(await ql(t)).docs.map(u=>({id:u.id,...u.data(),source:"Firestore (users)"}));console.log(`[firebaseService] Fetched ${n.length} users from Firestore 'users' collection.`);const i=Cr(hn,"auth_users"),s=(await ql(i)).docs.map(u=>({id:u.id,...u.data(),source:"Firestore (auth_users)"}));console.log(`[firebaseService] Fetched ${s.length} users from Firestore 'auth_users' collection.`);const o=new Map;s.forEach(u=>{u.id?o.set(u.id,{...u,id:u.id}):console.warn("[firebaseService] User found in 'auth_users' without an ID:",u)}),n.forEach(u=>{if(u.id){const h=o.get(u.id);o.set(u.id,{...h||{},...u,id:u.id})}else console.warn("[firebaseService] User found in 'users' without an ID:",u)});const l=Array.from(o.values());return console.log(`[firebaseService] Total unique users after merging: ${l.length}`),l}catch(t){throw console.error("[firebaseService] Error fetching users:",t),t}},s9=async()=>{try{console.warn("[firebaseService] Attempting client-side sync of Auth users with Firestore 'auth_users'. This uses a hardcoded list and is NOT recommended for production.");const t=[{id:"oZxwRVuq6BSV6p8IJHcCzCD4lv63",email:"camille.petrot@jdc.fr",nom:"Camille Petrot",role:"Admin",authProvider:"email"},{id:"0vne09pdaFfNExSaSy8w2KgR5KL2",email:"tommy.vilmen@jdc.fr",nom:"Tommy Vilmen",role:"Admin",authProvider:"email"},{id:"TlMhQvhtblSxEakVBeGKRiOs0lo2",email:"test@test.fr",nom:"Test",role:"Utilisateur",authProvider:"email"}];let e=0;const n=[];for(const i of t){if(!i.id){console.warn("[firebaseService] Skipping sync for known user without ID:",i);continue}const r=gs(hn,"auth_users",i.id),s={email:i.email,nom:i.nom,role:i.role,dateCreation:new Date().toISOString(),authProvider:i.authProvider||"unknown"};n.push(Mp(r,ys(s),{merge:!0}).then(()=>{e++}).catch(o=>console.error(`[firebaseService] Error syncing user ${i.id} to auth_users:`,o)))}return await Promise.all(n),console.log(`[firebaseService] Synchronized ${e}/${t.length} known Firebase Auth users with Firestore 'auth_users' (secret included).`),!0}catch(t){throw console.error("[firebaseService] Error synchronizing Firebase Auth users:",t),t}},o9=async t=>{if(console.log(`[firebaseService] Searching articles with term: "${t}"`),!t||t.trim().length===0)return console.log("[firebaseService] Search term is empty, returning empty results."),[];const e=t.trim(),n=e.toUpperCase(),i=Cr(hn,"articles"),r=new Map;try{const s=Op(i,M2("Code","==",e));console.log("[firebaseService] Executing Code exact match query...");const o=await ql(s);console.log(`[firebaseService] Code query found ${o.docs.length} matches.`),o.docs.forEach(m=>{const g=m.data();if(g.Code&&g.Désignation){const _={id:m.id,collectionSource:g.category||"unknown",Code:g.Code,Désignation:g.Désignation,...g};r.set(m.id,_)}else console.warn(`[firebaseService] Document ${m.id} matched by Code is missing 'Code' or 'Désignation'.`)});const l=n+"",u=Op(i,oz("Désignation"),az(n),lz(l));console.log("[firebaseService] Executing Désignation prefix query (using uppercase)...");const h=await ql(u);console.log(`[firebaseService] Désignation query found ${h.docs.length} potential matches.`),h.docs.forEach(m=>{const g=m.data();if(g.Code&&g.Désignation){const _={id:m.id,collectionSource:g.category||"unknown",Code:g.Code,Désignation:g.Désignation,...g};r.has(m.id)||r.set(m.id,_)}else console.warn(`[firebaseService] Document ${m.id} matched by Désignation is missing 'Code' or 'Désignation'.`)});const d=Array.from(r.values());return console.log(`[firebaseService] Article search completed. Found ${d.length} unique articles.`),d}catch(s){throw console.error("[firebaseService] Error executing article search:",s),s.code==="failed-precondition"?(console.error("[firebaseService] Firestore Error: Likely missing a composite index. Check the Firestore console error message for a link to create it. You'll likely need an index on 'Désignation' (ascending)."),new Error("Erreur Firestore: Index manquant requis pour la recherche (probablement sur 'Désignation'). Vérifiez la console Firebase.")):new Error("Échec de la recherche d'articles.")}},Qg="b93a76ecb4b0439dbfe9e64c3c6aff07",a9="https://api.opencagedata.com/geocode/v1/json",Z2=t=>{const[e,n]=$.useState(new Map),[i,r]=$.useState(!1),[s,o]=$.useState(null),l=$.useRef(new Set),u=$.useRef(!0);$.useEffect(()=>(u.current=!0,()=>{u.current=!1}),[]);const h=$.useCallback(async d=>{var m,g,_,w,x;if(console.log(`[useGeoCoding] geocodeAddress called for: "${d}"`),e.has(d)||l.current.has(d))return console.log(`[useGeoCoding] Skipping already processed/processing address: "${d}"`),e.get(d)||null;l.current.add(d);try{console.log(`[useGeoCoding] Checking DB for: "${d}"`);const C=await K2(d);if(C){console.log(`[useGeoCoding] DB Hit for: "${d}"`,C);const E={lat:C.latitude,lng:C.longitude};return u.current&&n(k=>new Map(k).set(d,E)),l.current.delete(d),E}console.log(`[useGeoCoding] DB Miss for: "${d}". Fetching from API.`);try{const E=await Dt.get(a9,{params:{q:d,key:Qg,language:"fr",countrycode:"fr",limit:1},timeout:7e3});if(E.data.results&&E.data.results.length>0){const k=E.data.results[0].geometry;if(k&&typeof k.lat=="number"&&typeof k.lng=="number"){const P={lat:k.lat,lng:k.lng};return console.log(`[useGeoCoding] API Success for: "${d}"`,P),n9(d,P.lat,P.lng).catch(j=>console.error(`[useGeoCoding] Failed to store geocode for "${d}":`,j)),u.current&&n(j=>new Map(j).set(d,P)),l.current.delete(d),P}else return console.warn(`[useGeoCoding] No valid geometry from API for: "${d}"`,E.data.results[0]),u.current&&n(P=>new Map(P).set(d,null)),l.current.delete(d),null}else return console.warn(`[useGeoCoding] No results from API for: "${d}"`),u.current&&n(k=>new Map(k).set(d,null)),l.current.delete(d),null}catch(E){let k=`Erreur API pour "${d}"`;return E.message==="Clé API manquante"?(k="Clé API manquante ou invalide.",console.error("[useGeoCoding] API Key is missing!")):E.code==="ECONNABORTED"?(k=`Timeout API pour "${d}"`,console.error("[useGeoCoding] Geocoding API timeout:",E.message)):((m=E.response)==null?void 0:m.status)===401||((g=E.response)==null?void 0:g.status)===403?(k="Clé API invalide (401/403)",console.error("[useGeoCoding] Geocoding API Auth error:",E.message)):((_=E.response)==null?void 0:_.status)===402?(k="Limite API atteinte (402)",console.error("[useGeoCoding] Geocoding API 402 error:",E.message)):((w=E.response)==null?void 0:w.status)===429?(k="Trop de requêtes API (429)",console.error("[useGeoCoding] Geocoding API 429 error:",E.message)):console.error("[useGeoCoding] Geocoding API error:",E.message,(x=E.response)==null?void 0:x.data),u.current&&(o(k),n(P=>new Map(P).set(d,null))),l.current.delete(d),null}}catch(C){const E=`Erreur DB pour "${d}"`;return console.error("[useGeoCoding] Geocoding DB error:",C.message),u.current&&(o(E),n(k=>new Map(k).set(d,null))),l.current.delete(d),null}},[e]);return $.useEffect(()=>{if(!Array.isArray(t)){console.error("[useGeoCoding] Addresses is not an array:",t),o("Invalid addresses input"),r(!1);return}const d=new Set(t.filter(g=>typeof g=="string"&&g.trim()!==""));o(null);const m=async()=>{r(!0);for(const g of d){if(!u.current)break;!e.has(g)&&!l.current.has(g)&&await h(g)}u.current&&(r(!1),console.log("[useGeoCoding] Finished processing all addresses."))};return console.log(`[useGeoCoding] useEffect triggered. Processing ${d.size} unique addresses.`),m(),()=>{console.log("[useGeoCoding] Cleanup effect.")}},[JSON.stringify(t),h]),{coordinates:e,isLoading:i,error:s}},Y2=[{name:"Baptiste",feature:{type:"Feature",properties:{name:"Baptiste"},geometry:{type:"Polygon",coordinates:[[[4.8836577,44.886044],[4.2842162,44.9924881],[3.8667357,44.7225929],[4.0644896,44.3231158],[4.646765,44.3034632],[5.4927123,44.1124911],[5.7151854,44.1834396],[5.4515135,44.405585],[5.836035,44.6894078],[5.4563201,44.7906117],[5.1425231,44.9652883],[5.0251067,44.94488],[4.8836577,44.886044]]]}}},{name:"julien Isère",feature:{type:"Feature",properties:{name:"julien Isère"},geometry:{type:"Polygon",coordinates:[[[5.4712372,45.0877866],[5.4087525,45.2146597],[5.3407746,45.3460764],[5.3579407,45.3923861],[5.154007,45.5084757],[5.1588727,45.6134865],[5.0592499,45.6488118],[4.8024445,45.5810905],[4.8628693,45.5253153],[4.7543793,45.4535917],[4.7548924,45.3637067],[4.8045044,45.3002118],[4.9947052,45.3475241],[5.1794129,45.2518931],[5.1505738,45.0800295],[5.3819733,45.0465649],[5.4712372,45.0877866]]]}}},{name:"Julien",feature:{type:"Feature",properties:{name:"Julien"},geometry:{type:"Polygon",coordinates:[[[5.4607639,44.7993594],[5.47999,45.0836844],[5.3804264,45.04343],[5.1462803,45.0788359],[5.1744328,45.2507031],[4.9952183,45.3444058],[4.8029575,45.2970908],[4.7548924,45.3637067],[4.5983372,45.2912944],[4.4905338,45.2303966],[4.2852268,44.9963497],[4.8812351,44.8894264],[5.0206242,44.946315],[5.1435337,44.968666],[5.4607639,44.7993594]]]}}},{name:"Florian",feature:{type:"Feature",properties:{name:"Florian"},geometry:{type:"Polygon",coordinates:[[[5.8179481,44.7013913],[6.1461645,44.8612524],[6.3569647,44.8558986],[6.3260653,45.0012533],[6.2072756,45.0187293],[6.2628937,45.1254119],[6.1619567,45.160767],[6.1303705,45.4370377],[5.9793082,45.5852412],[5.8893576,45.6020577],[5.6256856,45.6083024],[5.3626999,45.878565],[5.2226244,45.7661144],[5.0722489,45.7910165],[5.161513,45.6990145],[5.0592036,45.646717],[5.1615684,45.610667],[5.1546475,45.5049321],[5.3668206,45.3946213],[5.3482813,45.3459005],[5.4801178,45.0890645],[5.4718786,44.7959962],[5.8179481,44.7013913]]]}}},{name:"Matthieu",feature:{type:"Feature",properties:{name:"Matthieu"},geometry:{type:"Polygon",coordinates:[[[5.811555,46.0055516],[5.8369609,45.9325323],[5.8778364,45.8310799],[5.9590929,45.8132902],[5.9993579,45.7506936],[6.1535045,45.7550725],[6.18921,45.7004294],[6.3128062,45.6889188],[6.5181132,45.9038709],[6.7158671,45.7248816],[6.8023845,45.7718382],[7.0440837,45.9277564],[6.894395,46.118946],[6.8113109,46.1322712],[6.8628093,46.2829067],[6.7934581,46.3279694],[6.8161174,46.4269768],[6.5201732,46.458678],[6.2269755,46.3146916],[6.309373,46.2468299],[5.9578105,46.1346504],[5.8294078,46.1065697],[5.811555,46.0055516]]]}}},{name:"Guillem",feature:{type:"Feature",properties:{name:"Guillem"},geometry:{type:"Polygon",coordinates:[[[5.8274262,45.9345997],[5.7704346,45.7264774],[5.6413453,45.6194831],[5.889911,45.6108379],[5.984668,45.5940239],[6.1350434,45.4458434],[6.1789887,45.1744565],[6.2696259,45.1376567],[6.4591401,45.0523449],[6.6376679,45.1095567],[7.1526521,45.251852],[7.185611,45.4053629],[6.807956,45.7648112],[6.7118256,45.7188075],[6.5181916,45.8968606],[6.3190644,45.6823611],[6.1831086,45.693873],[6.147403,45.7456476],[5.9935944,45.7446893],[5.9496491,45.8069479],[5.8741181,45.8241765],[5.8274262,45.9345997]]]}}}],l9={Baptiste:{color:"#097138",weight:2,fillColor:"#097138",fillOpacity:.3},"julien Isère":{color:"#9C27B0",weight:2,fillColor:"#9C27B0",fillOpacity:.3},Julien:{color:"#E65100",weight:2,fillColor:"#E65100",fillOpacity:.3},Florian:{color:"#FFEA00",weight:2,fillColor:"#FFEA00",fillOpacity:.3},Matthieu:{color:"#9FA8DA",weight:2,fillColor:"#9FA8DA",fillOpacity:.3},Guillem:{color:"#000000",weight:2,fillColor:"#000000",fillOpacity:.3}},pE={color:"#3388ff",weight:2,fillColor:"#3388ff",fillOpacity:.3},u9=(t="#3388ff")=>cc.divIcon({className:"custom-div-icon",html:`<div style="background-color:${t}; width:15px; height:15px; border-radius:50%; border: 2px solid white;"></div>`,iconSize:[15,15],iconAnchor:[7,7],popupAnchor:[0,-7]}),c9=({tickets:t})=>{const e=$.useRef(null),n=$.useRef(null),i=$.useRef([]),r=$.useRef(null),[s,o]=$.useState(null),[l,u]=$.useState(!1),h=$.useMemo(()=>{const _=t.map(w=>w.adresse).filter(w=>typeof w=="string"&&w.trim()!=="");return Array.from(new Set(_))},[t]),{coordinates:d,isLoading:m,error:g}=Z2(h);return $.useEffect(()=>{if(!e.current||n.current)return;console.log("[InteractiveMap] Initializing map...");const _=cc.map(e.current).setView([46.2276,2.2137],6);cc.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(_),n.current=_;try{const w=cc.geoJSON([],{style:x=>{var C;return(C=x==null?void 0:x.properties)!=null&&C.name&&l9[x.properties.name]||pE},onEachFeature:(x,C)=>{var E;(E=x==null?void 0:x.properties)!=null&&E.name&&C.bindPopup(`<b>Secteur:</b> ${x.properties.name}`)}});Y2.forEach(x=>{w.addData(x.feature)}),w.addTo(_),r.current=w,w.getBounds().isValid()&&_.fitBounds(w.getBounds()),console.log("[InteractiveMap] Added GeoJSON zones to map.")}catch(w){console.error("[InteractiveMap] Error adding GeoJSON zones:",w),o("Erreur lors du chargement des zones")}return u(!0),console.log("[InteractiveMap] Map initialized"),()=>{console.log("[InteractiveMap] Cleaning up map"),n.current&&(n.current.remove(),n.current=null)}},[]),$.useEffect(()=>{if(!(!l||!n.current||m)){console.log(`[InteractiveMap] Updating markers. Geocoding loading: ${m}`),i.current.forEach(_=>{n.current&&_.remove()}),i.current=[];for(const _ of t)if(_.adresse)try{const w=d.get(_.adresse);if(w&&n.current){let x="#3388ff";if(_.statut){const k=_.statut.toLowerCase();k.includes("en cours")?x="#FFA500":k.includes("terminé")?x="#4CAF50":k.includes("annulé")?x="#F44336":k.includes("demande de rma")?x="#9C27B0":k.includes("nouveau")&&(x="#2196F3")}const C=u9(x),E=cc.marker([w.lat,w.lng],{icon:C}).bindPopup(`<b>${_.raisonSociale||"Sans nom"}</b><br/>${_.adresse}<br/>Statut: ${_.statut||"Non défini"}`);E.addTo(n.current),i.current.push(E)}else!w&&d.has(_.adresse)&&console.warn(`[InteractiveMap] No coordinates found for address: ${_.adresse}`)}catch(w){console.error(`[InteractiveMap] Error creating marker for ticket: ${_.id}`,w)}console.log(`[InteractiveMap] Added ${i.current.length} markers to map.`)}},[t,l,d,m]),$.useEffect(()=>{g?o(`Erreur de géocodage: ${g}`):s!=null&&s.startsWith("Erreur de géocodage")&&o(null)},[g]),S.jsxs("div",{className:"relative",children:[m&&S.jsx("div",{className:"absolute top-2 left-2 z-[1000] bg-yellow-100 text-yellow-800 px-3 py-1 rounded text-sm",children:"Géocodage en cours..."}),S.jsx("div",{ref:e,className:"w-full h-[500px] rounded-lg"}),s&&S.jsx("div",{className:"absolute top-2 right-2 z-[1000] bg-red-100 text-red-700 px-4 py-2 rounded text-sm",children:s})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Uh(t){return t+.5|0}const Ks=(t,e,n)=>Math.max(Math.min(t,n),e);function mc(t){return Ks(Uh(t*2.55),0,255)}function uo(t){return Ks(Uh(t*255),0,255)}function Xr(t){return Ks(Uh(t/2.55)/100,0,1)}function mE(t){return Ks(Uh(t*100),0,100)}const bi={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Xy=[..."0123456789ABCDEF"],h9=t=>Xy[t&15],d9=t=>Xy[(t&240)>>4]+Xy[t&15],qd=t=>(t&240)>>4===(t&15),f9=t=>qd(t.r)&&qd(t.g)&&qd(t.b)&&qd(t.a);function p9(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&bi[t[1]]*17,g:255&bi[t[2]]*17,b:255&bi[t[3]]*17,a:e===5?bi[t[4]]*17:255}:(e===7||e===9)&&(n={r:bi[t[1]]<<4|bi[t[2]],g:bi[t[3]]<<4|bi[t[4]],b:bi[t[5]]<<4|bi[t[6]],a:e===9?bi[t[7]]<<4|bi[t[8]]:255})),n}const m9=(t,e)=>t<255?e(t):"";function g9(t){var e=f9(t)?h9:d9;return t?"#"+e(t.r)+e(t.g)+e(t.b)+m9(t.a,e):void 0}const _9=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Q2(t,e,n){const i=e*Math.min(n,1-n),r=(s,o=(s+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function y9(t,e,n){const i=(r,s=(r+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function v9(t,e,n){const i=Q2(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function w9(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}function yw(t){const n=t.r/255,i=t.g/255,r=t.b/255,s=Math.max(n,i,r),o=Math.min(n,i,r),l=(s+o)/2;let u,h,d;return s!==o&&(d=s-o,h=l>.5?d/(2-s-o):d/(s+o),u=w9(n,i,r,d,s),u=u*60+.5),[u|0,h||0,l]}function vw(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(uo)}function ww(t,e,n){return vw(Q2,t,e,n)}function x9(t,e,n){return vw(v9,t,e,n)}function b9(t,e,n){return vw(y9,t,e,n)}function X2(t){return(t%360+360)%360}function E9(t){const e=_9.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?mc(+e[5]):uo(+e[5]));const r=X2(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=x9(r,s,o):e[1]==="hsv"?i=b9(r,s,o):i=ww(r,s,o),{r:i[0],g:i[1],b:i[2],a:n}}function S9(t,e){var n=yw(t);n[0]=X2(n[0]+e),n=ww(n),t.r=n[0],t.g=n[1],t.b=n[2]}function T9(t){if(!t)return;const e=yw(t),n=e[0],i=mE(e[1]),r=mE(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${Xr(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const gE={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},_E={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function k9(){const t={},e=Object.keys(_E),n=Object.keys(gE);let i,r,s,o,l;for(i=0;i<e.length;i++){for(o=l=e[i],r=0;r<n.length;r++)s=n[r],l=l.replace(s,gE[s]);s=parseInt(_E[o],16),t[l]=[s>>16&255,s>>8&255,s&255]}return t}let Gd;function P9(t){Gd||(Gd=k9(),Gd.transparent=[0,0,0,0]);const e=Gd[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const C9=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function I9(t){const e=C9.exec(t);let n=255,i,r,s;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?mc(o):Ks(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?mc(i):Ks(i,0,255)),r=255&(e[4]?mc(r):Ks(r,0,255)),s=255&(e[6]?mc(s):Ks(s,0,255)),{r:i,g:r,b:s,a:n}}}function A9(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Xr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Xg=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Za=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function R9(t,e,n){const i=Za(Xr(t.r)),r=Za(Xr(t.g)),s=Za(Xr(t.b));return{r:uo(Xg(i+n*(Za(Xr(e.r))-i))),g:uo(Xg(r+n*(Za(Xr(e.g))-r))),b:uo(Xg(s+n*(Za(Xr(e.b))-s))),a:t.a+n*(e.a-t.a)}}function Kd(t,e,n){if(t){let i=yw(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=ww(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function J2(t,e){return t&&Object.assign(e||{},t)}function yE(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=uo(t[3]))):(e=J2(t,{r:0,g:0,b:0,a:1}),e.a=uo(e.a)),e}function L9(t){return t.charAt(0)==="r"?I9(t):E9(t)}class ph{constructor(e){if(e instanceof ph)return e;const n=typeof e;let i;n==="object"?i=yE(e):n==="string"&&(i=p9(e)||P9(e)||L9(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=J2(this._rgb);return e&&(e.a=Xr(e.a)),e}set rgb(e){this._rgb=yE(e)}rgbString(){return this._valid?A9(this._rgb):void 0}hexString(){return this._valid?g9(this._rgb):void 0}hslString(){return this._valid?T9(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,r=e.rgb;let s;const o=n===s?.5:n,l=2*o-1,u=i.a-r.a,h=((l*u===-1?l:(l+u)/(1+l*u))+1)/2;s=1-h,i.r=255&h*i.r+s*r.r+.5,i.g=255&h*i.g+s*r.g+.5,i.b=255&h*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=R9(this._rgb,e._rgb,n)),this}clone(){return new ph(this.rgb)}alpha(e){return this._rgb.a=uo(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Uh(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Kd(this._rgb,2,e),this}darken(e){return Kd(this._rgb,2,-e),this}saturate(e){return Kd(this._rgb,1,e),this}desaturate(e){return Kd(this._rgb,1,-e),this}rotate(e){return S9(this._rgb,e),this}}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function qr(){}const N9=(()=>{let t=0;return()=>t++})();function ot(t){return t==null}function Wt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ze(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Oi(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function fr(t,e){return Oi(t)?t:e}function et(t,e){return typeof t>"u"?e:t}const O9=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ft(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Je(t,e,n,i){let r,s,o;if(Wt(t))for(s=t.length,r=0;r<s;r++)e.call(n,t[r],r);else if(Ze(t))for(o=Object.keys(t),s=o.length,r=0;r<s;r++)e.call(n,t[o[r]],o[r])}function Vp(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function zp(t){if(Wt(t))return t.map(zp);if(Ze(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=zp(t[n[r]]);return e}return t}function eA(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function M9(t,e,n,i){if(!eA(t))return;const r=e[t],s=n[t];Ze(r)&&Ze(s)?mh(r,s,i):e[t]=zp(s)}function mh(t,e,n){const i=Wt(e)?e:[e],r=i.length;if(!Ze(t))return t;n=n||{};const s=n.merger||M9;let o;for(let l=0;l<r;++l){if(o=i[l],!Ze(o))continue;const u=Object.keys(o);for(let h=0,d=u.length;h<d;++h)s(u[h],t,o,n)}return t}function Rc(t,e){return mh(t,e,{merger:D9})}function D9(t,e,n){if(!eA(t))return;const i=e[t],r=n[t];Ze(i)&&Ze(r)?Rc(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=zp(r))}const vE={"":t=>t,x:t=>t.x,y:t=>t.y};function F9(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function j9(t){const e=F9(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function Gl(t,e){return(vE[e]||(vE[e]=j9(e)))(t)}function xw(t){return t.charAt(0).toUpperCase()+t.slice(1)}const gh=t=>typeof t<"u",vo=t=>typeof t=="function",wE=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function V9(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const bn=Math.PI,co=2*bn,Bp=Number.POSITIVE_INFINITY,z9=bn/180,Qi=bn/2,jo=bn/4,xE=bn*2/3,tA=Math.log10,ho=Math.sign;function Mf(t,e,n){return Math.abs(t-e)<n}function bE(t){const e=Math.round(t);t=Mf(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(tA(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function B9(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((r,s)=>r-s).pop(),e}function U9(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Up(t){return!U9(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function $9(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function H9(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Xo(t){return t*(bn/180)}function W9(t){return t*(180/bn)}function EE(t){if(!Oi(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function q9(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*bn&&(s+=co),{angle:s,distance:r}}function G9(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Vo(t){return(t%co+co)%co}function K9(t,e,n,i){const r=Vo(t),s=Vo(e),o=Vo(n),l=Vo(s-r),u=Vo(o-r),h=Vo(r-s),d=Vo(r-o);return r===s||r===o||i||l>u&&h<d}function Xi(t,e,n){return Math.max(e,Math.min(n,t))}function Z9(t){return Xi(t,-32768,32767)}function fl(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function bw(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,n(s)?r=s:i=s;return{lo:r,hi:i}}const Jy=(t,e,n,i)=>bw(t,n,i?r=>{const s=t[r][e];return s<n||s===n&&t[r+1][e]===n}:r=>t[r][e]<n),Y9=(t,e,n)=>bw(t,n,i=>t[i][e]>=n);function Q9(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}const nA=["push","pop","shift","splice","unshift"];function X9(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),nA.forEach(n=>{const i="_onData"+xw(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return t._chartjs.listeners.forEach(l=>{typeof l[i]=="function"&&l[i](...s)}),o}})})}function SE(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(nA.forEach(s=>{delete t[s]}),delete t._chartjs)}function iA(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const rA=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function sA(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,rA.call(window,()=>{i=!1,t.apply(e,n)}))}}function J9(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const Ew=t=>t==="start"?"left":t==="end"?"right":"center",mn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,eB=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e,Zd=t=>t===0||t===1,TE=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*co/n)),kE=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*co/n)+1,Lc={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Qi)+1,easeOutSine:t=>Math.sin(t*Qi),easeInOutSine:t=>-.5*(Math.cos(bn*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Zd(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Zd(t)?t:TE(t,.075,.3),easeOutElastic:t=>Zd(t)?t:kE(t,.075,.3),easeInOutElastic(t){return Zd(t)?t:t<.5?.5*TE(t*2,.1125,.45):.5+.5*kE(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Lc.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Lc.easeInBounce(t*2)*.5:Lc.easeOutBounce(t*2-1)*.5+.5};function oA(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function PE(t){return oA(t)?t:new ph(t)}function Jg(t){return oA(t)?t:new ph(t).saturate(.5).darken(.1).hexString()}const tB=["x","y","borderWidth","radius","tension"],nB=["color","borderColor","backgroundColor"];function iB(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:nB},numbers:{type:"number",properties:tB}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function rB(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const CE=new Map;function sB(t,e){e=e||{};const n=t+JSON.stringify(e);let i=CE.get(n);return i||(i=new Intl.NumberFormat(t,e),CE.set(n,i)),i}function aA(t,e,n){return sB(e,n).format(t)}const oB={values(t){return Wt(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const h=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(h<1e-4||h>1e15)&&(r="scientific"),s=aB(t,n)}const o=tA(Math.abs(s)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),u={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(u,this.options.ticks.format),aA(t,i,u)}};function aB(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var lA={formatters:oB};function lB(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:lA.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const ma=Object.create(null),ev=Object.create(null);function Nc(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const s=n[i];t=t[s]||(t[s]=Object.create(null))}return t}function e_(t,e,n){return typeof e=="string"?mh(Nc(t,e),n):mh(Nc(t,""),e)}class uB{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>Jg(r.backgroundColor),this.hoverBorderColor=(i,r)=>Jg(r.borderColor),this.hoverColor=(i,r)=>Jg(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return e_(this,e,n)}get(e){return Nc(this,e)}describe(e,n){return e_(ev,e,n)}override(e,n){return e_(ma,e,n)}route(e,n,i,r){const s=Nc(this,e),o=Nc(this,i),l="_"+n;Object.defineProperties(s,{[l]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const u=this[l],h=o[r];return Ze(u)?Object.assign({},h,u):et(u,h)},set(u){this[l]=u}}})}apply(e){e.forEach(n=>n(this))}}var Mt=new uB({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[iB,rB,lB]);function cB(t){return!t||ot(t.size)||ot(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function IE(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function zo(t,e,n){const i=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function AE(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function RE(t,e,n,i){uA(t,e,n,i,null)}function uA(t,e,n,i,r){let s,o,l,u,h,d,m,g;const _=e.pointStyle,w=e.rotation,x=e.radius;let C=(w||0)*z9;if(_&&typeof _=="object"&&(s=_.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(C),t.drawImage(_,-_.width/2,-_.height/2,_.width,_.height),t.restore();return}if(!(isNaN(x)||x<=0)){switch(t.beginPath(),_){default:r?t.ellipse(n,i,r/2,x,0,0,co):t.arc(n,i,x,0,co),t.closePath();break;case"triangle":d=r?r/2:x,t.moveTo(n+Math.sin(C)*d,i-Math.cos(C)*x),C+=xE,t.lineTo(n+Math.sin(C)*d,i-Math.cos(C)*x),C+=xE,t.lineTo(n+Math.sin(C)*d,i-Math.cos(C)*x),t.closePath();break;case"rectRounded":h=x*.516,u=x-h,o=Math.cos(C+jo)*u,m=Math.cos(C+jo)*(r?r/2-h:u),l=Math.sin(C+jo)*u,g=Math.sin(C+jo)*(r?r/2-h:u),t.arc(n-m,i-l,h,C-bn,C-Qi),t.arc(n+g,i-o,h,C-Qi,C),t.arc(n+m,i+l,h,C,C+Qi),t.arc(n-g,i+o,h,C+Qi,C+bn),t.closePath();break;case"rect":if(!w){u=Math.SQRT1_2*x,d=r?r/2:u,t.rect(n-d,i-u,2*d,2*u);break}C+=jo;case"rectRot":m=Math.cos(C)*(r?r/2:x),o=Math.cos(C)*x,l=Math.sin(C)*x,g=Math.sin(C)*(r?r/2:x),t.moveTo(n-m,i-l),t.lineTo(n+g,i-o),t.lineTo(n+m,i+l),t.lineTo(n-g,i+o),t.closePath();break;case"crossRot":C+=jo;case"cross":m=Math.cos(C)*(r?r/2:x),o=Math.cos(C)*x,l=Math.sin(C)*x,g=Math.sin(C)*(r?r/2:x),t.moveTo(n-m,i-l),t.lineTo(n+m,i+l),t.moveTo(n+g,i-o),t.lineTo(n-g,i+o);break;case"star":m=Math.cos(C)*(r?r/2:x),o=Math.cos(C)*x,l=Math.sin(C)*x,g=Math.sin(C)*(r?r/2:x),t.moveTo(n-m,i-l),t.lineTo(n+m,i+l),t.moveTo(n+g,i-o),t.lineTo(n-g,i+o),C+=jo,m=Math.cos(C)*(r?r/2:x),o=Math.cos(C)*x,l=Math.sin(C)*x,g=Math.sin(C)*(r?r/2:x),t.moveTo(n-m,i-l),t.lineTo(n+m,i+l),t.moveTo(n+g,i-o),t.lineTo(n-g,i+o);break;case"line":o=r?r/2:Math.cos(C)*x,l=Math.sin(C)*x,t.moveTo(n-o,i-l),t.lineTo(n+o,i+l);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(C)*(r?r/2:x),i+Math.sin(C)*x);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function cA(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Sw(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Tw(t){t.restore()}function hB(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),ot(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function dB(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),o=e-s.actualBoundingBoxLeft,l=e+s.actualBoundingBoxRight,u=n-s.actualBoundingBoxAscent,h=n+s.actualBoundingBoxDescent,d=r.strikethrough?(u+h)/2:h;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,d),t.lineTo(l,d),t.stroke()}}function fB(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function _h(t,e,n,i,r,s={}){const o=Wt(e)?e:[e],l=s.strokeWidth>0&&s.strokeColor!=="";let u,h;for(t.save(),t.font=r.string,hB(t,s),u=0;u<o.length;++u)h=o[u],s.backdrop&&fB(t,s.backdrop),l&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),ot(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(h,n,i,s.maxWidth)),t.fillText(h,n,i,s.maxWidth),dB(t,n,i,h,s),i+=Number(r.lineHeight);t.restore()}function $p(t,e){const{x:n,y:i,w:r,h:s,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*bn,bn,!0),t.lineTo(n,i+s-o.bottomLeft),t.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,bn,Qi,!0),t.lineTo(n+r-o.bottomRight,i+s),t.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,Qi,0,!0),t.lineTo(n+r,i+o.topRight),t.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-Qi,!0),t.lineTo(n+o.topLeft,i)}const pB=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,mB=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function gB(t,e){const n=(""+t).match(pB);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const _B=t=>+t||0;function hA(t,e){const n={},i=Ze(e),r=i?Object.keys(e):e,s=Ze(t)?i?o=>et(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=_B(s(o));return n}function dA(t){return hA(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Tl(t){return hA(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Mi(t){const e=dA(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function wn(t,e){t=t||{},e=e||Mt.font;let n=et(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=et(t.style,e.style);i&&!(""+i).match(mB)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:et(t.family,e.family),lineHeight:gB(et(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:et(t.weight,e.weight),string:""};return r.string=cB(r),r}function Yd(t,e,n,i){let r,s,o;for(r=0,s=t.length;r<s;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function yB(t,e,n){const{min:i,max:r}=t,s=O9(e,(r-i)/2),o=(l,u)=>n&&l===0?0:l+u;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function au(t,e){return Object.assign(Object.create(t),e)}function kw(t,e=[""],n,i,r=()=>t[0]){const s=n||t;typeof i>"u"&&(i=gA("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:i,_getTarget:r,override:l=>kw([l,...t],e,s,i)};return new Proxy(o,{deleteProperty(l,u){return delete l[u],delete l._keys,delete t[0][u],!0},get(l,u){return pA(l,u,()=>kB(u,e,t,l))},getOwnPropertyDescriptor(l,u){return Reflect.getOwnPropertyDescriptor(l._scopes[0],u)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(l,u){return NE(l).includes(u)},ownKeys(l){return NE(l)},set(l,u,h){const d=l._storage||(l._storage=r());return l[u]=d[u]=h,delete l._keys,!0}})}function Kl(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:fA(t,i),setContext:s=>Kl(t,s,n,i),override:s=>Kl(t.override(s),e,n,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,l){return pA(s,o,()=>wB(s,o,l))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,l){return t[o]=l,delete s[o],!0}})}function fA(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:vo(n)?n:()=>n,isIndexable:vo(i)?i:()=>i}}const vB=(t,e)=>t?t+xw(e):e,Pw=(t,e)=>Ze(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function pA(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function wB(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=t;let l=i[e];return vo(l)&&o.isScriptable(e)&&(l=xB(e,l,t,n)),Wt(l)&&l.length&&(l=bB(e,l,t,o.isIndexable)),Pw(e,l)&&(l=Kl(l,r,s&&s[e],o)),l}function xB(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:l}=n;if(l.has(t))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+t);l.add(t);let u=e(s,o||i);return l.delete(t),Pw(t,u)&&(u=Cw(r._scopes,r,t,u)),u}function bB(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:l}=n;if(typeof s.index<"u"&&i(t))return e[s.index%e.length];if(Ze(e[0])){const u=e,h=r._scopes.filter(d=>d!==u);e=[];for(const d of u){const m=Cw(h,r,t,d);e.push(Kl(m,s,o&&o[t],l))}}return e}function mA(t,e,n){return vo(t)?t(e,n):t}const EB=(t,e)=>t===!0?e:typeof t=="string"?Gl(e,t):void 0;function SB(t,e,n,i,r){for(const s of e){const o=EB(n,s);if(o){t.add(o);const l=mA(o._fallback,n,r);if(typeof l<"u"&&l!==n&&l!==i)return l}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function Cw(t,e,n,i){const r=e._rootScopes,s=mA(e._fallback,n,i),o=[...t,...r],l=new Set;l.add(i);let u=LE(l,o,n,s||n,i);return u===null||typeof s<"u"&&s!==n&&(u=LE(l,o,s,u,i),u===null)?!1:kw(Array.from(l),[""],r,s,()=>TB(e,n,i))}function LE(t,e,n,i,r){for(;n;)n=SB(t,e,n,i,r);return n}function TB(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return Wt(r)&&Ze(n)?n:r||{}}function kB(t,e,n,i){let r;for(const s of e)if(r=gA(vB(s,t),n),typeof r<"u")return Pw(t,r)?Cw(n,i,t,r):r}function gA(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function NE(t){let e=t._keys;return e||(e=t._keys=PB(t._scopes)),e}function PB(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}function Iw(){return typeof window<"u"&&typeof document<"u"}function Aw(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Hp(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const Gm=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function CB(t,e){return Gm(t).getPropertyValue(e)}const IB=["top","right","bottom","left"];function ia(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=IB[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const AB=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function RB(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let o=!1,l,u;if(AB(r,s,t.target))l=r,u=s;else{const h=e.getBoundingClientRect();l=i.clientX-h.left,u=i.clientY-h.top,o=!0}return{x:l,y:u,box:o}}function Wo(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=Gm(n),s=r.boxSizing==="border-box",o=ia(r,"padding"),l=ia(r,"border","width"),{x:u,y:h,box:d}=RB(t,n),m=o.left+(d&&l.left),g=o.top+(d&&l.top);let{width:_,height:w}=e;return s&&(_-=o.width+l.width,w-=o.height+l.height),{x:Math.round((u-m)/_*n.width/i),y:Math.round((h-g)/w*n.height/i)}}function LB(t,e,n){let i,r;if(e===void 0||n===void 0){const s=t&&Aw(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),l=Gm(s),u=ia(l,"border","width"),h=ia(l,"padding");e=o.width-h.width-u.width,n=o.height-h.height-u.height,i=Hp(l.maxWidth,s,"clientWidth"),r=Hp(l.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:i||Bp,maxHeight:r||Bp}}const Qd=t=>Math.round(t*10)/10;function NB(t,e,n,i){const r=Gm(t),s=ia(r,"margin"),o=Hp(r.maxWidth,t,"clientWidth")||Bp,l=Hp(r.maxHeight,t,"clientHeight")||Bp,u=LB(t,e,n);let{width:h,height:d}=u;if(r.boxSizing==="content-box"){const g=ia(r,"border","width"),_=ia(r,"padding");h-=_.width+g.width,d-=_.height+g.height}return h=Math.max(0,h-s.width),d=Math.max(0,i?h/i:d-s.height),h=Qd(Math.min(h,o,u.maxWidth)),d=Qd(Math.min(d,l,u.maxHeight)),h&&!d&&(d=Qd(h/2)),(e!==void 0||n!==void 0)&&i&&u.height&&d>u.height&&(d=u.height,h=Qd(Math.floor(d*i))),{width:h,height:d}}function OE(t,e,n){const i=e||1,r=Math.floor(t.height*i),s=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(t.currentDevicePixelRatio=i,o.height=r,o.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const OB=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Iw()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function ME(t,e){const n=CB(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}const MB=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},DB=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function kl(t,e,n){return t?MB(e,n):DB()}function _A(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function yA(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}/*!
 * Chart.js v4.4.8
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class FB{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,r){const s=n.listeners[r],o=n.duration;s.forEach(l=>l({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=rA.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,l=!1,u;for(;o>=0;--o)u=s[o],u._active?(u._total>i.duration&&(i.duration=u._total),u.tick(e),l=!0):(s[o]=s[s.length-1],s.pop());l&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Kr=new FB;const DE="transparent",jB={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=PE(t||DE),r=i.valid&&PE(e||DE);return r&&r.valid?r.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class VB{constructor(e,n,i,r){const s=n[i];r=Yd([e.to,r,s,e.from]);const o=Yd([e.from,s,r]);this._active=!0,this._fn=e.fn||jB[e.type||typeof o],this._easing=Lc[e.easing]||Lc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Yd([e.to,n,r,e.from]),this._from=Yd([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,l=this._to;let u;if(this._active=s!==l&&(o||n<i),!this._active){this._target[r]=l,this._notify(!0);return}if(n<0){this._target[r]=s;return}u=n/i%2,u=o&&u>1?2-u:u,u=this._easing(Math.min(1,Math.max(0,u))),this._target[r]=this._fn(s,l,u)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class vA{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Ze(e))return;const n=Object.keys(Mt.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!Ze(s))return;const o={};for(const l of n)o[l]=s[l];(Wt(s.properties)&&s.properties||[r]).forEach(l=>{(l===r||!i.has(l))&&i.set(l,o)})})}_animateOptions(e,n){const i=n.options,r=BB(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&zB(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,n){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),l=Date.now();let u;for(u=o.length-1;u>=0;--u){const h=o[u];if(h.charAt(0)==="$")continue;if(h==="options"){r.push(...this._animateOptions(e,n));continue}const d=n[h];let m=s[h];const g=i.get(h);if(m)if(g&&m.active()){m.update(g,d,l);continue}else m.cancel();if(!g||!g.duration){e[h]=d;continue}s[h]=m=new VB(g,e,h,d),r.push(m)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return Kr.add(this._chart,i),!0}}function zB(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=t[i[r]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function BB(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function FE(t,e){const n=t&&t.options||{},i=n.reverse,r=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function UB(t,e,n){if(n===!1)return!1;const i=FE(t,n),r=FE(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function $B(t){let e,n,i,r;return Ze(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:t===!1}}function wA(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function jE(t,e,n,i={}){const r=t.keys,s=i.mode==="single";let o,l,u,h;if(e===null)return;let d=!1;for(o=0,l=r.length;o<l;++o){if(u=+r[o],u===n){if(d=!0,i.all)continue;break}h=t.values[u],Oi(h)&&(s||e===0||ho(e)===ho(h))&&(e+=h)}return!d&&!i.all?0:e}function HB(t,e){const{iScale:n,vScale:i}=e,r=n.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(t),l=new Array(o.length);let u,h,d;for(u=0,h=o.length;u<h;++u)d=o[u],l[u]={[r]:d,[s]:t[d]};return l}function t_(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function WB(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function qB(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function GB(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function VE(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=t[r.index];if(n&&s>0||!n&&s<0)return r.index}return null}function zE(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:l}=i,u=s.axis,h=o.axis,d=WB(s,o,i),m=e.length;let g;for(let _=0;_<m;++_){const w=e[_],{[u]:x,[h]:C}=w,E=w._stacks||(w._stacks={});g=E[h]=GB(r,d,x),g[l]=C,g._top=VE(g,o,!0,i.type),g._bottom=VE(g,o,!1,i.type);const k=g._visualValues||(g._visualValues={});k[l]=C}}function n_(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function KB(t,e){return au(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function ZB(t,e,n){return au(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Qu(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const r of e){const s=r._stacks;if(!s||s[i]===void 0||s[i][n]===void 0)return;delete s[i][n],s[i]._visualValues!==void 0&&s[i]._visualValues[n]!==void 0&&delete s[i]._visualValues[n]}}}const i_=t=>t==="reset"||t==="none",BE=(t,e)=>e?t:Object.assign({},t),YB=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:wA(n,!0),values:null};class Oc{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=t_(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Qu(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(m,g,_,w)=>m==="x"?g:m==="r"?w:_,s=n.xAxisID=et(i.xAxisID,n_(e,"x")),o=n.yAxisID=et(i.yAxisID,n_(e,"y")),l=n.rAxisID=et(i.rAxisID,n_(e,"r")),u=n.indexAxis,h=n.iAxisID=r(u,s,o,l),d=n.vAxisID=r(u,o,s,l);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(l),n.iScale=this.getScaleForId(h),n.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&SE(this._data,this),e._stacked&&Qu(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(Ze(n)){const r=this._cachedMeta;this._data=HB(n,r)}else if(i!==n){if(i){SE(i,this);const r=this._cachedMeta;Qu(r),r._parsed=[]}n&&Object.isExtensible(n)&&X9(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=n._stacked;n._stacked=t_(n.vScale,n),n.stack!==i.stack&&(r=!0,Qu(n),n.stack=i.stack),this._resyncElements(e),(r||s!==n._stacked)&&(zE(this,n._parsed),n._stacked=t_(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,l=s.axis;let u=e===0&&n===r.length?!0:i._sorted,h=e>0&&i._parsed[e-1],d,m,g;if(this._parsing===!1)i._parsed=r,i._sorted=!0,g=r;else{Wt(r[e])?g=this.parseArrayData(i,r,e,n):Ze(r[e])?g=this.parseObjectData(i,r,e,n):g=this.parsePrimitiveData(i,r,e,n);const _=()=>m[l]===null||h&&m[l]<h[l];for(d=0;d<n;++d)i._parsed[d+e]=m=g[d],u&&(_()&&(u=!1),h=m);i._sorted=u}o&&zE(this,g)}parsePrimitiveData(e,n,i,r){const{iScale:s,vScale:o}=e,l=s.axis,u=o.axis,h=s.getLabels(),d=s===o,m=new Array(r);let g,_,w;for(g=0,_=r;g<_;++g)w=g+i,m[g]={[l]:d||s.parse(h[w],w),[u]:o.parse(n[w],w)};return m}parseArrayData(e,n,i,r){const{xScale:s,yScale:o}=e,l=new Array(r);let u,h,d,m;for(u=0,h=r;u<h;++u)d=u+i,m=n[d],l[u]={x:s.parse(m[0],d),y:o.parse(m[1],d)};return l}parseObjectData(e,n,i,r){const{xScale:s,yScale:o}=e,{xAxisKey:l="x",yAxisKey:u="y"}=this._parsing,h=new Array(r);let d,m,g,_;for(d=0,m=r;d<m;++d)g=d+i,_=n[g],h[d]={x:s.parse(Gl(_,l),g),y:o.parse(Gl(_,u),g)};return h}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const r=this.chart,s=this._cachedMeta,o=n[e.axis],l={keys:wA(r,!0),values:n._stacks[e.axis]._visualValues};return jE(l,o,s.index,{mode:i})}updateRangeFromParsed(e,n,i,r){const s=i[n.axis];let o=s===null?NaN:s;const l=r&&i._stacks[n.axis];r&&l&&(r.values=l,o=jE(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&e===i.iScale,o=r.length,l=this._getOtherScale(e),u=YB(n,i,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:m}=qB(l);let g,_;function w(){_=r[g];const x=_[l.axis];return!Oi(_[e.axis])||d>x||m<x}for(g=0;g<o&&!(!w()&&(this.updateRangeFromParsed(h,e,_,u),s));++g);if(s){for(g=o-1;g>=0;--g)if(!w()){this.updateRangeFromParsed(h,e,_,u);break}}return h}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=n.length;r<s;++r)o=n[r][e.axis],Oi(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,r=n.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=$B(et(this.options.clip,UB(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],s=n.chartArea,o=[],l=this._drawStart||0,u=this._drawCount||r.length-l,h=this.options.drawActiveElementsOnTop;let d;for(i.dataset&&i.dataset.draw(e,s,l,u),d=l;d<l+u;++d){const m=r[d];m.hidden||(m.active&&h?o.push(m):m.draw(e,s))}for(d=0;d<o.length;++d)o[d].draw(e,s)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=ZB(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=KB(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const r=n==="active",s=this._cachedDataOpts,o=e+"-"+n,l=s[o],u=this.enableOptionSharing&&gh(i);if(l)return BE(l,u);const h=this.chart.config,d=h.datasetElementScopeKeys(this._type,e),m=r?[`${e}Hover`,"hover",e,""]:[e,""],g=h.getOptionScopes(this.getDataset(),d),_=Object.keys(Mt.elements[e]),w=()=>this.getContext(i,r,n),x=h.resolveNamedOptions(g,_,w,m);return x.$shared&&(x.$shared=u,s[o]=Object.freeze(BE(x,u))),x}_resolveAnimations(e,n,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,l=s[o];if(l)return l;let u;if(r.options.animation!==!1){const d=this.chart.config,m=d.datasetAnimationScopeKeys(this._type,n),g=d.getOptionScopes(this.getDataset(),m);u=d.createResolver(g,this.getContext(e,i,n))}const h=new vA(r,u&&u.animations);return u&&u._cacheable&&(s[o]=Object.freeze(h)),h}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||i_(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(n,s)||s!==r;return this.updateSharedOptions(s,n,i),{sharedOptions:s,includeOptions:o}}updateElement(e,n,i,r){i_(r)?Object.assign(e,i):this._resolveAnimations(n,r).update(e,i)}updateSharedOptions(e,n,i){e&&!i_(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,r){e.active=r;const s=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[l,u,h]of this._syncList)this[l](u,h);this._syncList=[];const r=i.length,s=n.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,n,i=!0){const r=this._cachedMeta,s=r.data,o=e+n;let l;const u=h=>{for(h.length+=n,l=h.length-1;l>=o;l--)h[l]=h[l-n]};for(u(s),l=e;l<o;++l)s[l]=new this.dataElementType;this._parsing&&u(r._parsed),this.parse(e,n),i&&this.updateElements(s,e,n,"reset")}updateElements(e,n,i,r){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,n);i._stacked&&Qu(i,r)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,r]=e;this[n](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}qe(Oc,"defaults",{}),qe(Oc,"datasetElementType",null),qe(Oc,"dataElementType",null);function QB(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let r=0,s=n.length;r<s;r++)i=i.concat(n[r].controller.getAllParsedValues(t));t._cache.$bar=iA(i.sort((r,s)=>r-s))}return t._cache.$bar}function XB(t){const e=t.iScale,n=QB(e,t.type);let i=e._length,r,s,o,l;const u=()=>{o===32767||o===-32768||(gh(l)&&(i=Math.min(i,Math.abs(o-l)||i)),l=o)};for(r=0,s=n.length;r<s;++r)o=e.getPixelForValue(n[r]),u();for(l=void 0,r=0,s=e.ticks.length;r<s;++r)o=e.getPixelForTick(r),u();return i}function JB(t,e,n,i){const r=n.barThickness;let s,o;return ot(r)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:e.pixels[t]-s/2}}function e8(t,e,n,i){const r=e.pixels,s=r[t];let o=t>0?r[t-1]:null,l=t<r.length-1?r[t+1]:null;const u=n.categoryPercentage;o===null&&(o=s-(l===null?e.end-e.start:l-s)),l===null&&(l=s+s-o);const h=s-(s-Math.min(o,l))/2*u;return{chunk:Math.abs(l-o)/2*u/i,ratio:n.barPercentage,start:h}}function t8(t,e,n,i){const r=n.parse(t[0],i),s=n.parse(t[1],i),o=Math.min(r,s),l=Math.max(r,s);let u=o,h=l;Math.abs(o)>Math.abs(l)&&(u=l,h=o),e[n.axis]=h,e._custom={barStart:u,barEnd:h,start:r,end:s,min:o,max:l}}function xA(t,e,n,i){return Wt(t)?t8(t,e,n,i):e[n.axis]=n.parse(t,i),e}function UE(t,e,n,i){const r=t.iScale,s=t.vScale,o=r.getLabels(),l=r===s,u=[];let h,d,m,g;for(h=n,d=n+i;h<d;++h)g=e[h],m={},m[r.axis]=l||r.parse(o[h],h),u.push(xA(g,m,s,h));return u}function r_(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function n8(t,e,n){return t!==0?ho(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function i8(t){let e,n,i,r,s;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:e,top:r,bottom:s}}function r8(t,e,n,i){let r=e.borderSkipped;const s={};if(!r){t.borderSkipped=s;return}if(r===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:l,reverse:u,top:h,bottom:d}=i8(t);r==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?r=h:(n._bottom||0)===i?r=d:(s[$E(d,o,l,u)]=!0,r=h)),s[$E(r,o,l,u)]=!0,t.borderSkipped=s}function $E(t,e,n,i){return i?(t=s8(t,e,n),t=HE(t,n,e)):t=HE(t,e,n),t}function s8(t,e,n){return t===e?n:t===n?e:t}function HE(t,e,n){return t==="start"?e:t==="end"?n:t}function o8(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class Df extends Oc{parsePrimitiveData(e,n,i,r){return UE(e,n,i,r)}parseArrayData(e,n,i,r){return UE(e,n,i,r)}parseObjectData(e,n,i,r){const{iScale:s,vScale:o}=e,{xAxisKey:l="x",yAxisKey:u="y"}=this._parsing,h=s.axis==="x"?l:u,d=o.axis==="x"?l:u,m=[];let g,_,w,x;for(g=i,_=i+r;g<_;++g)x=n[g],w={},w[s.axis]=s.parse(Gl(x,h),g),m.push(xA(Gl(x,d),w,o,g));return m}updateRangeFromParsed(e,n,i,r){super.updateRangeFromParsed(e,n,i,r);const s=i._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:i,vScale:r}=n,s=this.getParsed(e),o=s._custom,l=r_(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+i.getLabelForValue(s[i.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,i,r){const s=r==="reset",{index:o,_cachedMeta:{vScale:l}}=this,u=l.getBasePixel(),h=l.isHorizontal(),d=this._getRuler(),{sharedOptions:m,includeOptions:g}=this._getSharedOptions(n,r);for(let _=n;_<n+i;_++){const w=this.getParsed(_),x=s||ot(w[l.axis])?{base:u,head:u}:this._calculateBarValuePixels(_),C=this._calculateBarIndexPixels(_,d),E=(w._stacks||{})[l.axis],k={horizontal:h,base:x.base,enableBorderRadius:!E||r_(w._custom)||o===E._top||o===E._bottom,x:h?x.head:C.center,y:h?C.center:x.head,height:h?C.size:Math.abs(x.size),width:h?Math.abs(x.size):C.size};g&&(k.options=m||this.resolveDataElementOptions(_,e[_].active?"active":r));const P=k.options||e[_].options;r8(k,P,E,o),o8(k,P,d.ratio),this.updateElement(e[_],_,k,r)}}_getStacks(e,n){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),s=i.options.stacked,o=[],l=this._cachedMeta.controller.getParsed(n),u=l&&l[i.axis],h=d=>{const m=d._parsed.find(_=>_[i.axis]===u),g=m&&m[d.vScale.axis];if(ot(g)||isNaN(g))return!0};for(const d of r)if(!(n!==void 0&&h(d))&&((s===!1||o.indexOf(d.stack)===-1||s===void 0&&d.stack===void 0)&&o.push(d.stack),d.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,i){const r=this._getStacks(e,i),s=n!==void 0?r.indexOf(n):-1;return s===-1?r.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,i=n.iScale,r=[];let s,o;for(s=0,o=n.data.length;s<o;++s)r.push(i.getPixelForValue(this.getParsed(s)[i.axis],s));const l=e.barThickness;return{min:l||XB(n),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:i,index:r},options:{base:s,minBarLength:o}}=this,l=s||0,u=this.getParsed(e),h=u._custom,d=r_(h);let m=u[n.axis],g=0,_=i?this.applyStack(n,u,i):m,w,x;_!==m&&(g=_-m,_=m),d&&(m=h.barStart,_=h.barEnd-h.barStart,m!==0&&ho(m)!==ho(h.barEnd)&&(g=0),g+=m);const C=!ot(s)&&!d?s:g;let E=n.getPixelForValue(C);if(this.chart.getDataVisibility(e)?w=n.getPixelForValue(g+_):w=E,x=w-E,Math.abs(x)<o){x=n8(x,n,l)*o,m===l&&(E-=x/2);const k=n.getPixelForDecimal(0),P=n.getPixelForDecimal(1),j=Math.min(k,P),W=Math.max(k,P);E=Math.max(Math.min(E,W),j),w=E+x,i&&!d&&(u._stacks[n.axis]._visualValues[r]=n.getValueForPixel(w)-n.getValueForPixel(E))}if(E===n.getPixelForValue(l)){const k=ho(x)*n.getLineWidthForValue(l)/2;E+=k,x-=k}return{size:x,base:E,head:w,center:w+x/2}}_calculateBarIndexPixels(e,n){const i=n.scale,r=this.options,s=r.skipNull,o=et(r.maxBarThickness,1/0);let l,u;if(n.grouped){const h=s?this._getStackCount(e):n.stackCount,d=r.barThickness==="flex"?e8(e,n,r,h):JB(e,n,r,h),m=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);l=d.start+d.chunk*m+d.chunk/2,u=Math.min(o,d.chunk*d.ratio)}else l=i.getPixelForValue(this.getParsed(e)[i.axis],e),u=Math.min(o,n.min*n.ratio);return{base:l-u/2,head:l+u/2,center:l,size:u}}draw(){const e=this._cachedMeta,n=e.vScale,i=e.data,r=i.length;let s=0;for(;s<r;++s)this.getParsed(s)[n.axis]!==null&&!i[s].hidden&&i[s].draw(this._ctx)}}qe(Df,"id","bar"),qe(Df,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),qe(Df,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function Bo(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Rw{constructor(e){qe(this,"options");this.options=e||{}}static override(e){Object.assign(Rw.prototype,e)}init(){}formats(){return Bo()}parse(){return Bo()}format(){return Bo()}add(){return Bo()}diff(){return Bo()}startOf(){return Bo()}endOf(){return Bo()}}var a8={_date:Rw};function l8(t,e,n,i){const{controller:r,data:s,_sorted:o}=t,l=r._cachedMeta.iScale,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&o&&s.length){const h=l._reversePixels?Y9:Jy;if(i){if(r._sharedOptions){const d=s[0],m=typeof d.getRange=="function"&&d.getRange(e);if(m){const g=h(s,e,n-m),_=h(s,e,n+m);return{lo:g.lo,hi:_.hi}}}}else{const d=h(s,e,n);if(u){const{vScale:m}=r._cachedMeta,{_parsed:g}=t,_=g.slice(0,d.lo+1).reverse().findIndex(x=>!ot(x[m.axis]));d.lo-=Math.max(0,_);const w=g.slice(d.hi).findIndex(x=>!ot(x[m.axis]));d.hi+=Math.max(0,w)}return d}}return{lo:0,hi:s.length-1}}function Km(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let l=0,u=s.length;l<u;++l){const{index:h,data:d}=s[l],{lo:m,hi:g}=l8(s[l],e,o,r);for(let _=m;_<=g;++_){const w=d[_];w.skip||i(w,h,_)}}}function u8(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,r){const s=e?Math.abs(i.x-r.x):0,o=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function s_(t,e,n,i,r){const s=[];return!r&&!t.isPointInArea(e)||Km(t,n,e,function(l,u,h){!r&&!cA(l,t.chartArea,0)||l.inRange(e.x,e.y,i)&&s.push({element:l,datasetIndex:u,index:h})},!0),s}function c8(t,e,n,i){let r=[];function s(o,l,u){const{startAngle:h,endAngle:d}=o.getProps(["startAngle","endAngle"],i),{angle:m}=q9(o,{x:e.x,y:e.y});K9(m,h,d)&&r.push({element:o,datasetIndex:l,index:u})}return Km(t,n,e,s),r}function h8(t,e,n,i,r,s){let o=[];const l=u8(n);let u=Number.POSITIVE_INFINITY;function h(d,m,g){const _=d.inRange(e.x,e.y,r);if(i&&!_)return;const w=d.getCenterPoint(r);if(!(!!s||t.isPointInArea(w))&&!_)return;const C=l(e,w);C<u?(o=[{element:d,datasetIndex:m,index:g}],u=C):C===u&&o.push({element:d,datasetIndex:m,index:g})}return Km(t,n,e,h),o}function o_(t,e,n,i,r,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!i?c8(t,e,n,r):h8(t,e,n,i,r,s)}function WE(t,e,n,i,r){const s=[],o=n==="x"?"inXRange":"inYRange";let l=!1;return Km(t,n,e,(u,h,d)=>{u[o]&&u[o](e[n],r)&&(s.push({element:u,datasetIndex:h,index:d}),l=l||u.inRange(e.x,e.y,r))}),i&&!l?[]:s}var d8={modes:{index(t,e,n,i){const r=Wo(e,t),s=n.axis||"x",o=n.includeInvisible||!1,l=n.intersect?s_(t,r,s,i,o):o_(t,r,s,!1,i,o),u=[];return l.length?(t.getSortedVisibleDatasetMetas().forEach(h=>{const d=l[0].index,m=h.data[d];m&&!m.skip&&u.push({element:m,datasetIndex:h.index,index:d})}),u):[]},dataset(t,e,n,i){const r=Wo(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let l=n.intersect?s_(t,r,s,i,o):o_(t,r,s,!1,i,o);if(l.length>0){const u=l[0].datasetIndex,h=t.getDatasetMeta(u).data;l=[];for(let d=0;d<h.length;++d)l.push({element:h[d],datasetIndex:u,index:d})}return l},point(t,e,n,i){const r=Wo(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return s_(t,r,s,i,o)},nearest(t,e,n,i){const r=Wo(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return o_(t,r,s,n.intersect,i,o)},x(t,e,n,i){const r=Wo(e,t);return WE(t,r,"x",n.intersect,i)},y(t,e,n,i){const r=Wo(e,t);return WE(t,r,"y",n.intersect,i)}}};const bA=["left","top","right","bottom"];function Xu(t,e){return t.filter(n=>n.pos===e)}function qE(t,e){return t.filter(n=>bA.indexOf(n.pos)===-1&&n.box.axis===e)}function Ju(t,e){return t.sort((n,i)=>{const r=e?i:n,s=e?n:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function f8(t){const e=[];let n,i,r,s,o,l;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],{position:s,options:{stack:o,stackWeight:l=1}}=r,e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:l});return e}function p8(t){const e={};for(const n of t){const{stack:i,pos:r,stackWeight:s}=n;if(!i||!bA.includes(r))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function m8(t,e){const n=p8(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,l;for(s=0,o=t.length;s<o;++s){l=t[s];const{fullSize:u}=l.box,h=n[l.stack],d=h&&l.stackWeight/h.weight;l.horizontal?(l.width=d?d*i:u&&e.availableWidth,l.height=r):(l.width=i,l.height=d?d*r:u&&e.availableHeight)}return n}function g8(t){const e=f8(t),n=Ju(e.filter(h=>h.box.fullSize),!0),i=Ju(Xu(e,"left"),!0),r=Ju(Xu(e,"right")),s=Ju(Xu(e,"top"),!0),o=Ju(Xu(e,"bottom")),l=qE(e,"x"),u=qE(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(u).concat(o).concat(l),chartArea:Xu(e,"chartArea"),vertical:i.concat(r).concat(u),horizontal:s.concat(o).concat(l)}}function GE(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function EA(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function _8(t,e,n,i){const{pos:r,box:s}=n,o=t.maxPadding;if(!Ze(r)){n.size&&(t[r]-=n.size);const m=i[n.stack]||{size:0,count:1};m.size=Math.max(m.size,n.horizontal?s.height:s.width),n.size=m.size/m.count,t[r]+=n.size}s.getPadding&&EA(o,s.getPadding());const l=Math.max(0,e.outerWidth-GE(o,t,"left","right")),u=Math.max(0,e.outerHeight-GE(o,t,"top","bottom")),h=l!==t.w,d=u!==t.h;return t.w=l,t.h=u,n.horizontal?{same:h,other:d}:{same:d,other:h}}function y8(t){const e=t.maxPadding;function n(i){const r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function v8(t,e){const n=e.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return i(t?["left","right"]:["top","bottom"])}function gc(t,e,n,i){const r=[];let s,o,l,u,h,d;for(s=0,o=t.length,h=0;s<o;++s){l=t[s],u=l.box,u.update(l.width||e.w,l.height||e.h,v8(l.horizontal,e));const{same:m,other:g}=_8(e,n,l,i);h|=m&&r.length,d=d||g,u.fullSize||r.push(l)}return h&&gc(r,e,n,i)||d}function Xd(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function KE(t,e,n,i){const r=n.padding;let{x:s,y:o}=e;for(const l of t){const u=l.box,h=i[l.stack]||{placed:0,weight:1},d=l.stackWeight/h.weight||1;if(l.horizontal){const m=e.w*d,g=h.size||u.height;gh(h.start)&&(o=h.start),u.fullSize?Xd(u,r.left,o,n.outerWidth-r.right-r.left,g):Xd(u,e.left+h.placed,o,m,g),h.start=o,h.placed+=m,o=u.bottom}else{const m=e.h*d,g=h.size||u.width;gh(h.start)&&(s=h.start),u.fullSize?Xd(u,s,r.top,g,n.outerHeight-r.bottom-r.top):Xd(u,s,e.top+h.placed,g,m),h.start=s,h.placed+=m,s=u.right}}e.x=s,e.y=o}var Pi={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=Mi(t.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(n-r.height,0),l=g8(t.boxes),u=l.vertical,h=l.horizontal;Je(t.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const d=u.reduce((x,C)=>C.box.options&&C.box.options.display===!1?x:x+1,0)||1,m=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/d,hBoxMaxHeight:o/2}),g=Object.assign({},r);EA(g,Mi(i));const _=Object.assign({maxPadding:g,w:s,h:o,x:r.left,y:r.top},r),w=m8(u.concat(h),m);gc(l.fullSize,_,m,w),gc(u,_,m,w),gc(h,_,m,w)&&gc(u,_,m,w),y8(_),KE(l.leftAndTop,_,m,w),_.x+=_.w,_.y+=_.h,KE(l.rightAndBottom,_,m,w),t.chartArea={left:_.left,top:_.top,right:_.left+_.w,bottom:_.top+_.h,height:_.h,width:_.w},Je(l.chartArea,x=>{const C=x.box;Object.assign(C,t.chartArea),C.update(_.w,_.h,{left:0,top:0,right:0,bottom:0})})}};class SA{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,r){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(e){return!0}updateConfig(e){}}class w8 extends SA{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Ff="$chartjs",x8={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ZE=t=>t===null||t==="";function b8(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[Ff]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",ZE(r)){const s=ME(t,"width");s!==void 0&&(t.width=s)}if(ZE(i))if(t.style.height==="")t.height=t.width/(e||2);else{const s=ME(t,"height");s!==void 0&&(t.height=s)}return t}const TA=OB?{passive:!0}:!1;function E8(t,e,n){t&&t.addEventListener(e,n,TA)}function S8(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,TA)}function T8(t,e){const n=x8[t.type]||t.type,{x:i,y:r}=Wo(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:r!==void 0?r:null}}function Wp(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function k8(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const l of s)o=o||Wp(l.addedNodes,i),o=o&&!Wp(l.removedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function P8(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const l of s)o=o||Wp(l.removedNodes,i),o=o&&!Wp(l.addedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const yh=new Map;let YE=0;function kA(){const t=window.devicePixelRatio;t!==YE&&(YE=t,yh.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function C8(t,e){yh.size||window.addEventListener("resize",kA),yh.set(t,e)}function I8(t){yh.delete(t),yh.size||window.removeEventListener("resize",kA)}function A8(t,e,n){const i=t.canvas,r=i&&Aw(i);if(!r)return;const s=sA((l,u)=>{const h=r.clientWidth;n(l,u),h<r.clientWidth&&n()},window),o=new ResizeObserver(l=>{const u=l[0],h=u.contentRect.width,d=u.contentRect.height;h===0&&d===0||s(h,d)});return o.observe(r),C8(t,s),o}function a_(t,e,n){n&&n.disconnect(),e==="resize"&&I8(t)}function R8(t,e,n){const i=t.canvas,r=sA(s=>{t.ctx!==null&&n(T8(s,t))},t);return E8(i,e,r),r}class L8 extends SA{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(b8(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[Ff])return!1;const i=n[Ff].initial;["height","width"].forEach(s=>{const o=i[s];ot(o)?n.removeAttribute(s):n.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{n.style[s]=r[s]}),n.width=n.width,delete n[Ff],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:k8,detach:P8,resize:A8}[n]||R8;r[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),r=i[n];if(!r)return;({attach:a_,detach:a_,resize:a_}[n]||S8)(e,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,r){return NB(e,n,i,r)}isAttached(e){const n=e&&Aw(e);return!!(n&&n.isConnected)}}function N8(t){return!Iw()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?w8:L8}var uf;let lu=(uf=class{constructor(){qe(this,"x");qe(this,"y");qe(this,"active",!1);qe(this,"options");qe(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return Up(this.x)&&Up(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}},qe(uf,"defaults",{}),qe(uf,"defaultRoutes"),uf);function O8(t,e){const n=t.options.ticks,i=M8(t),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?F8(e):[],o=s.length,l=s[0],u=s[o-1],h=[];if(o>r)return j8(e,h,s,o/r),h;const d=D8(s,e,r);if(o>0){let m,g;const _=o>1?Math.round((u-l)/(o-1)):null;for(Jd(e,h,d,ot(_)?0:l-_,l),m=0,g=o-1;m<g;m++)Jd(e,h,d,s[m],s[m+1]);return Jd(e,h,d,u,ot(_)?e.length:u+_),h}return Jd(e,h,d),h}function M8(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}function D8(t,e,n){const i=V8(t),r=e.length/n;if(!i)return Math.max(r,1);const s=B9(i);for(let o=0,l=s.length-1;o<l;o++){const u=s[o];if(u>r)return u}return Math.max(r,1)}function F8(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function j8(t,e,n,i){let r=0,s=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===s&&(e.push(t[o]),r++,s=n[r*i])}function Jd(t,e,n,i,r){const s=et(i,0),o=Math.min(et(r,t.length),t.length);let l=0,u,h,d;for(n=Math.ceil(n),r&&(u=r-i,n=u/Math.floor(u/n)),d=s;d<0;)l++,d=Math.round(s+l*n);for(h=Math.max(s,0);h<o;h++)h===d&&(e.push(t[h]),l++,d=Math.round(s+l*n))}function V8(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const z8=t=>t==="left"?"right":t==="right"?"left":t,QE=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,XE=(t,e)=>Math.min(e||t,t);function JE(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function B8(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,o=t._endPixel,l=1e-6;let u=t.getPixelForTick(r),h;if(!(n&&(i===1?h=Math.max(u-s,o-u):e===0?h=(t.getPixelForTick(1)-u)/2:h=(u-t.getPixelForTick(r-1))/2,u+=r<e?h:-h,u<s-l||u>o+l)))return u}function U8(t,e){Je(t,n=>{const i=n.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete n.data[i[s]];i.splice(0,r)}})}function ec(t){return t.drawTicks?t.tickLength:0}function eS(t,e){if(!t.display)return 0;const n=wn(t.font,e),i=Mi(t.padding);return(Wt(t.text)?t.text.length:1)*n.lineHeight+i.height}function $8(t,e){return au(t,{scale:e,type:"scale"})}function H8(t,e,n){return au(t,{tick:n,index:e,type:"tick"})}function W8(t,e,n){let i=Ew(t);return(n&&e!=="right"||!n&&e==="right")&&(i=z8(i)),i}function q8(t,e,n,i){const{top:r,left:s,bottom:o,right:l,chart:u}=t,{chartArea:h,scales:d}=u;let m=0,g,_,w;const x=o-r,C=l-s;if(t.isHorizontal()){if(_=mn(i,s,l),Ze(n)){const E=Object.keys(n)[0],k=n[E];w=d[E].getPixelForValue(k)+x-e}else n==="center"?w=(h.bottom+h.top)/2+x-e:w=QE(t,n,e);g=l-s}else{if(Ze(n)){const E=Object.keys(n)[0],k=n[E];_=d[E].getPixelForValue(k)-C+e}else n==="center"?_=(h.left+h.right)/2-C+e:_=QE(t,n,e);w=mn(i,o,r),m=n==="left"?-Qi:Qi}return{titleX:_,titleY:w,maxWidth:g,rotation:m}}class uu extends lu{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return e=fr(e,Number.POSITIVE_INFINITY),n=fr(n,Number.NEGATIVE_INFINITY),i=fr(i,Number.POSITIVE_INFINITY),r=fr(r,Number.NEGATIVE_INFINITY),{min:fr(e,i),max:fr(n,r),minDefined:Oi(e),maxDefined:Oi(n)}}getMinMax(e){let{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:n,max:i};const l=this.getMatchingVisibleMetas();for(let u=0,h=l.length;u<h;++u)o=l[u].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),s||(i=Math.max(i,o.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:fr(n,fr(i,n)),max:fr(i,fr(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ft(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=yB(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const u=l<this.ticks.length;this._convertTicksToLabels(u?JE(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=O8(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ft(this.options.afterUpdate,[this])}beforeSetDimensions(){ft(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ft(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ft(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ft(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=ft(n.callback,[s.value,i,e],this)}afterTickToLabelConversion(){ft(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ft(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=XE(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,s=n.maxRotation;let o=r,l,u,h;if(!this._isVisible()||!n.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const d=this._getLabelSizes(),m=d.widest.width,g=d.highest.height,_=Xi(this.chart.width-m,0,this.maxWidth);l=e.offset?this.maxWidth/i:_/(i-1),m+6>l&&(l=_/(i-(e.offset?.5:1)),u=this.maxHeight-ec(e.grid)-n.padding-eS(e.title,this.chart.options.font),h=Math.sqrt(m*m+g*g),o=W9(Math.min(Math.asin(Xi((d.highest.height+6)/l,-1,1)),Math.asin(Xi(u/h,-1,1))-Math.asin(Xi(g/h,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){ft(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ft(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const u=eS(r,n.options.font);if(l?(e.width=this.maxWidth,e.height=ec(s)+u):(e.height=this.maxHeight,e.width=ec(s)+u),i.display&&this.ticks.length){const{first:h,last:d,widest:m,highest:g}=this._getLabelSizes(),_=i.padding*2,w=Xo(this.labelRotation),x=Math.cos(w),C=Math.sin(w);if(l){const E=i.mirror?0:C*m.width+x*g.height;e.height=Math.min(this.maxHeight,e.height+E+_)}else{const E=i.mirror?0:x*m.width+C*g.height;e.width=Math.min(this.maxWidth,e.width+E+_)}this._calculatePadding(h,d,C,x)}}this._handleMargins(),l?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,r){const{ticks:{align:s,padding:o},position:l}=this.options,u=this.labelRotation!==0,h=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,m=this.right-this.getPixelForTick(this.ticks.length-1);let g=0,_=0;u?h?(g=r*e.width,_=i*n.height):(g=i*e.height,_=r*n.width):s==="start"?_=n.width:s==="end"?g=e.width:s!=="inner"&&(g=e.width/2,_=n.width/2),this.paddingLeft=Math.max((g-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((_-m+o)*this.width/(this.width-m),0)}else{let d=n.height/2,m=e.height/2;s==="start"?(d=0,m=e.height):s==="end"&&(d=n.height,m=0),this.paddingTop=d+o,this.paddingBottom=m+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ft(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)ot(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=JE(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:r,_longestTextCache:s}=this,o=[],l=[],u=Math.floor(n/XE(n,i));let h=0,d=0,m,g,_,w,x,C,E,k,P,j,W;for(m=0;m<n;m+=u){if(w=e[m].label,x=this._resolveTickFontOptions(m),r.font=C=x.string,E=s[C]=s[C]||{data:{},gc:[]},k=x.lineHeight,P=j=0,!ot(w)&&!Wt(w))P=IE(r,E.data,E.gc,P,w),j=k;else if(Wt(w))for(g=0,_=w.length;g<_;++g)W=w[g],!ot(W)&&!Wt(W)&&(P=IE(r,E.data,E.gc,P,W),j+=k);o.push(P),l.push(j),h=Math.max(P,h),d=Math.max(j,d)}U8(s,n);const z=o.indexOf(h),R=l.indexOf(d),I=N=>({width:o[N]||0,height:l[N]||0});return{first:I(0),last:I(n-1),widest:I(z),highest:I(R),widths:o,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return Z9(this._alignToPixels?zo(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=H8(this.getContext(),e,i))}return this.$context||(this.$context=$8(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Xo(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,l=s?s.widest.width+o:0,u=s?s.highest.height+o:0;return this.isHorizontal()?u*i>l*r?l/i:u/r:u*r<l*i?u/i:l/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:l}=r,u=s.offset,h=this.isHorizontal(),m=this.ticks.length+(u?1:0),g=ec(s),_=[],w=l.setContext(this.getContext()),x=w.display?w.width:0,C=x/2,E=function(ae){return zo(i,ae,x)};let k,P,j,W,z,R,I,N,F,D,B,V;if(o==="top")k=E(this.bottom),R=this.bottom-g,N=k-C,D=E(e.top)+C,V=e.bottom;else if(o==="bottom")k=E(this.top),D=e.top,V=E(e.bottom)-C,R=k+C,N=this.top+g;else if(o==="left")k=E(this.right),z=this.right-g,I=k-C,F=E(e.left)+C,B=e.right;else if(o==="right")k=E(this.left),F=e.left,B=E(e.right)-C,z=k+C,I=this.left+g;else if(n==="x"){if(o==="center")k=E((e.top+e.bottom)/2+.5);else if(Ze(o)){const ae=Object.keys(o)[0],ue=o[ae];k=E(this.chart.scales[ae].getPixelForValue(ue))}D=e.top,V=e.bottom,R=k+C,N=R+g}else if(n==="y"){if(o==="center")k=E((e.left+e.right)/2);else if(Ze(o)){const ae=Object.keys(o)[0],ue=o[ae];k=E(this.chart.scales[ae].getPixelForValue(ue))}z=k-C,I=z-g,F=e.left,B=e.right}const ee=et(r.ticks.maxTicksLimit,m),te=Math.max(1,Math.ceil(m/ee));for(P=0;P<m;P+=te){const ae=this.getContext(P),ue=s.setContext(ae),K=l.setContext(ae),he=ue.lineWidth,M=ue.color,fe=K.dash||[],ce=K.dashOffset,U=ue.tickWidth,be=ue.tickColor,we=ue.tickBorderDash||[],pe=ue.tickBorderDashOffset;j=B8(this,P,u),j!==void 0&&(W=zo(i,j,he),h?z=I=F=B=W:R=N=D=V=W,_.push({tx1:z,ty1:R,tx2:I,ty2:N,x1:F,y1:D,x2:B,y2:V,width:he,color:M,borderDash:fe,borderDashOffset:ce,tickWidth:U,tickColor:be,tickBorderDash:we,tickBorderDashOffset:pe}))}return this._ticksLength=m,this._borderValue=k,_}_computeLabelItems(e){const n=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),l=this.ticks,{align:u,crossAlign:h,padding:d,mirror:m}=s,g=ec(i.grid),_=g+d,w=m?-d:_,x=-Xo(this.labelRotation),C=[];let E,k,P,j,W,z,R,I,N,F,D,B,V="middle";if(r==="top")z=this.bottom-w,R=this._getXAxisLabelAlignment();else if(r==="bottom")z=this.top+w,R=this._getXAxisLabelAlignment();else if(r==="left"){const te=this._getYAxisLabelAlignment(g);R=te.textAlign,W=te.x}else if(r==="right"){const te=this._getYAxisLabelAlignment(g);R=te.textAlign,W=te.x}else if(n==="x"){if(r==="center")z=(e.top+e.bottom)/2+_;else if(Ze(r)){const te=Object.keys(r)[0],ae=r[te];z=this.chart.scales[te].getPixelForValue(ae)+_}R=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")W=(e.left+e.right)/2-_;else if(Ze(r)){const te=Object.keys(r)[0],ae=r[te];W=this.chart.scales[te].getPixelForValue(ae)}R=this._getYAxisLabelAlignment(g).textAlign}n==="y"&&(u==="start"?V="top":u==="end"&&(V="bottom"));const ee=this._getLabelSizes();for(E=0,k=l.length;E<k;++E){P=l[E],j=P.label;const te=s.setContext(this.getContext(E));I=this.getPixelForTick(E)+s.labelOffset,N=this._resolveTickFontOptions(E),F=N.lineHeight,D=Wt(j)?j.length:1;const ae=D/2,ue=te.color,K=te.textStrokeColor,he=te.textStrokeWidth;let M=R;o?(W=I,R==="inner"&&(E===k-1?M=this.options.reverse?"left":"right":E===0?M=this.options.reverse?"right":"left":M="center"),r==="top"?h==="near"||x!==0?B=-D*F+F/2:h==="center"?B=-ee.highest.height/2-ae*F+F:B=-ee.highest.height+F/2:h==="near"||x!==0?B=F/2:h==="center"?B=ee.highest.height/2-ae*F:B=ee.highest.height-D*F,m&&(B*=-1),x!==0&&!te.showLabelBackdrop&&(W+=F/2*Math.sin(x))):(z=I,B=(1-D)*F/2);let fe;if(te.showLabelBackdrop){const ce=Mi(te.backdropPadding),U=ee.heights[E],be=ee.widths[E];let we=B-ce.top,pe=0-ce.left;switch(V){case"middle":we-=U/2;break;case"bottom":we-=U;break}switch(R){case"center":pe-=be/2;break;case"right":pe-=be;break;case"inner":E===k-1?pe-=be:E>0&&(pe-=be/2);break}fe={left:pe,top:we,width:be+ce.width,height:U+ce.height,color:te.backdropColor}}C.push({label:j,font:N,textOffset:B,options:{rotation:x,color:ue,strokeColor:K,strokeWidth:he,textAlign:M,textBaseline:V,translation:[W,z],backdrop:fe}})}return C}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Xo(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),l=e+s,u=o.widest.width;let h,d;return n==="left"?r?(d=this.right+s,i==="near"?h="left":i==="center"?(h="center",d+=u/2):(h="right",d+=u)):(d=this.right-l,i==="near"?h="right":i==="center"?(h="center",d-=u/2):(h="left",d=this.left)):n==="right"?r?(d=this.left+s,i==="near"?h="right":i==="center"?(h="center",d-=u/2):(h="left",d-=u)):(d=this.left+l,i==="near"?h="left":i==="center"?(h="center",d+=u/2):(h="right",d=this.right)):h="right",{textAlign:h,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:r,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const l=(u,h,d)=>{!d.width||!d.color||(i.save(),i.lineWidth=d.width,i.strokeStyle=d.color,i.setLineDash(d.borderDash||[]),i.lineDashOffset=d.borderDashOffset,i.beginPath(),i.moveTo(u.x,u.y),i.lineTo(h.x,h.y),i.stroke(),i.restore())};if(n.display)for(s=0,o=r.length;s<o;++s){const u=r[s];n.drawOnChartArea&&l({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},u),n.drawTicks&&l({x:u.tx1,y:u.ty1},{x:u.tx2,y:u.ty2},{color:u.tickColor,width:u.tickWidth,borderDash:u.tickBorderDash,borderDashOffset:u.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const l=r.setContext(this.getContext(0)).lineWidth,u=this._borderValue;let h,d,m,g;this.isHorizontal()?(h=zo(e,this.left,o)-o/2,d=zo(e,this.right,l)+l/2,m=g=u):(m=zo(e,this.top,o)-o/2,g=zo(e,this.bottom,l)+l/2,h=d=u),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(h,m),n.lineTo(d,g),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&Sw(i,r);const s=this.getLabelItems(e);for(const o of s){const l=o.options,u=o.font,h=o.label,d=o.textOffset;_h(i,h,0,d,u,l)}r&&Tw(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const s=wn(i.font),o=Mi(i.padding),l=i.align;let u=s.lineHeight/2;n==="bottom"||n==="center"||Ze(n)?(u+=o.bottom,Wt(i.text)&&(u+=s.lineHeight*(i.text.length-1))):u+=o.top;const{titleX:h,titleY:d,maxWidth:m,rotation:g}=q8(this,u,n,l);_h(e,i.text,0,0,s,{color:i.color,maxWidth:m,rotation:g,textAlign:W8(l,n,r),textBaseline:"middle",translation:[h,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=et(e.grid&&e.grid.z,-1),r=et(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==uu.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=n.length;s<o;++s){const l=n[s];l[i]===this.id&&(!e||l.type===e)&&r.push(l)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return wn(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class ef{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;Z8(n)&&(i=this.register(n));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,G8(e,o,i),this.override&&Mt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,r=this.scope;i in n&&delete n[i],r&&i in Mt[r]&&(delete Mt[r][i],this.override&&delete ma[i])}}function G8(t,e,n){const i=mh(Object.create(null),[n?Mt.get(n):{},Mt.get(e),t.defaults]);Mt.set(e,i),t.defaultRoutes&&K8(e,t.defaultRoutes),t.descriptors&&Mt.describe(e,t.descriptors)}function K8(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),o=e[n].split("."),l=o.pop(),u=o.join(".");Mt.route(s,r,u,l)})}function Z8(t){return"id"in t&&"defaults"in t}class Y8{constructor(){this.controllers=new ef(Oc,"datasets",!0),this.elements=new ef(lu,"elements"),this.plugins=new ef(Object,"plugins"),this.scales=new ef(uu,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):Je(r,o=>{const l=i||this._getRegistryForType(o);this._exec(e,l,o)})})}_exec(e,n,i){const r=xw(e);ft(i["before"+r],[],i),n[e](i),ft(i["after"+r],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var gr=new Y8;class Q8{constructor(){this._init=[]}notify(e,n,i,r){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,n,i);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,i,r){r=r||{};for(const s of e){const o=s.plugin,l=o[i],u=[n,r,s.options];if(ft(l,u,o)===!1&&r.cancelable)return!1}return!0}invalidate(){ot(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,r=et(i.options&&i.options.plugins,{}),s=X8(i);return r===!1&&!n?[]:eU(e,s,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(l=>!o.some(u=>l.plugin.id===u.plugin.id));this._notify(r(n,i),e,"stop"),this._notify(r(i,n),e,"start")}}function X8(t){const e={},n=[],i=Object.keys(gr.plugins.items);for(let s=0;s<i.length;s++)n.push(gr.getPlugin(i[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function J8(t,e){return!e&&t===!1?null:t===!0?{}:t}function eU(t,{plugins:e,localIds:n},i,r){const s=[],o=t.getContext();for(const l of e){const u=l.id,h=J8(i[u],r);h!==null&&s.push({plugin:l,options:tU(t.config,{plugin:l,local:n[u]},h,o)})}return s}function tU(t,{plugin:e,local:n},i,r){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(i,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function tv(t,e){const n=Mt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function nU(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function iU(t,e){return t===e?"_index_":"_value_"}function tS(t){if(t==="x"||t==="y"||t==="r")return t}function rU(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function nv(t,...e){if(tS(t))return t;for(const n of e){const i=n.axis||rU(n.position)||t.length>1&&tS(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function nS(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function sU(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return nS(t,"x",n[0])||nS(t,"y",n[0])}return{}}function oU(t,e){const n=ma[t.type]||{scales:{}},i=e.scales||{},r=tv(t.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{const l=i[o];if(!Ze(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const u=nv(o,l,sU(o,t),Mt.scales[l.type]),h=iU(u,r),d=n.scales||{};s[o]=Rc(Object.create(null),[{axis:u},l,d[u],d[h]])}),t.data.datasets.forEach(o=>{const l=o.type||t.type,u=o.indexAxis||tv(l,e),d=(ma[l]||{}).scales||{};Object.keys(d).forEach(m=>{const g=nU(m,u),_=o[g+"AxisID"]||g;s[_]=s[_]||Object.create(null),Rc(s[_],[{axis:g},i[_],d[m]])})}),Object.keys(s).forEach(o=>{const l=s[o];Rc(l,[Mt.scales[l.type],Mt.scale])}),s}function PA(t){const e=t.options||(t.options={});e.plugins=et(e.plugins,{}),e.scales=oU(t,e)}function CA(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function aU(t){return t=t||{},t.data=CA(t.data),PA(t),t}const iS=new Map,IA=new Set;function tf(t,e){let n=iS.get(t);return n||(n=e(),iS.set(t,n),IA.add(n)),n}const tc=(t,e,n)=>{const i=Gl(e,n);i!==void 0&&t.add(i)};class lU{constructor(e){this._config=aU(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=CA(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),PA(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return tf(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return tf(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return tf(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return tf(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let r=i.get(e);return(!r||n)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,n,i){const{options:r,type:s}=this,o=this._cachedScopes(e,i),l=o.get(n);if(l)return l;const u=new Set;n.forEach(d=>{e&&(u.add(e),d.forEach(m=>tc(u,e,m))),d.forEach(m=>tc(u,r,m)),d.forEach(m=>tc(u,ma[s]||{},m)),d.forEach(m=>tc(u,Mt,m)),d.forEach(m=>tc(u,ev,m))});const h=Array.from(u);return h.length===0&&h.push(Object.create(null)),IA.has(n)&&o.set(n,h),h}chartOptionScopes(){const{options:e,type:n}=this;return[e,ma[n]||{},Mt.datasets[n]||{},{type:n},Mt,ev]}resolveNamedOptions(e,n,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:l}=rS(this._resolverCache,e,r);let u=o;if(cU(o,n)){s.$shared=!1,i=vo(i)?i():i;const h=this.createResolver(e,i,l);u=Kl(o,i,h)}for(const h of n)s[h]=u[h];return s}createResolver(e,n,i=[""],r){const{resolver:s}=rS(this._resolverCache,e,i);return Ze(n)?Kl(s,n,void 0,r):s}}function rS(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);return s||(s={resolver:kw(e,n),subPrefixes:n.filter(l=>!l.toLowerCase().includes("hover"))},i.set(r,s)),s}const uU=t=>Ze(t)&&Object.getOwnPropertyNames(t).some(e=>vo(t[e]));function cU(t,e){const{isScriptable:n,isIndexable:i}=fA(t);for(const r of e){const s=n(r),o=i(r),l=(o||s)&&t[r];if(s&&(vo(l)||uU(l))||o&&Wt(l))return!0}return!1}var hU="4.4.8";const dU=["top","bottom","left","right","chartArea"];function sS(t,e){return t==="top"||t==="bottom"||dU.indexOf(t)===-1&&e==="x"}function oS(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function aS(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),ft(n&&n.onComplete,[t],e)}function fU(t){const e=t.chart,n=e.options.animation;ft(n&&n.onProgress,[t],e)}function AA(t){return Iw()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const jf={},lS=t=>{const e=AA(t);return Object.values(jf).filter(n=>n.canvas===e).pop()};function pU(t,e,n){const i=Object.keys(t);for(const r of i){const s=+r;if(s>=e){const o=t[r];delete t[r],(n>0||s>e)&&(t[s+n]=o)}}}function mU(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}function nf(t,e,n){return t.options.clip?t[n]:e[n]}function gU(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:nf(n,e,"left"),right:nf(n,e,"right"),top:nf(i,e,"top"),bottom:nf(i,e,"bottom")}:e}var Ms;let Zm=(Ms=class{static register(...e){gr.add(...e),uS()}static unregister(...e){gr.remove(...e),uS()}constructor(e,n){const i=this.config=new lU(n),r=AA(e),s=lS(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||N8(r)),this.platform.updateConfig(i);const l=this.platform.acquireContext(r,o.aspectRatio),u=l&&l.canvas,h=u&&u.height,d=u&&u.width;if(this.id=N9(),this.ctx=l,this.canvas=u,this.width=d,this.height=h,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Q8,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=J9(m=>this.update(m),o.resizeDelay||0),this._dataChanges=[],jf[this.id]=this,!l||!u){console.error("Failed to create chart: can't acquire context from the given item");return}Kr.listen(this,"complete",aS),Kr.listen(this,"progress",fU),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:r,_aspectRatio:s}=this;return ot(e)?n&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return gr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():OE(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return AE(this.canvas,this.ctx),this}stop(){return Kr.stop(this),this}resize(e,n){Kr.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,s),l=i.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,OE(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),ft(i.onResize,[this,o],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Je(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,r=Object.keys(i).reduce((o,l)=>(o[l]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const l=n[o],u=nv(o,l),h=u==="r",d=u==="x";return{options:l,dposition:h?"chartArea":d?"bottom":"left",dtype:h?"radialLinear":d?"category":"linear"}}))),Je(s,o=>{const l=o.options,u=l.id,h=nv(u,l),d=et(l.type,o.dtype);(l.position===void 0||sS(l.position,h)!==sS(o.dposition))&&(l.position=o.dposition),r[u]=!0;let m=null;if(u in i&&i[u].type===d)m=i[u];else{const g=gr.getScale(d);m=new g({id:u,type:d,ctx:this.ctx,chart:this}),i[m.id]=m}m.init(l,e)}),Je(r,(o,l)=>{o||delete i[l]}),Je(i,o=>{Pi.configure(this,o,o.options),Pi.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(oS("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,r)=>{n.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const s=n[i];let o=this.getDatasetMeta(i);const l=s.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=l,o.indexAxis=s.indexAxis||tv(l,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const u=gr.getController(l),{datasetElementType:h,dataElementType:d}=Mt.datasets[l];Object.assign(u,{dataElementType:gr.getElement(d),datasetElementType:h&&gr.getElement(h)}),o.controller=new u(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Je(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let h=0,d=this.data.datasets.length;h<d;h++){const{controller:m}=this.getDatasetMeta(h),g=!r&&s.indexOf(m)===-1;m.buildOrUpdateElements(g),o=Math.max(+m.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||Je(s,h=>{h.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(oS("z","_idx"));const{_active:l,_lastEvent:u}=this;u?this._eventHandler(u,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Je(this.scales,e=>{Pi.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!wE(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of n){const o=i==="_removeElements"?-s:s;pU(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,l)=>l+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<n;s++)if(!wE(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Pi.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],Je(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,vo(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Kr.has(this)?this.attached&&!Kr.running(this)&&Kr.start(this):(this.draw(),aS({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let r,s;for(r=0,s=n.length;r<s;++r){const o=n[r];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i=e._clip,r=!i.disabled,s=gU(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(r&&Sw(n,{left:i.left===!1?0:s.left-i.left,right:i.right===!1?this.width:s.right+i.right,top:i.top===!1?0:s.top-i.top,bottom:i.bottom===!1?this.height:s.bottom+i.bottom}),e.controller.draw(),r&&Tw(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return cA(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,r){const s=d8.modes[n];return typeof s=="function"?s(this,e,i,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=au(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);gh(n)?(s.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(l=>l.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Kr.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),AE(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete jf[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},r=(s,o,l)=>{s.offsetX=o,s.offsetY=l,this._eventHandler(s)};Je(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(u,h)=>{n.addEventListener(this,u,h),e[u]=h},r=(u,h)=>{e[u]&&(n.removeEventListener(this,u,h),delete e[u])},s=(u,h)=>{this.canvas&&this.resize(u,h)};let o;const l=()=>{r("attach",l),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",l)},n.isAttached(this.canvas)?l():o()}unbindEvents(){Je(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Je(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const r=i?"set":"remove";let s,o,l,u;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),l=0,u=e.length;l<u;++l){o=e[l];const h=o&&this.getDatasetMeta(o.datasetIndex).controller;h&&h[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const l=this.getDatasetMeta(s);if(!l)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:l.data[o],index:o}});!Vp(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const r=this.options.hover,s=(u,h)=>u.filter(d=>!h.some(m=>d.datasetIndex===m.datasetIndex&&d.index===m.index)),o=s(n,e),l=i?e:s(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:r=[],options:s}=this,o=n,l=this._getActiveElements(e,r,i,o),u=V9(e),h=mU(e,this._lastEvent,i,u);i&&(this._lastEvent=null,ft(s.onHover,[e,l,this],this),u&&ft(s.onClick,[e,l,this],this));const d=!Vp(l,r);return(d||n)&&(this._active=l,this._updateHoverStyles(l,r,n)),this._lastEvent=h,d}_getActiveElements(e,n,i,r){if(e.type==="mouseout")return[];if(!i)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}},qe(Ms,"defaults",Mt),qe(Ms,"instances",jf),qe(Ms,"overrides",ma),qe(Ms,"registry",gr),qe(Ms,"version",hU),qe(Ms,"getChart",lS),Ms);function uS(){return Je(Zm.instances,t=>t._plugins.invalidate())}function RA(t,e){const{x:n,y:i,base:r,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let l,u,h,d,m;return t.horizontal?(m=o/2,l=Math.min(n,r),u=Math.max(n,r),h=i-m,d=i+m):(m=s/2,l=n-m,u=n+m,h=Math.min(i,r),d=Math.max(i,r)),{left:l,top:h,right:u,bottom:d}}function Zs(t,e,n,i){return t?0:Xi(e,n,i)}function _U(t,e,n){const i=t.options.borderWidth,r=t.borderSkipped,s=dA(i);return{t:Zs(r.top,s.top,0,n),r:Zs(r.right,s.right,0,e),b:Zs(r.bottom,s.bottom,0,n),l:Zs(r.left,s.left,0,e)}}function yU(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,s=Tl(r),o=Math.min(e,n),l=t.borderSkipped,u=i||Ze(r);return{topLeft:Zs(!u||l.top||l.left,s.topLeft,0,o),topRight:Zs(!u||l.top||l.right,s.topRight,0,o),bottomLeft:Zs(!u||l.bottom||l.left,s.bottomLeft,0,o),bottomRight:Zs(!u||l.bottom||l.right,s.bottomRight,0,o)}}function vU(t){const e=RA(t),n=e.right-e.left,i=e.bottom-e.top,r=_U(t,n/2,i/2),s=yU(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function l_(t,e,n,i){const r=e===null,s=n===null,l=t&&!(r&&s)&&RA(t,i);return l&&(r||fl(e,l.left,l.right))&&(s||fl(n,l.top,l.bottom))}function wU(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function xU(t,e){t.rect(e.x,e.y,e.w,e.h)}function u_(t,e,n={}){const i=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-i,o=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+i,y:t.y+r,w:t.w+s,h:t.h+o,radius:t.radius}}class Vf extends lu{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=vU(this),l=wU(o.radius)?$p:xU;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),l(e,u_(o,n,s)),e.clip(),l(e,u_(s,-n,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),l(e,u_(s,n)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,n,i){return l_(this,e,n,i)}inXRange(e,n){return l_(this,e,null,n)}inYRange(e,n){return l_(this,null,e,n)}getCenterPoint(e){const{x:n,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+r)/2:n,y:s?i:(i+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}qe(Vf,"id","bar"),qe(Vf,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),qe(Vf,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const cS=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},bU=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class hS extends lu{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=ft(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=wn(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:u}=cS(i,s);let h,d;n.font=r.string,this.isHorizontal()?(h=this.maxWidth,d=this._fitRows(o,s,l,u)+10):(d=this.maxHeight,h=this._fitCols(o,r,l,u)+10),this.width=Math.min(h,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:l}}}=this,u=this.legendHitBoxes=[],h=this.lineWidths=[0],d=r+l;let m=e;s.textAlign="left",s.textBaseline="middle";let g=-1,_=-d;return this.legendItems.forEach((w,x)=>{const C=i+n/2+s.measureText(w.text).width;(x===0||h[h.length-1]+C+2*l>o)&&(m+=d,h[h.length-(x>0?0:1)]=0,_+=d,g++),u[x]={left:0,top:_,row:g,width:C,height:r},h[h.length-1]+=C+l}),m}_fitCols(e,n,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:l}}}=this,u=this.legendHitBoxes=[],h=this.columnSizes=[],d=o-e;let m=l,g=0,_=0,w=0,x=0;return this.legendItems.forEach((C,E)=>{const{itemWidth:k,itemHeight:P}=EU(i,n,s,C,r);E>0&&_+P+2*l>d&&(m+=g+l,h.push({width:g,height:_}),w+=g+l,x++,g=_=0),u[E]={left:w,top:_,col:x,width:k,height:P},g=Math.max(g,k),_+=P+l}),m+=g,h.push({width:g,height:_}),m}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:s}}=this,o=kl(s,this.left,this.width);if(this.isHorizontal()){let l=0,u=mn(i,this.left+r,this.right-this.lineWidths[l]);for(const h of n)l!==h.row&&(l=h.row,u=mn(i,this.left+r,this.right-this.lineWidths[l])),h.top+=this.top+e+r,h.left=o.leftForLtr(o.x(u),h.width),u+=h.width+r}else{let l=0,u=mn(i,this.top+e+r,this.bottom-this.columnSizes[l].height);for(const h of n)h.col!==l&&(l=h.col,u=mn(i,this.top+e+r,this.bottom-this.columnSizes[l].height)),h.top=u,h.left+=this.left+r,h.left=o.leftForLtr(o.x(h.left),h.width),u+=h.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Sw(e,this),this._draw(),Tw(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,l=Mt.color,u=kl(e.rtl,this.left,this.width),h=wn(o.font),{padding:d}=o,m=h.size,g=m/2;let _;this.drawTitle(),r.textAlign=u.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=h.string;const{boxWidth:w,boxHeight:x,itemHeight:C}=cS(o,m),E=function(z,R,I){if(isNaN(w)||w<=0||isNaN(x)||x<0)return;r.save();const N=et(I.lineWidth,1);if(r.fillStyle=et(I.fillStyle,l),r.lineCap=et(I.lineCap,"butt"),r.lineDashOffset=et(I.lineDashOffset,0),r.lineJoin=et(I.lineJoin,"miter"),r.lineWidth=N,r.strokeStyle=et(I.strokeStyle,l),r.setLineDash(et(I.lineDash,[])),o.usePointStyle){const F={radius:x*Math.SQRT2/2,pointStyle:I.pointStyle,rotation:I.rotation,borderWidth:N},D=u.xPlus(z,w/2),B=R+g;uA(r,F,D,B,o.pointStyleWidth&&w)}else{const F=R+Math.max((m-x)/2,0),D=u.leftForLtr(z,w),B=Tl(I.borderRadius);r.beginPath(),Object.values(B).some(V=>V!==0)?$p(r,{x:D,y:F,w,h:x,radius:B}):r.rect(D,F,w,x),r.fill(),N!==0&&r.stroke()}r.restore()},k=function(z,R,I){_h(r,I.text,z,R+C/2,h,{strikethrough:I.hidden,textAlign:u.textAlign(I.textAlign)})},P=this.isHorizontal(),j=this._computeTitleHeight();P?_={x:mn(s,this.left+d,this.right-i[0]),y:this.top+d+j,line:0}:_={x:this.left+d,y:mn(s,this.top+j+d,this.bottom-n[0].height),line:0},_A(this.ctx,e.textDirection);const W=C+d;this.legendItems.forEach((z,R)=>{r.strokeStyle=z.fontColor,r.fillStyle=z.fontColor;const I=r.measureText(z.text).width,N=u.textAlign(z.textAlign||(z.textAlign=o.textAlign)),F=w+g+I;let D=_.x,B=_.y;u.setWidth(this.width),P?R>0&&D+F+d>this.right&&(B=_.y+=W,_.line++,D=_.x=mn(s,this.left+d,this.right-i[_.line])):R>0&&B+W>this.bottom&&(D=_.x=D+n[_.line].width+d,_.line++,B=_.y=mn(s,this.top+j+d,this.bottom-n[_.line].height));const V=u.x(D);if(E(V,B,z),D=eB(N,D+w+g,P?D+F:this.right,e.rtl),k(u.x(D),B,z),P)_.x+=F+d;else if(typeof z.text!="string"){const ee=h.lineHeight;_.y+=LA(z,ee)+d}else _.y+=W}),yA(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=wn(n.font),r=Mi(n.padding);if(!n.display)return;const s=kl(e.rtl,this.left,this.width),o=this.ctx,l=n.position,u=i.size/2,h=r.top+u;let d,m=this.left,g=this.width;if(this.isHorizontal())g=Math.max(...this.lineWidths),d=this.top+h,m=mn(e.align,m,this.right-g);else{const w=this.columnSizes.reduce((x,C)=>Math.max(x,C.height),0);d=h+mn(e.align,this.top,this.bottom-w-e.labels.padding-this._computeTitleHeight())}const _=mn(l,m,m+g);o.textAlign=s.textAlign(Ew(l)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,_h(o,n.text,_,d,i)}_computeTitleHeight(){const e=this.options.title,n=wn(e.font),i=Mi(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,r,s;if(fl(e,this.left,this.right)&&fl(n,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],fl(e,r.left,r.left+r.width)&&fl(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!kU(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=bU(r,i);r&&!s&&ft(n.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&ft(n.onHover,[e,i,this],this)}else i&&ft(n.onClick,[e,i,this],this)}}function EU(t,e,n,i,r){const s=SU(i,t,e,n),o=TU(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function SU(t,e,n,i){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+i.measureText(r).width}function TU(t,e,n){let i=t;return typeof e.text!="string"&&(i=LA(e,n)),i}function LA(t,e){const n=t.text?t.text.length:0;return e*n}function kU(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var PU={id:"legend",_element:hS,start(t,e,n){const i=t.legend=new hS({ctx:t.ctx,options:n,chart:t});Pi.configure(t,i,n),Pi.addBox(t,i)},stop(t){Pi.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Pi.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:l}}=t.legend.options;return t._getSortedDatasetMetas().map(u=>{const h=u.controller.getStyle(n?0:void 0),d=Mi(h.borderWidth);return{text:e[u.index].label,fillStyle:h.backgroundColor,fontColor:s,hidden:!u.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:h.borderColor,pointStyle:i||h.pointStyle,rotation:h.rotation,textAlign:r||h.textAlign,borderRadius:o&&(l||h.borderRadius),datasetIndex:u.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class NA extends lu{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const r=Wt(i.text)?i.text.length:1;this._padding=Mi(i.padding);const s=r*wn(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:i,bottom:r,right:s,options:o}=this,l=o.align;let u=0,h,d,m;return this.isHorizontal()?(d=mn(l,i,s),m=n+e,h=s-i):(o.position==="left"?(d=i+e,m=mn(l,r,n),u=bn*-.5):(d=s-e,m=mn(l,n,r),u=bn*.5),h=r-n),{titleX:d,titleY:m,maxWidth:h,rotation:u}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=wn(n.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:u,rotation:h}=this._drawArgs(s);_h(e,n.text,0,0,i,{color:n.color,maxWidth:u,rotation:h,textAlign:Ew(n.align),textBaseline:"middle",translation:[o,l]})}}function CU(t,e){const n=new NA({ctx:t.ctx,options:e,chart:t});Pi.configure(t,n,e),Pi.addBox(t,n),t.titleBlock=n}var IU={id:"title",_element:NA,start(t,e,n){CU(t,n)},stop(t){const e=t.titleBlock;Pi.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;Pi.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const _c={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,s=0;for(e=0,n=t.length;e<n;++e){const l=t[e].element;if(l&&l.hasValue()){const u=l.tooltipPosition();i.add(u.x),r+=u.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((l,u)=>l+u)/i.size,y:r/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,l;for(s=0,o=t.length;s<o;++s){const u=t[s].element;if(u&&u.hasValue()){const h=u.getCenterPoint(),d=G9(e,h);d<r&&(r=d,l=u)}}if(l){const u=l.tooltipPosition();n=u.x,i=u.y}return{x:n,y:i}}};function pr(t,e){return e&&(Wt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Zr(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function AU(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:o,value:l}=s.getLabelAndValue(r);return{chart:t,label:o,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:l,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function dS(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:o,boxHeight:l}=e,u=wn(e.bodyFont),h=wn(e.titleFont),d=wn(e.footerFont),m=s.length,g=r.length,_=i.length,w=Mi(e.padding);let x=w.height,C=0,E=i.reduce((j,W)=>j+W.before.length+W.lines.length+W.after.length,0);if(E+=t.beforeBody.length+t.afterBody.length,m&&(x+=m*h.lineHeight+(m-1)*e.titleSpacing+e.titleMarginBottom),E){const j=e.displayColors?Math.max(l,u.lineHeight):u.lineHeight;x+=_*j+(E-_)*u.lineHeight+(E-1)*e.bodySpacing}g&&(x+=e.footerMarginTop+g*d.lineHeight+(g-1)*e.footerSpacing);let k=0;const P=function(j){C=Math.max(C,n.measureText(j).width+k)};return n.save(),n.font=h.string,Je(t.title,P),n.font=u.string,Je(t.beforeBody.concat(t.afterBody),P),k=e.displayColors?o+2+e.boxPadding:0,Je(i,j=>{Je(j.before,P),Je(j.lines,P),Je(j.after,P)}),k=0,n.font=d.string,Je(t.footer,P),n.restore(),C+=w.width,{width:C,height:x}}function RU(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function LU(t,e,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&r+s+o>e.width||t==="right"&&r-s-o<0)return!0}function NU(t,e,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:l,right:u}}=t;let h="center";return i==="center"?h=r<=(l+u)/2?"left":"right":r<=s/2?h="left":r>=o-s/2&&(h="right"),LU(h,t,e,n)&&(h="center"),h}function fS(t,e,n){const i=n.yAlign||e.yAlign||RU(t,n);return{xAlign:n.xAlign||e.xAlign||NU(t,e,n,i),yAlign:i}}function OU(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function MU(t,e,n){let{y:i,height:r}=t;return e==="top"?i+=n:e==="bottom"?i-=r+n:i-=r/2,i}function pS(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=t,{xAlign:l,yAlign:u}=n,h=r+s,{topLeft:d,topRight:m,bottomLeft:g,bottomRight:_}=Tl(o);let w=OU(e,l);const x=MU(e,u,h);return u==="center"?l==="left"?w+=h:l==="right"&&(w-=h):l==="left"?w-=Math.max(d,g)+r:l==="right"&&(w+=Math.max(m,_)+r),{x:Xi(w,0,i.width-e.width),y:Xi(x,0,i.height-e.height)}}function rf(t,e,n){const i=Mi(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function mS(t){return pr([],Zr(t))}function DU(t,e,n){return au(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function gS(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const OA={beforeTitle:qr,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:qr,beforeBody:qr,beforeLabel:qr,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return ot(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:qr,afterBody:qr,beforeFooter:qr,footer:qr,afterFooter:qr};function jn(t,e,n,i){const r=t[e].call(n,i);return typeof r>"u"?OA[e].call(n,i):r}class iv extends lu{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,s=new vA(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=DU(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,r=jn(i,"beforeTitle",this,e),s=jn(i,"title",this,e),o=jn(i,"afterTitle",this,e);let l=[];return l=pr(l,Zr(r)),l=pr(l,Zr(s)),l=pr(l,Zr(o)),l}getBeforeBody(e,n){return mS(jn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,r=[];return Je(e,s=>{const o={before:[],lines:[],after:[]},l=gS(i,s);pr(o.before,Zr(jn(l,"beforeLabel",this,s))),pr(o.lines,jn(l,"label",this,s)),pr(o.after,Zr(jn(l,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(e,n){return mS(jn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,r=jn(i,"beforeFooter",this,e),s=jn(i,"footer",this,e),o=jn(i,"afterFooter",this,e);let l=[];return l=pr(l,Zr(r)),l=pr(l,Zr(s)),l=pr(l,Zr(o)),l}_createItems(e){const n=this._active,i=this.chart.data,r=[],s=[],o=[];let l=[],u,h;for(u=0,h=n.length;u<h;++u)l.push(AU(this.chart,n[u]));return e.filter&&(l=l.filter((d,m,g)=>e.filter(d,m,g,i))),e.itemSort&&(l=l.sort((d,m)=>e.itemSort(d,m,i))),Je(l,d=>{const m=gS(e.callbacks,d);r.push(jn(m,"labelColor",this,d)),s.push(jn(m,"labelPointStyle",this,d)),o.push(jn(m,"labelTextColor",this,d))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=l,l}update(e,n){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const l=_c[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const u=this._size=dS(this,i),h=Object.assign({},l,u),d=fS(this.chart,i,h),m=pS(i,h,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,s={opacity:1,x:m.x,y:m.y,width:u.width,height:u.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,r){const s=this.getCaretPosition(e,i,r);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:l}=i,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:m}=Tl(l),{x:g,y:_}=e,{width:w,height:x}=n;let C,E,k,P,j,W;return s==="center"?(j=_+x/2,r==="left"?(C=g,E=C-o,P=j+o,W=j-o):(C=g+w,E=C+o,P=j-o,W=j+o),k=C):(r==="left"?E=g+Math.max(u,d)+o:r==="right"?E=g+w-Math.max(h,m)-o:E=this.caretX,s==="top"?(P=_,j=P-o,C=E-o,k=E+o):(P=_+x,j=P+o,C=E+o,k=E-o),W=P),{x1:C,x2:E,x3:k,y1:P,y2:j,y3:W}}drawTitle(e,n,i){const r=this.title,s=r.length;let o,l,u;if(s){const h=kl(i.rtl,this.x,this.width);for(e.x=rf(this,i.titleAlign,i),n.textAlign=h.textAlign(i.titleAlign),n.textBaseline="middle",o=wn(i.titleFont),l=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,u=0;u<s;++u)n.fillText(r[u],h.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+l,u+1===s&&(e.y+=i.titleMarginBottom-l)}}_drawColorBox(e,n,i,r,s){const o=this.labelColors[i],l=this.labelPointStyles[i],{boxHeight:u,boxWidth:h}=s,d=wn(s.bodyFont),m=rf(this,"left",s),g=r.x(m),_=u<d.lineHeight?(d.lineHeight-u)/2:0,w=n.y+_;if(s.usePointStyle){const x={radius:Math.min(h,u)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},C=r.leftForLtr(g,h)+h/2,E=w+u/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,RE(e,x,C,E),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,RE(e,x,C,E)}else{e.lineWidth=Ze(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const x=r.leftForLtr(g,h),C=r.leftForLtr(r.xPlus(g,1),h-2),E=Tl(o.borderRadius);Object.values(E).some(k=>k!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,$p(e,{x,y:w,w:h,h:u,radius:E}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),$p(e,{x:C,y:w+1,w:h-2,h:u-2,radius:E}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(x,w,h,u),e.strokeRect(x,w,h,u),e.fillStyle=o.backgroundColor,e.fillRect(C,w+1,h-2,u-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:l,boxHeight:u,boxWidth:h,boxPadding:d}=i,m=wn(i.bodyFont);let g=m.lineHeight,_=0;const w=kl(i.rtl,this.x,this.width),x=function(I){n.fillText(I,w.x(e.x+_),e.y+g/2),e.y+=g+s},C=w.textAlign(o);let E,k,P,j,W,z,R;for(n.textAlign=o,n.textBaseline="middle",n.font=m.string,e.x=rf(this,C,i),n.fillStyle=i.bodyColor,Je(this.beforeBody,x),_=l&&C!=="right"?o==="center"?h/2+d:h+2+d:0,j=0,z=r.length;j<z;++j){for(E=r[j],k=this.labelTextColors[j],n.fillStyle=k,Je(E.before,x),P=E.lines,l&&P.length&&(this._drawColorBox(n,e,j,w,i),g=Math.max(m.lineHeight,u)),W=0,R=P.length;W<R;++W)x(P[W]),g=m.lineHeight;Je(E.after,x)}_=0,g=m.lineHeight,Je(this.afterBody,x),e.y-=s}drawFooter(e,n,i){const r=this.footer,s=r.length;let o,l;if(s){const u=kl(i.rtl,this.x,this.width);for(e.x=rf(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=u.textAlign(i.footerAlign),n.textBaseline="middle",o=wn(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,l=0;l<s;++l)n.fillText(r[l],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,r){const{xAlign:s,yAlign:o}=this,{x:l,y:u}=e,{width:h,height:d}=i,{topLeft:m,topRight:g,bottomLeft:_,bottomRight:w}=Tl(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(l+m,u),o==="top"&&this.drawCaret(e,n,i,r),n.lineTo(l+h-g,u),n.quadraticCurveTo(l+h,u,l+h,u+g),o==="center"&&s==="right"&&this.drawCaret(e,n,i,r),n.lineTo(l+h,u+d-w),n.quadraticCurveTo(l+h,u+d,l+h-w,u+d),o==="bottom"&&this.drawCaret(e,n,i,r),n.lineTo(l+_,u+d),n.quadraticCurveTo(l,u+d,l,u+d-_),o==="center"&&s==="left"&&this.drawCaret(e,n,i,r),n.lineTo(l,u+m),n.quadraticCurveTo(l,u,l+m,u),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=_c[e.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=dS(this,e),u=Object.assign({},o,this._size),h=fS(n,e,u),d=pS(e,u,h,n);(r._to!==d.x||s._to!==d.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=Mi(n.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&l&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,r,n),_A(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),yA(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,r=e.map(({datasetIndex:l,index:u})=>{const h=this.chart.getDatasetMeta(l);if(!h)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:h.data[u],index:u}}),s=!Vp(i,r),o=this._positionChanged(r,n);(s||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,i),l=this._positionChanged(o,e),u=n||!Vp(o,s)||l;return u&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),u}_getActiveElements(e,n,i,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:r,options:s}=this,o=_c[s.position].call(this,e,n);return o!==!1&&(i!==o.x||r!==o.y)}}qe(iv,"positioners",_c);var FU={id:"tooltip",_element:iv,positioners:_c,afterInit(t,e,n){n&&(t.tooltip=new iv({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:OA},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const jU=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function VU(t,e,n,i){const r=t.indexOf(e);if(r===-1)return jU(t,e,n,i);const s=t.lastIndexOf(e);return r!==s?n:r}const zU=(t,e)=>t===null?null:Xi(Math.round(t),0,e);function _S(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class rv extends uu{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:s}of n)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(ot(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:VU(i,e,et(n,e),this._addedLabels),zU(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return _S.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}qe(rv,"id","category"),qe(rv,"defaults",{ticks:{callback:_S}});function BU(t,e){const n=[],{bounds:r,step:s,min:o,max:l,precision:u,count:h,maxTicks:d,maxDigits:m,includeBounds:g}=t,_=s||1,w=d-1,{min:x,max:C}=e,E=!ot(o),k=!ot(l),P=!ot(h),j=(C-x)/(m+1);let W=bE((C-x)/w/_)*_,z,R,I,N;if(W<1e-14&&!E&&!k)return[{value:x},{value:C}];N=Math.ceil(C/W)-Math.floor(x/W),N>w&&(W=bE(N*W/w/_)*_),ot(u)||(z=Math.pow(10,u),W=Math.ceil(W*z)/z),r==="ticks"?(R=Math.floor(x/W)*W,I=Math.ceil(C/W)*W):(R=x,I=C),E&&k&&s&&$9((l-o)/s,W/1e3)?(N=Math.round(Math.min((l-o)/W,d)),W=(l-o)/N,R=o,I=l):P?(R=E?o:R,I=k?l:I,N=h-1,W=(I-R)/N):(N=(I-R)/W,Mf(N,Math.round(N),W/1e3)?N=Math.round(N):N=Math.ceil(N));const F=Math.max(EE(W),EE(R));z=Math.pow(10,ot(u)?F:u),R=Math.round(R*z)/z,I=Math.round(I*z)/z;let D=0;for(E&&(g&&R!==o?(n.push({value:o}),R<o&&D++,Mf(Math.round((R+D*W)*z)/z,o,yS(o,j,t))&&D++):R<o&&D++);D<N;++D){const B=Math.round((R+D*W)*z)/z;if(k&&B>l)break;n.push({value:B})}return k&&g&&I!==l?n.length&&Mf(n[n.length-1].value,l,yS(l,j,t))?n[n.length-1].value=l:n.push({value:l}):(!k||I===l)&&n.push({value:I}),n}function yS(t,e,{horizontal:n,minRotation:i}){const r=Xo(i),s=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class UU extends uu{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return ot(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=u=>r=n?r:u,l=u=>s=i?s:u;if(e){const u=ho(r),h=ho(s);u<0&&h<0?l(0):u>0&&h>0&&o(0)}if(r===s){let u=s===0?1:Math.abs(s*.05);l(s+u),e||o(r-u)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=BU(r,s);return e.bounds==="ticks"&&H9(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-n)/Math.max(e.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return aA(e,this.chart.options.locale,this.options.ticks.format)}}class sv extends UU{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Oi(e)?e:0,this.max=Oi(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=Xo(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}qe(sv,"id","linear"),qe(sv,"defaults",{ticks:{callback:lA.formatters.numeric}});const Ym={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Un=Object.keys(Ym);function vS(t,e){return t-e}function wS(t,e){if(ot(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),Oi(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(Up(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,r)),+o)}function xS(t,e,n,i){const r=Un.length;for(let s=Un.indexOf(t);s<r-1;++s){const o=Ym[Un[s]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(l*o.size))<=i)return Un[s]}return Un[r-1]}function $U(t,e,n,i,r){for(let s=Un.length-1;s>=Un.indexOf(n);s--){const o=Un[s];if(Ym[o].common&&t._adapter.diff(r,i,o)>=e-1)return o}return Un[n?Un.indexOf(n):0]}function HU(t){for(let e=Un.indexOf(t)+1,n=Un.length;e<n;++e)if(Ym[Un[e]].common)return Un[e]}function bS(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:r}=bw(n,e),s=n[i]>=e?n[i]:n[r];t[s]=!0}}function WU(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let l,u;for(l=s;l<=o;l=+r.add(l,1,i))u=n[l],u>=0&&(e[u].major=!0);return e}function ES(t,e,n){const i=[],r={},s=e.length;let o,l;for(o=0;o<s;++o)l=e[o],r[l]=o,i.push({value:l,major:!1});return s===0||!n?i:WU(t,i,r,n)}class qp extends uu{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),r=this._adapter=new a8._date(e.adapters.date);r.init(n),Rc(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:wS(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:l}=this.getUserBounds();function u(h){!o&&!isNaN(h.min)&&(r=Math.min(r,h.min)),!l&&!isNaN(h.max)&&(s=Math.max(s,h.max))}(!o||!l)&&(u(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&u(this.getMinMax(!1))),r=Oi(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),s=Oi(s)&&!isNaN(s)?s:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,l=Q9(r,s,o);return this._unit=n.unit||(i.autoSkip?xS(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):$U(this,l.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:HU(this._unit),this.initOffsets(r),e.reverse&&l.reverse(),ES(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Xi(n,0,o),i=Xi(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||xS(s.minUnit,n,i,this._getLabelCapacity(n)),l=et(r.ticks.stepSize,1),u=o==="week"?s.isoWeekday:!1,h=Up(u)||u===!0,d={};let m=n,g,_;if(h&&(m=+e.startOf(m,"isoWeek",u)),m=+e.startOf(m,h?"day":o),e.diff(i,n,o)>1e5*l)throw new Error(n+" and "+i+" are too far apart with stepSize of "+l+" "+o);const w=r.ticks.source==="data"&&this.getDataTimestamps();for(g=m,_=0;g<i;g=+e.add(g,l,o),_++)bS(d,g,w);return(g===i||r.bounds==="ticks"||_===1)&&bS(d,g,w),Object.keys(d).sort(vS).map(x=>+x)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,s=this._unit,o=n||r[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,i,r){const s=this.options,o=s.ticks.callback;if(o)return ft(o,[e,n,i],this);const l=s.time.displayFormats,u=this._unit,h=this._majorUnit,d=u&&l[u],m=h&&l[h],g=i[n],_=h&&m&&g&&g.major;return this._adapter.format(e,r||(_?m:d))}generateTickLabels(e){let n,i,r;for(n=0,i=e.length;n<i;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,r=Xo(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(r),o=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:i*s+l*o,h:i*o+l*s}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,s=this._tickFormatFunction(e,0,ES(this,[e],this._majorUnit),r),o=this._getLabelSize(s),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)e.push(wS(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return iA(e.sort(vS))}}qe(qp,"id","time"),qe(qp,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function sf(t,e,n){let i=0,r=t.length-1,s,o,l,u;n?(e>=t[i].pos&&e<=t[r].pos&&({lo:i,hi:r}=Jy(t,"pos",e)),{pos:s,time:l}=t[i],{pos:o,time:u}=t[r]):(e>=t[i].time&&e<=t[r].time&&({lo:i,hi:r}=Jy(t,"time",e)),{time:s,pos:l}=t[i],{time:o,pos:u}=t[r]);const h=o-s;return h?l+(u-l)*(e-s)/h:l}class SS extends qp{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=sf(n,this.min),this._tableRange=sf(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,r=[],s=[];let o,l,u,h,d;for(o=0,l=e.length;o<l;++o)h=e[o],h>=n&&h<=i&&r.push(h);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,l=r.length;o<l;++o)d=r[o+1],u=r[o-1],h=r[o],Math.round((d+u)/2)!==h&&s.push({time:h,pos:o/(l-1)});return s}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(sf(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return sf(this._table,i*this._tableRange+this._minPos,!0)}}qe(SS,"id","timeseries"),qe(SS,"defaults",qp.defaults);const MA="label";function TS(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function qU(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function DA(t,e){t.labels=e}function FA(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:MA;const i=[];t.datasets=e.map(r=>{const s=t.datasets.find(o=>o[n]===r[n]);return!s||!r.data||i.includes(s)?{...r}:(i.push(s),Object.assign(s,r),s)})}function GU(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:MA;const n={labels:[],datasets:[]};return DA(n,t.labels),FA(n,t.datasets,e),n}function KU(t,e){const{height:n=150,width:i=300,redraw:r=!1,datasetIdKey:s,type:o,data:l,options:u,plugins:h=[],fallbackContent:d,updateMode:m,...g}=t,_=$.useRef(null),w=$.useRef(null),x=()=>{_.current&&(w.current=new Zm(_.current,{type:o,data:GU(l,s),options:u&&{...u},plugins:h}),TS(e,w.current))},C=()=>{TS(e,null),w.current&&(w.current.destroy(),w.current=null)};return $.useEffect(()=>{!r&&w.current&&u&&qU(w.current,u)},[r,u]),$.useEffect(()=>{!r&&w.current&&DA(w.current.config.data,l.labels)},[r,l.labels]),$.useEffect(()=>{!r&&w.current&&l.datasets&&FA(w.current.config.data,l.datasets,s)},[r,l.datasets]),$.useEffect(()=>{w.current&&(r?(C(),setTimeout(x)):w.current.update(m))},[r,u,l.labels,l.datasets,m]),$.useEffect(()=>{w.current&&(C(),setTimeout(x))},[o]),$.useEffect(()=>(x(),()=>C()),[]),Ji.createElement("canvas",{ref:_,role:"img",height:n,width:i,...g},d)}const ZU=$.forwardRef(KU);function YU(t,e){return Zm.register(e),$.forwardRef((n,i)=>Ji.createElement(ZU,{...n,ref:i,type:t}))}const QU=YU("bar",Df);Zm.register(rv,sv,Vf,IU,FU,PU);const XU=({sectorStats:t})=>{const e={CHR:"rgba(54, 162, 235, 0.7)",HACCP:"rgba(255, 206, 86, 0.7)",Kezia:"rgba(75, 192, 192, 0.7)",Tabac:"rgba(255, 99, 132, 0.7)",Default:"rgba(153, 102, 255, 0.7)"},n={labels:t.map(r=>r.sectorName),datasets:[{label:"Tickets",data:t.map(r=>r.ticketCount),backgroundColor:t.map(r=>e[r.sectorName]||e.Default),borderColor:t.map(r=>e[r.sectorName]||e.Default),borderWidth:1}]},i={indexAxis:"y",responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:"Nombre de tickets par secteur",color:"#fff"}},scales:{x:{ticks:{color:"#fff"},grid:{color:"rgba(255, 255, 255, 0.1)"},beginAtZero:!0},y:{ticks:{color:"#fff"},grid:{color:"rgba(255, 255, 255, 0.1)"}}}};return S.jsx("div",{className:"card bg-jdc-dark-gray shadow-lg border border-base-300",children:S.jsxs("div",{className:"card-body p-4 md:p-6",children:[S.jsx("h2",{className:"card-title text-xl font-semibold text-jdc-white mb-4",children:"Statistiques par Secteur"}),S.jsx("div",{children:S.jsx(QU,{data:n,options:i})})]})})},c_=()=>{const[t,e]=$.useState(0),[n,i]=$.useState(0),[r,s]=$.useState([]),[o,l]=$.useState(!0),[u,h]=$.useState(!0),[d,m]=$.useState(null),[g,_]=$.useState(null),[w,x]=$.useState([]),[C,E]=$.useState(!0),[k,P]=$.useState(null),[j,W]=$.useState(0),[z,R]=$.useState(0),[I,N]=$.useState(0),[F,D]=$.useState(0),[B,V]=$.useState(0),[ee,te]=$.useState(0),[ae,ue]=$.useState(0),[K,he]=$.useState(0),M=$.useRef([]),fe=$.useRef({});return $.useEffect(()=>{l(!0),h(!0),E(!0),m(null),_(null),P(null),fe.current={};let ce=!0;const U=t9(Ie=>{ce&&e(Ie)},Ie=>{console.error("[DashboardPage] Error listening to envois count:",Ie),ce&&m("Erreur chargement nb envois")}),be=async()=>{const Ie=new Date,Fe=new Date(Ie);Fe.setDate(Ie.getDate()-1);const vt=new Date(Fe.getFullYear(),Fe.getMonth(),Fe.getDate(),0,0,0),Rt=new Date(Fe.getFullYear(),Fe.getMonth(),Fe.getDate(),23,59,59),ht=vt.toISOString(),mt=Rt.toISOString();try{const Kt=await Of("Envoi");console.log("[DashboardPage] Total envois fetched:",Kt.length),W(Kt.filter(wt=>wt.dateCreation&&wt.dateCreation>=ht&&wt.dateCreation<=mt).length);const On=Kt.filter(wt=>wt.typeLivraison==="CTN");console.log("[DashboardPage] CTN envois count:",On.length);const ci=On.filter(wt=>wt.dateCreation&&wt.dateCreation>=ht&&wt.dateCreation<=mt);console.log("[DashboardPage] Yesterday CTN envois count:",ci.length);const Di=[...new Set(ci.map(wt=>wt.nomClient))].length;console.log("[DashboardPage] Yesterday CTN clients count:",Di),te(Di);const Fi=[...new Set(On.map(wt=>wt.nomClient))].length;console.log("[DashboardPage] Current CTN clients count:",Fi),V(Fi);let ji=0,sr=0,hi=0,Vi=0,Or=0;const or=await Yg();for(const wt of or){const bs=wt.id,Y=await Of(bs),ie=Y.filter(Ye=>Ye.statut==="Nouveau");Or+=ie.length;const xe=ie.filter(Ye=>Ye.dateCreation&&Ye.dateCreation>=ht&&Ye.dateCreation<=mt).length;Vi+=xe;const Ne=Y.filter(Ye=>Ye.dateCreation&&Ye.dateCreation>=ht&&Ye.dateCreation<=mt).length;ji+=Ne;const ze=Y.filter(Ye=>Ye.statut==="Demande de RMA");hi+=ze.length;const Zt=ze.filter(Ye=>Ye.dateCreation&&Ye.dateCreation>=ht&&Ye.dateCreation<=mt).length;sr+=Zt}R(ji),N(hi),D(sr),ue(Or),he(Vi)}catch(Kt){console.error("Error fetching yesterday's counts:",Kt)}finally{ce&&o&&l(!1)}},we=async()=>{try{const Ie=await Yg();if(!ce)return;if(M.current.forEach(Fe=>Fe()),M.current=[],fe.current={},Ie.length===0){ce&&(s([]),i(0),h(!1));return}Ie.forEach(Fe=>{const vt=Fe.id;fe.current[vt]=[];const Rt=q2(vt,ht=>{if(ce){fe.current[vt]=ht;let mt=[],Kt=0;Object.values(fe.current).forEach(On=>{mt=mt.concat(On),Kt+=On.length}),s(mt),i(Kt),u&&h(!1),_(null)}},ht=>{console.error(`[DashboardPage] Error listening to tickets for sector ${vt}:`,ht),ce&&_(mt=>mt?`${mt}, Erreur secteur ${vt}`:`Erreur chargement tickets secteur ${vt}`)});M.current.push(Rt)})}catch(Ie){if(console.error("[DashboardPage] Error fetching sectors or setting up ticket listeners:",Ie),ce){const Fe="Erreur chargement données";m(Fe),_(Fe),l(!1),h(!1)}}finally{ce&&o&&l(!1)}},pe=async()=>{try{const Ie=await Yg();if(!Ie){ce&&(E(!1),x([]));return}const Fe=[];for(const vt of Ie){const Rt=vt.id,ht=await Of(Rt);Fe.push({sectorName:vt.id,ticketCount:ht.length})}ce&&(x(Fe),E(!1))}catch(Ie){console.error("Error fetching sector stats:",Ie),ce&&(P("Erreur chargement stats secteur"),E(!1))}};return Promise.all([we(),be(),pe()]).then(()=>{ce&&l(!1)}).catch(()=>{ce&&l(!1)}),()=>{ce=!1,U(),M.current.forEach(Ie=>Ie()),M.current=[]}},[]),S.jsxs("div",{className:"space-y-6",children:[S.jsx("h1",{className:"text-3xl font-bold text-jdc-white mb-4",children:"Tableau de Bord"}),S.jsx(MF,{envoisCount:t,ticketsCount:n,loading:o,error:d,envoisCountYesterday:j,ticketsCountYesterday:z,rmaTicketsCount:I,rmaTicketsCountYesterday:F,clientCtnCount:B,clientCtnCountYesterday:ee,newTicketsCount:ae,newTicketsCountYesterday:K}),S.jsx("div",{className:"card bg-jdc-dark-gray shadow-lg border border-base-300",children:S.jsxs("div",{className:"card-body p-4 md:p-6",children:[S.jsx("h2",{className:"card-title text-xl font-semibold text-jdc-white mb-4",children:"Carte Interactive des Tickets SAP"}),u&&S.jsxs("div",{className:"flex justify-center items-center h-64 text-jdc-light-gray",children:[S.jsx("span",{className:"loading loading-spinner loading-lg text-jdc-yellow mr-2"}),"Chargement de la carte..."]}),g&&!u&&S.jsxs("div",{className:"text-red-500 text-center p-4",children:["Erreur chargement carte: ",g]}),!u&&!g&&S.jsx("div",{className:"h-[400px] md:h-[500px] lg:h-[600px] w-full rounded overflow-hidden",children:S.jsx(c9,{tickets:r})}),!u&&!g&&r.length===0&&S.jsx("div",{className:"text-center p-4 text-jdc-light-gray",children:"Aucun ticket à afficher sur la carte."})]})}),C&&S.jsx("div",{className:"card bg-jdc-dark-gray shadow-lg border border-base-300",children:S.jsxs("div",{className:"card-body p-4 md:p-6 flex justify-center items-center h-64 text-jdc-light-gray",children:[S.jsx("span",{className:"loading loading-spinner loading-lg text-jdc-yellow mr-2"}),"Chargement des statistiques par secteur..."]})}),k&&!C&&S.jsx("div",{className:"card bg-jdc-dark-gray shadow-lg border border-base-300",children:S.jsxs("div",{className:"card-body p-4 md:p-6 text-red-500 text-center",children:["Erreur chargement stats secteurs: ",k]})}),!C&&!k&&S.jsx(XU,{sectorStats:w})]})},jA=$.createContext(void 0),JU=({children:t})=>{const[e,n]=$.useState(null),[i,r]=$.useState(!0),[s,o]=$.useState(null);$.useEffect(()=>{const h=tu().onAuthStateChanged(async d=>{if(d){r(!0),o(null);try{const g=(await _w()).find(_=>_.email===d.email);g&&g.secteurs?n(g.secteurs):n([])}catch(m){o(m.message||"Failed to load user sectors."),console.error("Error fetching user sectors:",m),n(null)}finally{r(!1)}}else n(null),r(!1)});return()=>h()},[]);const l={userSectors:e,setUserSectors:n,loadingSectors:i,errorSectors:s};return S.jsx(jA.Provider,{value:l,children:t})},e7=()=>{const t=$.useContext(jA);if(!t)throw new Error("useUserSectors must be used within a UserProvider");return t},t7={janvier:0,février:1,mars:2,avril:3,mai:4,juin:5,juillet:6,août:7,septembre:8,octobre:9,novembre:10,décembre:11},ov=t=>{if(!t)return null;const e=t.toLowerCase().split(" ");if(e.length<3)return console.warn(`[parseFrenchDate] Unexpected date format: "${t}"`),null;const n=e[e.length-1],i=e[e.length-2],r=e[e.length-3],s=parseInt(r,10),o=parseInt(n,10),l=t7[i];if(isNaN(s)||isNaN(o)||l===void 0){console.warn(`[parseFrenchDate] Failed to parse date components: day=${r}, month=${i}, year=${n} from "${t}"`);try{const u=new Date(t);if(!isNaN(u.getTime()))return console.log(`[parseFrenchDate] Fallback parsing successful for "${t}"`),u}catch{}return null}try{const u=new Date(Date.UTC(o,l,s));return u.getUTCFullYear()===o&&u.getUTCMonth()===l&&u.getUTCDate()===s?u:(console.warn(`[parseFrenchDate] Date object creation resulted in mismatch for "${t}"`),null)}catch(u){return console.error(`[parseFrenchDate] Error creating Date object for "${t}":`,u),null}},kS=t=>{if(!t||isNaN(t.getTime()))return"N/A";const e=String(t.getUTCDate()).padStart(2,"0"),n=String(t.getUTCMonth()+1).padStart(2,"0"),i=t.getUTCFullYear();return`${e}/${n}/${i}`},n7=({groupedTickets:t,onSelectTicket:e,selectedTicketId:n,groupByField:i,isLoadingGeo:r})=>{const[s,o]=$.useState({}),[l,u]=$.useState({}),[h,d]=$.useState(""),[m,g]=$.useState({}),[_,w]=$.useState({});$.useEffect(()=>{if(console.log("[TicketList] useEffect - searchTerm:",h,"groupedTickets:",t),!h){u(t),console.log("[TicketList] No search term, filteredGroups set to groupedTickets:",t);return}const E=h.toLowerCase(),k={};Object.entries(t).forEach(([P,j])=>{const W=j.filter(z=>{var I,N,F,D,B,V,ee;const R=z.date?kS(ov(z.date)).toLowerCase():"";return(((I=z.raisonSociale)==null?void 0:I.toLowerCase())||"").includes(E)||(((N=z.codeClient)==null?void 0:N.toLowerCase())||"").includes(E)||(((F=z.numeroSAP)==null?void 0:F.toLowerCase())||"").includes(E)||(((D=z.adresse)==null?void 0:D.toLowerCase())||"").includes(E)||(((B=z.deducedSalesperson)==null?void 0:B.toLowerCase())||"").includes(E)||(((V=z.telephone)==null?void 0:V.toLowerCase())||"").includes(E)||(((ee=z.statut)==null?void 0:ee.toLowerCase())||"").includes(E)||R.includes(E)});W.length>0&&(k[P]=W)}),u(k),console.log("[TicketList] Search term:",h,"filteredGroups:",k)},[h,t]);const x=$.useCallback((E,k)=>{k.length===1?window.location.href=`webexphone://call?uri=tel:${k[0]}`:k.length>1&&g(P=>({...P,[E]:!0}))},[]),C=$.useCallback((E,k)=>{w(P=>({...P,[E]:k})),g(P=>({...P,[E]:!1})),window.location.href=`webexphone://call?uri=tel:${k}`},[]);return console.log("[TicketList] groupedTickets prop:",t),console.log("[TicketList] filteredGroups state:",l),S.jsxs("div",{children:[S.jsx("input",{type:"text",placeholder:"Rechercher...",className:"input input-bordered w-full max-w-xs mb-4",value:h,onChange:E=>d(E.target.value)}),Object.entries(l).map(([E,k])=>S.jsxs("div",{className:"mb-6 border rounded p-4 bg-jdc-gray-lighter",children:[S.jsxs("div",{className:"flex justify-between items-center cursor-pointer",onClick:()=>o(P=>({...P,[E]:!P[E]})),children:[S.jsxs("h2",{className:"text-lg font-semibold text-jdc-white",children:[E," (",k.length,")"]}),S.jsx("button",{onClick:P=>{P.stopPropagation()},className:"text-jdc-yellow hover:text-jdc-gold focus:outline-none"}),S.jsx("span",{className:"text-jdc-yellow",children:s[E]?S.jsx(bF,{}):S.jsx(xF,{})})]}),S.jsx("div",{className:`overflow-hidden transition-height duration-300 ${s[E]?"max-h-96 p-2":"max-h-0"}`,children:k.map(P=>{var W;const j=((W=P.telephone)==null?void 0:W.split(",").map(z=>z.trim()))||[];return S.jsxs("div",{className:`py-2 px-3 my-1 rounded cursor-pointer hover:bg-jdc-gray ${n===P.id?"bg-jdc-gray":""}`,onClick:()=>e(P),children:[S.jsxs("div",{className:"flex justify-between items-center",children:[S.jsxs("div",{className:"flex items-center",children:[S.jsx(TF,{className:"mr-2 text-jdc-lightblue"}),S.jsx("span",{className:"text-jdc-white",children:P.numeroSAP||"N/A"})]}),S.jsxs("div",{className:"text-right",children:[S.jsxs("div",{className:"flex items-center justify-end",children:[S.jsx(vF,{className:"mr-1 text-jdc-light-gray"}),S.jsx("span",{className:"text-sm text-jdc-light-gray",children:P.date?kS(ov(P.date)):"Date N/A"})]}),P.telephone&&S.jsxs("div",{className:"flex items-center justify-end relative",children:[S.jsxs("button",{className:"btn btn-ghost btn-xs",onClick:z=>{z.stopPropagation(),x(P.id,j)},children:[S.jsx(PF,{className:"mr-1 text-jdc-light-gray"}),S.jsx("span",{className:"text-sm text-jdc-yellow hover:text-jdc-gold",children:"Appeler"})]}),m[P.id]&&j.length>1&&S.jsx("ul",{className:"menu bg-jdc-gray rounded mt-2 w-56 absolute right-0 top-6 z-10",children:j.map((z,R)=>S.jsx("li",{onClick:I=>{I.stopPropagation(),C(P.id,z)},children:S.jsx("a",{children:z})},R))}),S.jsx("a",{href:`webexphone://call?uri=tel:${j[0]}`,className:"text-sm text-jdc-yellow hover:text-jdc-gold hidden",children:P.telephone})]})]})]}),S.jsxs("div",{className:"flex items-center mt-1",children:[S.jsx(LF,{className:"mr-2 text-jdc-light-gray"}),S.jsx("span",{className:"text-sm text-jdc-light-gray",children:P.deducedSalesperson})]}),S.jsxs("div",{className:"flex items-center mt-1",children:[S.jsx(kF,{className:"mr-2 text-jdc-light-gray"}),S.jsx("span",{className:"text-sm text-jdc-light-gray truncate",children:P.adresse}),r&&S.jsx(bp,{className:"ml-1 text-jdc-yellow animate-spin"})]})]},P.id)})})]},E)),Object.keys(l).length===0&&!r&&h!==""&&S.jsxs("p",{className:"text-center text-jdc-white py-4",children:['Aucun ticket trouvé pour la recherche "',h,'".']}),Object.keys(l).length===0&&!r&&h===""&&Object.keys(t).length>0&&S.jsx("p",{className:"text-center text-jdc-white py-4",children:"Aucun ticket trouvé."})]})},PS=(t="")=>{const[e,n]=$.useState(null),[i,r]=$.useState(!1),[s,o]=$.useState(null),l=$.useCallback(async u=>{if(!u){n(null),o(null),r(!1);return}{console.error("[useGeminiSummary] Gemini API Key is missing or using fallback."),o("Clé API Gemini manquante ou invalide."),r(!1),n(null);return}},[]);return{summary:e,isLoading:i,error:s,generateSummary:l}};function i7(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const r7=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,s7=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,o7={};function CS(t,e){return(o7.jsx?s7:r7).test(t)}const a7=/[ \t\n\f\r]/g;function l7(t){return typeof t=="object"?t.type==="text"?IS(t.value):!1:IS(t)}function IS(t){return t.replace(a7,"")===""}class $h{constructor(e,n,i){this.normal=n,this.property=e,i&&(this.space=i)}}$h.prototype.normal={};$h.prototype.property={};$h.prototype.space=void 0;function VA(t,e){const n={},i={};for(const r of t)Object.assign(n,r.property),Object.assign(i,r.normal);return new $h(n,i,e)}function av(t){return t.toLowerCase()}class Yn{constructor(e,n){this.attribute=n,this.property=e}}Yn.prototype.attribute="";Yn.prototype.booleanish=!1;Yn.prototype.boolean=!1;Yn.prototype.commaOrSpaceSeparated=!1;Yn.prototype.commaSeparated=!1;Yn.prototype.defined=!1;Yn.prototype.mustUseProperty=!1;Yn.prototype.number=!1;Yn.prototype.overloadedBoolean=!1;Yn.prototype.property="";Yn.prototype.spaceSeparated=!1;Yn.prototype.space=void 0;let u7=0;const Oe=ba(),Bt=ba(),zA=ba(),oe=ba(),at=ba(),Pl=ba(),ei=ba();function ba(){return 2**++u7}const lv=Object.freeze(Object.defineProperty({__proto__:null,boolean:Oe,booleanish:Bt,commaOrSpaceSeparated:ei,commaSeparated:Pl,number:oe,overloadedBoolean:zA,spaceSeparated:at},Symbol.toStringTag,{value:"Module"})),h_=Object.keys(lv);class Lw extends Yn{constructor(e,n,i,r){let s=-1;if(super(e,n),AS(this,"space",r),typeof i=="number")for(;++s<h_.length;){const o=h_[s];AS(this,h_[s],(i&lv[o])===lv[o])}}}Lw.prototype.defined=!0;function AS(t,e,n){n&&(t[e]=n)}function cu(t){const e={},n={};for(const[i,r]of Object.entries(t.properties)){const s=new Lw(i,t.transform(t.attributes||{},i),r,t.space);t.mustUseProperty&&t.mustUseProperty.includes(i)&&(s.mustUseProperty=!0),e[i]=s,n[av(i)]=i,n[av(s.attribute)]=i}return new $h(e,n,t.space)}const BA=cu({properties:{ariaActiveDescendant:null,ariaAtomic:Bt,ariaAutoComplete:null,ariaBusy:Bt,ariaChecked:Bt,ariaColCount:oe,ariaColIndex:oe,ariaColSpan:oe,ariaControls:at,ariaCurrent:null,ariaDescribedBy:at,ariaDetails:null,ariaDisabled:Bt,ariaDropEffect:at,ariaErrorMessage:null,ariaExpanded:Bt,ariaFlowTo:at,ariaGrabbed:Bt,ariaHasPopup:null,ariaHidden:Bt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:at,ariaLevel:oe,ariaLive:null,ariaModal:Bt,ariaMultiLine:Bt,ariaMultiSelectable:Bt,ariaOrientation:null,ariaOwns:at,ariaPlaceholder:null,ariaPosInSet:oe,ariaPressed:Bt,ariaReadOnly:Bt,ariaRelevant:null,ariaRequired:Bt,ariaRoleDescription:at,ariaRowCount:oe,ariaRowIndex:oe,ariaRowSpan:oe,ariaSelected:Bt,ariaSetSize:oe,ariaSort:null,ariaValueMax:oe,ariaValueMin:oe,ariaValueNow:oe,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function UA(t,e){return e in t?t[e]:e}function $A(t,e){return UA(t,e.toLowerCase())}const c7=cu({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Pl,acceptCharset:at,accessKey:at,action:null,allow:null,allowFullScreen:Oe,allowPaymentRequest:Oe,allowUserMedia:Oe,alt:null,as:null,async:Oe,autoCapitalize:null,autoComplete:at,autoFocus:Oe,autoPlay:Oe,blocking:at,capture:null,charSet:null,checked:Oe,cite:null,className:at,cols:oe,colSpan:null,content:null,contentEditable:Bt,controls:Oe,controlsList:at,coords:oe|Pl,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Oe,defer:Oe,dir:null,dirName:null,disabled:Oe,download:zA,draggable:Bt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Oe,formTarget:null,headers:at,height:oe,hidden:Oe,high:oe,href:null,hrefLang:null,htmlFor:at,httpEquiv:at,id:null,imageSizes:null,imageSrcSet:null,inert:Oe,inputMode:null,integrity:null,is:null,isMap:Oe,itemId:null,itemProp:at,itemRef:at,itemScope:Oe,itemType:at,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Oe,low:oe,manifest:null,max:null,maxLength:oe,media:null,method:null,min:null,minLength:oe,multiple:Oe,muted:Oe,name:null,nonce:null,noModule:Oe,noValidate:Oe,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Oe,optimum:oe,pattern:null,ping:at,placeholder:null,playsInline:Oe,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Oe,referrerPolicy:null,rel:at,required:Oe,reversed:Oe,rows:oe,rowSpan:oe,sandbox:at,scope:null,scoped:Oe,seamless:Oe,selected:Oe,shadowRootClonable:Oe,shadowRootDelegatesFocus:Oe,shadowRootMode:null,shape:null,size:oe,sizes:null,slot:null,span:oe,spellCheck:Bt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:oe,step:null,style:null,tabIndex:oe,target:null,title:null,translate:null,type:null,typeMustMatch:Oe,useMap:null,value:Bt,width:oe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:at,axis:null,background:null,bgColor:null,border:oe,borderColor:null,bottomMargin:oe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Oe,declare:Oe,event:null,face:null,frame:null,frameBorder:null,hSpace:oe,leftMargin:oe,link:null,longDesc:null,lowSrc:null,marginHeight:oe,marginWidth:oe,noResize:Oe,noHref:Oe,noShade:Oe,noWrap:Oe,object:null,profile:null,prompt:null,rev:null,rightMargin:oe,rules:null,scheme:null,scrolling:Bt,standby:null,summary:null,text:null,topMargin:oe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:oe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Oe,disableRemotePlayback:Oe,prefix:null,property:null,results:oe,security:null,unselectable:null},space:"html",transform:$A}),h7=cu({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:ei,accentHeight:oe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:oe,amplitude:oe,arabicForm:null,ascent:oe,attributeName:null,attributeType:null,azimuth:oe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:oe,by:null,calcMode:null,capHeight:oe,className:at,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:oe,diffuseConstant:oe,direction:null,display:null,dur:null,divisor:oe,dominantBaseline:null,download:Oe,dx:null,dy:null,edgeMode:null,editable:null,elevation:oe,enableBackground:null,end:null,event:null,exponent:oe,externalResourcesRequired:null,fill:null,fillOpacity:oe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Pl,g2:Pl,glyphName:Pl,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:oe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:oe,horizOriginX:oe,horizOriginY:oe,id:null,ideographic:oe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:oe,k:oe,k1:oe,k2:oe,k3:oe,k4:oe,kernelMatrix:ei,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:oe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:oe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:oe,overlineThickness:oe,paintOrder:null,panose1:null,path:null,pathLength:oe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:at,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:oe,pointsAtY:oe,pointsAtZ:oe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ei,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ei,rev:ei,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ei,requiredFeatures:ei,requiredFonts:ei,requiredFormats:ei,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:oe,specularExponent:oe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:oe,strikethroughThickness:oe,string:null,stroke:null,strokeDashArray:ei,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:oe,strokeOpacity:oe,strokeWidth:null,style:null,surfaceScale:oe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ei,tabIndex:oe,tableValues:null,target:null,targetX:oe,targetY:oe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ei,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:oe,underlineThickness:oe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:oe,values:null,vAlphabetic:oe,vMathematical:oe,vectorEffect:null,vHanging:oe,vIdeographic:oe,version:null,vertAdvY:oe,vertOriginX:oe,vertOriginY:oe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:oe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:UA}),HA=cu({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),WA=cu({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:$A}),qA=cu({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),d7={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},f7=/[A-Z]/g,RS=/-[a-z]/g,p7=/^data[-\w.:]+$/i;function m7(t,e){const n=av(e);let i=e,r=Yn;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&p7.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(RS,_7);i="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!RS.test(s)){let o=s.replace(f7,g7);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}r=Lw}return new r(i,e)}function g7(t){return"-"+t.toLowerCase()}function _7(t){return t.charAt(1).toUpperCase()}const y7=VA([BA,c7,HA,WA,qA],"html"),Nw=VA([BA,h7,HA,WA,qA],"svg");function v7(t){return t.join(" ").trim()}var Ow={},LS=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,w7=/\n/g,x7=/^\s*/,b7=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,E7=/^:\s*/,S7=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,T7=/^[;\s]*/,k7=/^\s+|\s+$/g,P7=`
`,NS="/",OS="*",qo="",C7="comment",I7="declaration",A7=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,i=1;function r(w){var x=w.match(w7);x&&(n+=x.length);var C=w.lastIndexOf(P7);i=~C?w.length-C:i+w.length}function s(){var w={line:n,column:i};return function(x){return x.position=new o(w),h(),x}}function o(w){this.start=w,this.end={line:n,column:i},this.source=e.source}o.prototype.content=t;function l(w){var x=new Error(e.source+":"+n+":"+i+": "+w);if(x.reason=w,x.filename=e.source,x.line=n,x.column=i,x.source=t,!e.silent)throw x}function u(w){var x=w.exec(t);if(x){var C=x[0];return r(C),t=t.slice(C.length),x}}function h(){u(x7)}function d(w){var x;for(w=w||[];x=m();)x!==!1&&w.push(x);return w}function m(){var w=s();if(!(NS!=t.charAt(0)||OS!=t.charAt(1))){for(var x=2;qo!=t.charAt(x)&&(OS!=t.charAt(x)||NS!=t.charAt(x+1));)++x;if(x+=2,qo===t.charAt(x-1))return l("End of comment missing");var C=t.slice(2,x-2);return i+=2,r(C),t=t.slice(x),i+=2,w({type:C7,comment:C})}}function g(){var w=s(),x=u(b7);if(x){if(m(),!u(E7))return l("property missing ':'");var C=u(S7),E=w({type:I7,property:MS(x[0].replace(LS,qo)),value:C?MS(C[0].replace(LS,qo)):qo});return u(T7),E}}function _(){var w=[];d(w);for(var x;x=g();)x!==!1&&(w.push(x),d(w));return w}return h(),_()};function MS(t){return t?t.replace(k7,qo):qo}var R7=jc&&jc.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ow,"__esModule",{value:!0});Ow.default=N7;var L7=R7(A7);function N7(t,e){var n=null;if(!t||typeof t!="string")return n;var i=(0,L7.default)(t),r=typeof e=="function";return i.forEach(function(s){if(s.type==="declaration"){var o=s.property,l=s.value;r?e(o,l,s):l&&(n=n||{},n[o]=l)}}),n}var Qm={};Object.defineProperty(Qm,"__esModule",{value:!0});Qm.camelCase=void 0;var O7=/^--[a-zA-Z0-9_-]+$/,M7=/-([a-z])/g,D7=/^[^-]+$/,F7=/^-(webkit|moz|ms|o|khtml)-/,j7=/^-(ms)-/,V7=function(t){return!t||D7.test(t)||O7.test(t)},z7=function(t,e){return e.toUpperCase()},DS=function(t,e){return"".concat(e,"-")},B7=function(t,e){return e===void 0&&(e={}),V7(t)?t:(t=t.toLowerCase(),e.reactCompat?t=t.replace(j7,DS):t=t.replace(F7,DS),t.replace(M7,z7))};Qm.camelCase=B7;var U7=jc&&jc.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},$7=U7(Ow),H7=Qm;function uv(t,e){var n={};return!t||typeof t!="string"||(0,$7.default)(t,function(i,r){i&&r&&(n[(0,H7.camelCase)(i,e)]=r)}),n}uv.default=uv;var W7=uv;const q7=Zp(W7),GA=KA("end"),Mw=KA("start");function KA(t){return e;function e(n){const i=n&&n.position&&n.position[t]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function G7(t){const e=Mw(t),n=GA(t);if(e&&n)return{start:e,end:n}}function Mc(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?FS(t.position):"start"in t||"end"in t?FS(t):"line"in t||"column"in t?cv(t):""}function cv(t){return jS(t&&t.line)+":"+jS(t&&t.column)}function FS(t){return cv(t&&t.start)+"-"+cv(t&&t.end)}function jS(t){return t&&typeof t=="number"?t:1}class Tn extends Error{constructor(e,n,i){super(),typeof n=="string"&&(i=n,n=void 0);let r="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?r=e:!s.cause&&e&&(o=!0,r=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof i=="string"){const u=i.indexOf(":");u===-1?s.ruleId=i:(s.source=i.slice(0,u),s.ruleId=i.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const l=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file,this.message=r,this.line=l?l.line:void 0,this.name=Mc(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Tn.prototype.file="";Tn.prototype.name="";Tn.prototype.reason="";Tn.prototype.message="";Tn.prototype.stack="";Tn.prototype.column=void 0;Tn.prototype.line=void 0;Tn.prototype.ancestors=void 0;Tn.prototype.cause=void 0;Tn.prototype.fatal=void 0;Tn.prototype.place=void 0;Tn.prototype.ruleId=void 0;Tn.prototype.source=void 0;const Dw={}.hasOwnProperty,K7=new Map,Z7=/[A-Z]/g,Y7=new Set(["table","tbody","thead","tfoot","tr"]),Q7=new Set(["td","th"]),ZA="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function X7(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let i;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=o$(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=s$(n,e.jsx,e.jsxs)}const r={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:i,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Nw:y7,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=YA(r,t,void 0);return s&&typeof s!="string"?s:r.create(t,r.Fragment,{children:s||void 0},void 0)}function YA(t,e,n){if(e.type==="element")return J7(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return e$(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return n$(t,e,n);if(e.type==="mdxjsEsm")return t$(t,e);if(e.type==="root")return i$(t,e,n);if(e.type==="text")return r$(t,e)}function J7(t,e,n){const i=t.schema;let r=i;e.tagName.toLowerCase()==="svg"&&i.space==="html"&&(r=Nw,t.schema=r),t.ancestors.push(e);const s=XA(t,e.tagName,!1),o=a$(t,e);let l=jw(t,e);return Y7.has(e.tagName)&&(l=l.filter(function(u){return typeof u=="string"?!l7(u):!0})),QA(t,o,s,e),Fw(o,l),t.ancestors.pop(),t.schema=i,t.create(e,s,o,n)}function e$(t,e){if(e.data&&e.data.estree&&t.evaluater){const i=e.data.estree.body[0];return i.type,t.evaluater.evaluateExpression(i.expression)}vh(t,e.position)}function t$(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);vh(t,e.position)}function n$(t,e,n){const i=t.schema;let r=i;e.name==="svg"&&i.space==="html"&&(r=Nw,t.schema=r),t.ancestors.push(e);const s=e.name===null?t.Fragment:XA(t,e.name,!0),o=l$(t,e),l=jw(t,e);return QA(t,o,s,e),Fw(o,l),t.ancestors.pop(),t.schema=i,t.create(e,s,o,n)}function i$(t,e,n){const i={};return Fw(i,jw(t,e)),t.create(e,t.Fragment,i,n)}function r$(t,e){return e.value}function QA(t,e,n,i){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=i)}function Fw(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function s$(t,e,n){return i;function i(r,s,o,l){const h=Array.isArray(o.children)?n:e;return l?h(s,o,l):h(s,o)}}function o$(t,e){return n;function n(i,r,s,o){const l=Array.isArray(s.children),u=Mw(i);return e(r,s,o,l,{columnNumber:u?u.column-1:void 0,fileName:t,lineNumber:u?u.line:void 0},void 0)}}function a$(t,e){const n={};let i,r;for(r in e.properties)if(r!=="children"&&Dw.call(e.properties,r)){const s=u$(t,r,e.properties[r]);if(s){const[o,l]=s;t.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&Q7.has(e.tagName)?i=l:n[o]=l}}if(i){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return n}function l$(t,e){const n={};for(const i of e.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&t.evaluater){const s=i.data.estree.body[0];s.type;const o=s.expression;o.type;const l=o.properties[0];l.type,Object.assign(n,t.evaluater.evaluateExpression(l.argument))}else vh(t,e.position);else{const r=i.name;let s;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&t.evaluater){const l=i.value.data.estree.body[0];l.type,s=t.evaluater.evaluateExpression(l.expression)}else vh(t,e.position);else s=i.value===null?!0:i.value;n[r]=s}return n}function jw(t,e){const n=[];let i=-1;const r=t.passKeys?new Map:K7;for(;++i<e.children.length;){const s=e.children[i];let o;if(t.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const h=r.get(u)||0;o=u+"-"+h,r.set(u,h+1)}}const l=YA(t,s,o);l!==void 0&&n.push(l)}return n}function u$(t,e,n){const i=m7(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=i.commaSeparated?i7(n):v7(n)),i.property==="style"){let r=typeof n=="object"?n:c$(t,String(n));return t.stylePropertyNameCase==="css"&&(r=h$(r)),["style",r]}return[t.elementAttributeNameCase==="react"&&i.space?d7[i.property]||i.property:i.attribute,n]}}function c$(t,e){try{return q7(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const i=n,r=new Tn("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=t.filePath||void 0,r.url=ZA+"#cannot-parse-style-attribute",r}}function XA(t,e,n){let i;if(!n)i={type:"Literal",value:e};else if(e.includes(".")){const r=e.split(".");let s=-1,o;for(;++s<r.length;){const l=CS(r[s])?{type:"Identifier",name:r[s]}:{type:"Literal",value:r[s]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(s&&l.type==="Literal"),optional:!1}:l}i=o}else i=CS(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(i.type==="Literal"){const r=i.value;return Dw.call(t.components,r)?t.components[r]:r}if(t.evaluater)return t.evaluater.evaluateExpression(i);vh(t)}function vh(t,e){const n=new Tn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=ZA+"#cannot-handle-mdx-estrees-without-createevaluater",n}function h$(t){const e={};let n;for(n in t)Dw.call(t,n)&&(e[d$(n)]=t[n]);return e}function d$(t){let e=t.replace(Z7,f$);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function f$(t){return"-"+t.toLowerCase()}const d_={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},p$={};function m$(t,e){const n=p$,i=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,r=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return JA(t,i,r)}function JA(t,e,n){if(g$(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return VS(t.children,e,n)}return Array.isArray(t)?VS(t,e,n):""}function VS(t,e,n){const i=[];let r=-1;for(;++r<t.length;)i[r]=JA(t[r],e,n);return i.join("")}function g$(t){return!!(t&&typeof t=="object")}const zS=document.createElement("i");function Vw(t){const e="&"+t+";";zS.innerHTML=e;const n=zS.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Ar(t,e,n,i){const r=t.length;let s=0,o;if(e<0?e=-e>r?0:r+e:e=e>r?r:e,n=n>0?n:0,i.length<1e4)o=Array.from(i),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<i.length;)o=i.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function Ti(t,e){return t.length>0?(Ar(t,t.length,0,e),t):e}const BS={}.hasOwnProperty;function _$(t){const e={};let n=-1;for(;++n<t.length;)y$(e,t[n]);return e}function y$(t,e){let n;for(n in e){const r=(BS.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){BS.call(r,o)||(r[o]=[]);const l=s[o];v$(r[o],Array.isArray(l)?l:l?[l]:[])}}}function v$(t,e){let n=-1;const i=[];for(;++n<e.length;)(e[n].add==="after"?t:i).push(e[n]);Ar(t,0,0,i)}function eR(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function Cl(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const vr=Po(/[A-Za-z]/),ri=Po(/[\dA-Za-z]/),w$=Po(/[#-'*+\--9=?A-Z^-~]/);function hv(t){return t!==null&&(t<32||t===127)}const dv=Po(/\d/),x$=Po(/[\dA-Fa-f]/),b$=Po(/[!-/:-@[-`{-~]/);function ke(t){return t!==null&&t<-2}function Zn(t){return t!==null&&(t<0||t===32)}function Qe(t){return t===-2||t===-1||t===32}const E$=Po(new RegExp("\\p{P}|\\p{S}","u")),S$=Po(/\s/);function Po(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function hu(t){const e=[];let n=-1,i=0,r=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&ri(t.charCodeAt(n+1))&&ri(t.charCodeAt(n+2)))r=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const l=t.charCodeAt(n+1);s<56320&&l>56319&&l<57344?(o=String.fromCharCode(s,l),r=1):o="�"}else o=String.fromCharCode(s);o&&(e.push(t.slice(i,n),encodeURIComponent(o)),i=n+r+1,o=""),r&&(n+=r,r=0)}return e.join("")+t.slice(i)}function ct(t,e,n,i){const r=i?i-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return Qe(u)?(t.enter(n),l(u)):e(u)}function l(u){return Qe(u)&&s++<r?(t.consume(u),l):(t.exit(n),e(u))}}const T$={tokenize:k$};function k$(t){const e=t.attempt(this.parser.constructs.contentInitial,i,r);let n;return e;function i(l){if(l===null){t.consume(l);return}return t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),ct(t,e,"linePrefix")}function r(l){return t.enter("paragraph"),s(l)}function s(l){const u=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(l)}function o(l){if(l===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(l);return}return ke(l)?(t.consume(l),t.exit("chunkText"),s):(t.consume(l),o)}}const P$={tokenize:C$},US={tokenize:I$};function C$(t){const e=this,n=[];let i=0,r,s,o;return l;function l(P){if(i<n.length){const j=n[i];return e.containerState=j[1],t.attempt(j[0].continuation,u,h)(P)}return h(P)}function u(P){if(i++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,r&&k();const j=e.events.length;let W=j,z;for(;W--;)if(e.events[W][0]==="exit"&&e.events[W][1].type==="chunkFlow"){z=e.events[W][1].end;break}E(i);let R=j;for(;R<e.events.length;)e.events[R][1].end={...z},R++;return Ar(e.events,W+1,0,e.events.slice(j)),e.events.length=R,h(P)}return l(P)}function h(P){if(i===n.length){if(!r)return g(P);if(r.currentConstruct&&r.currentConstruct.concrete)return w(P);e.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(US,d,m)(P)}function d(P){return r&&k(),E(i),g(P)}function m(P){return e.parser.lazy[e.now().line]=i!==n.length,o=e.now().offset,w(P)}function g(P){return e.containerState={},t.attempt(US,_,w)(P)}function _(P){return i++,n.push([e.currentConstruct,e.containerState]),g(P)}function w(P){if(P===null){r&&k(),E(0),t.consume(P);return}return r=r||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:s}),x(P)}function x(P){if(P===null){C(t.exit("chunkFlow"),!0),E(0),t.consume(P);return}return ke(P)?(t.consume(P),C(t.exit("chunkFlow")),i=0,e.interrupt=void 0,l):(t.consume(P),x)}function C(P,j){const W=e.sliceStream(P);if(j&&W.push(null),P.previous=s,s&&(s.next=P),s=P,r.defineSkip(P.start),r.write(W),e.parser.lazy[P.start.line]){let z=r.events.length;for(;z--;)if(r.events[z][1].start.offset<o&&(!r.events[z][1].end||r.events[z][1].end.offset>o))return;const R=e.events.length;let I=R,N,F;for(;I--;)if(e.events[I][0]==="exit"&&e.events[I][1].type==="chunkFlow"){if(N){F=e.events[I][1].end;break}N=!0}for(E(i),z=R;z<e.events.length;)e.events[z][1].end={...F},z++;Ar(e.events,I+1,0,e.events.slice(R)),e.events.length=z}}function E(P){let j=n.length;for(;j-- >P;){const W=n[j];e.containerState=W[1],W[0].exit.call(e,t)}n.length=P}function k(){r.write([null]),s=void 0,r=void 0,e.containerState._closeFlow=void 0}}function I$(t,e,n){return ct(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function $S(t){if(t===null||Zn(t)||S$(t))return 1;if(E$(t))return 2}function zw(t,e,n){const i=[];let r=-1;for(;++r<t.length;){const s=t[r].resolveAll;s&&!i.includes(s)&&(e=s(e,n),i.push(s))}return e}const fv={name:"attention",resolveAll:A$,tokenize:R$};function A$(t,e){let n=-1,i,r,s,o,l,u,h,d;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(i=n;i--;)if(t[i][0]==="exit"&&t[i][1].type==="attentionSequence"&&t[i][1]._open&&e.sliceSerialize(t[i][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[i][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[i][1].end.offset-t[i][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;u=t[i][1].end.offset-t[i][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const m={...t[i][1].end},g={...t[n][1].start};HS(m,-u),HS(g,u),o={type:u>1?"strongSequence":"emphasisSequence",start:m,end:{...t[i][1].end}},l={type:u>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:g},s={type:u>1?"strongText":"emphasisText",start:{...t[i][1].end},end:{...t[n][1].start}},r={type:u>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},t[i][1].end={...o.start},t[n][1].start={...l.end},h=[],t[i][1].end.offset-t[i][1].start.offset&&(h=Ti(h,[["enter",t[i][1],e],["exit",t[i][1],e]])),h=Ti(h,[["enter",r,e],["enter",o,e],["exit",o,e],["enter",s,e]]),h=Ti(h,zw(e.parser.constructs.insideSpan.null,t.slice(i+1,n),e)),h=Ti(h,[["exit",s,e],["enter",l,e],["exit",l,e],["exit",r,e]]),t[n][1].end.offset-t[n][1].start.offset?(d=2,h=Ti(h,[["enter",t[n][1],e],["exit",t[n][1],e]])):d=0,Ar(t,i-1,n-i+3,h),n=i+h.length-d-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function R$(t,e){const n=this.parser.constructs.attentionMarkers.null,i=this.previous,r=$S(i);let s;return o;function o(u){return s=u,t.enter("attentionSequence"),l(u)}function l(u){if(u===s)return t.consume(u),l;const h=t.exit("attentionSequence"),d=$S(u),m=!d||d===2&&r||n.includes(u),g=!r||r===2&&d||n.includes(i);return h._open=!!(s===42?m:m&&(r||!g)),h._close=!!(s===42?g:g&&(d||!m)),e(u)}}function HS(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const L$={name:"autolink",tokenize:N$};function N$(t,e,n){let i=0;return r;function r(_){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(_),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(_){return vr(_)?(t.consume(_),o):_===64?n(_):h(_)}function o(_){return _===43||_===45||_===46||ri(_)?(i=1,l(_)):h(_)}function l(_){return _===58?(t.consume(_),i=0,u):(_===43||_===45||_===46||ri(_))&&i++<32?(t.consume(_),l):(i=0,h(_))}function u(_){return _===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(_),t.exit("autolinkMarker"),t.exit("autolink"),e):_===null||_===32||_===60||hv(_)?n(_):(t.consume(_),u)}function h(_){return _===64?(t.consume(_),d):w$(_)?(t.consume(_),h):n(_)}function d(_){return ri(_)?m(_):n(_)}function m(_){return _===46?(t.consume(_),i=0,d):_===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(_),t.exit("autolinkMarker"),t.exit("autolink"),e):g(_)}function g(_){if((_===45||ri(_))&&i++<63){const w=_===45?g:m;return t.consume(_),w}return n(_)}}const Xm={partial:!0,tokenize:O$};function O$(t,e,n){return i;function i(s){return Qe(s)?ct(t,r,"linePrefix")(s):r(s)}function r(s){return s===null||ke(s)?e(s):n(s)}}const tR={continuation:{tokenize:D$},exit:F$,name:"blockQuote",tokenize:M$};function M$(t,e,n){const i=this;return r;function r(o){if(o===62){const l=i.containerState;return l.open||(t.enter("blockQuote",{_container:!0}),l.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Qe(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function D$(t,e,n){const i=this;return r;function r(o){return Qe(o)?ct(t,s,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(tR,e,n)(o)}}function F$(t){t.exit("blockQuote")}const nR={name:"characterEscape",tokenize:j$};function j$(t,e,n){return i;function i(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),r}function r(s){return b$(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const iR={name:"characterReference",tokenize:V$};function V$(t,e,n){const i=this;let r=0,s,o;return l;function l(m){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(m),t.exit("characterReferenceMarker"),u}function u(m){return m===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(m),t.exit("characterReferenceMarkerNumeric"),h):(t.enter("characterReferenceValue"),s=31,o=ri,d(m))}function h(m){return m===88||m===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(m),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=x$,d):(t.enter("characterReferenceValue"),s=7,o=dv,d(m))}function d(m){if(m===59&&r){const g=t.exit("characterReferenceValue");return o===ri&&!Vw(i.sliceSerialize(g))?n(m):(t.enter("characterReferenceMarker"),t.consume(m),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(m)&&r++<s?(t.consume(m),d):n(m)}}const WS={partial:!0,tokenize:B$},qS={concrete:!0,name:"codeFenced",tokenize:z$};function z$(t,e,n){const i=this,r={partial:!0,tokenize:W};let s=0,o=0,l;return u;function u(z){return h(z)}function h(z){const R=i.events[i.events.length-1];return s=R&&R[1].type==="linePrefix"?R[2].sliceSerialize(R[1],!0).length:0,l=z,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),d(z)}function d(z){return z===l?(o++,t.consume(z),d):o<3?n(z):(t.exit("codeFencedFenceSequence"),Qe(z)?ct(t,m,"whitespace")(z):m(z))}function m(z){return z===null||ke(z)?(t.exit("codeFencedFence"),i.interrupt?e(z):t.check(WS,x,j)(z)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),g(z))}function g(z){return z===null||ke(z)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),m(z)):Qe(z)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),ct(t,_,"whitespace")(z)):z===96&&z===l?n(z):(t.consume(z),g)}function _(z){return z===null||ke(z)?m(z):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),w(z))}function w(z){return z===null||ke(z)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),m(z)):z===96&&z===l?n(z):(t.consume(z),w)}function x(z){return t.attempt(r,j,C)(z)}function C(z){return t.enter("lineEnding"),t.consume(z),t.exit("lineEnding"),E}function E(z){return s>0&&Qe(z)?ct(t,k,"linePrefix",s+1)(z):k(z)}function k(z){return z===null||ke(z)?t.check(WS,x,j)(z):(t.enter("codeFlowValue"),P(z))}function P(z){return z===null||ke(z)?(t.exit("codeFlowValue"),k(z)):(t.consume(z),P)}function j(z){return t.exit("codeFenced"),e(z)}function W(z,R,I){let N=0;return F;function F(te){return z.enter("lineEnding"),z.consume(te),z.exit("lineEnding"),D}function D(te){return z.enter("codeFencedFence"),Qe(te)?ct(z,B,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(te):B(te)}function B(te){return te===l?(z.enter("codeFencedFenceSequence"),V(te)):I(te)}function V(te){return te===l?(N++,z.consume(te),V):N>=o?(z.exit("codeFencedFenceSequence"),Qe(te)?ct(z,ee,"whitespace")(te):ee(te)):I(te)}function ee(te){return te===null||ke(te)?(z.exit("codeFencedFence"),R(te)):I(te)}}}function B$(t,e,n){const i=this;return r;function r(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return i.parser.lazy[i.now().line]?n(o):e(o)}}const f_={name:"codeIndented",tokenize:$$},U$={partial:!0,tokenize:H$};function $$(t,e,n){const i=this;return r;function r(h){return t.enter("codeIndented"),ct(t,s,"linePrefix",5)(h)}function s(h){const d=i.events[i.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?o(h):n(h)}function o(h){return h===null?u(h):ke(h)?t.attempt(U$,o,u)(h):(t.enter("codeFlowValue"),l(h))}function l(h){return h===null||ke(h)?(t.exit("codeFlowValue"),o(h)):(t.consume(h),l)}function u(h){return t.exit("codeIndented"),e(h)}}function H$(t,e,n){const i=this;return r;function r(o){return i.parser.lazy[i.now().line]?n(o):ke(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),r):ct(t,s,"linePrefix",5)(o)}function s(o){const l=i.events[i.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(o):ke(o)?r(o):n(o)}}const W$={name:"codeText",previous:G$,resolve:q$,tokenize:K$};function q$(t){let e=t.length-4,n=3,i,r;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(i=n;++i<e;)if(t[i][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(i=n-1,e++;++i<=e;)r===void 0?i!==e&&t[i][1].type!=="lineEnding"&&(r=i):(i===e||t[i][1].type==="lineEnding")&&(t[r][1].type="codeTextData",i!==r+2&&(t[r][1].end=t[i-1][1].end,t.splice(r+2,i-r-2),e-=i-r-2,i=r+2),r=void 0);return t}function G$(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function K$(t,e,n){let i=0,r,s;return o;function o(m){return t.enter("codeText"),t.enter("codeTextSequence"),l(m)}function l(m){return m===96?(t.consume(m),i++,l):(t.exit("codeTextSequence"),u(m))}function u(m){return m===null?n(m):m===32?(t.enter("space"),t.consume(m),t.exit("space"),u):m===96?(s=t.enter("codeTextSequence"),r=0,d(m)):ke(m)?(t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),u):(t.enter("codeTextData"),h(m))}function h(m){return m===null||m===32||m===96||ke(m)?(t.exit("codeTextData"),u(m)):(t.consume(m),h)}function d(m){return m===96?(t.consume(m),r++,d):r===i?(t.exit("codeTextSequence"),t.exit("codeText"),e(m)):(s.type="codeTextData",h(m))}}class Z${constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const i=n??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(e,i):e>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(e,n,i){const r=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return i&&nc(this.left,i),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),nc(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),nc(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);nc(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);nc(this.left,n.reverse())}}}function nc(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function rR(t){const e={};let n=-1,i,r,s,o,l,u,h;const d=new Z$(t);for(;++n<d.length;){for(;n in e;)n=e[n];if(i=d.get(n),n&&i[1].type==="chunkFlow"&&d.get(n-1)[1].type==="listItemPrefix"&&(u=i[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(i[0]==="enter")i[1].contentType&&(Object.assign(e,Y$(d,n)),n=e[n],h=!0);else if(i[1]._container){for(s=n,r=void 0;s--;)if(o=d.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(r&&(d.get(r)[1].type="lineEndingBlank"),o[1].type="lineEnding",r=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;r&&(i[1].end={...d.get(r)[1].start},l=d.slice(r,n),l.unshift(i),d.splice(r,n-r+1,l))}}return Ar(t,0,Number.POSITIVE_INFINITY,d.slice(0)),!h}function Y$(t,e){const n=t.get(e)[1],i=t.get(e)[2];let r=e-1;const s=[];let o=n._tokenizer;o||(o=i.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,u=[],h={};let d,m,g=-1,_=n,w=0,x=0;const C=[x];for(;_;){for(;t.get(++r)[1]!==_;);s.push(r),_._tokenizer||(d=i.sliceStream(_),_.next||d.push(null),m&&o.defineSkip(_.start),_._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(d),_._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),m=_,_=_.next}for(_=n;++g<l.length;)l[g][0]==="exit"&&l[g-1][0]==="enter"&&l[g][1].type===l[g-1][1].type&&l[g][1].start.line!==l[g][1].end.line&&(x=g+1,C.push(x),_._tokenizer=void 0,_.previous=void 0,_=_.next);for(o.events=[],_?(_._tokenizer=void 0,_.previous=void 0):C.pop(),g=C.length;g--;){const E=l.slice(C[g],C[g+1]),k=s.pop();u.push([k,k+E.length-1]),t.splice(k,2,E)}for(u.reverse(),g=-1;++g<u.length;)h[w+u[g][0]]=w+u[g][1],w+=u[g][1]-u[g][0]-1;return h}const Q$={resolve:J$,tokenize:eH},X$={partial:!0,tokenize:tH};function J$(t){return rR(t),t}function eH(t,e){let n;return i;function i(l){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),r(l)}function r(l){return l===null?s(l):ke(l)?t.check(X$,o,s)(l):(t.consume(l),r)}function s(l){return t.exit("chunkContent"),t.exit("content"),e(l)}function o(l){return t.consume(l),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}}function tH(t,e,n){const i=this;return r;function r(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),ct(t,s,"linePrefix")}function s(o){if(o===null||ke(o))return n(o);const l=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(o):t.interrupt(i.parser.constructs.flow,n,e)(o)}}function sR(t,e,n,i,r,s,o,l,u){const h=u||Number.POSITIVE_INFINITY;let d=0;return m;function m(E){return E===60?(t.enter(i),t.enter(r),t.enter(s),t.consume(E),t.exit(s),g):E===null||E===32||E===41||hv(E)?n(E):(t.enter(i),t.enter(o),t.enter(l),t.enter("chunkString",{contentType:"string"}),x(E))}function g(E){return E===62?(t.enter(s),t.consume(E),t.exit(s),t.exit(r),t.exit(i),e):(t.enter(l),t.enter("chunkString",{contentType:"string"}),_(E))}function _(E){return E===62?(t.exit("chunkString"),t.exit(l),g(E)):E===null||E===60||ke(E)?n(E):(t.consume(E),E===92?w:_)}function w(E){return E===60||E===62||E===92?(t.consume(E),_):_(E)}function x(E){return!d&&(E===null||E===41||Zn(E))?(t.exit("chunkString"),t.exit(l),t.exit(o),t.exit(i),e(E)):d<h&&E===40?(t.consume(E),d++,x):E===41?(t.consume(E),d--,x):E===null||E===32||E===40||hv(E)?n(E):(t.consume(E),E===92?C:x)}function C(E){return E===40||E===41||E===92?(t.consume(E),x):x(E)}}function oR(t,e,n,i,r,s){const o=this;let l=0,u;return h;function h(_){return t.enter(i),t.enter(r),t.consume(_),t.exit(r),t.enter(s),d}function d(_){return l>999||_===null||_===91||_===93&&!u||_===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(_):_===93?(t.exit(s),t.enter(r),t.consume(_),t.exit(r),t.exit(i),e):ke(_)?(t.enter("lineEnding"),t.consume(_),t.exit("lineEnding"),d):(t.enter("chunkString",{contentType:"string"}),m(_))}function m(_){return _===null||_===91||_===93||ke(_)||l++>999?(t.exit("chunkString"),d(_)):(t.consume(_),u||(u=!Qe(_)),_===92?g:m)}function g(_){return _===91||_===92||_===93?(t.consume(_),l++,m):m(_)}}function aR(t,e,n,i,r,s){let o;return l;function l(g){return g===34||g===39||g===40?(t.enter(i),t.enter(r),t.consume(g),t.exit(r),o=g===40?41:g,u):n(g)}function u(g){return g===o?(t.enter(r),t.consume(g),t.exit(r),t.exit(i),e):(t.enter(s),h(g))}function h(g){return g===o?(t.exit(s),u(o)):g===null?n(g):ke(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),ct(t,h,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),d(g))}function d(g){return g===o||g===null||ke(g)?(t.exit("chunkString"),h(g)):(t.consume(g),g===92?m:d)}function m(g){return g===o||g===92?(t.consume(g),d):d(g)}}function Dc(t,e){let n;return i;function i(r){return ke(r)?(t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),n=!0,i):Qe(r)?ct(t,i,n?"linePrefix":"lineSuffix")(r):e(r)}}const nH={name:"definition",tokenize:rH},iH={partial:!0,tokenize:sH};function rH(t,e,n){const i=this;let r;return s;function s(_){return t.enter("definition"),o(_)}function o(_){return oR.call(i,t,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(_)}function l(_){return r=Cl(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),_===58?(t.enter("definitionMarker"),t.consume(_),t.exit("definitionMarker"),u):n(_)}function u(_){return Zn(_)?Dc(t,h)(_):h(_)}function h(_){return sR(t,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(_)}function d(_){return t.attempt(iH,m,m)(_)}function m(_){return Qe(_)?ct(t,g,"whitespace")(_):g(_)}function g(_){return _===null||ke(_)?(t.exit("definition"),i.parser.defined.push(r),e(_)):n(_)}}function sH(t,e,n){return i;function i(l){return Zn(l)?Dc(t,r)(l):n(l)}function r(l){return aR(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function s(l){return Qe(l)?ct(t,o,"whitespace")(l):o(l)}function o(l){return l===null||ke(l)?e(l):n(l)}}const oH={name:"hardBreakEscape",tokenize:aH};function aH(t,e,n){return i;function i(s){return t.enter("hardBreakEscape"),t.consume(s),r}function r(s){return ke(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const lH={name:"headingAtx",resolve:uH,tokenize:cH};function uH(t,e){let n=t.length-2,i=3,r,s;return t[i][1].type==="whitespace"&&(i+=2),n-2>i&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(i===n-1||n-4>i&&t[n-2][1].type==="whitespace")&&(n-=i+1===n?2:4),n>i&&(r={type:"atxHeadingText",start:t[i][1].start,end:t[n][1].end},s={type:"chunkText",start:t[i][1].start,end:t[n][1].end,contentType:"text"},Ar(t,i,n-i+1,[["enter",r,e],["enter",s,e],["exit",s,e],["exit",r,e]])),t}function cH(t,e,n){let i=0;return r;function r(d){return t.enter("atxHeading"),s(d)}function s(d){return t.enter("atxHeadingSequence"),o(d)}function o(d){return d===35&&i++<6?(t.consume(d),o):d===null||Zn(d)?(t.exit("atxHeadingSequence"),l(d)):n(d)}function l(d){return d===35?(t.enter("atxHeadingSequence"),u(d)):d===null||ke(d)?(t.exit("atxHeading"),e(d)):Qe(d)?ct(t,l,"whitespace")(d):(t.enter("atxHeadingText"),h(d))}function u(d){return d===35?(t.consume(d),u):(t.exit("atxHeadingSequence"),l(d))}function h(d){return d===null||d===35||Zn(d)?(t.exit("atxHeadingText"),l(d)):(t.consume(d),h)}}const hH=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],GS=["pre","script","style","textarea"],dH={concrete:!0,name:"htmlFlow",resolveTo:mH,tokenize:gH},fH={partial:!0,tokenize:yH},pH={partial:!0,tokenize:_H};function mH(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function gH(t,e,n){const i=this;let r,s,o,l,u;return h;function h(U){return d(U)}function d(U){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(U),m}function m(U){return U===33?(t.consume(U),g):U===47?(t.consume(U),s=!0,x):U===63?(t.consume(U),r=3,i.interrupt?e:M):vr(U)?(t.consume(U),o=String.fromCharCode(U),C):n(U)}function g(U){return U===45?(t.consume(U),r=2,_):U===91?(t.consume(U),r=5,l=0,w):vr(U)?(t.consume(U),r=4,i.interrupt?e:M):n(U)}function _(U){return U===45?(t.consume(U),i.interrupt?e:M):n(U)}function w(U){const be="CDATA[";return U===be.charCodeAt(l++)?(t.consume(U),l===be.length?i.interrupt?e:B:w):n(U)}function x(U){return vr(U)?(t.consume(U),o=String.fromCharCode(U),C):n(U)}function C(U){if(U===null||U===47||U===62||Zn(U)){const be=U===47,we=o.toLowerCase();return!be&&!s&&GS.includes(we)?(r=1,i.interrupt?e(U):B(U)):hH.includes(o.toLowerCase())?(r=6,be?(t.consume(U),E):i.interrupt?e(U):B(U)):(r=7,i.interrupt&&!i.parser.lazy[i.now().line]?n(U):s?k(U):P(U))}return U===45||ri(U)?(t.consume(U),o+=String.fromCharCode(U),C):n(U)}function E(U){return U===62?(t.consume(U),i.interrupt?e:B):n(U)}function k(U){return Qe(U)?(t.consume(U),k):F(U)}function P(U){return U===47?(t.consume(U),F):U===58||U===95||vr(U)?(t.consume(U),j):Qe(U)?(t.consume(U),P):F(U)}function j(U){return U===45||U===46||U===58||U===95||ri(U)?(t.consume(U),j):W(U)}function W(U){return U===61?(t.consume(U),z):Qe(U)?(t.consume(U),W):P(U)}function z(U){return U===null||U===60||U===61||U===62||U===96?n(U):U===34||U===39?(t.consume(U),u=U,R):Qe(U)?(t.consume(U),z):I(U)}function R(U){return U===u?(t.consume(U),u=null,N):U===null||ke(U)?n(U):(t.consume(U),R)}function I(U){return U===null||U===34||U===39||U===47||U===60||U===61||U===62||U===96||Zn(U)?W(U):(t.consume(U),I)}function N(U){return U===47||U===62||Qe(U)?P(U):n(U)}function F(U){return U===62?(t.consume(U),D):n(U)}function D(U){return U===null||ke(U)?B(U):Qe(U)?(t.consume(U),D):n(U)}function B(U){return U===45&&r===2?(t.consume(U),ae):U===60&&r===1?(t.consume(U),ue):U===62&&r===4?(t.consume(U),fe):U===63&&r===3?(t.consume(U),M):U===93&&r===5?(t.consume(U),he):ke(U)&&(r===6||r===7)?(t.exit("htmlFlowData"),t.check(fH,ce,V)(U)):U===null||ke(U)?(t.exit("htmlFlowData"),V(U)):(t.consume(U),B)}function V(U){return t.check(pH,ee,ce)(U)}function ee(U){return t.enter("lineEnding"),t.consume(U),t.exit("lineEnding"),te}function te(U){return U===null||ke(U)?V(U):(t.enter("htmlFlowData"),B(U))}function ae(U){return U===45?(t.consume(U),M):B(U)}function ue(U){return U===47?(t.consume(U),o="",K):B(U)}function K(U){if(U===62){const be=o.toLowerCase();return GS.includes(be)?(t.consume(U),fe):B(U)}return vr(U)&&o.length<8?(t.consume(U),o+=String.fromCharCode(U),K):B(U)}function he(U){return U===93?(t.consume(U),M):B(U)}function M(U){return U===62?(t.consume(U),fe):U===45&&r===2?(t.consume(U),M):B(U)}function fe(U){return U===null||ke(U)?(t.exit("htmlFlowData"),ce(U)):(t.consume(U),fe)}function ce(U){return t.exit("htmlFlow"),e(U)}}function _H(t,e,n){const i=this;return r;function r(o){return ke(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return i.parser.lazy[i.now().line]?n(o):e(o)}}function yH(t,e,n){return i;function i(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),t.attempt(Xm,e,n)}}const vH={name:"htmlText",tokenize:wH};function wH(t,e,n){const i=this;let r,s,o;return l;function l(M){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(M),u}function u(M){return M===33?(t.consume(M),h):M===47?(t.consume(M),W):M===63?(t.consume(M),P):vr(M)?(t.consume(M),I):n(M)}function h(M){return M===45?(t.consume(M),d):M===91?(t.consume(M),s=0,w):vr(M)?(t.consume(M),k):n(M)}function d(M){return M===45?(t.consume(M),_):n(M)}function m(M){return M===null?n(M):M===45?(t.consume(M),g):ke(M)?(o=m,ue(M)):(t.consume(M),m)}function g(M){return M===45?(t.consume(M),_):m(M)}function _(M){return M===62?ae(M):M===45?g(M):m(M)}function w(M){const fe="CDATA[";return M===fe.charCodeAt(s++)?(t.consume(M),s===fe.length?x:w):n(M)}function x(M){return M===null?n(M):M===93?(t.consume(M),C):ke(M)?(o=x,ue(M)):(t.consume(M),x)}function C(M){return M===93?(t.consume(M),E):x(M)}function E(M){return M===62?ae(M):M===93?(t.consume(M),E):x(M)}function k(M){return M===null||M===62?ae(M):ke(M)?(o=k,ue(M)):(t.consume(M),k)}function P(M){return M===null?n(M):M===63?(t.consume(M),j):ke(M)?(o=P,ue(M)):(t.consume(M),P)}function j(M){return M===62?ae(M):P(M)}function W(M){return vr(M)?(t.consume(M),z):n(M)}function z(M){return M===45||ri(M)?(t.consume(M),z):R(M)}function R(M){return ke(M)?(o=R,ue(M)):Qe(M)?(t.consume(M),R):ae(M)}function I(M){return M===45||ri(M)?(t.consume(M),I):M===47||M===62||Zn(M)?N(M):n(M)}function N(M){return M===47?(t.consume(M),ae):M===58||M===95||vr(M)?(t.consume(M),F):ke(M)?(o=N,ue(M)):Qe(M)?(t.consume(M),N):ae(M)}function F(M){return M===45||M===46||M===58||M===95||ri(M)?(t.consume(M),F):D(M)}function D(M){return M===61?(t.consume(M),B):ke(M)?(o=D,ue(M)):Qe(M)?(t.consume(M),D):N(M)}function B(M){return M===null||M===60||M===61||M===62||M===96?n(M):M===34||M===39?(t.consume(M),r=M,V):ke(M)?(o=B,ue(M)):Qe(M)?(t.consume(M),B):(t.consume(M),ee)}function V(M){return M===r?(t.consume(M),r=void 0,te):M===null?n(M):ke(M)?(o=V,ue(M)):(t.consume(M),V)}function ee(M){return M===null||M===34||M===39||M===60||M===61||M===96?n(M):M===47||M===62||Zn(M)?N(M):(t.consume(M),ee)}function te(M){return M===47||M===62||Zn(M)?N(M):n(M)}function ae(M){return M===62?(t.consume(M),t.exit("htmlTextData"),t.exit("htmlText"),e):n(M)}function ue(M){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(M),t.exit("lineEnding"),K}function K(M){return Qe(M)?ct(t,he,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(M):he(M)}function he(M){return t.enter("htmlTextData"),o(M)}}const Bw={name:"labelEnd",resolveAll:SH,resolveTo:TH,tokenize:kH},xH={tokenize:PH},bH={tokenize:CH},EH={tokenize:IH};function SH(t){let e=-1;const n=[];for(;++e<t.length;){const i=t[e][1];if(n.push(t[e]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const r=i.type==="labelImage"?4:2;i.type="data",e+=r}}return t.length!==n.length&&Ar(t,0,t.length,n),t}function TH(t,e){let n=t.length,i=0,r,s,o,l;for(;n--;)if(r=t[n][1],s){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;t[n][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(s=n,r.type!=="labelLink")){i=2;break}}else r.type==="labelEnd"&&(o=n);const u={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},h={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},d={type:"labelText",start:{...t[s+i+2][1].end},end:{...t[o-2][1].start}};return l=[["enter",u,e],["enter",h,e]],l=Ti(l,t.slice(s+1,s+i+3)),l=Ti(l,[["enter",d,e]]),l=Ti(l,zw(e.parser.constructs.insideSpan.null,t.slice(s+i+4,o-3),e)),l=Ti(l,[["exit",d,e],t[o-2],t[o-1],["exit",h,e]]),l=Ti(l,t.slice(o+1)),l=Ti(l,[["exit",u,e]]),Ar(t,s,t.length,l),t}function kH(t,e,n){const i=this;let r=i.events.length,s,o;for(;r--;)if((i.events[r][1].type==="labelImage"||i.events[r][1].type==="labelLink")&&!i.events[r][1]._balanced){s=i.events[r][1];break}return l;function l(g){return s?s._inactive?m(g):(o=i.parser.defined.includes(Cl(i.sliceSerialize({start:s.end,end:i.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(g),t.exit("labelMarker"),t.exit("labelEnd"),u):n(g)}function u(g){return g===40?t.attempt(xH,d,o?d:m)(g):g===91?t.attempt(bH,d,o?h:m)(g):o?d(g):m(g)}function h(g){return t.attempt(EH,d,m)(g)}function d(g){return e(g)}function m(g){return s._balanced=!0,n(g)}}function PH(t,e,n){return i;function i(m){return t.enter("resource"),t.enter("resourceMarker"),t.consume(m),t.exit("resourceMarker"),r}function r(m){return Zn(m)?Dc(t,s)(m):s(m)}function s(m){return m===41?d(m):sR(t,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(m)}function o(m){return Zn(m)?Dc(t,u)(m):d(m)}function l(m){return n(m)}function u(m){return m===34||m===39||m===40?aR(t,h,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(m):d(m)}function h(m){return Zn(m)?Dc(t,d)(m):d(m)}function d(m){return m===41?(t.enter("resourceMarker"),t.consume(m),t.exit("resourceMarker"),t.exit("resource"),e):n(m)}}function CH(t,e,n){const i=this;return r;function r(l){return oR.call(i,t,s,o,"reference","referenceMarker","referenceString")(l)}function s(l){return i.parser.defined.includes(Cl(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?e(l):n(l)}function o(l){return n(l)}}function IH(t,e,n){return i;function i(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),r}function r(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const AH={name:"labelStartImage",resolveAll:Bw.resolveAll,tokenize:RH};function RH(t,e,n){const i=this;return r;function r(l){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(l),t.exit("labelImageMarker"),s}function s(l){return l===91?(t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(l):e(l)}}const LH={name:"labelStartLink",resolveAll:Bw.resolveAll,tokenize:NH};function NH(t,e,n){const i=this;return r;function r(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(o):e(o)}}const p_={name:"lineEnding",tokenize:OH};function OH(t,e){return n;function n(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),ct(t,e,"linePrefix")}}const zf={name:"thematicBreak",tokenize:MH};function MH(t,e,n){let i=0,r;return s;function s(h){return t.enter("thematicBreak"),o(h)}function o(h){return r=h,l(h)}function l(h){return h===r?(t.enter("thematicBreakSequence"),u(h)):i>=3&&(h===null||ke(h))?(t.exit("thematicBreak"),e(h)):n(h)}function u(h){return h===r?(t.consume(h),i++,u):(t.exit("thematicBreakSequence"),Qe(h)?ct(t,l,"whitespace")(h):l(h))}}const Vn={continuation:{tokenize:VH},exit:BH,name:"list",tokenize:jH},DH={partial:!0,tokenize:UH},FH={partial:!0,tokenize:zH};function jH(t,e,n){const i=this,r=i.events[i.events.length-1];let s=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,o=0;return l;function l(_){const w=i.containerState.type||(_===42||_===43||_===45?"listUnordered":"listOrdered");if(w==="listUnordered"?!i.containerState.marker||_===i.containerState.marker:dv(_)){if(i.containerState.type||(i.containerState.type=w,t.enter(w,{_container:!0})),w==="listUnordered")return t.enter("listItemPrefix"),_===42||_===45?t.check(zf,n,h)(_):h(_);if(!i.interrupt||_===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),u(_)}return n(_)}function u(_){return dv(_)&&++o<10?(t.consume(_),u):(!i.interrupt||o<2)&&(i.containerState.marker?_===i.containerState.marker:_===41||_===46)?(t.exit("listItemValue"),h(_)):n(_)}function h(_){return t.enter("listItemMarker"),t.consume(_),t.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||_,t.check(Xm,i.interrupt?n:d,t.attempt(DH,g,m))}function d(_){return i.containerState.initialBlankLine=!0,s++,g(_)}function m(_){return Qe(_)?(t.enter("listItemPrefixWhitespace"),t.consume(_),t.exit("listItemPrefixWhitespace"),g):n(_)}function g(_){return i.containerState.size=s+i.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(_)}}function VH(t,e,n){const i=this;return i.containerState._closeFlow=void 0,t.check(Xm,r,s);function r(l){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,ct(t,e,"listItemIndent",i.containerState.size+1)(l)}function s(l){return i.containerState.furtherBlankLines||!Qe(l)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,o(l)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,t.attempt(FH,e,o)(l))}function o(l){return i.containerState._closeFlow=!0,i.interrupt=void 0,ct(t,t.attempt(Vn,e,n),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function zH(t,e,n){const i=this;return ct(t,r,"listItemIndent",i.containerState.size+1);function r(s){const o=i.events[i.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===i.containerState.size?e(s):n(s)}}function BH(t){t.exit(this.containerState.type)}function UH(t,e,n){const i=this;return ct(t,r,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(s){const o=i.events[i.events.length-1];return!Qe(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const KS={name:"setextUnderline",resolveTo:$H,tokenize:HH};function $H(t,e){let n=t.length,i,r,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){i=n;break}t[n][1].type==="paragraph"&&(r=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[i][1].start},end:{...t[t.length-1][1].end}};return t[r][1].type="setextHeadingText",s?(t.splice(r,0,["enter",o,e]),t.splice(s+1,0,["exit",t[i][1],e]),t[i][1].end={...t[s][1].end}):t[i][1]=o,t.push(["exit",o,e]),t}function HH(t,e,n){const i=this;let r;return s;function s(h){let d=i.events.length,m;for(;d--;)if(i.events[d][1].type!=="lineEnding"&&i.events[d][1].type!=="linePrefix"&&i.events[d][1].type!=="content"){m=i.events[d][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||m)?(t.enter("setextHeadingLine"),r=h,o(h)):n(h)}function o(h){return t.enter("setextHeadingLineSequence"),l(h)}function l(h){return h===r?(t.consume(h),l):(t.exit("setextHeadingLineSequence"),Qe(h)?ct(t,u,"lineSuffix")(h):u(h))}function u(h){return h===null||ke(h)?(t.exit("setextHeadingLine"),e(h)):n(h)}}const WH={tokenize:qH};function qH(t){const e=this,n=t.attempt(Xm,i,t.attempt(this.parser.constructs.flowInitial,r,ct(t,t.attempt(this.parser.constructs.flow,r,t.attempt(Q$,r)),"linePrefix")));return n;function i(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function r(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const GH={resolveAll:uR()},KH=lR("string"),ZH=lR("text");function lR(t){return{resolveAll:uR(t==="text"?YH:void 0),tokenize:e};function e(n){const i=this,r=this.parser.constructs[t],s=n.attempt(r,o,l);return o;function o(d){return h(d)?s(d):l(d)}function l(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),u}function u(d){return h(d)?(n.exit("data"),s(d)):(n.consume(d),u)}function h(d){if(d===null)return!0;const m=r[d];let g=-1;if(m)for(;++g<m.length;){const _=m[g];if(!_.previous||_.previous.call(i,i.previous))return!0}return!1}}}function uR(t){return e;function e(n,i){let r=-1,s;for(;++r<=n.length;)s===void 0?n[r]&&n[r][1].type==="data"&&(s=r,r++):(!n[r]||n[r][1].type!=="data")&&(r!==s+2&&(n[s][1].end=n[r-1][1].end,n.splice(s+2,r-s-2),r=s+2),s=void 0);return t?t(n,i):n}}function YH(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const i=t[n-1][1],r=e.sliceStream(i);let s=r.length,o=-1,l=0,u;for(;s--;){const h=r[s];if(typeof h=="string"){for(o=h.length;h.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(h===-2)u=!0,l++;else if(h!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(l=0),l){const h={type:n===t.length||u||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:i.start._bufferIndex+o,_index:i.start._index+s,line:i.end.line,column:i.end.column-l,offset:i.end.offset-l},end:{...i.end}};i.end={...h.start},i.start.offset===i.end.offset?Object.assign(i,h):(t.splice(n,0,["enter",h,e],["exit",h,e]),n+=2)}n++}return t}const QH={42:Vn,43:Vn,45:Vn,48:Vn,49:Vn,50:Vn,51:Vn,52:Vn,53:Vn,54:Vn,55:Vn,56:Vn,57:Vn,62:tR},XH={91:nH},JH={[-2]:f_,[-1]:f_,32:f_},eW={35:lH,42:zf,45:[KS,zf],60:dH,61:KS,95:zf,96:qS,126:qS},tW={38:iR,92:nR},nW={[-5]:p_,[-4]:p_,[-3]:p_,33:AH,38:iR,42:fv,60:[L$,vH],91:LH,92:[oH,nR],93:Bw,95:fv,96:W$},iW={null:[fv,GH]},rW={null:[42,95]},sW={null:[]},oW=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:rW,contentInitial:XH,disable:sW,document:QH,flow:eW,flowInitial:JH,insideSpan:iW,string:tW,text:nW},Symbol.toStringTag,{value:"Module"}));function aW(t,e,n){let i={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const r={},s=[];let o=[],l=[];const u={attempt:R(W),check:R(z),consume:k,enter:P,exit:j,interrupt:R(z,{interrupt:!0})},h={code:null,containerState:{},defineSkip:x,events:[],now:w,parser:t,previous:null,sliceSerialize:g,sliceStream:_,write:m};let d=e.tokenize.call(h,u);return e.resolveAll&&s.push(e),h;function m(D){return o=Ti(o,D),C(),o[o.length-1]!==null?[]:(I(e,0),h.events=zw(s,h.events,h),h.events)}function g(D,B){return uW(_(D),B)}function _(D){return lW(o,D)}function w(){const{_bufferIndex:D,_index:B,line:V,column:ee,offset:te}=i;return{_bufferIndex:D,_index:B,line:V,column:ee,offset:te}}function x(D){r[D.line]=D.column,F()}function C(){let D;for(;i._index<o.length;){const B=o[i._index];if(typeof B=="string")for(D=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===D&&i._bufferIndex<B.length;)E(B.charCodeAt(i._bufferIndex));else E(B)}}function E(D){d=d(D)}function k(D){ke(D)?(i.line++,i.column=1,i.offset+=D===-3?2:1,F()):D!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===o[i._index].length&&(i._bufferIndex=-1,i._index++)),h.previous=D}function P(D,B){const V=B||{};return V.type=D,V.start=w(),h.events.push(["enter",V,h]),l.push(V),V}function j(D){const B=l.pop();return B.end=w(),h.events.push(["exit",B,h]),B}function W(D,B){I(D,B.from)}function z(D,B){B.restore()}function R(D,B){return V;function V(ee,te,ae){let ue,K,he,M;return Array.isArray(ee)?ce(ee):"tokenize"in ee?ce([ee]):fe(ee);function fe(pe){return Ie;function Ie(Fe){const vt=Fe!==null&&pe[Fe],Rt=Fe!==null&&pe.null,ht=[...Array.isArray(vt)?vt:vt?[vt]:[],...Array.isArray(Rt)?Rt:Rt?[Rt]:[]];return ce(ht)(Fe)}}function ce(pe){return ue=pe,K=0,pe.length===0?ae:U(pe[K])}function U(pe){return Ie;function Ie(Fe){return M=N(),he=pe,pe.partial||(h.currentConstruct=pe),pe.name&&h.parser.constructs.disable.null.includes(pe.name)?we():pe.tokenize.call(B?Object.assign(Object.create(h),B):h,u,be,we)(Fe)}}function be(pe){return D(he,M),te}function we(pe){return M.restore(),++K<ue.length?U(ue[K]):ae}}}function I(D,B){D.resolveAll&&!s.includes(D)&&s.push(D),D.resolve&&Ar(h.events,B,h.events.length-B,D.resolve(h.events.slice(B),h)),D.resolveTo&&(h.events=D.resolveTo(h.events,h))}function N(){const D=w(),B=h.previous,V=h.currentConstruct,ee=h.events.length,te=Array.from(l);return{from:ee,restore:ae};function ae(){i=D,h.previous=B,h.currentConstruct=V,h.events.length=ee,l=te,F()}}function F(){i.line in r&&i.column<2&&(i.column=r[i.line],i.offset+=r[i.line]-1)}}function lW(t,e){const n=e.start._index,i=e.start._bufferIndex,r=e.end._index,s=e.end._bufferIndex;let o;if(n===r)o=[t[n].slice(i,s)];else{if(o=t.slice(n,r),i>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(i):o.shift()}s>0&&o.push(t[r].slice(0,s))}return o}function uW(t,e){let n=-1;const i=[];let r;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&r)continue;o=" ";break}default:o=String.fromCharCode(s)}r=s===-2,i.push(o)}return i.join("")}function cW(t){const i={constructs:_$([oW,...(t||{}).extensions||[]]),content:r(T$),defined:[],document:r(P$),flow:r(WH),lazy:{},string:r(KH),text:r(ZH)};return i;function r(s){return o;function o(l){return aW(i,s,l)}}}function hW(t){for(;!rR(t););return t}const ZS=/[\0\t\n\r]/g;function dW(){let t=1,e="",n=!0,i;return r;function r(s,o,l){const u=[];let h,d,m,g,_;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),m=0,e="",n&&(s.charCodeAt(0)===65279&&m++,n=void 0);m<s.length;){if(ZS.lastIndex=m,h=ZS.exec(s),g=h&&h.index!==void 0?h.index:s.length,_=s.charCodeAt(g),!h){e=s.slice(m);break}if(_===10&&m===g&&i)u.push(-3),i=void 0;else switch(i&&(u.push(-5),i=void 0),m<g&&(u.push(s.slice(m,g)),t+=g-m),_){case 0:{u.push(65533),t++;break}case 9:{for(d=Math.ceil(t/4)*4,u.push(-2);t++<d;)u.push(-1);break}case 10:{u.push(-4),t=1;break}default:i=!0,t=1}m=g+1}return l&&(i&&u.push(-5),e&&u.push(e),u.push(null)),u}}const fW=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function pW(t){return t.replace(fW,mW)}function mW(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const r=n.charCodeAt(1),s=r===120||r===88;return eR(n.slice(s?2:1),s?16:10)}return Vw(n)||t}const cR={}.hasOwnProperty;function gW(t,e,n){return typeof e!="string"&&(n=e,e=void 0),_W(n)(hW(cW(n).document().write(dW()(t,e,!0))))}function _W(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(sr),autolinkProtocol:N,autolinkEmail:N,atxHeading:s(ci),blockQuote:s(Rt),characterEscape:N,characterReference:N,codeFenced:s(ht),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(ht,o),codeText:s(mt,o),codeTextData:N,data:N,codeFlowValue:N,definition:s(Kt),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(On),hardBreakEscape:s(Di),hardBreakTrailing:s(Di),htmlFlow:s(Fi,o),htmlFlowData:N,htmlText:s(Fi,o),htmlTextData:N,image:s(ji),label:o,link:s(sr),listItem:s(Vi),listItemValue:g,listOrdered:s(hi,m),listUnordered:s(hi),paragraph:s(Or),reference:U,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(ci),strong:s(or),thematicBreak:s(bs)},exit:{atxHeading:u(),atxHeadingSequence:W,autolink:u(),autolinkEmail:vt,autolinkProtocol:Fe,blockQuote:u(),characterEscapeValue:F,characterReferenceMarkerHexadecimal:we,characterReferenceMarkerNumeric:we,characterReferenceValue:pe,characterReference:Ie,codeFenced:u(C),codeFencedFence:x,codeFencedFenceInfo:_,codeFencedFenceMeta:w,codeFlowValue:F,codeIndented:u(E),codeText:u(te),codeTextData:F,data:F,definition:u(),definitionDestinationString:j,definitionLabelString:k,definitionTitleString:P,emphasis:u(),hardBreakEscape:u(B),hardBreakTrailing:u(B),htmlFlow:u(V),htmlFlowData:F,htmlText:u(ee),htmlTextData:F,image:u(ue),label:he,labelText:K,lineEnding:D,link:u(ae),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:be,resourceDestinationString:M,resourceTitleString:fe,resource:ce,setextHeading:u(I),setextHeadingLineSequence:R,setextHeadingText:z,strong:u(),thematicBreak:u()}};hR(e,(t||{}).mdastExtensions||[]);const n={};return i;function i(Y){let ie={type:"root",children:[]};const xe={stack:[ie],tokenStack:[],config:e,enter:l,exit:h,buffer:o,resume:d,data:n},Ne=[];let ze=-1;for(;++ze<Y.length;)if(Y[ze][1].type==="listOrdered"||Y[ze][1].type==="listUnordered")if(Y[ze][0]==="enter")Ne.push(ze);else{const Zt=Ne.pop();ze=r(Y,Zt,ze)}for(ze=-1;++ze<Y.length;){const Zt=e[Y[ze][0]];cR.call(Zt,Y[ze][1].type)&&Zt[Y[ze][1].type].call(Object.assign({sliceSerialize:Y[ze][2].sliceSerialize},xe),Y[ze][1])}if(xe.tokenStack.length>0){const Zt=xe.tokenStack[xe.tokenStack.length-1];(Zt[1]||YS).call(xe,void 0,Zt[0])}for(ie.position={start:Os(Y.length>0?Y[0][1].start:{line:1,column:1,offset:0}),end:Os(Y.length>0?Y[Y.length-2][1].end:{line:1,column:1,offset:0})},ze=-1;++ze<e.transforms.length;)ie=e.transforms[ze](ie)||ie;return ie}function r(Y,ie,xe){let Ne=ie-1,ze=-1,Zt=!1,Ye,kn,di,fi;for(;++Ne<=xe;){const tn=Y[Ne];switch(tn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{tn[0]==="enter"?ze++:ze--,fi=void 0;break}case"lineEndingBlank":{tn[0]==="enter"&&(Ye&&!fi&&!ze&&!di&&(di=Ne),fi=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:fi=void 0}if(!ze&&tn[0]==="enter"&&tn[1].type==="listItemPrefix"||ze===-1&&tn[0]==="exit"&&(tn[1].type==="listUnordered"||tn[1].type==="listOrdered")){if(Ye){let Mn=Ne;for(kn=void 0;Mn--;){const Pn=Y[Mn];if(Pn[1].type==="lineEnding"||Pn[1].type==="lineEndingBlank"){if(Pn[0]==="exit")continue;kn&&(Y[kn][1].type="lineEndingBlank",Zt=!0),Pn[1].type="lineEnding",kn=Mn}else if(!(Pn[1].type==="linePrefix"||Pn[1].type==="blockQuotePrefix"||Pn[1].type==="blockQuotePrefixWhitespace"||Pn[1].type==="blockQuoteMarker"||Pn[1].type==="listItemIndent"))break}di&&(!kn||di<kn)&&(Ye._spread=!0),Ye.end=Object.assign({},kn?Y[kn][1].start:tn[1].end),Y.splice(kn||Ne,0,["exit",Ye,tn[2]]),Ne++,xe++}if(tn[1].type==="listItemPrefix"){const Mn={type:"listItem",_spread:!1,start:Object.assign({},tn[1].start),end:void 0};Ye=Mn,Y.splice(Ne,0,["enter",Mn,tn[2]]),Ne++,xe++,di=void 0,fi=!0}}}return Y[ie][1]._spread=Zt,xe}function s(Y,ie){return xe;function xe(Ne){l.call(this,Y(Ne),Ne),ie&&ie.call(this,Ne)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(Y,ie,xe){this.stack[this.stack.length-1].children.push(Y),this.stack.push(Y),this.tokenStack.push([ie,xe||void 0]),Y.position={start:Os(ie.start),end:void 0}}function u(Y){return ie;function ie(xe){Y&&Y.call(this,xe),h.call(this,xe)}}function h(Y,ie){const xe=this.stack.pop(),Ne=this.tokenStack.pop();if(Ne)Ne[0].type!==Y.type&&(ie?ie.call(this,Y,Ne[0]):(Ne[1]||YS).call(this,Y,Ne[0]));else throw new Error("Cannot close `"+Y.type+"` ("+Mc({start:Y.start,end:Y.end})+"): it’s not open");xe.position.end=Os(Y.end)}function d(){return m$(this.stack.pop())}function m(){this.data.expectingFirstListItemValue=!0}function g(Y){if(this.data.expectingFirstListItemValue){const ie=this.stack[this.stack.length-2];ie.start=Number.parseInt(this.sliceSerialize(Y),10),this.data.expectingFirstListItemValue=void 0}}function _(){const Y=this.resume(),ie=this.stack[this.stack.length-1];ie.lang=Y}function w(){const Y=this.resume(),ie=this.stack[this.stack.length-1];ie.meta=Y}function x(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function C(){const Y=this.resume(),ie=this.stack[this.stack.length-1];ie.value=Y.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function E(){const Y=this.resume(),ie=this.stack[this.stack.length-1];ie.value=Y.replace(/(\r?\n|\r)$/g,"")}function k(Y){const ie=this.resume(),xe=this.stack[this.stack.length-1];xe.label=ie,xe.identifier=Cl(this.sliceSerialize(Y)).toLowerCase()}function P(){const Y=this.resume(),ie=this.stack[this.stack.length-1];ie.title=Y}function j(){const Y=this.resume(),ie=this.stack[this.stack.length-1];ie.url=Y}function W(Y){const ie=this.stack[this.stack.length-1];if(!ie.depth){const xe=this.sliceSerialize(Y).length;ie.depth=xe}}function z(){this.data.setextHeadingSlurpLineEnding=!0}function R(Y){const ie=this.stack[this.stack.length-1];ie.depth=this.sliceSerialize(Y).codePointAt(0)===61?1:2}function I(){this.data.setextHeadingSlurpLineEnding=void 0}function N(Y){const xe=this.stack[this.stack.length-1].children;let Ne=xe[xe.length-1];(!Ne||Ne.type!=="text")&&(Ne=wt(),Ne.position={start:Os(Y.start),end:void 0},xe.push(Ne)),this.stack.push(Ne)}function F(Y){const ie=this.stack.pop();ie.value+=this.sliceSerialize(Y),ie.position.end=Os(Y.end)}function D(Y){const ie=this.stack[this.stack.length-1];if(this.data.atHardBreak){const xe=ie.children[ie.children.length-1];xe.position.end=Os(Y.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(ie.type)&&(N.call(this,Y),F.call(this,Y))}function B(){this.data.atHardBreak=!0}function V(){const Y=this.resume(),ie=this.stack[this.stack.length-1];ie.value=Y}function ee(){const Y=this.resume(),ie=this.stack[this.stack.length-1];ie.value=Y}function te(){const Y=this.resume(),ie=this.stack[this.stack.length-1];ie.value=Y}function ae(){const Y=this.stack[this.stack.length-1];if(this.data.inReference){const ie=this.data.referenceType||"shortcut";Y.type+="Reference",Y.referenceType=ie,delete Y.url,delete Y.title}else delete Y.identifier,delete Y.label;this.data.referenceType=void 0}function ue(){const Y=this.stack[this.stack.length-1];if(this.data.inReference){const ie=this.data.referenceType||"shortcut";Y.type+="Reference",Y.referenceType=ie,delete Y.url,delete Y.title}else delete Y.identifier,delete Y.label;this.data.referenceType=void 0}function K(Y){const ie=this.sliceSerialize(Y),xe=this.stack[this.stack.length-2];xe.label=pW(ie),xe.identifier=Cl(ie).toLowerCase()}function he(){const Y=this.stack[this.stack.length-1],ie=this.resume(),xe=this.stack[this.stack.length-1];if(this.data.inReference=!0,xe.type==="link"){const Ne=Y.children;xe.children=Ne}else xe.alt=ie}function M(){const Y=this.resume(),ie=this.stack[this.stack.length-1];ie.url=Y}function fe(){const Y=this.resume(),ie=this.stack[this.stack.length-1];ie.title=Y}function ce(){this.data.inReference=void 0}function U(){this.data.referenceType="collapsed"}function be(Y){const ie=this.resume(),xe=this.stack[this.stack.length-1];xe.label=ie,xe.identifier=Cl(this.sliceSerialize(Y)).toLowerCase(),this.data.referenceType="full"}function we(Y){this.data.characterReferenceType=Y.type}function pe(Y){const ie=this.sliceSerialize(Y),xe=this.data.characterReferenceType;let Ne;xe?(Ne=eR(ie,xe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ne=Vw(ie);const ze=this.stack[this.stack.length-1];ze.value+=Ne}function Ie(Y){const ie=this.stack.pop();ie.position.end=Os(Y.end)}function Fe(Y){F.call(this,Y);const ie=this.stack[this.stack.length-1];ie.url=this.sliceSerialize(Y)}function vt(Y){F.call(this,Y);const ie=this.stack[this.stack.length-1];ie.url="mailto:"+this.sliceSerialize(Y)}function Rt(){return{type:"blockquote",children:[]}}function ht(){return{type:"code",lang:null,meta:null,value:""}}function mt(){return{type:"inlineCode",value:""}}function Kt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function On(){return{type:"emphasis",children:[]}}function ci(){return{type:"heading",depth:0,children:[]}}function Di(){return{type:"break"}}function Fi(){return{type:"html",value:""}}function ji(){return{type:"image",title:null,url:"",alt:null}}function sr(){return{type:"link",title:null,url:"",children:[]}}function hi(Y){return{type:"list",ordered:Y.type==="listOrdered",start:null,spread:Y._spread,children:[]}}function Vi(Y){return{type:"listItem",spread:Y._spread,checked:null,children:[]}}function Or(){return{type:"paragraph",children:[]}}function or(){return{type:"strong",children:[]}}function wt(){return{type:"text",value:""}}function bs(){return{type:"thematicBreak"}}}function Os(t){return{line:t.line,column:t.column,offset:t.offset}}function hR(t,e){let n=-1;for(;++n<e.length;){const i=e[n];Array.isArray(i)?hR(t,i):yW(t,i)}}function yW(t,e){let n;for(n in e)if(cR.call(e,n))switch(n){case"canContainEols":{const i=e[n];i&&t[n].push(...i);break}case"transforms":{const i=e[n];i&&t[n].push(...i);break}case"enter":case"exit":{const i=e[n];i&&Object.assign(t[n],i);break}}}function YS(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Mc({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Mc({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Mc({start:e.start,end:e.end})+") is still open")}function vW(t){const e=this;e.parser=n;function n(i){return gW(i,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function wW(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function xW(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function bW(t,e){const n=e.value?e.value+`
`:"",i={};e.lang&&(i.className=["language-"+e.lang]);let r={type:"element",tagName:"code",properties:i,children:[{type:"text",value:n}]};return e.meta&&(r.data={meta:e.meta}),t.patch(e,r),r=t.applyData(e,r),r={type:"element",tagName:"pre",properties:{},children:[r]},t.patch(e,r),r}function EW(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function SW(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function TW(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",i=String(e.identifier).toUpperCase(),r=hu(i.toLowerCase()),s=t.footnoteOrder.indexOf(i);let o,l=t.footnoteCounts.get(i);l===void 0?(l=0,t.footnoteOrder.push(i),o=t.footnoteOrder.length):o=s+1,l+=1,t.footnoteCounts.set(i,l);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+r,id:n+"fnref-"+r+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,u);const h={type:"element",tagName:"sup",properties:{},children:[u]};return t.patch(e,h),t.applyData(e,h)}function kW(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function PW(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function dR(t,e){const n=e.referenceType;let i="]";if(n==="collapsed"?i+="[]":n==="full"&&(i+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+i}];const r=t.all(e),s=r[0];s&&s.type==="text"?s.value="["+s.value:r.unshift({type:"text",value:"["});const o=r[r.length-1];return o&&o.type==="text"?o.value+=i:r.push({type:"text",value:i}),r}function CW(t,e){const n=String(e.identifier).toUpperCase(),i=t.definitionById.get(n);if(!i)return dR(t,e);const r={src:hu(i.url||""),alt:e.alt};i.title!==null&&i.title!==void 0&&(r.title=i.title);const s={type:"element",tagName:"img",properties:r,children:[]};return t.patch(e,s),t.applyData(e,s)}function IW(t,e){const n={src:hu(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const i={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,i),t.applyData(e,i)}function AW(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const i={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,i),t.applyData(e,i)}function RW(t,e){const n=String(e.identifier).toUpperCase(),i=t.definitionById.get(n);if(!i)return dR(t,e);const r={href:hu(i.url||"")};i.title!==null&&i.title!==void 0&&(r.title=i.title);const s={type:"element",tagName:"a",properties:r,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function LW(t,e){const n={href:hu(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const i={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function NW(t,e,n){const i=t.all(e),r=n?OW(n):fR(e),s={},o=[];if(typeof e.checked=="boolean"){const d=i[0];let m;d&&d.type==="element"&&d.tagName==="p"?m=d:(m={type:"element",tagName:"p",properties:{},children:[]},i.unshift(m)),m.children.length>0&&m.children.unshift({type:"text",value:" "}),m.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let l=-1;for(;++l<i.length;){const d=i[l];(r||l!==0||d.type!=="element"||d.tagName!=="p")&&o.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!r?o.push(...d.children):o.push(d)}const u=i[i.length-1];u&&(r||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const h={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,h),t.applyData(e,h)}function OW(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let i=-1;for(;!e&&++i<n.length;)e=fR(n[i])}return e}function fR(t){const e=t.spread;return e??t.children.length>1}function MW(t,e){const n={},i=t.all(e);let r=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++r<i.length;){const o=i[r];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function DW(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function FW(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function jW(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function VW(t,e){const n=t.all(e),i=n.shift(),r=[];if(i){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([i],!0)};t.patch(e.children[0],o),r.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},l=Mw(e.children[1]),u=GA(e.children[e.children.length-1]);l&&u&&(o.position={start:l,end:u}),r.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function zW(t,e,n){const i=n?n.children:void 0,s=(i?i.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,l=o?o.length:e.children.length;let u=-1;const h=[];for(;++u<l;){const m=e.children[u],g={},_=o?o[u]:void 0;_&&(g.align=_);let w={type:"element",tagName:s,properties:g,children:[]};m&&(w.children=t.all(m),t.patch(m,w),w=t.applyData(m,w)),h.push(w)}const d={type:"element",tagName:"tr",properties:{},children:t.wrap(h,!0)};return t.patch(e,d),t.applyData(e,d)}function BW(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const QS=9,XS=32;function UW(t){const e=String(t),n=/\r?\n|\r/g;let i=n.exec(e),r=0;const s=[];for(;i;)s.push(JS(e.slice(r,i.index),r>0,!0),i[0]),r=i.index+i[0].length,i=n.exec(e);return s.push(JS(e.slice(r),r>0,!1)),s.join("")}function JS(t,e,n){let i=0,r=t.length;if(e){let s=t.codePointAt(i);for(;s===QS||s===XS;)i++,s=t.codePointAt(i)}if(n){let s=t.codePointAt(r-1);for(;s===QS||s===XS;)r--,s=t.codePointAt(r-1)}return r>i?t.slice(i,r):""}function $W(t,e){const n={type:"text",value:UW(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function HW(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const WW={blockquote:wW,break:xW,code:bW,delete:EW,emphasis:SW,footnoteReference:TW,heading:kW,html:PW,imageReference:CW,image:IW,inlineCode:AW,linkReference:RW,link:LW,listItem:NW,list:MW,paragraph:DW,root:FW,strong:jW,table:VW,tableCell:BW,tableRow:zW,text:$W,thematicBreak:HW,toml:of,yaml:of,definition:of,footnoteDefinition:of};function of(){}const pR=-1,Jm=0,Fc=1,Gp=2,Uw=3,$w=4,Hw=5,Ww=6,mR=7,gR=8,eT=typeof self=="object"?self:globalThis,qW=(t,e)=>{const n=(r,s)=>(t.set(s,r),r),i=r=>{if(t.has(r))return t.get(r);const[s,o]=e[r];switch(s){case Jm:case pR:return n(o,r);case Fc:{const l=n([],r);for(const u of o)l.push(i(u));return l}case Gp:{const l=n({},r);for(const[u,h]of o)l[i(u)]=i(h);return l}case Uw:return n(new Date(o),r);case $w:{const{source:l,flags:u}=o;return n(new RegExp(l,u),r)}case Hw:{const l=n(new Map,r);for(const[u,h]of o)l.set(i(u),i(h));return l}case Ww:{const l=n(new Set,r);for(const u of o)l.add(i(u));return l}case mR:{const{name:l,message:u}=o;return n(new eT[l](u),r)}case gR:return n(BigInt(o),r);case"BigInt":return n(Object(BigInt(o)),r);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return n(new DataView(l),o)}}return n(new eT[s](o),r)};return i},tT=t=>qW(new Map,t)(0),Ya="",{toString:GW}={},{keys:KW}=Object,ic=t=>{const e=typeof t;if(e!=="object"||!t)return[Jm,e];const n=GW.call(t).slice(8,-1);switch(n){case"Array":return[Fc,Ya];case"Object":return[Gp,Ya];case"Date":return[Uw,Ya];case"RegExp":return[$w,Ya];case"Map":return[Hw,Ya];case"Set":return[Ww,Ya];case"DataView":return[Fc,n]}return n.includes("Array")?[Fc,n]:n.includes("Error")?[mR,n]:[Gp,n]},af=([t,e])=>t===Jm&&(e==="function"||e==="symbol"),ZW=(t,e,n,i)=>{const r=(o,l)=>{const u=i.push(o)-1;return n.set(l,u),u},s=o=>{if(n.has(o))return n.get(o);let[l,u]=ic(o);switch(l){case Jm:{let d=o;switch(u){case"bigint":l=gR,d=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+u);d=null;break;case"undefined":return r([pR],o)}return r([l,d],o)}case Fc:{if(u){let g=o;return u==="DataView"?g=new Uint8Array(o.buffer):u==="ArrayBuffer"&&(g=new Uint8Array(o)),r([u,[...g]],o)}const d=[],m=r([l,d],o);for(const g of o)d.push(s(g));return m}case Gp:{if(u)switch(u){case"BigInt":return r([u,o.toString()],o);case"Boolean":case"Number":case"String":return r([u,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const d=[],m=r([l,d],o);for(const g of KW(o))(t||!af(ic(o[g])))&&d.push([s(g),s(o[g])]);return m}case Uw:return r([l,o.toISOString()],o);case $w:{const{source:d,flags:m}=o;return r([l,{source:d,flags:m}],o)}case Hw:{const d=[],m=r([l,d],o);for(const[g,_]of o)(t||!(af(ic(g))||af(ic(_))))&&d.push([s(g),s(_)]);return m}case Ww:{const d=[],m=r([l,d],o);for(const g of o)(t||!af(ic(g)))&&d.push(s(g));return m}}const{message:h}=o;return r([l,{name:u,message:h}],o)};return s},nT=(t,{json:e,lossy:n}={})=>{const i=[];return ZW(!(e||n),!!e,new Map,i)(t),i},Kp=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?tT(nT(t,e)):structuredClone(t):(t,e)=>tT(nT(t,e));function YW(t,e){const n=[{type:"text",value:"↩"}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function QW(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function XW(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||YW,i=t.options.footnoteBackLabel||QW,r=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let u=-1;for(;++u<t.footnoteOrder.length;){const h=t.footnoteById.get(t.footnoteOrder[u]);if(!h)continue;const d=t.all(h),m=String(h.identifier).toUpperCase(),g=hu(m.toLowerCase());let _=0;const w=[],x=t.footnoteCounts.get(m);for(;x!==void 0&&++_<=x;){w.length>0&&w.push({type:"text",value:" "});let k=typeof n=="string"?n:n(u,_);typeof k=="string"&&(k={type:"text",value:k}),w.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+g+(_>1?"-"+_:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(u,_),className:["data-footnote-backref"]},children:Array.isArray(k)?k:[k]})}const C=d[d.length-1];if(C&&C.type==="element"&&C.tagName==="p"){const k=C.children[C.children.length-1];k&&k.type==="text"?k.value+=" ":C.children.push({type:"text",value:" "}),C.children.push(...w)}else d.push(...w);const E={type:"element",tagName:"li",properties:{id:e+"fn-"+g},children:t.wrap(d,!0)};t.patch(h,E),l.push(E)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Kp(o),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(l,!0)},{type:"text",value:`
`}]}}const _R=function(t){if(t==null)return nq;if(typeof t=="function")return eg(t);if(typeof t=="object")return Array.isArray(t)?JW(t):eq(t);if(typeof t=="string")return tq(t);throw new Error("Expected function, string, or object as test")};function JW(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=_R(t[n]);return eg(i);function i(...r){let s=-1;for(;++s<e.length;)if(e[s].apply(this,r))return!0;return!1}}function eq(t){const e=t;return eg(n);function n(i){const r=i;let s;for(s in t)if(r[s]!==e[s])return!1;return!0}}function tq(t){return eg(e);function e(n){return n&&n.type===t}}function eg(t){return e;function e(n,i,r){return!!(iq(n)&&t.call(this,n,typeof i=="number"?i:void 0,r||void 0))}}function nq(){return!0}function iq(t){return t!==null&&typeof t=="object"&&"type"in t}const yR=[],rq=!0,iT=!1,sq="skip";function oq(t,e,n,i){let r;typeof e=="function"&&typeof n!="function"?(i=n,n=e):r=e;const s=_R(r),o=i?-1:1;l(t,void 0,[])();function l(u,h,d){const m=u&&typeof u=="object"?u:{};if(typeof m.type=="string"){const _=typeof m.tagName=="string"?m.tagName:typeof m.name=="string"?m.name:void 0;Object.defineProperty(g,"name",{value:"node ("+(u.type+(_?"<"+_+">":""))+")"})}return g;function g(){let _=yR,w,x,C;if((!e||s(u,h,d[d.length-1]||void 0))&&(_=aq(n(u,d)),_[0]===iT))return _;if("children"in u&&u.children){const E=u;if(E.children&&_[0]!==sq)for(x=(i?E.children.length:-1)+o,C=d.concat(E);x>-1&&x<E.children.length;){const k=E.children[x];if(w=l(k,x,C)(),w[0]===iT)return w;x=typeof w[1]=="number"?w[1]:x+o}}return _}}}function aq(t){return Array.isArray(t)?t:typeof t=="number"?[rq,t]:t==null?yR:[t]}function vR(t,e,n,i){let r,s,o;typeof e=="function"?(s=void 0,o=e,r=n):(s=e,o=n,r=i),oq(t,s,l,r);function l(u,h){const d=h[h.length-1],m=d?d.children.indexOf(u):void 0;return o(u,m,d)}}const pv={}.hasOwnProperty,lq={};function uq(t,e){const n=e||lq,i=new Map,r=new Map,s=new Map,o={...WW,...n.handlers},l={all:h,applyData:hq,definitionById:i,footnoteById:r,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:cq,wrap:fq};return vR(t,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const m=d.type==="definition"?i:r,g=String(d.identifier).toUpperCase();m.has(g)||m.set(g,d)}}),l;function u(d,m){const g=d.type,_=l.handlers[g];if(pv.call(l.handlers,g)&&_)return _(l,d,m);if(l.options.passThrough&&l.options.passThrough.includes(g)){if("children"in d){const{children:x,...C}=d,E=Kp(C);return E.children=l.all(d),E}return Kp(d)}return(l.options.unknownHandler||dq)(l,d,m)}function h(d){const m=[];if("children"in d){const g=d.children;let _=-1;for(;++_<g.length;){const w=l.one(g[_],d);if(w){if(_&&g[_-1].type==="break"&&(!Array.isArray(w)&&w.type==="text"&&(w.value=rT(w.value)),!Array.isArray(w)&&w.type==="element")){const x=w.children[0];x&&x.type==="text"&&(x.value=rT(x.value))}Array.isArray(w)?m.push(...w):m.push(w)}}}return m}}function cq(t,e){t.position&&(e.position=G7(t))}function hq(t,e){let n=e;if(t&&t.data){const i=t.data.hName,r=t.data.hChildren,s=t.data.hProperties;if(typeof i=="string")if(n.type==="element")n.tagName=i;else{const o="children"in n?n.children:[n];n={type:"element",tagName:i,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,Kp(s)),"children"in n&&n.children&&r!==null&&r!==void 0&&(n.children=r)}return n}function dq(t,e){const n=e.data||{},i="value"in e&&!(pv.call(n,"hProperties")||pv.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function fq(t,e){const n=[];let i=-1;for(e&&n.push({type:"text",value:`
`});++i<t.length;)i&&n.push({type:"text",value:`
`}),n.push(t[i]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function rT(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function sT(t,e){const n=uq(t,e),i=n.one(t,void 0),r=XW(n),s=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return r&&s.children.push({type:"text",value:`
`},r),s}function pq(t,e){return t&&"run"in t?async function(n,i){const r=sT(n,{file:i,...e});await t.run(r,i)}:function(n,i){return sT(n,{file:i,...t||e})}}function oT(t){if(t)throw t}var Bf=Object.prototype.hasOwnProperty,wR=Object.prototype.toString,aT=Object.defineProperty,lT=Object.getOwnPropertyDescriptor,uT=function(e){return typeof Array.isArray=="function"?Array.isArray(e):wR.call(e)==="[object Array]"},cT=function(e){if(!e||wR.call(e)!=="[object Object]")return!1;var n=Bf.call(e,"constructor"),i=e.constructor&&e.constructor.prototype&&Bf.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!i)return!1;var r;for(r in e);return typeof r>"u"||Bf.call(e,r)},hT=function(e,n){aT&&n.name==="__proto__"?aT(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},dT=function(e,n){if(n==="__proto__")if(Bf.call(e,n)){if(lT)return lT(e,n).value}else return;return e[n]},mq=function t(){var e,n,i,r,s,o,l=arguments[0],u=1,h=arguments.length,d=!1;for(typeof l=="boolean"&&(d=l,l=arguments[1]||{},u=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});u<h;++u)if(e=arguments[u],e!=null)for(n in e)i=dT(l,n),r=dT(e,n),l!==r&&(d&&r&&(cT(r)||(s=uT(r)))?(s?(s=!1,o=i&&uT(i)?i:[]):o=i&&cT(i)?i:{},hT(l,{name:n,newValue:t(d,o,r)})):typeof r<"u"&&hT(l,{name:n,newValue:r}));return l};const m_=Zp(mq);function mv(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function gq(){const t=[],e={run:n,use:i};return e;function n(...r){let s=-1;const o=r.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...r);function l(u,...h){const d=t[++s];let m=-1;if(u){o(u);return}for(;++m<r.length;)(h[m]===null||h[m]===void 0)&&(h[m]=r[m]);r=h,d?_q(d,l)(...h):o(null,...h)}}function i(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return t.push(r),e}}function _q(t,e){let n;return i;function i(...o){const l=t.length>o.length;let u;l&&o.push(r);try{u=t.apply(this,o)}catch(h){const d=h;if(l&&n)throw d;return r(d)}l||(u&&u.then&&typeof u.then=="function"?u.then(s,r):u instanceof Error?r(u):s(u))}function r(o,...l){n||(n=!0,e(o,...l))}function s(o){r(null,o)}}const _r={basename:yq,dirname:vq,extname:wq,join:xq,sep:"/"};function yq(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Hh(t);let n=0,i=-1,r=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;r--;)if(t.codePointAt(r)===47){if(s){n=r+1;break}}else i<0&&(s=!0,i=r+1);return i<0?"":t.slice(n,i)}if(e===t)return"";let o=-1,l=e.length-1;for(;r--;)if(t.codePointAt(r)===47){if(s){n=r+1;break}}else o<0&&(s=!0,o=r+1),l>-1&&(t.codePointAt(r)===e.codePointAt(l--)?l<0&&(i=r):(l=-1,i=o));return n===i?i=o:i<0&&(i=t.length),t.slice(n,i)}function vq(t){if(Hh(t),t.length===0)return".";let e=-1,n=t.length,i;for(;--n;)if(t.codePointAt(n)===47){if(i){e=n;break}}else i||(i=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function wq(t){Hh(t);let e=t.length,n=-1,i=0,r=-1,s=0,o;for(;e--;){const l=t.codePointAt(e);if(l===47){if(o){i=e+1;break}continue}n<0&&(o=!0,n=e+1),l===46?r<0?r=e:s!==1&&(s=1):r>-1&&(s=-1)}return r<0||n<0||s===0||s===1&&r===n-1&&r===i+1?"":t.slice(r,n)}function xq(...t){let e=-1,n;for(;++e<t.length;)Hh(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":bq(n)}function bq(t){Hh(t);const e=t.codePointAt(0)===47;let n=Eq(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function Eq(t,e){let n="",i=0,r=-1,s=0,o=-1,l,u;for(;++o<=t.length;){if(o<t.length)l=t.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(r===o-1||s===1))if(r!==o-1&&s===2){if(n.length<2||i!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",i=0):(n=n.slice(0,u),i=n.length-1-n.lastIndexOf("/")),r=o,s=0;continue}}else if(n.length>0){n="",i=0,r=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",i=2)}else n.length>0?n+="/"+t.slice(r+1,o):n=t.slice(r+1,o),i=o-r-1;r=o,s=0}else l===46&&s>-1?s++:s=-1}return n}function Hh(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const Sq={cwd:Tq};function Tq(){return"/"}function gv(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function kq(t){if(typeof t=="string")t=new URL(t);else if(!gv(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return Pq(t)}function Pq(t){if(t.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const i=e.codePointAt(n+2);if(i===70||i===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(e)}const g_=["history","path","basename","stem","extname","dirname"];class xR{constructor(e){let n;e?gv(e)?n={path:e}:typeof e=="string"||Cq(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":Sq.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<g_.length;){const s=g_[i];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let r;for(r in n)g_.includes(r)||(this[r]=n[r])}get basename(){return typeof this.path=="string"?_r.basename(this.path):void 0}set basename(e){y_(e,"basename"),__(e,"basename"),this.path=_r.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?_r.dirname(this.path):void 0}set dirname(e){fT(this.basename,"dirname"),this.path=_r.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?_r.extname(this.path):void 0}set extname(e){if(__(e,"extname"),fT(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=_r.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){gv(e)&&(e=kq(e)),y_(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?_r.basename(this.path,this.extname):void 0}set stem(e){y_(e,"stem"),__(e,"stem"),this.path=_r.join(this.dirname||"",e+(this.extname||""))}fail(e,n,i){const r=this.message(e,n,i);throw r.fatal=!0,r}info(e,n,i){const r=this.message(e,n,i);return r.fatal=void 0,r}message(e,n,i){const r=new Tn(e,n,i);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function __(t,e){if(t&&t.includes(_r.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+_r.sep+"`")}function y_(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function fT(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function Cq(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Iq=function(t){const i=this.constructor.prototype,r=i[t],s=function(){return r.apply(s,arguments)};return Object.setPrototypeOf(s,i),s},Aq={}.hasOwnProperty;class qw extends Iq{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=gq()}copy(){const e=new qw;let n=-1;for(;++n<this.attachers.length;){const i=this.attachers[n];e.use(...i)}return e.data(m_(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(x_("data",this.frozen),this.namespace[e]=n,this):Aq.call(this.namespace,e)&&this.namespace[e]||void 0:e?(x_("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const r=n.call(e,...i);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=lf(e),i=this.parser||this.Parser;return v_("parse",i),i(String(n),n)}process(e,n){const i=this;return this.freeze(),v_("process",this.parser||this.Parser),w_("process",this.compiler||this.Compiler),n?r(void 0,n):new Promise(r);function r(s,o){const l=lf(e),u=i.parse(l);i.run(u,l,function(d,m,g){if(d||!m||!g)return h(d);const _=m,w=i.stringify(_,g);Nq(w)?g.value=w:g.result=w,h(d,g)});function h(d,m){d||!m?o(d):s?s(m):n(void 0,m)}}}processSync(e){let n=!1,i;return this.freeze(),v_("processSync",this.parser||this.Parser),w_("processSync",this.compiler||this.Compiler),this.process(e,r),mT("processSync","process",n),i;function r(s,o){n=!0,oT(s),i=o}}run(e,n,i){pT(e),this.freeze();const r=this.transformers;return!i&&typeof n=="function"&&(i=n,n=void 0),i?s(void 0,i):new Promise(s);function s(o,l){const u=lf(n);r.run(e,u,h);function h(d,m,g){const _=m||e;d?l(d):o?o(_):i(void 0,_,g)}}}runSync(e,n){let i=!1,r;return this.run(e,n,s),mT("runSync","run",i),r;function s(o,l){oT(o),r=l,i=!0}}stringify(e,n){this.freeze();const i=lf(n),r=this.compiler||this.Compiler;return w_("stringify",r),pT(e),r(e,i)}use(e,...n){const i=this.attachers,r=this.namespace;if(x_("use",this.frozen),e!=null)if(typeof e=="function")u(e,n);else if(typeof e=="object")Array.isArray(e)?l(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(h){if(typeof h=="function")u(h,[]);else if(typeof h=="object")if(Array.isArray(h)){const[d,...m]=h;u(d,m)}else o(h);else throw new TypeError("Expected usable value, not `"+h+"`")}function o(h){if(!("plugins"in h)&&!("settings"in h))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(h.plugins),h.settings&&(r.settings=m_(!0,r.settings,h.settings))}function l(h){let d=-1;if(h!=null)if(Array.isArray(h))for(;++d<h.length;){const m=h[d];s(m)}else throw new TypeError("Expected a list of plugins, not `"+h+"`")}function u(h,d){let m=-1,g=-1;for(;++m<i.length;)if(i[m][0]===h){g=m;break}if(g===-1)i.push([h,...d]);else if(d.length>0){let[_,...w]=d;const x=i[g][1];mv(x)&&mv(_)&&(_=m_(!0,x,_)),i[g]=[h,_,...w]}}}}const Rq=new qw().freeze();function v_(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function w_(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function x_(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function pT(t){if(!mv(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function mT(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function lf(t){return Lq(t)?t:new xR(t)}function Lq(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function Nq(t){return typeof t=="string"||Oq(t)}function Oq(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Mq="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",gT=[],_T={allowDangerousHtml:!0},Dq=/^(https?|ircs?|mailto|xmpp)$/i,Fq=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function yT(t){const e=jq(t),n=Vq(t);return zq(e.runSync(e.parse(n),n),t)}function jq(t){const e=t.rehypePlugins||gT,n=t.remarkPlugins||gT,i=t.remarkRehypeOptions?{...t.remarkRehypeOptions,..._T}:_T;return Rq().use(vW).use(n).use(pq,i).use(e)}function Vq(t){const e=t.children||"",n=new xR;return typeof e=="string"&&(n.value=e),n}function zq(t,e){const n=e.allowedElements,i=e.allowElement,r=e.components,s=e.disallowedElements,o=e.skipHtml,l=e.unwrapDisallowed,u=e.urlTransform||Bq;for(const d of Fq)Object.hasOwn(e,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+Mq+d.id,void 0);return e.className&&(t={type:"element",tagName:"div",properties:{className:e.className},children:t.type==="root"?t.children:[t]}),vR(t,h),X7(t,{Fragment:S.Fragment,components:r,ignoreInvalidStyle:!0,jsx:S.jsx,jsxs:S.jsxs,passKeys:!0,passNode:!0});function h(d,m,g){if(d.type==="raw"&&g&&typeof m=="number")return o?g.children.splice(m,1):g.children[m]={type:"text",value:d.value},m;if(d.type==="element"){let _;for(_ in d_)if(Object.hasOwn(d_,_)&&Object.hasOwn(d.properties,_)){const w=d.properties[_],x=d_[_];(x===null||x.includes(d.tagName))&&(d.properties[_]=u(String(w||""),_,d))}}if(d.type==="element"){let _=n?!n.includes(d.tagName):s?s.includes(d.tagName):!1;if(!_&&i&&typeof m=="number"&&(_=!i(d,m,g)),_&&g&&typeof m=="number")return l&&d.children?g.children.splice(m,1,...d.children):g.children.splice(m,1),m}}}function Bq(t){const e=t.indexOf(":"),n=t.indexOf("?"),i=t.indexOf("#"),r=t.indexOf("/");return e===-1||r!==-1&&e>r||n!==-1&&e>n||i!==-1&&e>i||Dq.test(t.slice(0,e))?t:""}const vT=t=>{var e,n;return(e=t==null?void 0:t.demandeSAP)!=null&&e.toLowerCase().includes("demande de rma")?"Demande de RMA":!(t!=null&&t.statut)&&!((n=t==null?void 0:t.demandeSAP)!=null&&n.toLowerCase().includes("demande de rma"))?"Nouveau":(t==null?void 0:t.statut)||"Nouveau"},Uq=t=>{switch(t==null?void 0:t.toLowerCase()){case"nouveau":return"badge-info";case"en cours":return"badge-primary";case"terminée":return"badge-success";case"annulé":return"badge-error";case"demande de rma":return"badge-warning";case"a clôturée":return"badge-accent";default:return"badge-ghost"}},$q=({ticket:t,onClose:e,sectorId:n,onTicketUpdated:i})=>{const[r,s]=$.useState(""),[o,l]=$.useState(""),[u,h]=$.useState(!1),[d,m]=$.useState(null),[g,_]=$.useState(null),[w,x]=$.useState(null),[C,E]=$.useState(!1),k=$.useMemo(()=>!(t!=null&&t.demandeSAP)||t!=null&&t.summary?"":`Résume ce texte en 1 ou 2 phrases maximum, en français: ${t.demandeSAP}`,[t==null?void 0:t.id,t==null?void 0:t.demandeSAP,t==null?void 0:t.summary]),{summary:P,isLoading:j,error:W,generateSummary:z}=PS(""),R=$.useMemo(()=>!(t!=null&&t.demandeSAP)||t!=null&&t.solution?"":`Propose une solution concise (1-2 phrases), en français, pour ce problème: ${t.demandeSAP}`,[t==null?void 0:t.id,t==null?void 0:t.demandeSAP,t==null?void 0:t.solution]),{summary:I,isLoading:N,error:F,generateSummary:D}=PS("");$.useEffect(()=>{t?(l(vT(t)),k&&z(k),R&&D(R)):l(""),m(null),_(null),x(null),s("")},[t,k,R,z,D]),$.useEffect(()=>{(async()=>{if(P&&n&&(t!=null&&t.id)&&!t.summary){x(null);try{console.log("Attempting to save generated summary:",P),await Wd(n,t.id,{summary:P}),i()}catch(ue){console.error("Error saving summary:",ue),x(`Erreur sauvegarde résumé: ${ue.message}`)}}})()},[P,n,t==null?void 0:t.id]),$.useEffect(()=>{(async()=>{if(I&&n&&(t!=null&&t.id)&&!t.solution){x(null);try{console.log("Attempting to save generated solution:",I),await Wd(n,t.id,{solution:I}),i()}catch(ue){console.error("Error saving solution:",ue),x(`Erreur sauvegarde solution: ${ue.message}`)}}})()},[I,n,t==null?void 0:t.id]);const B=async()=>{if(r.trim()&&n&&(t!=null&&t.id)){E(!0),_(null);const ae=[r,...t.commentaires||[]];try{await Wd(n,t.id,{commentaires:ae}),s(""),i()}catch(ue){_(`Erreur ajout commentaire: ${ue.message}`)}finally{E(!1)}}},V=async()=>{if(n&&(t!=null&&t.id)&&o&&o!==(t==null?void 0:t.statut)){h(!0),m(null);try{await Wd(n,t.id,{statut:o}),i()}catch(ae){m(`Erreur MàJ statut: ${ae.message}`),l(vT(t))}finally{h(!1)}}};if(!t)return null;const ee=(t==null?void 0:t.summary)||P,te=(t==null?void 0:t.solution)||I;return S.jsxs("div",{className:"modal modal-open",children:[S.jsxs("div",{className:"modal-box w-11/12 max-w-3xl relative bg-jdc-dark-gray text-jdc-white",children:[S.jsx("button",{onClick:e,className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2 z-10","aria-label":"Fermer",children:"✕"}),S.jsx("h3",{className:"font-bold text-xl mb-1",children:t.raisonSociale||"Client Inconnu"}),S.jsxs("p",{className:"text-sm text-gray-400 mb-4",children:["Ticket SAP: ",t.numeroSAP||"N/A"]}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-2 py-4 text-sm border-t border-b border-gray-700",children:[S.jsxs("p",{children:[S.jsx("b",{children:"Code Client:"})," ",t.codeClient||"N/A"]}),S.jsxs("p",{children:[S.jsx("b",{children:"Téléphone:"})," ",t.telephone||"N/A"]}),S.jsxs("p",{className:"md:col-span-2",children:[S.jsx("b",{children:"Adresse:"})," ",t.adresse||"N/A"]}),S.jsxs("p",{children:[S.jsx("b",{children:"Date Création:"})," ",t.dateCreation?new Date(t.dateCreation).toLocaleDateString():"N/A"]}),S.jsxs("p",{children:[S.jsx("b",{children:"Secteur:"})," ",S.jsx("span",{className:"badge badge-neutral",children:t.secteur||"N/A"})]}),t.salesperson&&S.jsxs("p",{children:[S.jsx("b",{children:"Commercial:"})," ",t.salesperson]})]}),S.jsxs("div",{className:"my-4",children:[S.jsx("label",{htmlFor:"ticket-status-select",className:"block text-sm font-medium text-gray-300 mb-1",children:"Statut Actuel"}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsxs("select",{id:"ticket-status-select",className:"select select-bordered select-sm w-full max-w-xs bg-jdc-gray",value:o,onChange:ae=>l(ae.target.value),disabled:u,children:[S.jsx("option",{value:"Nouveau",children:"Nouveau"}),S.jsx("option",{value:"Demande de RMA",children:"Demande de RMA"}),S.jsx("option",{value:"En cours",children:"En cours"}),S.jsx("option",{value:"A Clôturée",children:"A Clôturée"}),S.jsx("option",{value:"Terminée",children:"Terminée"}),S.jsx("option",{value:"Annulé",children:"Annulé"})]}),S.jsx("button",{className:"btn btn-primary btn-sm",onClick:V,disabled:u||o===(t==null?void 0:t.statut),children:u?S.jsx(bp,{className:"animate-spin"}):"Mettre à jour"}),S.jsx("span",{className:`badge ${Uq(o)} ml-auto`,children:o})]}),d&&S.jsx("p",{className:"text-error text-xs mt-1",children:d})]}),S.jsx("hr",{className:"my-3 border-gray-700"}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[S.jsxs("div",{children:[S.jsx("h4",{className:"text-md font-semibold mb-1 text-blue-300",children:"Résumé IA"}),j&&S.jsx("span",{className:"loading loading-dots loading-sm"}),W&&!ee&&S.jsxs("p",{className:"text-error text-xs",children:["Erreur résumé: ",W]}),ee?S.jsx("div",{className:"prose prose-sm max-w-none text-gray-300",children:S.jsx(yT,{children:ee})}):!j&&!W?S.jsx("p",{className:"text-xs text-gray-500 italic",children:"Aucun résumé généré."}):null,w&&w.includes("résumé")&&S.jsx("p",{className:"text-error text-xs mt-1",children:w})]}),S.jsxs("div",{children:[S.jsx("h4",{className:"text-md font-semibold mb-1 text-green-300",children:"Solution Proposée IA"}),N&&S.jsx("span",{className:"loading loading-dots loading-sm"}),F&&!te&&S.jsxs("p",{className:"text-error text-xs",children:["Erreur solution: ",F]}),te?S.jsx("div",{className:"prose prose-sm max-w-none text-gray-300",children:S.jsx(yT,{children:te})}):!N&&!F?S.jsx("p",{className:"text-xs text-gray-500 italic",children:"Aucune solution générée."}):null,w&&w.includes("solution")&&S.jsx("p",{className:"text-error text-xs mt-1",children:w})]})]}),S.jsx("hr",{className:"my-3 border-gray-700"}),S.jsxs("details",{className:"mb-3 text-sm",children:[S.jsx("summary",{className:"cursor-pointer font-medium text-gray-400 hover:text-jdc-white",children:"Voir la demande SAP originale"}),S.jsx("div",{className:"mt-2 p-3 border border-gray-600 rounded bg-jdc-gray text-xs max-h-32 overflow-y-auto",children:S.jsx("pre",{className:"whitespace-pre-wrap break-words font-mono",children:t.demandeSAP||"N/A"})})]}),S.jsx("hr",{className:"my-3 border-gray-700"}),S.jsxs("div",{children:[S.jsx("h4",{className:"text-md font-semibold mb-2",children:"Commentaires"}),S.jsx("div",{className:"max-h-40 overflow-y-auto mb-3 border border-gray-600 rounded p-3 bg-jdc-gray text-sm space-y-2",children:t.commentaires&&t.commentaires.length>0?t.commentaires.map((ae,ue)=>S.jsx("p",{className:"border-b border-gray-700 pb-1 mb-1",children:ae},ue)):S.jsx("p",{className:"text-sm text-gray-500 italic",children:"Aucun commentaire."})}),S.jsx("textarea",{placeholder:"Ajouter un commentaire...",className:"textarea textarea-bordered w-full text-sm bg-jdc-gray",rows:2,value:r,onChange:ae=>s(ae.target.value),disabled:C}),S.jsx("button",{className:"btn btn-secondary btn-sm mt-2",onClick:B,disabled:C||!r.trim(),children:C?S.jsx(bp,{className:"animate-spin"}):"Ajouter Commentaire"}),g&&S.jsx("p",{className:"text-error text-xs mt-1",children:g})]})]}),S.jsx("form",{method:"dialog",className:"modal-backdrop",children:S.jsx("button",{onClick:e,children:"close"})})]})};function Hq(t,e,n){n===void 0&&(n={});var i={type:"Feature"};return(n.id===0||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties={},i.geometry=t,i}function Wq(t,e,n){if(n===void 0&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!wT(t[0])||!wT(t[1]))throw new Error("coordinates must contain numbers");var i={type:"Point",coordinates:t};return Hq(i,e,n)}function wT(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function qq(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return t.geometry.coordinates;if(t.type==="Point")return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Gq(t){return t.type==="Feature"?t.geometry:t}function Kq(t,e,n){if(n===void 0&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i=qq(t),r=Gq(e),s=r.type,o=e.bbox,l=r.coordinates;if(o&&Zq(i,o)===!1)return!1;s==="Polygon"&&(l=[l]);for(var u=!1,h=0;h<l.length&&!u;h++)if(xT(i,l[h][0],n.ignoreBoundary)){for(var d=!1,m=1;m<l[h].length&&!d;)xT(i,l[h][m],!n.ignoreBoundary)&&(d=!0),m++;d||(u=!0)}return u}function xT(t,e,n){var i=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var r=0,s=e.length-1;r<e.length;s=r++){var o=e[r][0],l=e[r][1],u=e[s][0],h=e[s][1],d=t[1]*(o-u)+l*(u-t[0])+h*(t[0]-o)===0&&(o-t[0])*(u-t[0])<=0&&(l-t[1])*(h-t[1])<=0;if(d)return!n;var m=l>t[1]!=h>t[1]&&t[0]<(u-o)*(t[1]-l)/(h-l)+o;m&&(i=!i)}return i}function Zq(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}const Yq=()=>{pm();const{userSectors:t,loadingSectors:e,errorSectors:n}=e7(),[i,r]=$.useState([]),[s,o]=$.useState(!0),[l,u]=$.useState(null),[h,d]=$.useState(null),[m,g]=$.useState(!0),[_,w]=$.useState(null),[x,C]=$.useState(""),E=$.useMemo(()=>{const ee=i.map(te=>te.adresse).filter(te=>!!te&&te.trim()!=="");return Array.from(new Set(ee))},[i]),{coordinates:k,isLoading:P,error:j}=Z2(E);$.useEffect(()=>{const ee=tu(),te=E0(ee,async ae=>{if(ae){g(!0);try{const K=(await _w()).find(he=>he.email===ae.email);d({...ae,role:K==null?void 0:K.role})}catch(ue){console.error("Error fetching user role:",ue),d(ae)}finally{g(!1)}}else d(null),g(!1)});return()=>te()},[]),$.useEffect(()=>{if(e||t===null){o(!(t===null&&!e)),t===null&&!e&&r([]);return}if(t.length===0){o(!1),r([]),console.log("[SAPPage] No sectors assigned to user.");return}o(!0),u(null),console.log(`[SAPPage] Setting up listeners for sectors: ${t.join(", ")}`);const ee=new Map,te=t.map(ae=>q2(ae,ue=>{ee.set(ae,ue);let K=[];ee.forEach(he=>{K=K.concat(he)}),r(K),console.log("[SAPPage] rawTickets updated:",K),o(!1)},ue=>{console.error(`Error listening to tickets for sector ${ae}:`,ue),u(`Erreur temps-réel tickets (${ae}).`)}));return()=>{console.log(`[SAPPage] Cleaning up ticket listeners for sectors: ${t.join(", ")}`),te.forEach(ae=>ae())}},[t,e]);const W=$.useMemo(()=>{console.log(`[SAPPage] Processing ${i.length} raw tickets. Filter: '${x}'. Coords available: ${k.size}`);const ee=i.filter(te=>!x||te.secteur===x).map(te=>{console.log(`[SAPPage DEBUG ${te.id}] Processing ticket. Raw date:`,te.date);const ae=ov(te.date);console.log(`[SAPPage DEBUG ${te.id}] Parsed date result:`,ae);let ue="Non déterminé";const K=te.adresse;if(K&&k.has(K)){const he=k.get(K);if(he)try{const M=Wq([he.lng,he.lat]),fe=Y2.find(ce=>Kq(M,ce.feature));ue=fe?fe.name:"Hors zone"}catch(M){console.error(`[SAPPage] Error checking point in polygon for address "${K}":`,M),ue="Erreur géozone"}else ue="Géocodage échoué"}else K&&(ue="Géocodage en attente");return{...te,parsedDate:ae,deducedSalesperson:ue}});return ee.sort((te,ae)=>{var he,M;const ue=((he=te.parsedDate)==null?void 0:he.getTime())??0;return(((M=ae.parsedDate)==null?void 0:M.getTime())??0)-ue}),console.log("[SAPPage] processedTickets:",ee),ee},[i,k,x]),z=$.useMemo(()=>{const ee=W.reduce((te,ae)=>{const ue=ae.raisonSociale||"Client Inconnu";return te[ue]||(te[ue]=[]),te[ue].push(ae),te},{});return console.log("[SAPPage] groupedTickets:",ee),ee},[W]),R=$.useCallback(ee=>{console.log("[SAPPage] Opening details for ticket:",ee),w(ee)},[]),I=$.useCallback(()=>{console.log("[SAPPage] Closing details modal."),w(null)},[]),N=$.useCallback(()=>{console.log("[SAPPage] Ticket update detected (via callback), relying on listener for refresh.")},[]),F=ee=>{C(ee.target.value)},D=e||s||E.length>0&&P&&k.size<E.length,B=i.length,V=W.length;return S.jsxs("div",{className:"container mx-auto px-4 py-8",children:[S.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center mb-6 gap-4",children:[S.jsxs("h1",{className:"text-3xl font-bold text-jdc-white",children:["Gestion des Tickets SAP (",V," / ",B,")"]}),t&&t.length>0&&S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsx(GC,{className:"text-jdc-light-gray"}),S.jsxs("select",{className:"select select-bordered select-sm bg-jdc-gray focus:border-jdc-yellow",value:x,onChange:F,children:[S.jsx("option",{value:"",children:"Tous mes secteurs"}),t.map(ee=>S.jsx("option",{value:ee,children:ee},ee))]})]})]}),e&&S.jsx("p",{className:"text-jdc-light-gray mb-4",children:"Chargement des secteurs utilisateur..."}),n&&S.jsxs("p",{className:"text-red-500 mb-4",children:["Erreur chargement secteurs: ",n]}),l&&S.jsx("p",{className:"text-red-500 mb-4",children:l}),j&&S.jsxs("p",{className:"text-orange-500 mb-4",children:["Erreur Géocodage: ",j]}),S.jsx("div",{children:D&&V===0?S.jsxs("div",{className:"flex justify-center items-center py-10",children:[S.jsx("span",{className:"loading loading-spinner loading-lg text-jdc-yellow mr-3"})," Chargement des tickets et données géographiques..."]}):!D&&V===0?S.jsx("p",{className:"text-center text-gray-500 py-10",children:x?`Aucun ticket trouvé pour le secteur '${x}'.`:"Aucun ticket trouvé pour vos secteurs."}):S.jsx(n7,{groupedTickets:z,onSelectTicket:R,selectedTicketId:_==null?void 0:_.id,groupByField:"raisonSociale",isLoadingGeo:P&&k.size<E.length})}),_&&S.jsx($q,{ticket:_,onClose:I,sectorId:_.secteur,onTicketUpdated:N})]})},Qq=t=>t.reduce((e,n)=>{const i=n.nomClient||"Client Inconnu";return e[i]||(e[i]=[]),e[i].push(n),e},{}),Xq=({selectedSector:t,onEnvoiSelect:e})=>{const[n,i]=$.useState([]),[r,s]=$.useState(!0),[o,l]=$.useState(null),[u,h]=$.useState(!1),[d,m]=$.useState(null);$.useEffect(()=>{(async()=>{console.log("[EnvoiList] Loading envois..."),s(!0),l(null);try{const j=await G2();i(j),console.log(`[EnvoiList] Successfully loaded ${j.length} envois.`),l(null)}catch(j){console.error("[EnvoiList] Error loading envois:",j),l(`Erreur lors de la récupération des envois: ${j.message}`),i([])}finally{s(!1)}})()},[]);const g=$.useMemo(()=>{if(!t)return console.log("[EnvoiList] No sector selected, showing all envois."),n;console.log(`[EnvoiList] Filtering envois for sector: ${t}`);const P=n.filter(j=>j.secteur===t);return console.log(`[EnvoiList] Found ${P.length} envois for sector ${t}.`),P},[n,t]),_=$.useMemo(()=>{console.log("[EnvoiList] Grouping filtered envois by client name.");const P=Qq(g);return console.log(`[EnvoiList] Grouped into ${Object.keys(P).length} clients.`),P},[g]),w=P=>{console.log(`[EnvoiList] Initiating delete for client: ${P}`),m(P)},x=async(P,j)=>{const W=j.map(I=>I.id);console.log(`[EnvoiList] Confirming deletion for client: ${P}, Envoi IDs: ${W.join(", ")}`);const R=tu().currentUser;if(!R){console.error("[EnvoiList] Delete cancelled: User is not authenticated."),l("Erreur: Vous devez être connecté pour supprimer des envois."),m(null);return}console.log(`[EnvoiList] User authenticated: ${R.uid}. Proceeding with delete.`),h(!0),l(null);try{await e9(W),console.log(`[EnvoiList] Successfully requested deletion for ${W.length} envois for client ${P}.`),i(I=>I.filter(N=>!W.includes(N.id))),console.log(`[EnvoiList] Local state updated after deletion for client ${P}.`)}catch(I){console.error(`[EnvoiList] Error deleting envois for client ${P}:`,I),l(`Erreur lors de la suppression: ${I.message||"Erreur inconnue"}`)}finally{h(!1),m(null)}},C=()=>{console.log("[EnvoiList] Delete cancelled by user."),m(null)};if(r)return S.jsx("div",{className:"flex justify-center items-center p-4",children:S.jsx("span",{className:"loading loading-dots loading-lg"})});if(o&&!d)return S.jsx("div",{className:"alert alert-error shadow-lg",children:S.jsxs("div",{children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current flex-shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),S.jsx("span",{children:o})]})});const E=P=>{switch(P==null?void 0:P.toLowerCase()){case"oui":return"badge-success";case"non":return"badge-error";default:return"badge-ghost"}},k=Object.keys(_).sort();return S.jsx("div",{children:g.length===0&&!r?S.jsxs("p",{className:"text-center p-4 text-base-content/70",children:["Aucun envoi trouvé ",t?`pour le secteur ${t}`:"","."]}):k.map(P=>S.jsxs("div",{className:"mb-6 p-4 border border-base-300 rounded-lg shadow-sm bg-base-200/50",children:[S.jsxs("div",{className:"flex justify-between items-center mb-3 sticky top-0 bg-base-200/95 backdrop-blur-sm py-2 z-10 px-2 -mx-2 rounded-t-md",children:[" ",S.jsxs("h3",{className:"text-xl font-semibold text-base-content",children:[P," (",_[P].length,")"]}),S.jsx("button",{onClick:()=>w(P),className:"btn btn-sm btn-error btn-outline",disabled:u||d===P,children:u&&d===P?S.jsx("span",{className:"loading loading-spinner loading-xs"}):"Supprimer Client"})]}),d===P&&S.jsxs("div",{className:"bg-warning/10 p-4 mb-4 rounded-lg border border-warning text-warning-content",children:[S.jsx("p",{className:"font-bold mb-2",children:"Confirmation Requise"}),S.jsxs("p",{className:"mb-4 text-sm",children:["Êtes-vous sûr de vouloir supprimer tous les ",_[P].length," envoi(s) pour ",S.jsx("b",{children:P})," ? Cette action est irréversible."]}),o&&S.jsxs("div",{className:"alert alert-error text-xs p-2 mb-3",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current shrink-0 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),S.jsx("span",{children:o})]}),S.jsxs("div",{className:"flex justify-end gap-2",children:[S.jsx("button",{onClick:C,className:"btn btn-sm btn-ghost",disabled:u,children:"Annuler"}),S.jsx("button",{onClick:()=>x(P,_[P]),className:"btn btn-sm btn-error",disabled:u,children:u?S.jsx("span",{className:"loading loading-spinner loading-xs"}):"Confirmer Suppression"})]})]}),S.jsxs("div",{className:"space-y-3",children:[" ",_[P].map(j=>S.jsx("div",{onClick:()=>e(j),className:"card card-compact w-full bg-base-100 shadow cursor-pointer hover:shadow-md transition-shadow duration-200 ease-in-out",children:S.jsxs("div",{className:"card-body p-3",children:[" ",S.jsxs("p",{className:"text-sm",children:[S.jsx("b",{children:"Article:"})," ",j.articleNom||"N/A"]}),S.jsxs("p",{className:"text-sm",children:[S.jsx("b",{children:"BT:"})," ",j.bt||"N/A"]}),S.jsxs("p",{className:"text-sm",children:[S.jsx("b",{children:"Code Client:"})," ",j.codeClient||"N/A"]}),!t&&S.jsxs("p",{className:"text-sm",children:[S.jsx("b",{children:"Secteur:"})," ",j.secteur||"N/A"]}),S.jsxs("div",{className:"card-actions justify-end items-center mt-2",children:[j.trackingLink&&S.jsx("a",{href:j.trackingLink,target:"_blank",rel:"noopener noreferrer",className:"btn btn-xs btn-outline btn-info",onClick:W=>W.stopPropagation(),children:"Suivi"}),S.jsxs("div",{className:`badge badge-sm ${E(j.statutExpedition)}`,children:[" ","Expédié: ",j.statutExpedition||"?"]})]})]})},j.id))]})]},P))})},Jq=({envoi:t,onClose:e})=>t?S.jsxs("div",{className:"modal modal-open",children:[S.jsxs("div",{className:"modal-box w-11/12 max-w-2xl",children:[" ",S.jsx("button",{onClick:e,className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:"✕"}),S.jsxs("h3",{className:"font-bold text-lg mb-4",children:[t.nomClient," - Envoi BT ",t.bt]}),S.jsxs("div",{className:"space-y-2",children:[" ",S.jsxs("p",{children:[S.jsx("b",{children:"Code Client:"})," ",t.codeClient]}),S.jsxs("p",{children:[S.jsx("b",{children:"Article:"})," ",t.articleNom]}),S.jsxs("p",{children:[S.jsx("b",{children:"Secteur:"})," ",t.secteur]}),S.jsxs("p",{children:[S.jsx("b",{children:"Statut Expédition:"})," ",t.statutExpedition||"N/A"]}),t.trackingLink?S.jsxs("p",{children:[S.jsx("b",{children:"Lien de suivi:"})," ",S.jsxs("a",{href:t.trackingLink,target:"_blank",rel:"noopener noreferrer",className:"link link-info break-all",children:[" ",t.trackingLink]})]}):S.jsxs("p",{children:[S.jsx("b",{children:"Lien de suivi:"})," Non disponible"]})]}),S.jsx("div",{className:"modal-action mt-4",children:S.jsx("button",{onClick:e,className:"btn",children:"Fermer"})})]}),S.jsx("div",{className:"modal-backdrop",onClick:e})]}):null,eG=()=>{const[t,e]=$.useState(null),[n,i]=$.useState([]),[r,s]=$.useState(!0),[o,l]=$.useState(null),[u,h]=$.useState(""),[d,m]=$.useState(""),[g,_]=$.useState(""),[w,x]=$.useState(""),[C,E]=$.useState(!1),[k,P]=$.useState([]),[j,W]=$.useState(!0),z=$.useCallback(async()=>{s(!0);try{const ee=await G2();i(ee),l(null)}catch(ee){l(`Erreur lors de la récupération des envois: ${ee.message}`),i([])}finally{s(!1)}},[]);$.useEffect(()=>{z(),W(!0);const ee=Jz("Envoi",te=>{P(te),W(!1)},te=>{console.error("Error fetching envois for filters:",te),W(!1)});return()=>ee()},[z]);const R=$.useCallback(ee=>{e(ee)},[]),I=$.useCallback(()=>{e(null)},[]),N=()=>{z()};$.useCallback(()=>{console.log("Envoi details potentially updated (callback called).")},[]),$.useMemo(()=>{if(j)return[""];const ee=new Set(k.map(te=>te.statutExpedition).filter(Boolean));return["",...Array.from(ee).sort()]},[k,j]);const F=$.useMemo(()=>{if(j)return[""];const ee=new Set(k.map(te=>te.secteur).filter(Boolean));return["",...Array.from(ee).sort()]},[k,j]),D=()=>{h(""),m(""),_(""),x("")},B=u||d||g||w,V=$.useMemo(()=>n.filter(ee=>w===""||ee.secteur===w),[n,w]);return S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 h-[calc(100vh-8rem)]",children:[" ",S.jsxs("div",{className:"flex flex-col w-full",children:[" ",S.jsxs("div",{className:"mb-4 card bg-base-100 shadow p-4 shrink-0",children:[" ",S.jsxs("div",{className:"flex justify-between items-center mb-2",children:[S.jsx("h2",{className:"text-lg font-semibold",children:"Filtres Envois"}),S.jsxs("div",{className:"flex items-center gap-2",children:[S.jsxs("button",{className:`btn btn-ghost btn-sm text-error ${B?"":"hidden"}`,onClick:D,title:"Effacer les filtres",children:[S.jsx(RF,{})," Effacer"]}),S.jsx("button",{className:"btn btn-ghost btn-sm",onClick:N,title:"Rafraîchir la liste des envois",children:S.jsx(IF,{})}),S.jsxs("button",{className:"btn btn-ghost btn-sm lg:hidden",onClick:()=>E(!C),children:[S.jsx(GC,{})," ",C?"Masquer":"Afficher"]})]})]}),S.jsxs("div",{className:`${C?"block":"hidden"} lg:block space-y-2`,children:[S.jsx("p",{className:"text-xs text-warning",children:"Note: Seul le filtre secteur est actif pour la liste."}),S.jsx("select",{className:"select select-bordered w-full",value:w,onChange:ee=>x(ee.target.value),disabled:j,children:F.map(ee=>S.jsx("option",{value:ee,children:ee===""?"Tous les secteurs":ee},ee))})]})]}),S.jsxs("div",{className:"scrollable-list flex-grow card bg-base-100 shadow p-4 w-full min-h-0",style:{minHeight:0,maxHeight:"calc(100vh - 15rem)"},children:[r&&S.jsx("div",{className:"flex justify-center items-center h-full",children:S.jsx("span",{className:"loading loading-spinner loading-lg"})}),o&&S.jsx("div",{className:"alert alert-error text-sm p-2",children:S.jsx("span",{children:o})}),!r&&!o&&S.jsx(Xq,{envois:V,selectedSector:w,onEnvoiSelect:R})]})]})]}),t&&S.jsx(Jq,{envoi:t,onClose:I})]})},tG=({users:t,onEditUser:e})=>{const[n,i]=$.useState(""),[r,s]=$.useState("Tous les utilisateurs"),o={total:t.length,firebase:t.filter(u=>u.type==="Firebase Authentication").length,firestore:t.filter(u=>!u.type||u.type!=="Firebase Authentication").length},l=t.filter(u=>{var m,g;const h=((m=u.nom)==null?void 0:m.toLowerCase().includes(n.toLowerCase()))||((g=u.email)==null?void 0:g.toLowerCase().includes(n.toLowerCase())),d=r==="Tous les utilisateurs"||r==="Firebase Authentication"&&u.type==="Firebase Authentication"||r==="Firestore"&&(!u.type||u.type!=="Firebase Authentication");return h&&d});return S.jsxs("div",{className:"bg-base-200 p-4 rounded-lg",children:[S.jsxs("h2",{className:"text-xl font-bold mb-4",children:["Liste des utilisateurs (",t.length,")"]}),S.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[S.jsxs("div",{className:"bg-base-300 p-3 rounded-lg text-center",children:[S.jsx("div",{className:"text-sm opacity-70",children:"Total"}),S.jsx("div",{className:"text-3xl font-bold",children:o.total})]}),S.jsxs("div",{className:"bg-base-300 p-3 rounded-lg text-center",children:[S.jsx("div",{className:"text-sm opacity-70",children:"Firebase Auth"}),S.jsx("div",{className:"text-3xl font-bold text-info",children:o.firebase})]}),S.jsxs("div",{className:"bg-base-300 p-3 rounded-lg text-center",children:[S.jsx("div",{className:"text-sm opacity-70",children:"Firestore"}),S.jsx("div",{className:"text-3xl font-bold text-secondary",children:o.firestore})]})]}),S.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-4",children:[S.jsx("input",{type:"text",placeholder:"Rechercher un utilisateur",className:"input input-bordered w-full",value:n,onChange:u=>i(u.target.value)}),S.jsxs("select",{className:"select select-bordered w-full sm:w-auto",value:r,onChange:u=>s(u.target.value),children:[S.jsx("option",{children:"Tous les utilisateurs"}),S.jsx("option",{children:"Firebase Authentication"}),S.jsx("option",{children:"Firestore"})]})]}),S.jsx("div",{className:"overflow-x-auto",children:S.jsxs("table",{className:"table w-full",children:[S.jsx("thead",{children:S.jsxs("tr",{children:[S.jsx("th",{children:"Nom"}),S.jsx("th",{children:"Email"}),S.jsx("th",{children:"Type"}),S.jsx("th",{children:"UID"}),S.jsx("th",{children:"Rôle"}),S.jsx("th",{children:"Actions"})]})}),S.jsx("tbody",{children:l.length>0?l.map(u=>{var h;return S.jsxs("tr",{children:[S.jsx("td",{children:u.nom||"N/A"}),S.jsx("td",{children:u.email}),S.jsx("td",{children:S.jsx("span",{className:`badge ${u.type==="Firebase Authentication"?"badge-info":"badge-secondary"}`,children:u.type||"Firestore"})}),S.jsx("td",{className:"text-xs opacity-70",children:u.id}),S.jsx("td",{children:S.jsx("span",{className:`badge ${((h=u.role)==null?void 0:h.toLowerCase())==="admin"?"badge-primary":"badge-accent"}`,children:u.role||"Utilisateur"})}),S.jsx("td",{children:S.jsxs("div",{className:"flex gap-2",children:[S.jsx("button",{className:"btn btn-sm btn-neutral",onClick:()=>e(u),children:"Détails"}),S.jsx("button",{className:"btn btn-sm btn-warning",onClick:()=>e(u),children:"Modifier"})]})})]},u.id)}):S.jsx("tr",{children:S.jsx("td",{colSpan:6,className:"text-center py-4",children:"Aucun utilisateur trouvé"})})})]})})]})},nG=({user:t,onSubmit:e,onCancel:n})=>{const[i,r]=$.useState({email:"",password:"",nom:"",role:"Utilisateur",secteurs:[]}),[s,o]=$.useState(!1),l=["CHR","HACCP","Kezia","Tabac"];$.useEffect(()=>{t?(o(!0),r({email:t.email||"",password:"",nom:t.nom||"",role:t.role||"Utilisateur",secteurs:t.secteurs||[]})):(o(!1),r({email:"",password:"",nom:"",role:"Utilisateur",secteurs:[]}))},[t]);const u=m=>{const{name:g,value:_}=m.target;r(w=>({...w,[g]:_}))},h=m=>{const{value:g,checked:_}=m.target;r(w=>_?{...w,secteurs:[...w.secteurs,g]}:{...w,secteurs:w.secteurs.filter(x=>x!==g)})},d=m=>{m.preventDefault(),e(i)};return S.jsxs("div",{className:"bg-base-200 p-4 rounded-lg",children:[S.jsx("h2",{className:"text-xl font-bold mb-4",children:s?`Modifier l'utilisateur: ${(t==null?void 0:t.nom)||(t==null?void 0:t.email)}`:"Ajouter un nouvel utilisateur"}),S.jsxs("form",{onSubmit:d,children:[S.jsxs("div",{className:"form-control mb-3",children:[S.jsx("label",{className:"label",children:S.jsx("span",{className:"label-text",children:"Email"})}),S.jsx("input",{type:"email",name:"email",placeholder:"Email",className:"input input-bordered",value:i.email,onChange:u,required:!0,disabled:s})]}),S.jsxs("div",{className:"form-control mb-3",children:[S.jsx("label",{className:"label",children:S.jsx("span",{className:"label-text",children:s?"Nouveau mot de passe (laisser vide pour ne pas changer)":"Mot de passe"})}),S.jsx("input",{type:"password",name:"password",placeholder:"Mot de passe",className:"input input-bordered",value:i.password,onChange:u,required:!s})]}),S.jsxs("div",{className:"form-control mb-3",children:[S.jsx("label",{className:"label",children:S.jsx("span",{className:"label-text",children:"Nom"})}),S.jsx("input",{type:"text",name:"nom",placeholder:"Nom",className:"input input-bordered",value:i.nom,onChange:u,required:!0})]}),S.jsxs("div",{className:"form-control mb-3",children:[S.jsx("label",{className:"label",children:S.jsx("span",{className:"label-text",children:"Rôle"})}),S.jsxs("select",{name:"role",className:"select select-bordered w-full",value:i.role,onChange:u,children:[S.jsx("option",{value:"Utilisateur",children:"Utilisateur"}),S.jsx("option",{value:"Admin",children:"Administrateur"})]})]}),S.jsxs("div",{className:"form-control mb-5",children:[S.jsx("label",{className:"label",children:S.jsx("span",{className:"label-text",children:"Secteurs"})}),S.jsx("div",{className:"grid grid-cols-2 gap-2",children:l.map(m=>S.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[S.jsx("input",{type:"checkbox",className:"checkbox",value:m,checked:i.secteurs.includes(m),onChange:h}),S.jsx("span",{children:m})]},m))})]}),S.jsxs("div",{className:"flex justify-end gap-2",children:[S.jsx("button",{type:"button",className:"btn btn-ghost",onClick:n,children:"Annuler"}),S.jsx("button",{type:"submit",className:"btn btn-primary",children:s?"Mettre à jour":"Ajouter"})]})]})]})},iG=()=>{const[t,e]=$.useState([]),[n,i]=$.useState(!0),[r,s]=$.useState(null),[o,l]=$.useState(null),[u,h]=$.useState(null);$.useEffect(()=>{d()},[]);const d=async()=>{i(!0),s(null);try{console.log("Fetching users from Firebase..."),await s9();const w=await _w();console.log("Users fetched:",w),e(w)}catch(w){console.error("Error fetching users:",w),s(w.message||"Failed to load users.")}finally{i(!1)}},m=async w=>{s(null),h(null);try{if(o)console.log("Updating user:",o.id,w),await r9(o.id,w),h("Utilisateur mis à jour avec succès!");else{if(console.log("Adding new user:",w),t.find(C=>C.email===w.email)){s("Un utilisateur avec cet email existe déjà.");return}await i9(w),h("Nouvel utilisateur ajouté avec succès!")}await d(),l(null)}catch(x){console.error("Error submitting user data:",x),x.code==="auth/email-already-in-use"?s("Cette adresse email est déjà utilisée par un autre compte."):x.code==="auth/weak-password"?s("Le mot de passe est trop faible. Il doit contenir au moins 6 caractères."):x.code==="auth/invalid-email"?s("L'adresse email n'est pas valide."):s(x.message||"Failed to submit user data.")}},g=w=>{l(w),h(null)},_=()=>{l(null),s(null),h(null)};return S.jsxs("div",{className:"container mx-auto mt-10 px-4",children:[S.jsx("h1",{className:"text-3xl font-bold mb-5",children:"Administration des utilisateurs"}),u&&S.jsxs("div",{className:"alert alert-success mb-4",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),S.jsx("span",{children:u})]}),r&&S.jsxs("div",{className:"alert alert-error mb-4",children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),S.jsx("span",{children:r})]}),S.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[S.jsx("div",{children:S.jsx(nG,{onSubmit:m,user:o,onCancel:_})}),S.jsx("div",{children:n?S.jsx("div",{className:"flex justify-center items-center h-64",children:S.jsx("span",{className:"loading loading-spinner loading-lg"})}):S.jsx(tG,{users:t,onEditUser:g})})]})]})},rG=()=>{const[t,e]=$.useState(!0),[n,i]=$.useState(""),[r,s]=$.useState(""),[o,l]=$.useState(null),[u,h]=$.useState(!1),d=pm(),m=k2();$.useEffect(()=>{const w=E0($s,C=>{C&&d("/dashboard")});return(async()=>{try{const C=await R6($s);C&&C.user?(await Mp(gs(m,"auth_users",C.user.uid),{email:C.user.email,nom:C.user.displayName||"Utilisateur Google",role:"Utilisateur",dateCreation:new Date().toISOString(),authProvider:"google"},{merge:!0}),d("/dashboard")):console.log("[AuthPage] No redirect result after Google Sign-in, or no user.")}catch(C){console.error("[AuthPage] Redirect result error:",C),C.code==="auth/account-exists-with-different-credential"?l("Un compte existe déjà avec cette adresse email mais avec une méthode de connexion différente."):l(C.message)}})(),()=>w()},[d,m]);const g=async w=>{w.preventDefault(),l(null),h(!0);try{t?await e6($s,n,r):await IC($s,n,r),d("/dashboard")}catch(x){console.error("[AuthPage] Authentication error:",x),x.code==="auth/user-not-found"||x.code==="auth/wrong-password"?l("Email ou mot de passe incorrect."):x.code==="auth/email-already-in-use"?l("Cette adresse email est déjà utilisée."):x.code==="auth/weak-password"?l("Le mot de passe doit contenir au moins 6 caractères."):x.code==="auth/invalid-email"?l("Adresse email invalide."):x.code==="auth/network-request-failed"?l("Problème de connexion réseau. Veuillez vérifier votre connexion internet."):l(x.message)}finally{h(!1)}},_=async()=>{l(null),h(!0);try{const w=new Jr;console.log("[AuthPage] Initiating Google Sign-in Redirect..."),await I6($s,w),console.log("[AuthPage] Google Sign-in Redirect initiated.")}catch(w){console.error("[AuthPage] Google authentication error:",w),h(!1),w.code==="auth/cancelled-popup-request"?l("Opération annulée. Plusieurs demandes de connexion simultanées."):w.code==="auth/account-exists-with-different-credential"?l("Un compte existe déjà avec cette adresse email mais avec une méthode de connexion différente."):l(w.message)}};return S.jsx("div",{className:"hero min-h-screen bg-base-200",children:S.jsxs("div",{className:"hero-content flex-col lg:flex-row-reverse",children:[S.jsxs("div",{className:"text-center lg:text-left",children:[S.jsx("h1",{className:"text-5xl font-bold",children:t?"Connexion":"Inscription"}),S.jsx("p",{className:"py-6",children:t?"Connectez-vous pour accéder à l'application.":"Inscrivez-vous pour créer un compte."})]}),S.jsx("div",{className:"card shrink-0 w-full max-w-sm shadow-2xl bg-base-100",children:S.jsxs("form",{className:"card-body",onSubmit:g,children:[o&&S.jsx("div",{className:"alert alert-error",children:o}),S.jsxs("div",{className:"form-control",children:[S.jsx("label",{className:"label",children:S.jsx("span",{className:"label-text",children:"Email"})}),S.jsx("input",{type:"email",placeholder:"email",className:"input input-bordered",value:n,onChange:w=>i(w.target.value),required:!0})]}),S.jsxs("div",{className:"form-control",children:[S.jsx("label",{className:"label",children:S.jsx("span",{className:"label-text",children:"Mot de passe"})}),S.jsx("input",{type:"password",placeholder:"password",className:"input input-bordered",value:r,onChange:w=>s(w.target.value),required:!0})]}),S.jsx("div",{className:"form-control mt-6",children:S.jsx("button",{type:"submit",className:`btn btn-primary ${u?"loading":""}`,disabled:u,children:u?"Chargement...":t?"Se connecter":"S'inscrire"})}),S.jsx("div",{className:"divider",children:"OU"}),S.jsx("div",{className:"form-control",children:S.jsxs("button",{type:"button",className:`btn ${u?"loading":""}`,onClick:_,disabled:u,children:[S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 48 48",className:"mr-2",children:[S.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),S.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),S.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),S.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),"Continuer avec Google"]})}),S.jsx("div",{className:"text-center mt-4",children:S.jsxs("p",{children:[t?"Pas de compte?":"Déjà un compte?",S.jsx("button",{type:"button",className:"link link-primary ml-2",onClick:()=>e(!t),children:t?"S'inscrire":"Se connecter"})]})})]})})]})})},sG=({onSearch:t,initialSearchTerm:e="",isLoading:n})=>{const[i,r]=$.useState(e),s=o=>{o.preventDefault(),t(i.trim())};return S.jsxs("form",{onSubmit:s,className:"flex items-center gap-2 card bg-base-100 shadow p-4",children:[S.jsx("input",{type:"text",placeholder:"Rechercher par Code (exact) ou Désignation (partielle, insensible à la casse)...",className:"input input-bordered w-full",value:i,onChange:o=>r(o.target.value),disabled:n}),S.jsxs("button",{type:"submit",className:`btn btn-primary ${n?"loading":""}`,disabled:n||!i.trim(),children:[!n&&S.jsx(ZC,{}),"Rechercher"]})]})},oG=({results:t,isLoading:e,searchPerformed:n})=>{if(e)return S.jsx("div",{className:"flex justify-center items-center p-10",children:S.jsx("span",{className:"loading loading-spinner loading-lg text-jdc-yellow"})});if(!n)return S.jsx("div",{className:"text-center text-gray-500 italic mt-6",children:"Veuillez entrer un code article ou un terme de désignation à rechercher."});if(t.length===0)return S.jsx("div",{className:"text-center text-gray-500 italic mt-6",children:"Aucun article trouvé pour ce terme de recherche."});const i=r=>{switch(r){case"caisse":return"badge-info";case"hygiene":return"badge-success";case"securite":return"badge-warning";default:return"badge-ghost"}};return S.jsx("div",{className:"overflow-x-auto card bg-base-100 shadow",children:S.jsxs("table",{className:"table table-zebra w-full",children:[S.jsx("thead",{children:S.jsxs("tr",{children:[S.jsx("th",{children:"Code Article"}),S.jsx("th",{children:"Désignation"}),S.jsx("th",{children:"Catégorie"})," "]})}),S.jsx("tbody",{children:t.map(r=>S.jsxs("tr",{className:"hover",children:[S.jsxs("td",{children:[S.jsx("span",{className:"font-mono",children:r.Code})," "]}),S.jsx("td",{children:r.Désignation})," ",S.jsx("td",{children:S.jsxs("span",{className:`badge ${i(r.category)} capitalize`,children:[r.category||"Inconnue"," "]})})]},r.id))})]})})},aG=()=>{const[t,e]=$.useState(""),[n,i]=$.useState([]),[r,s]=$.useState(!1),[o,l]=$.useState(null),[u,h]=$.useState(!1),d=$.useCallback(async m=>{if(!m.trim()){i([]),l(null),h(!1);return}s(!0),l(null),h(!0);try{console.log(`[ArticleSearchPage] Searching for term: "${m}"`);const g=await o9(m);console.log(`[ArticleSearchPage] Found ${g.length} articles.`),i(g)}catch(g){console.error("[ArticleSearchPage] Error searching articles:",g),l(`Erreur lors de la recherche: ${g.message}`),i([])}finally{s(!1)}},[]);return S.jsxs("div",{className:"container mx-auto p-4 space-y-6",children:[S.jsx("h1",{className:"text-3xl font-bold text-jdc-yellow mb-6",children:"Recherche d'Articles"}),S.jsx(sG,{onSearch:d,initialSearchTerm:t,isLoading:r}),o&&S.jsx("div",{className:"alert alert-error shadow-lg",children:S.jsxs("div",{children:[S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current flex-shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2 2m2-2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),S.jsx("span",{children:o})]})}),S.jsx(oG,{results:n,isLoading:r,searchPerformed:u})]})},lG=()=>{const[t,e]=$.useState("Installation"),[n,i]=$.useState(""),[r,s]=$.useState(""),[o,l]=$.useState(""),[u,h]=$.useState(""),[d,m]=$.useState("CHR"),[g,_]=$.useState(!1),[w,x]=$.useState(null),C=pm(),E=async k=>{if(k.preventDefault(),_(!0),x(null),!r||!o||!n||!d){x("Veuillez remplir tous les champs obligatoires (Nom Client, Adresse Client, Description, Secteur)."),_(!1);return}const P={typeIntervention:t,description:n,nomClient:r,adresseClient:o,contactClient:u,secteur:d,dateCreation:new Date().toISOString()};try{await Qz(d,P),console.log(`Ticket créé avec succès dans le secteur ${d}`),C("/sap")}catch(j){console.error("Erreur lors de la création du ticket:",j),x("Une erreur est survenue lors de la création du ticket.")}finally{_(!1)}};return S.jsxs("div",{className:"container mx-auto mt-8 p-6 bg-base-100 shadow-md rounded-md",children:[S.jsx("h1",{className:"text-2xl font-semibold mb-6 text-center",children:"Créer un Ticket SAP"}),w&&S.jsx("div",{className:"alert alert-error shadow-lg mb-4",children:S.jsx("div",{children:S.jsx("span",{children:w})})}),S.jsxs("form",{onSubmit:E,className:"space-y-6 max-w-2xl mx-auto",children:[S.jsxs("div",{className:"p-4 border border-base-300 rounded-md",children:[S.jsx("h2",{className:"text-lg font-medium mb-3 text-primary",children:"Informations Client"}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"nomClient",className:"block text-sm font-medium text-base-content",children:"Nom du Client *"}),S.jsx("input",{type:"text",id:"nomClient",value:r,onChange:k=>s(k.target.value),className:"input input-bordered w-full mt-1",required:!0})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"adresseClient",className:"block text-sm font-medium text-base-content",children:"Adresse Client *"}),S.jsx("input",{type:"text",id:"adresseClient",value:o,onChange:k=>l(k.target.value),className:"input input-bordered w-full mt-1",placeholder:"ex: 123 Rue Principale, 75001 Paris",required:!0})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"contactClient",className:"block text-sm font-medium text-base-content",children:"Personne à contacter"}),S.jsx("input",{type:"text",id:"contactClient",value:u,onChange:k=>h(k.target.value),className:"input input-bordered w-full mt-1"})]})]})]}),S.jsxs("div",{className:"p-4 border border-base-300 rounded-md",children:[S.jsx("h2",{className:"text-lg font-medium mb-3 text-primary",children:"Détails de l'intervention"}),S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[S.jsxs("div",{children:[S.jsx("label",{htmlFor:"secteur",className:"block text-sm font-medium text-base-content",children:"Secteur SAP *"}),S.jsxs("select",{id:"secteur",value:d,onChange:k=>m(k.target.value),className:"select select-bordered w-full mt-1",required:!0,children:[S.jsx("option",{value:"CHR",children:"CHR"}),S.jsx("option",{value:"HACCP",children:"HACCP"}),S.jsx("option",{value:"Kezia",children:"Kezia"}),S.jsx("option",{value:"Tabac",children:"Tabac"})]})]}),S.jsxs("div",{children:[S.jsx("label",{htmlFor:"typeIntervention",className:"block text-sm font-medium text-base-content",children:"Type d'intervention"}),S.jsxs("select",{id:"typeIntervention",value:t,onChange:k=>e(k.target.value),className:"select select-bordered w-full mt-1",children:[S.jsx("option",{children:"Installation"}),S.jsx("option",{children:"Maintenance"}),S.jsx("option",{children:"Réparation"}),S.jsx("option",{children:"Consultation"}),S.jsx("option",{children:"Formation"}),S.jsx("option",{children:"Autre"})]})]})]}),S.jsxs("div",{className:"mt-4",children:[S.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-base-content",children:"Description du problème / Demande *"}),S.jsx("textarea",{id:"description",rows:5,value:n,onChange:k=>i(k.target.value),className:"textarea textarea-bordered w-full mt-1",placeholder:"Décrivez le problème ou la demande ici...",required:!0})]})]}),S.jsx("div",{className:"text-center pt-4",children:S.jsx("button",{type:"submit",className:"btn btn-primary w-full md:w-auto",disabled:g,children:g?S.jsxs(S.Fragment,{children:[S.jsx("span",{className:"loading loading-spinner"}),"Création en cours..."]}):"Créer le Ticket"})})]})]})};function uG(){const[t,e]=$.useState(null),[n,i]=$.useState(!1),r=Jl();$.useEffect(()=>{const o=tu(),l=E0(o,u=>{e(!!u),u||i(!1)});return()=>l()},[]),$.useEffect(()=>{window.innerWidth<1024&&i(!1)},[r.pathname]);const s=()=>{i(!n)};return t===null?S.jsx("div",{className:"flex justify-center items-center min-h-screen bg-jdc-black",children:S.jsx("span",{className:"loading loading-spinner loading-lg text-jdc-yellow"})}):S.jsx(S.Fragment,{children:t?S.jsxs("div",{className:"flex min-h-screen bg-jdc-black text-jdc-white",children:[S.jsx(OF,{sidebarOpen:n,toggleSidebar:s}),S.jsxs("div",{className:"flex-1 flex flex-col",children:[S.jsx("header",{className:"sticky top-0 z-20 bg-jdc-black shadow-md lg:hidden h-16 flex items-center px-4 border-b border-base-300",children:S.jsx("button",{onClick:s,className:"btn btn-ghost btn-square text-jdc-white","aria-label":"Ouvrir le menu",children:S.jsx(yF,{className:"w-5 h-5"})})}),S.jsx("main",{className:"flex-grow p-4 sm:p-6 lg:p-8 content-area lg:ml-64 fade-in",children:S.jsxs(fO,{children:[S.jsx(Gr,{path:"/",element:S.jsx(c_,{})}),S.jsx(Gr,{path:"/dashboard",element:S.jsx(c_,{})}),S.jsx(Gr,{path:"/sap",element:S.jsx(Yq,{})}),S.jsx(Gr,{path:"/sap/create",element:S.jsx(lG,{})}),S.jsx(Gr,{path:"/envois",element:S.jsx(eG,{})}),S.jsx(Gr,{path:"/admin",element:S.jsx(iG,{})}),S.jsx(Gr,{path:"/article-search",element:S.jsx(aG,{})})," ",S.jsx(Gr,{path:"/auth",element:S.jsx(c_,{})})]})})]})]}):S.jsx(rG,{})})}b_.createRoot(document.getElementById("root")).render(S.jsx(Ji.StrictMode,{children:S.jsx(xO,{children:S.jsxs(JU,{children:[" ",S.jsx(uG,{})]})})}));
