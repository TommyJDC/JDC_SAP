function tk(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var wu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var E1={exports:{}},Kd={},x1={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yu=Symbol.for("react.element"),nk=Symbol.for("react.portal"),rk=Symbol.for("react.fragment"),ik=Symbol.for("react.strict_mode"),sk=Symbol.for("react.profiler"),ok=Symbol.for("react.provider"),ak=Symbol.for("react.context"),lk=Symbol.for("react.forward_ref"),uk=Symbol.for("react.suspense"),ck=Symbol.for("react.memo"),hk=Symbol.for("react.lazy"),wv=Symbol.iterator;function dk(t){return t===null||typeof t!="object"?null:(t=wv&&t[wv]||t["@@iterator"],typeof t=="function"?t:null)}var T1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S1=Object.assign,I1={};function Ga(t,e,n){this.props=t,this.context=e,this.refs=I1,this.updater=n||T1}Ga.prototype.isReactComponent={};Ga.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ga.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function P1(){}P1.prototype=Ga.prototype;function jg(t,e,n){this.props=t,this.context=e,this.refs=I1,this.updater=n||T1}var zg=jg.prototype=new P1;zg.constructor=jg;S1(zg,Ga.prototype);zg.isPureReactComponent=!0;var Ev=Array.isArray,C1=Object.prototype.hasOwnProperty,Ug={current:null},k1={key:!0,ref:!0,__self:!0,__source:!0};function A1(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)C1.call(e,r)&&!k1.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){for(var c=Array(u),f=0;f<u;f++)c[f]=arguments[f+2];i.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)i[r]===void 0&&(i[r]=u[r]);return{$$typeof:Yu,type:t,key:s,ref:a,props:i,_owner:Ug.current}}function fk(t,e){return{$$typeof:Yu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Bg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Yu}function pk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var xv=/\/+/g;function Jf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?pk(""+t.key):e.toString(36)}function Ih(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Yu:case nk:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+Jf(a,0):r,Ev(i)?(n="",t!=null&&(n=t.replace(xv,"$&/")+"/"),Ih(i,e,n,"",function(f){return f})):i!=null&&(Bg(i)&&(i=fk(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(xv,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",Ev(t))for(var u=0;u<t.length;u++){s=t[u];var c=r+Jf(s,u);a+=Ih(s,e,n,c,i)}else if(c=dk(t),typeof c=="function")for(t=c.call(t),u=0;!(s=t.next()).done;)s=s.value,c=r+Jf(s,u++),a+=Ih(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Yc(t,e,n){if(t==null)return t;var r=[],i=0;return Ih(t,r,"","",function(s){return e.call(n,s,i++)}),r}function mk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var mn={current:null},Ph={transition:null},gk={ReactCurrentDispatcher:mn,ReactCurrentBatchConfig:Ph,ReactCurrentOwner:Ug};function b1(){throw Error("act(...) is not supported in production builds of React.")}Ve.Children={map:Yc,forEach:function(t,e,n){Yc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Yc(t,function(){e++}),e},toArray:function(t){return Yc(t,function(e){return e})||[]},only:function(t){if(!Bg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ve.Component=Ga;Ve.Fragment=rk;Ve.Profiler=sk;Ve.PureComponent=jg;Ve.StrictMode=ik;Ve.Suspense=uk;Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gk;Ve.act=b1;Ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=S1({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=Ug.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)C1.call(e,c)&&!k1.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var f=0;f<c;f++)u[f]=arguments[f+2];r.children=u}return{$$typeof:Yu,type:t.type,key:i,ref:s,props:r,_owner:a}};Ve.createContext=function(t){return t={$$typeof:ak,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ok,_context:t},t.Consumer=t};Ve.createElement=A1;Ve.createFactory=function(t){var e=A1.bind(null,t);return e.type=t,e};Ve.createRef=function(){return{current:null}};Ve.forwardRef=function(t){return{$$typeof:lk,render:t}};Ve.isValidElement=Bg;Ve.lazy=function(t){return{$$typeof:hk,_payload:{_status:-1,_result:t},_init:mk}};Ve.memo=function(t,e){return{$$typeof:ck,type:t,compare:e===void 0?null:e}};Ve.startTransition=function(t){var e=Ph.transition;Ph.transition={};try{t()}finally{Ph.transition=e}};Ve.unstable_act=b1;Ve.useCallback=function(t,e){return mn.current.useCallback(t,e)};Ve.useContext=function(t){return mn.current.useContext(t)};Ve.useDebugValue=function(){};Ve.useDeferredValue=function(t){return mn.current.useDeferredValue(t)};Ve.useEffect=function(t,e){return mn.current.useEffect(t,e)};Ve.useId=function(){return mn.current.useId()};Ve.useImperativeHandle=function(t,e,n){return mn.current.useImperativeHandle(t,e,n)};Ve.useInsertionEffect=function(t,e){return mn.current.useInsertionEffect(t,e)};Ve.useLayoutEffect=function(t,e){return mn.current.useLayoutEffect(t,e)};Ve.useMemo=function(t,e){return mn.current.useMemo(t,e)};Ve.useReducer=function(t,e,n){return mn.current.useReducer(t,e,n)};Ve.useRef=function(t){return mn.current.useRef(t)};Ve.useState=function(t){return mn.current.useState(t)};Ve.useSyncExternalStore=function(t,e,n){return mn.current.useSyncExternalStore(t,e,n)};Ve.useTransition=function(){return mn.current.useTransition()};Ve.version="18.3.1";x1.exports=Ve;var H=x1.exports;const wr=Gd(H),_k=tk({__proto__:null,default:wr},[H]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yk=H,vk=Symbol.for("react.element"),wk=Symbol.for("react.fragment"),Ek=Object.prototype.hasOwnProperty,xk=yk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Tk={key:!0,ref:!0,__self:!0,__source:!0};function R1(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)Ek.call(e,r)&&!Tk.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:vk,type:t,key:s,ref:a,props:i,_owner:xk.current}}Kd.Fragment=wk;Kd.jsx=R1;Kd.jsxs=R1;E1.exports=Kd;var x=E1.exports,Xp={},N1={exports:{}},$n={},L1={exports:{}},O1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(J,me){var N=J.length;J.push(me);e:for(;0<N;){var fe=N-1>>>1,_e=J[fe];if(0<i(_e,me))J[fe]=me,J[N]=_e,N=fe;else break e}}function n(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var me=J[0],N=J.pop();if(N!==me){J[0]=N;e:for(var fe=0,_e=J.length,j=_e>>>1;fe<j;){var Ce=2*(fe+1)-1,xe=J[Ce],X=Ce+1,de=J[X];if(0>i(xe,N))X<_e&&0>i(de,xe)?(J[fe]=de,J[X]=N,fe=X):(J[fe]=xe,J[Ce]=N,fe=Ce);else if(X<_e&&0>i(de,N))J[fe]=de,J[X]=N,fe=X;else break e}}return me}function i(J,me){var N=J.sortIndex-me.sortIndex;return N!==0?N:J.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var c=[],f=[],p=1,m=null,y=3,v=!1,T=!1,I=!1,O=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(J){for(var me=n(f);me!==null;){if(me.callback===null)r(f);else if(me.startTime<=J)r(f),me.sortIndex=me.expirationTime,e(c,me);else break;me=n(f)}}function B(J){if(I=!1,C(J),!T)if(n(c)!==null)T=!0,Oe(G);else{var me=n(f);me!==null&&ze(B,me.startTime-J)}}function G(J,me){T=!1,I&&(I=!1,S(A),A=-1),v=!0;var N=y;try{for(C(me),m=n(c);m!==null&&(!(m.expirationTime>me)||J&&!V());){var fe=m.callback;if(typeof fe=="function"){m.callback=null,y=m.priorityLevel;var _e=fe(m.expirationTime<=me);me=t.unstable_now(),typeof _e=="function"?m.callback=_e:m===n(c)&&r(c),C(me)}else r(c);m=n(c)}if(m!==null)var j=!0;else{var Ce=n(f);Ce!==null&&ze(B,Ce.startTime-me),j=!1}return j}finally{m=null,y=N,v=!1}}var $=!1,R=null,A=-1,D=5,M=-1;function V(){return!(t.unstable_now()-M<D)}function z(){if(R!==null){var J=t.unstable_now();M=J;var me=!0;try{me=R(!0,J)}finally{me?F():($=!1,R=null)}}else $=!1}var F;if(typeof k=="function")F=function(){k(z)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,ce=ae.port2;ae.port1.onmessage=z,F=function(){ce.postMessage(null)}}else F=function(){O(z,0)};function Oe(J){R=J,$||($=!0,F())}function ze(J,me){A=O(function(){J(t.unstable_now())},me)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_continueExecution=function(){T||v||(T=!0,Oe(G))},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(J){switch(y){case 1:case 2:case 3:var me=3;break;default:me=y}var N=y;y=me;try{return J()}finally{y=N}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(J,me){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var N=y;y=J;try{return me()}finally{y=N}},t.unstable_scheduleCallback=function(J,me,N){var fe=t.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?fe+N:fe):N=fe,J){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=N+_e,J={id:p++,callback:me,priorityLevel:J,startTime:N,expirationTime:_e,sortIndex:-1},N>fe?(J.sortIndex=N,e(f,J),n(c)===null&&J===n(f)&&(I?(S(A),A=-1):I=!0,ze(B,N-fe))):(J.sortIndex=_e,e(c,J),T||v||(T=!0,Oe(G))),J},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(J){var me=y;return function(){var N=y;y=me;try{return J.apply(this,arguments)}finally{y=N}}}})(O1);L1.exports=O1;var Sk=L1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ik=H,Bn=Sk;function ie(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var D1=new Set,Eu={};function wo(t,e){Na(t,e),Na(t+"Capture",e)}function Na(t,e){for(Eu[t]=e,t=0;t<e.length;t++)D1.add(e[t])}var xi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),em=Object.prototype.hasOwnProperty,Pk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Tv={},Sv={};function Ck(t){return em.call(Sv,t)?!0:em.call(Tv,t)?!1:Pk.test(t)?Sv[t]=!0:(Tv[t]=!0,!1)}function kk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Ak(t,e,n,r){if(e===null||typeof e>"u"||kk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gn(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Gt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Gt[t]=new gn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Gt[e]=new gn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Gt[t]=new gn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Gt[t]=new gn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Gt[t]=new gn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Gt[t]=new gn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Gt[t]=new gn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Gt[t]=new gn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Gt[t]=new gn(t,5,!1,t.toLowerCase(),null,!1,!1)});var $g=/[\-:]([a-z])/g;function Hg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace($g,Hg);Gt[e]=new gn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace($g,Hg);Gt[e]=new gn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace($g,Hg);Gt[e]=new gn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Gt[t]=new gn(t,1,!1,t.toLowerCase(),null,!1,!1)});Gt.xlinkHref=new gn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Gt[t]=new gn(t,1,!1,t.toLowerCase(),null,!0,!0)});function qg(t,e,n,r){var i=Gt.hasOwnProperty(e)?Gt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Ak(e,n,i,r)&&(n=null),r||i===null?Ck(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var bi=Ik.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jc=Symbol.for("react.element"),aa=Symbol.for("react.portal"),la=Symbol.for("react.fragment"),Wg=Symbol.for("react.strict_mode"),tm=Symbol.for("react.profiler"),M1=Symbol.for("react.provider"),V1=Symbol.for("react.context"),Gg=Symbol.for("react.forward_ref"),nm=Symbol.for("react.suspense"),rm=Symbol.for("react.suspense_list"),Kg=Symbol.for("react.memo"),Zi=Symbol.for("react.lazy"),F1=Symbol.for("react.offscreen"),Iv=Symbol.iterator;function Ol(t){return t===null||typeof t!="object"?null:(t=Iv&&t[Iv]||t["@@iterator"],typeof t=="function"?t:null)}var pt=Object.assign,Xf;function Wl(t){if(Xf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Xf=e&&e[1]||""}return`
`+Xf+t}var ep=!1;function tp(t,e){if(!t||ep)return"";ep=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var r=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){r=f}t.call(e.prototype)}else{try{throw Error()}catch(f){r=f}t()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var i=f.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,u=s.length-1;1<=a&&0<=u&&i[a]!==s[u];)u--;for(;1<=a&&0<=u;a--,u--)if(i[a]!==s[u]){if(a!==1||u!==1)do if(a--,u--,0>u||i[a]!==s[u]){var c=`
`+i[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=u);break}}}finally{ep=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Wl(t):""}function bk(t){switch(t.tag){case 5:return Wl(t.type);case 16:return Wl("Lazy");case 13:return Wl("Suspense");case 19:return Wl("SuspenseList");case 0:case 2:case 15:return t=tp(t.type,!1),t;case 11:return t=tp(t.type.render,!1),t;case 1:return t=tp(t.type,!0),t;default:return""}}function im(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case la:return"Fragment";case aa:return"Portal";case tm:return"Profiler";case Wg:return"StrictMode";case nm:return"Suspense";case rm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case V1:return(t.displayName||"Context")+".Consumer";case M1:return(t._context.displayName||"Context")+".Provider";case Gg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Kg:return e=t.displayName||null,e!==null?e:im(t.type)||"Memo";case Zi:e=t._payload,t=t._init;try{return im(t(e))}catch{}}return null}function Rk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return im(e);case 8:return e===Wg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ws(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function j1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Nk(t){var e=j1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Xc(t){t._valueTracker||(t._valueTracker=Nk(t))}function z1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=j1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Yh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function sm(t,e){var n=e.checked;return pt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Pv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ws(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function U1(t,e){e=e.checked,e!=null&&qg(t,"checked",e,!1)}function om(t,e){U1(t,e);var n=ws(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?am(t,e.type,n):e.hasOwnProperty("defaultValue")&&am(t,e.type,ws(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Cv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function am(t,e,n){(e!=="number"||Yh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Gl=Array.isArray;function wa(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ws(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function lm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ie(91));return pt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function kv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ie(92));if(Gl(n)){if(1<n.length)throw Error(ie(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ws(n)}}function B1(t,e){var n=ws(e.value),r=ws(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Av(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function $1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function um(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var eh,H1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(eh=eh||document.createElement("div"),eh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=eh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ru={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Lk=["Webkit","ms","Moz","O"];Object.keys(ru).forEach(function(t){Lk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ru[e]=ru[t]})});function q1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ru.hasOwnProperty(t)&&ru[t]?(""+e).trim():e+"px"}function W1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=q1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Ok=pt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cm(t,e){if(e){if(Ok[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ie(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ie(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ie(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ie(62))}}function hm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dm=null;function Zg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var fm=null,Ea=null,xa=null;function bv(t){if(t=ec(t)){if(typeof fm!="function")throw Error(ie(280));var e=t.stateNode;e&&(e=Xd(e),fm(t.stateNode,t.type,e))}}function G1(t){Ea?xa?xa.push(t):xa=[t]:Ea=t}function K1(){if(Ea){var t=Ea,e=xa;if(xa=Ea=null,bv(t),e)for(t=0;t<e.length;t++)bv(e[t])}}function Z1(t,e){return t(e)}function Q1(){}var np=!1;function Y1(t,e,n){if(np)return t(e,n);np=!0;try{return Z1(t,e,n)}finally{np=!1,(Ea!==null||xa!==null)&&(Q1(),K1())}}function Tu(t,e){var n=t.stateNode;if(n===null)return null;var r=Xd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ie(231,e,typeof n));return n}var pm=!1;if(xi)try{var Dl={};Object.defineProperty(Dl,"passive",{get:function(){pm=!0}}),window.addEventListener("test",Dl,Dl),window.removeEventListener("test",Dl,Dl)}catch{pm=!1}function Dk(t,e,n,r,i,s,a,u,c){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(p){this.onError(p)}}var iu=!1,Jh=null,Xh=!1,mm=null,Mk={onError:function(t){iu=!0,Jh=t}};function Vk(t,e,n,r,i,s,a,u,c){iu=!1,Jh=null,Dk.apply(Mk,arguments)}function Fk(t,e,n,r,i,s,a,u,c){if(Vk.apply(this,arguments),iu){if(iu){var f=Jh;iu=!1,Jh=null}else throw Error(ie(198));Xh||(Xh=!0,mm=f)}}function Eo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function J1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Rv(t){if(Eo(t)!==t)throw Error(ie(188))}function jk(t){var e=t.alternate;if(!e){if(e=Eo(t),e===null)throw Error(ie(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Rv(i),t;if(s===r)return Rv(i),e;s=s.sibling}throw Error(ie(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,u=i.child;u;){if(u===n){a=!0,n=i,r=s;break}if(u===r){a=!0,r=i,n=s;break}u=u.sibling}if(!a){for(u=s.child;u;){if(u===n){a=!0,n=s,r=i;break}if(u===r){a=!0,r=s,n=i;break}u=u.sibling}if(!a)throw Error(ie(189))}}if(n.alternate!==r)throw Error(ie(190))}if(n.tag!==3)throw Error(ie(188));return n.stateNode.current===n?t:e}function X1(t){return t=jk(t),t!==null?ex(t):null}function ex(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ex(t);if(e!==null)return e;t=t.sibling}return null}var tx=Bn.unstable_scheduleCallback,Nv=Bn.unstable_cancelCallback,zk=Bn.unstable_shouldYield,Uk=Bn.unstable_requestPaint,wt=Bn.unstable_now,Bk=Bn.unstable_getCurrentPriorityLevel,Qg=Bn.unstable_ImmediatePriority,nx=Bn.unstable_UserBlockingPriority,ed=Bn.unstable_NormalPriority,$k=Bn.unstable_LowPriority,rx=Bn.unstable_IdlePriority,Zd=null,zr=null;function Hk(t){if(zr&&typeof zr.onCommitFiberRoot=="function")try{zr.onCommitFiberRoot(Zd,t,void 0,(t.current.flags&128)===128)}catch{}}var Er=Math.clz32?Math.clz32:Gk,qk=Math.log,Wk=Math.LN2;function Gk(t){return t>>>=0,t===0?32:31-(qk(t)/Wk|0)|0}var th=64,nh=4194304;function Kl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function td(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~i;u!==0?r=Kl(u):(s&=a,s!==0&&(r=Kl(s)))}else a=n&~i,a!==0?r=Kl(a):s!==0&&(r=Kl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Er(e),i=1<<n,r|=t[n],e&=~i;return r}function Kk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zk(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-Er(s),u=1<<a,c=i[a];c===-1?(!(u&n)||u&r)&&(i[a]=Kk(u,e)):c<=e&&(t.expiredLanes|=u),s&=~u}}function gm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ix(){var t=th;return th<<=1,!(th&4194240)&&(th=64),t}function rp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ju(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Er(e),t[e]=n}function Qk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Er(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Yg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Er(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Qe=0;function sx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ox,Jg,ax,lx,ux,_m=!1,rh=[],as=null,ls=null,us=null,Su=new Map,Iu=new Map,Yi=[],Yk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lv(t,e){switch(t){case"focusin":case"focusout":as=null;break;case"dragenter":case"dragleave":ls=null;break;case"mouseover":case"mouseout":us=null;break;case"pointerover":case"pointerout":Su.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Iu.delete(e.pointerId)}}function Ml(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ec(e),e!==null&&Jg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Jk(t,e,n,r,i){switch(e){case"focusin":return as=Ml(as,t,e,n,r,i),!0;case"dragenter":return ls=Ml(ls,t,e,n,r,i),!0;case"mouseover":return us=Ml(us,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Su.set(s,Ml(Su.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Iu.set(s,Ml(Iu.get(s)||null,t,e,n,r,i)),!0}return!1}function cx(t){var e=Ys(t.target);if(e!==null){var n=Eo(e);if(n!==null){if(e=n.tag,e===13){if(e=J1(n),e!==null){t.blockedOn=e,ux(t.priority,function(){ax(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ch(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ym(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);dm=r,n.target.dispatchEvent(r),dm=null}else return e=ec(n),e!==null&&Jg(e),t.blockedOn=n,!1;e.shift()}return!0}function Ov(t,e,n){Ch(t)&&n.delete(e)}function Xk(){_m=!1,as!==null&&Ch(as)&&(as=null),ls!==null&&Ch(ls)&&(ls=null),us!==null&&Ch(us)&&(us=null),Su.forEach(Ov),Iu.forEach(Ov)}function Vl(t,e){t.blockedOn===e&&(t.blockedOn=null,_m||(_m=!0,Bn.unstable_scheduleCallback(Bn.unstable_NormalPriority,Xk)))}function Pu(t){function e(i){return Vl(i,t)}if(0<rh.length){Vl(rh[0],t);for(var n=1;n<rh.length;n++){var r=rh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(as!==null&&Vl(as,t),ls!==null&&Vl(ls,t),us!==null&&Vl(us,t),Su.forEach(e),Iu.forEach(e),n=0;n<Yi.length;n++)r=Yi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Yi.length&&(n=Yi[0],n.blockedOn===null);)cx(n),n.blockedOn===null&&Yi.shift()}var Ta=bi.ReactCurrentBatchConfig,nd=!0;function eA(t,e,n,r){var i=Qe,s=Ta.transition;Ta.transition=null;try{Qe=1,Xg(t,e,n,r)}finally{Qe=i,Ta.transition=s}}function tA(t,e,n,r){var i=Qe,s=Ta.transition;Ta.transition=null;try{Qe=4,Xg(t,e,n,r)}finally{Qe=i,Ta.transition=s}}function Xg(t,e,n,r){if(nd){var i=ym(t,e,n,r);if(i===null)fp(t,e,r,rd,n),Lv(t,r);else if(Jk(i,t,e,n,r))r.stopPropagation();else if(Lv(t,r),e&4&&-1<Yk.indexOf(t)){for(;i!==null;){var s=ec(i);if(s!==null&&ox(s),s=ym(t,e,n,r),s===null&&fp(t,e,r,rd,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else fp(t,e,r,null,n)}}var rd=null;function ym(t,e,n,r){if(rd=null,t=Zg(r),t=Ys(t),t!==null)if(e=Eo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=J1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return rd=t,null}function hx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Bk()){case Qg:return 1;case nx:return 4;case ed:case $k:return 16;case rx:return 536870912;default:return 16}default:return 16}}var rs=null,e_=null,kh=null;function dx(){if(kh)return kh;var t,e=e_,n=e.length,r,i="value"in rs?rs.value:rs.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return kh=i.slice(t,1<r?1-r:void 0)}function Ah(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ih(){return!0}function Dv(){return!1}function Hn(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(s):s[u]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ih:Dv,this.isPropagationStopped=Dv,this}return pt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ih)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ih)},persist:function(){},isPersistent:ih}),e}var Ka={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},t_=Hn(Ka),Xu=pt({},Ka,{view:0,detail:0}),nA=Hn(Xu),ip,sp,Fl,Qd=pt({},Xu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:n_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Fl&&(Fl&&t.type==="mousemove"?(ip=t.screenX-Fl.screenX,sp=t.screenY-Fl.screenY):sp=ip=0,Fl=t),ip)},movementY:function(t){return"movementY"in t?t.movementY:sp}}),Mv=Hn(Qd),rA=pt({},Qd,{dataTransfer:0}),iA=Hn(rA),sA=pt({},Xu,{relatedTarget:0}),op=Hn(sA),oA=pt({},Ka,{animationName:0,elapsedTime:0,pseudoElement:0}),aA=Hn(oA),lA=pt({},Ka,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),uA=Hn(lA),cA=pt({},Ka,{data:0}),Vv=Hn(cA),hA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=fA[t])?!!e[t]:!1}function n_(){return pA}var mA=pt({},Xu,{key:function(t){if(t.key){var e=hA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ah(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:n_,charCode:function(t){return t.type==="keypress"?Ah(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ah(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),gA=Hn(mA),_A=pt({},Qd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fv=Hn(_A),yA=pt({},Xu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:n_}),vA=Hn(yA),wA=pt({},Ka,{propertyName:0,elapsedTime:0,pseudoElement:0}),EA=Hn(wA),xA=pt({},Qd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),TA=Hn(xA),SA=[9,13,27,32],r_=xi&&"CompositionEvent"in window,su=null;xi&&"documentMode"in document&&(su=document.documentMode);var IA=xi&&"TextEvent"in window&&!su,fx=xi&&(!r_||su&&8<su&&11>=su),jv=" ",zv=!1;function px(t,e){switch(t){case"keyup":return SA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ua=!1;function PA(t,e){switch(t){case"compositionend":return mx(e);case"keypress":return e.which!==32?null:(zv=!0,jv);case"textInput":return t=e.data,t===jv&&zv?null:t;default:return null}}function CA(t,e){if(ua)return t==="compositionend"||!r_&&px(t,e)?(t=dx(),kh=e_=rs=null,ua=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return fx&&e.locale!=="ko"?null:e.data;default:return null}}var kA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Uv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!kA[t.type]:e==="textarea"}function gx(t,e,n,r){G1(r),e=id(e,"onChange"),0<e.length&&(n=new t_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ou=null,Cu=null;function AA(t){Cx(t,0)}function Yd(t){var e=da(t);if(z1(e))return t}function bA(t,e){if(t==="change")return e}var _x=!1;if(xi){var ap;if(xi){var lp="oninput"in document;if(!lp){var Bv=document.createElement("div");Bv.setAttribute("oninput","return;"),lp=typeof Bv.oninput=="function"}ap=lp}else ap=!1;_x=ap&&(!document.documentMode||9<document.documentMode)}function $v(){ou&&(ou.detachEvent("onpropertychange",yx),Cu=ou=null)}function yx(t){if(t.propertyName==="value"&&Yd(Cu)){var e=[];gx(e,Cu,t,Zg(t)),Y1(AA,e)}}function RA(t,e,n){t==="focusin"?($v(),ou=e,Cu=n,ou.attachEvent("onpropertychange",yx)):t==="focusout"&&$v()}function NA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Yd(Cu)}function LA(t,e){if(t==="click")return Yd(e)}function OA(t,e){if(t==="input"||t==="change")return Yd(e)}function DA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Sr=typeof Object.is=="function"?Object.is:DA;function ku(t,e){if(Sr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!em.call(e,i)||!Sr(t[i],e[i]))return!1}return!0}function Hv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qv(t,e){var n=Hv(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Hv(n)}}function vx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?vx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function wx(){for(var t=window,e=Yh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Yh(t.document)}return e}function i_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function MA(t){var e=wx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&vx(n.ownerDocument.documentElement,n)){if(r!==null&&i_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=qv(n,s);var a=qv(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var VA=xi&&"documentMode"in document&&11>=document.documentMode,ca=null,vm=null,au=null,wm=!1;function Wv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;wm||ca==null||ca!==Yh(r)||(r=ca,"selectionStart"in r&&i_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),au&&ku(au,r)||(au=r,r=id(vm,"onSelect"),0<r.length&&(e=new t_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ca)))}function sh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ha={animationend:sh("Animation","AnimationEnd"),animationiteration:sh("Animation","AnimationIteration"),animationstart:sh("Animation","AnimationStart"),transitionend:sh("Transition","TransitionEnd")},up={},Ex={};xi&&(Ex=document.createElement("div").style,"AnimationEvent"in window||(delete ha.animationend.animation,delete ha.animationiteration.animation,delete ha.animationstart.animation),"TransitionEvent"in window||delete ha.transitionend.transition);function Jd(t){if(up[t])return up[t];if(!ha[t])return t;var e=ha[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ex)return up[t]=e[n];return t}var xx=Jd("animationend"),Tx=Jd("animationiteration"),Sx=Jd("animationstart"),Ix=Jd("transitionend"),Px=new Map,Gv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ps(t,e){Px.set(t,e),wo(e,[t])}for(var cp=0;cp<Gv.length;cp++){var hp=Gv[cp],FA=hp.toLowerCase(),jA=hp[0].toUpperCase()+hp.slice(1);Ps(FA,"on"+jA)}Ps(xx,"onAnimationEnd");Ps(Tx,"onAnimationIteration");Ps(Sx,"onAnimationStart");Ps("dblclick","onDoubleClick");Ps("focusin","onFocus");Ps("focusout","onBlur");Ps(Ix,"onTransitionEnd");Na("onMouseEnter",["mouseout","mouseover"]);Na("onMouseLeave",["mouseout","mouseover"]);Na("onPointerEnter",["pointerout","pointerover"]);Na("onPointerLeave",["pointerout","pointerover"]);wo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wo("onBeforeInput",["compositionend","keypress","textInput","paste"]);wo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zl));function Kv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Fk(r,e,void 0,t),t.currentTarget=null}function Cx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var u=r[a],c=u.instance,f=u.currentTarget;if(u=u.listener,c!==s&&i.isPropagationStopped())break e;Kv(i,u,f),s=c}else for(a=0;a<r.length;a++){if(u=r[a],c=u.instance,f=u.currentTarget,u=u.listener,c!==s&&i.isPropagationStopped())break e;Kv(i,u,f),s=c}}}if(Xh)throw t=mm,Xh=!1,mm=null,t}function it(t,e){var n=e[Im];n===void 0&&(n=e[Im]=new Set);var r=t+"__bubble";n.has(r)||(kx(e,t,2,!1),n.add(r))}function dp(t,e,n){var r=0;e&&(r|=4),kx(n,t,r,e)}var oh="_reactListening"+Math.random().toString(36).slice(2);function Au(t){if(!t[oh]){t[oh]=!0,D1.forEach(function(n){n!=="selectionchange"&&(zA.has(n)||dp(n,!1,t),dp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[oh]||(e[oh]=!0,dp("selectionchange",!1,e))}}function kx(t,e,n,r){switch(hx(e)){case 1:var i=eA;break;case 4:i=tA;break;default:i=Xg}n=i.bind(null,e,n,t),i=void 0,!pm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function fp(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var u=r.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;u!==null;){if(a=Ys(u),a===null)return;if(c=a.tag,c===5||c===6){r=s=a;continue e}u=u.parentNode}}r=r.return}Y1(function(){var f=s,p=Zg(n),m=[];e:{var y=Px.get(t);if(y!==void 0){var v=t_,T=t;switch(t){case"keypress":if(Ah(n)===0)break e;case"keydown":case"keyup":v=gA;break;case"focusin":T="focus",v=op;break;case"focusout":T="blur",v=op;break;case"beforeblur":case"afterblur":v=op;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Mv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=iA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=vA;break;case xx:case Tx:case Sx:v=aA;break;case Ix:v=EA;break;case"scroll":v=nA;break;case"wheel":v=TA;break;case"copy":case"cut":case"paste":v=uA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Fv}var I=(e&4)!==0,O=!I&&t==="scroll",S=I?y!==null?y+"Capture":null:y;I=[];for(var k=f,C;k!==null;){C=k;var B=C.stateNode;if(C.tag===5&&B!==null&&(C=B,S!==null&&(B=Tu(k,S),B!=null&&I.push(bu(k,B,C)))),O)break;k=k.return}0<I.length&&(y=new v(y,T,null,n,p),m.push({event:y,listeners:I}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",y&&n!==dm&&(T=n.relatedTarget||n.fromElement)&&(Ys(T)||T[Ti]))break e;if((v||y)&&(y=p.window===p?p:(y=p.ownerDocument)?y.defaultView||y.parentWindow:window,v?(T=n.relatedTarget||n.toElement,v=f,T=T?Ys(T):null,T!==null&&(O=Eo(T),T!==O||T.tag!==5&&T.tag!==6)&&(T=null)):(v=null,T=f),v!==T)){if(I=Mv,B="onMouseLeave",S="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(I=Fv,B="onPointerLeave",S="onPointerEnter",k="pointer"),O=v==null?y:da(v),C=T==null?y:da(T),y=new I(B,k+"leave",v,n,p),y.target=O,y.relatedTarget=C,B=null,Ys(p)===f&&(I=new I(S,k+"enter",T,n,p),I.target=C,I.relatedTarget=O,B=I),O=B,v&&T)t:{for(I=v,S=T,k=0,C=I;C;C=na(C))k++;for(C=0,B=S;B;B=na(B))C++;for(;0<k-C;)I=na(I),k--;for(;0<C-k;)S=na(S),C--;for(;k--;){if(I===S||S!==null&&I===S.alternate)break t;I=na(I),S=na(S)}I=null}else I=null;v!==null&&Zv(m,y,v,I,!1),T!==null&&O!==null&&Zv(m,O,T,I,!0)}}e:{if(y=f?da(f):window,v=y.nodeName&&y.nodeName.toLowerCase(),v==="select"||v==="input"&&y.type==="file")var G=bA;else if(Uv(y))if(_x)G=OA;else{G=NA;var $=RA}else(v=y.nodeName)&&v.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(G=LA);if(G&&(G=G(t,f))){gx(m,G,n,p);break e}$&&$(t,y,f),t==="focusout"&&($=y._wrapperState)&&$.controlled&&y.type==="number"&&am(y,"number",y.value)}switch($=f?da(f):window,t){case"focusin":(Uv($)||$.contentEditable==="true")&&(ca=$,vm=f,au=null);break;case"focusout":au=vm=ca=null;break;case"mousedown":wm=!0;break;case"contextmenu":case"mouseup":case"dragend":wm=!1,Wv(m,n,p);break;case"selectionchange":if(VA)break;case"keydown":case"keyup":Wv(m,n,p)}var R;if(r_)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else ua?px(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(fx&&n.locale!=="ko"&&(ua||A!=="onCompositionStart"?A==="onCompositionEnd"&&ua&&(R=dx()):(rs=p,e_="value"in rs?rs.value:rs.textContent,ua=!0)),$=id(f,A),0<$.length&&(A=new Vv(A,t,null,n,p),m.push({event:A,listeners:$}),R?A.data=R:(R=mx(n),R!==null&&(A.data=R)))),(R=IA?PA(t,n):CA(t,n))&&(f=id(f,"onBeforeInput"),0<f.length&&(p=new Vv("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:f}),p.data=R))}Cx(m,e)})}function bu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function id(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Tu(t,n),s!=null&&r.unshift(bu(t,s,i)),s=Tu(t,e),s!=null&&r.push(bu(t,s,i))),t=t.return}return r}function na(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Zv(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var u=n,c=u.alternate,f=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&f!==null&&(u=f,i?(c=Tu(n,s),c!=null&&a.unshift(bu(n,c,u))):i||(c=Tu(n,s),c!=null&&a.push(bu(n,c,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var UA=/\r\n?/g,BA=/\u0000|\uFFFD/g;function Qv(t){return(typeof t=="string"?t:""+t).replace(UA,`
`).replace(BA,"")}function ah(t,e,n){if(e=Qv(e),Qv(t)!==e&&n)throw Error(ie(425))}function sd(){}var Em=null,xm=null;function Tm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Sm=typeof setTimeout=="function"?setTimeout:void 0,$A=typeof clearTimeout=="function"?clearTimeout:void 0,Yv=typeof Promise=="function"?Promise:void 0,HA=typeof queueMicrotask=="function"?queueMicrotask:typeof Yv<"u"?function(t){return Yv.resolve(null).then(t).catch(qA)}:Sm;function qA(t){setTimeout(function(){throw t})}function pp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Pu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Pu(e)}function cs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Jv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Za=Math.random().toString(36).slice(2),Vr="__reactFiber$"+Za,Ru="__reactProps$"+Za,Ti="__reactContainer$"+Za,Im="__reactEvents$"+Za,WA="__reactListeners$"+Za,GA="__reactHandles$"+Za;function Ys(t){var e=t[Vr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ti]||n[Vr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Jv(t);t!==null;){if(n=t[Vr])return n;t=Jv(t)}return e}t=n,n=t.parentNode}return null}function ec(t){return t=t[Vr]||t[Ti],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function da(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ie(33))}function Xd(t){return t[Ru]||null}var Pm=[],fa=-1;function Cs(t){return{current:t}}function ot(t){0>fa||(t.current=Pm[fa],Pm[fa]=null,fa--)}function nt(t,e){fa++,Pm[fa]=t.current,t.current=e}var Es={},sn=Cs(Es),Sn=Cs(!1),oo=Es;function La(t,e){var n=t.type.contextTypes;if(!n)return Es;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function In(t){return t=t.childContextTypes,t!=null}function od(){ot(Sn),ot(sn)}function Xv(t,e,n){if(sn.current!==Es)throw Error(ie(168));nt(sn,e),nt(Sn,n)}function Ax(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ie(108,Rk(t)||"Unknown",i));return pt({},n,r)}function ad(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Es,oo=sn.current,nt(sn,t),nt(Sn,Sn.current),!0}function ew(t,e,n){var r=t.stateNode;if(!r)throw Error(ie(169));n?(t=Ax(t,e,oo),r.__reactInternalMemoizedMergedChildContext=t,ot(Sn),ot(sn),nt(sn,t)):ot(Sn),nt(Sn,n)}var pi=null,ef=!1,mp=!1;function bx(t){pi===null?pi=[t]:pi.push(t)}function KA(t){ef=!0,bx(t)}function ks(){if(!mp&&pi!==null){mp=!0;var t=0,e=Qe;try{var n=pi;for(Qe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}pi=null,ef=!1}catch(i){throw pi!==null&&(pi=pi.slice(t+1)),tx(Qg,ks),i}finally{Qe=e,mp=!1}}return null}var pa=[],ma=0,ld=null,ud=0,nr=[],rr=0,ao=null,mi=1,gi="";function Gs(t,e){pa[ma++]=ud,pa[ma++]=ld,ld=t,ud=e}function Rx(t,e,n){nr[rr++]=mi,nr[rr++]=gi,nr[rr++]=ao,ao=t;var r=mi;t=gi;var i=32-Er(r)-1;r&=~(1<<i),n+=1;var s=32-Er(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,mi=1<<32-Er(e)+i|n<<i|r,gi=s+t}else mi=1<<s|n<<i|r,gi=t}function s_(t){t.return!==null&&(Gs(t,1),Rx(t,1,0))}function o_(t){for(;t===ld;)ld=pa[--ma],pa[ma]=null,ud=pa[--ma],pa[ma]=null;for(;t===ao;)ao=nr[--rr],nr[rr]=null,gi=nr[--rr],nr[rr]=null,mi=nr[--rr],nr[rr]=null}var zn=null,Vn=null,ut=!1,yr=null;function Nx(t,e){var n=sr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function tw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,zn=t,Vn=cs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,zn=t,Vn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ao!==null?{id:mi,overflow:gi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=sr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,zn=t,Vn=null,!0):!1;default:return!1}}function Cm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function km(t){if(ut){var e=Vn;if(e){var n=e;if(!tw(t,e)){if(Cm(t))throw Error(ie(418));e=cs(n.nextSibling);var r=zn;e&&tw(t,e)?Nx(r,n):(t.flags=t.flags&-4097|2,ut=!1,zn=t)}}else{if(Cm(t))throw Error(ie(418));t.flags=t.flags&-4097|2,ut=!1,zn=t}}}function nw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zn=t}function lh(t){if(t!==zn)return!1;if(!ut)return nw(t),ut=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Tm(t.type,t.memoizedProps)),e&&(e=Vn)){if(Cm(t))throw Lx(),Error(ie(418));for(;e;)Nx(t,e),e=cs(e.nextSibling)}if(nw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ie(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Vn=cs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Vn=null}}else Vn=zn?cs(t.stateNode.nextSibling):null;return!0}function Lx(){for(var t=Vn;t;)t=cs(t.nextSibling)}function Oa(){Vn=zn=null,ut=!1}function a_(t){yr===null?yr=[t]:yr.push(t)}var ZA=bi.ReactCurrentBatchConfig;function jl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ie(309));var r=n.stateNode}if(!r)throw Error(ie(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var u=i.refs;a===null?delete u[s]:u[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(ie(284));if(!n._owner)throw Error(ie(290,t))}return t}function uh(t,e){throw t=Object.prototype.toString.call(e),Error(ie(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function rw(t){var e=t._init;return e(t._payload)}function Ox(t){function e(S,k){if(t){var C=S.deletions;C===null?(S.deletions=[k],S.flags|=16):C.push(k)}}function n(S,k){if(!t)return null;for(;k!==null;)e(S,k),k=k.sibling;return null}function r(S,k){for(S=new Map;k!==null;)k.key!==null?S.set(k.key,k):S.set(k.index,k),k=k.sibling;return S}function i(S,k){return S=ps(S,k),S.index=0,S.sibling=null,S}function s(S,k,C){return S.index=C,t?(C=S.alternate,C!==null?(C=C.index,C<k?(S.flags|=2,k):C):(S.flags|=2,k)):(S.flags|=1048576,k)}function a(S){return t&&S.alternate===null&&(S.flags|=2),S}function u(S,k,C,B){return k===null||k.tag!==6?(k=xp(C,S.mode,B),k.return=S,k):(k=i(k,C),k.return=S,k)}function c(S,k,C,B){var G=C.type;return G===la?p(S,k,C.props.children,B,C.key):k!==null&&(k.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===Zi&&rw(G)===k.type)?(B=i(k,C.props),B.ref=jl(S,k,C),B.return=S,B):(B=Mh(C.type,C.key,C.props,null,S.mode,B),B.ref=jl(S,k,C),B.return=S,B)}function f(S,k,C,B){return k===null||k.tag!==4||k.stateNode.containerInfo!==C.containerInfo||k.stateNode.implementation!==C.implementation?(k=Tp(C,S.mode,B),k.return=S,k):(k=i(k,C.children||[]),k.return=S,k)}function p(S,k,C,B,G){return k===null||k.tag!==7?(k=ro(C,S.mode,B,G),k.return=S,k):(k=i(k,C),k.return=S,k)}function m(S,k,C){if(typeof k=="string"&&k!==""||typeof k=="number")return k=xp(""+k,S.mode,C),k.return=S,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Jc:return C=Mh(k.type,k.key,k.props,null,S.mode,C),C.ref=jl(S,null,k),C.return=S,C;case aa:return k=Tp(k,S.mode,C),k.return=S,k;case Zi:var B=k._init;return m(S,B(k._payload),C)}if(Gl(k)||Ol(k))return k=ro(k,S.mode,C,null),k.return=S,k;uh(S,k)}return null}function y(S,k,C,B){var G=k!==null?k.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return G!==null?null:u(S,k,""+C,B);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Jc:return C.key===G?c(S,k,C,B):null;case aa:return C.key===G?f(S,k,C,B):null;case Zi:return G=C._init,y(S,k,G(C._payload),B)}if(Gl(C)||Ol(C))return G!==null?null:p(S,k,C,B,null);uh(S,C)}return null}function v(S,k,C,B,G){if(typeof B=="string"&&B!==""||typeof B=="number")return S=S.get(C)||null,u(k,S,""+B,G);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Jc:return S=S.get(B.key===null?C:B.key)||null,c(k,S,B,G);case aa:return S=S.get(B.key===null?C:B.key)||null,f(k,S,B,G);case Zi:var $=B._init;return v(S,k,C,$(B._payload),G)}if(Gl(B)||Ol(B))return S=S.get(C)||null,p(k,S,B,G,null);uh(k,B)}return null}function T(S,k,C,B){for(var G=null,$=null,R=k,A=k=0,D=null;R!==null&&A<C.length;A++){R.index>A?(D=R,R=null):D=R.sibling;var M=y(S,R,C[A],B);if(M===null){R===null&&(R=D);break}t&&R&&M.alternate===null&&e(S,R),k=s(M,k,A),$===null?G=M:$.sibling=M,$=M,R=D}if(A===C.length)return n(S,R),ut&&Gs(S,A),G;if(R===null){for(;A<C.length;A++)R=m(S,C[A],B),R!==null&&(k=s(R,k,A),$===null?G=R:$.sibling=R,$=R);return ut&&Gs(S,A),G}for(R=r(S,R);A<C.length;A++)D=v(R,S,A,C[A],B),D!==null&&(t&&D.alternate!==null&&R.delete(D.key===null?A:D.key),k=s(D,k,A),$===null?G=D:$.sibling=D,$=D);return t&&R.forEach(function(V){return e(S,V)}),ut&&Gs(S,A),G}function I(S,k,C,B){var G=Ol(C);if(typeof G!="function")throw Error(ie(150));if(C=G.call(C),C==null)throw Error(ie(151));for(var $=G=null,R=k,A=k=0,D=null,M=C.next();R!==null&&!M.done;A++,M=C.next()){R.index>A?(D=R,R=null):D=R.sibling;var V=y(S,R,M.value,B);if(V===null){R===null&&(R=D);break}t&&R&&V.alternate===null&&e(S,R),k=s(V,k,A),$===null?G=V:$.sibling=V,$=V,R=D}if(M.done)return n(S,R),ut&&Gs(S,A),G;if(R===null){for(;!M.done;A++,M=C.next())M=m(S,M.value,B),M!==null&&(k=s(M,k,A),$===null?G=M:$.sibling=M,$=M);return ut&&Gs(S,A),G}for(R=r(S,R);!M.done;A++,M=C.next())M=v(R,S,A,M.value,B),M!==null&&(t&&M.alternate!==null&&R.delete(M.key===null?A:M.key),k=s(M,k,A),$===null?G=M:$.sibling=M,$=M);return t&&R.forEach(function(z){return e(S,z)}),ut&&Gs(S,A),G}function O(S,k,C,B){if(typeof C=="object"&&C!==null&&C.type===la&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Jc:e:{for(var G=C.key,$=k;$!==null;){if($.key===G){if(G=C.type,G===la){if($.tag===7){n(S,$.sibling),k=i($,C.props.children),k.return=S,S=k;break e}}else if($.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===Zi&&rw(G)===$.type){n(S,$.sibling),k=i($,C.props),k.ref=jl(S,$,C),k.return=S,S=k;break e}n(S,$);break}else e(S,$);$=$.sibling}C.type===la?(k=ro(C.props.children,S.mode,B,C.key),k.return=S,S=k):(B=Mh(C.type,C.key,C.props,null,S.mode,B),B.ref=jl(S,k,C),B.return=S,S=B)}return a(S);case aa:e:{for($=C.key;k!==null;){if(k.key===$)if(k.tag===4&&k.stateNode.containerInfo===C.containerInfo&&k.stateNode.implementation===C.implementation){n(S,k.sibling),k=i(k,C.children||[]),k.return=S,S=k;break e}else{n(S,k);break}else e(S,k);k=k.sibling}k=Tp(C,S.mode,B),k.return=S,S=k}return a(S);case Zi:return $=C._init,O(S,k,$(C._payload),B)}if(Gl(C))return T(S,k,C,B);if(Ol(C))return I(S,k,C,B);uh(S,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,k!==null&&k.tag===6?(n(S,k.sibling),k=i(k,C),k.return=S,S=k):(n(S,k),k=xp(C,S.mode,B),k.return=S,S=k),a(S)):n(S,k)}return O}var Da=Ox(!0),Dx=Ox(!1),cd=Cs(null),hd=null,ga=null,l_=null;function u_(){l_=ga=hd=null}function c_(t){var e=cd.current;ot(cd),t._currentValue=e}function Am(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Sa(t,e){hd=t,l_=ga=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Tn=!0),t.firstContext=null)}function ar(t){var e=t._currentValue;if(l_!==t)if(t={context:t,memoizedValue:e,next:null},ga===null){if(hd===null)throw Error(ie(308));ga=t,hd.dependencies={lanes:0,firstContext:t}}else ga=ga.next=t;return e}var Js=null;function h_(t){Js===null?Js=[t]:Js.push(t)}function Mx(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,h_(e)):(n.next=i.next,i.next=n),e.interleaved=n,Si(t,r)}function Si(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Qi=!1;function d_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function hs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,We&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Si(t,n)}return i=r.interleaved,i===null?(e.next=e,h_(r)):(e.next=i.next,i.next=e),r.interleaved=e,Si(t,n)}function bh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Yg(t,n)}}function iw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function dd(t,e,n,r){var i=t.updateQueue;Qi=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var c=u,f=c.next;c.next=null,a===null?s=f:a.next=f,a=c;var p=t.alternate;p!==null&&(p=p.updateQueue,u=p.lastBaseUpdate,u!==a&&(u===null?p.firstBaseUpdate=f:u.next=f,p.lastBaseUpdate=c))}if(s!==null){var m=i.baseState;a=0,p=f=c=null,u=s;do{var y=u.lane,v=u.eventTime;if((r&y)===y){p!==null&&(p=p.next={eventTime:v,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var T=t,I=u;switch(y=e,v=n,I.tag){case 1:if(T=I.payload,typeof T=="function"){m=T.call(v,m,y);break e}m=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=I.payload,y=typeof T=="function"?T.call(v,m,y):T,y==null)break e;m=pt({},m,y);break e;case 2:Qi=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,y=i.effects,y===null?i.effects=[u]:y.push(u))}else v={eventTime:v,lane:y,tag:u.tag,payload:u.payload,callback:u.callback,next:null},p===null?(f=p=v,c=m):p=p.next=v,a|=y;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;y=u,u=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(!0);if(p===null&&(c=m),i.baseState=c,i.firstBaseUpdate=f,i.lastBaseUpdate=p,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);uo|=a,t.lanes=a,t.memoizedState=m}}function sw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ie(191,i));i.call(r)}}}var tc={},Ur=Cs(tc),Nu=Cs(tc),Lu=Cs(tc);function Xs(t){if(t===tc)throw Error(ie(174));return t}function f_(t,e){switch(nt(Lu,e),nt(Nu,t),nt(Ur,tc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:um(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=um(e,t)}ot(Ur),nt(Ur,e)}function Ma(){ot(Ur),ot(Nu),ot(Lu)}function Fx(t){Xs(Lu.current);var e=Xs(Ur.current),n=um(e,t.type);e!==n&&(nt(Nu,t),nt(Ur,n))}function p_(t){Nu.current===t&&(ot(Ur),ot(Nu))}var dt=Cs(0);function fd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gp=[];function m_(){for(var t=0;t<gp.length;t++)gp[t]._workInProgressVersionPrimary=null;gp.length=0}var Rh=bi.ReactCurrentDispatcher,_p=bi.ReactCurrentBatchConfig,lo=0,ft=null,Nt=null,Ft=null,pd=!1,lu=!1,Ou=0,QA=0;function Yt(){throw Error(ie(321))}function g_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Sr(t[n],e[n]))return!1;return!0}function __(t,e,n,r,i,s){if(lo=s,ft=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Rh.current=t===null||t.memoizedState===null?eb:tb,t=n(r,i),lu){s=0;do{if(lu=!1,Ou=0,25<=s)throw Error(ie(301));s+=1,Ft=Nt=null,e.updateQueue=null,Rh.current=nb,t=n(r,i)}while(lu)}if(Rh.current=md,e=Nt!==null&&Nt.next!==null,lo=0,Ft=Nt=ft=null,pd=!1,e)throw Error(ie(300));return t}function y_(){var t=Ou!==0;return Ou=0,t}function Dr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?ft.memoizedState=Ft=t:Ft=Ft.next=t,Ft}function lr(){if(Nt===null){var t=ft.alternate;t=t!==null?t.memoizedState:null}else t=Nt.next;var e=Ft===null?ft.memoizedState:Ft.next;if(e!==null)Ft=e,Nt=t;else{if(t===null)throw Error(ie(310));Nt=t,t={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},Ft===null?ft.memoizedState=Ft=t:Ft=Ft.next=t}return Ft}function Du(t,e){return typeof e=="function"?e(t):e}function yp(t){var e=lr(),n=e.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=t;var r=Nt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var u=a=null,c=null,f=s;do{var p=f.lane;if((lo&p)===p)c!==null&&(c=c.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:t(r,f.action);else{var m={lane:p,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};c===null?(u=c=m,a=r):c=c.next=m,ft.lanes|=p,uo|=p}f=f.next}while(f!==null&&f!==s);c===null?a=r:c.next=u,Sr(r,e.memoizedState)||(Tn=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ft.lanes|=s,uo|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function vp(t){var e=lr(),n=e.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);Sr(s,e.memoizedState)||(Tn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function jx(){}function zx(t,e){var n=ft,r=lr(),i=e(),s=!Sr(r.memoizedState,i);if(s&&(r.memoizedState=i,Tn=!0),r=r.queue,v_($x.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ft!==null&&Ft.memoizedState.tag&1){if(n.flags|=2048,Mu(9,Bx.bind(null,n,r,i,e),void 0,null),jt===null)throw Error(ie(349));lo&30||Ux(n,e,i)}return i}function Ux(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ft.updateQueue,e===null?(e={lastEffect:null,stores:null},ft.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Bx(t,e,n,r){e.value=n,e.getSnapshot=r,Hx(e)&&qx(t)}function $x(t,e,n){return n(function(){Hx(e)&&qx(t)})}function Hx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Sr(t,n)}catch{return!0}}function qx(t){var e=Si(t,1);e!==null&&xr(e,t,1,-1)}function ow(t){var e=Dr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Du,lastRenderedState:t},e.queue=t,t=t.dispatch=XA.bind(null,ft,t),[e.memoizedState,t]}function Mu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ft.updateQueue,e===null?(e={lastEffect:null,stores:null},ft.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Wx(){return lr().memoizedState}function Nh(t,e,n,r){var i=Dr();ft.flags|=t,i.memoizedState=Mu(1|e,n,void 0,r===void 0?null:r)}function tf(t,e,n,r){var i=lr();r=r===void 0?null:r;var s=void 0;if(Nt!==null){var a=Nt.memoizedState;if(s=a.destroy,r!==null&&g_(r,a.deps)){i.memoizedState=Mu(e,n,s,r);return}}ft.flags|=t,i.memoizedState=Mu(1|e,n,s,r)}function aw(t,e){return Nh(8390656,8,t,e)}function v_(t,e){return tf(2048,8,t,e)}function Gx(t,e){return tf(4,2,t,e)}function Kx(t,e){return tf(4,4,t,e)}function Zx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Qx(t,e,n){return n=n!=null?n.concat([t]):null,tf(4,4,Zx.bind(null,e,t),n)}function w_(){}function Yx(t,e){var n=lr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&g_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Jx(t,e){var n=lr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&g_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Xx(t,e,n){return lo&21?(Sr(n,e)||(n=ix(),ft.lanes|=n,uo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Tn=!0),t.memoizedState=n)}function YA(t,e){var n=Qe;Qe=n!==0&&4>n?n:4,t(!0);var r=_p.transition;_p.transition={};try{t(!1),e()}finally{Qe=n,_p.transition=r}}function eT(){return lr().memoizedState}function JA(t,e,n){var r=fs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},tT(t))nT(e,n);else if(n=Mx(t,e,n,r),n!==null){var i=pn();xr(n,t,r,i),rT(n,e,r)}}function XA(t,e,n){var r=fs(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(tT(t))nT(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,u=s(a,n);if(i.hasEagerState=!0,i.eagerState=u,Sr(u,a)){var c=e.interleaved;c===null?(i.next=i,h_(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=Mx(t,e,i,r),n!==null&&(i=pn(),xr(n,t,r,i),rT(n,e,r))}}function tT(t){var e=t.alternate;return t===ft||e!==null&&e===ft}function nT(t,e){lu=pd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function rT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Yg(t,n)}}var md={readContext:ar,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useInsertionEffect:Yt,useLayoutEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useMutableSource:Yt,useSyncExternalStore:Yt,useId:Yt,unstable_isNewReconciler:!1},eb={readContext:ar,useCallback:function(t,e){return Dr().memoizedState=[t,e===void 0?null:e],t},useContext:ar,useEffect:aw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Nh(4194308,4,Zx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Nh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Nh(4,2,t,e)},useMemo:function(t,e){var n=Dr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Dr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=JA.bind(null,ft,t),[r.memoizedState,t]},useRef:function(t){var e=Dr();return t={current:t},e.memoizedState=t},useState:ow,useDebugValue:w_,useDeferredValue:function(t){return Dr().memoizedState=t},useTransition:function(){var t=ow(!1),e=t[0];return t=YA.bind(null,t[1]),Dr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ft,i=Dr();if(ut){if(n===void 0)throw Error(ie(407));n=n()}else{if(n=e(),jt===null)throw Error(ie(349));lo&30||Ux(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,aw($x.bind(null,r,s,t),[t]),r.flags|=2048,Mu(9,Bx.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Dr(),e=jt.identifierPrefix;if(ut){var n=gi,r=mi;n=(r&~(1<<32-Er(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ou++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=QA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},tb={readContext:ar,useCallback:Yx,useContext:ar,useEffect:v_,useImperativeHandle:Qx,useInsertionEffect:Gx,useLayoutEffect:Kx,useMemo:Jx,useReducer:yp,useRef:Wx,useState:function(){return yp(Du)},useDebugValue:w_,useDeferredValue:function(t){var e=lr();return Xx(e,Nt.memoizedState,t)},useTransition:function(){var t=yp(Du)[0],e=lr().memoizedState;return[t,e]},useMutableSource:jx,useSyncExternalStore:zx,useId:eT,unstable_isNewReconciler:!1},nb={readContext:ar,useCallback:Yx,useContext:ar,useEffect:v_,useImperativeHandle:Qx,useInsertionEffect:Gx,useLayoutEffect:Kx,useMemo:Jx,useReducer:vp,useRef:Wx,useState:function(){return vp(Du)},useDebugValue:w_,useDeferredValue:function(t){var e=lr();return Nt===null?e.memoizedState=t:Xx(e,Nt.memoizedState,t)},useTransition:function(){var t=vp(Du)[0],e=lr().memoizedState;return[t,e]},useMutableSource:jx,useSyncExternalStore:zx,useId:eT,unstable_isNewReconciler:!1};function gr(t,e){if(t&&t.defaultProps){e=pt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function bm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:pt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var nf={isMounted:function(t){return(t=t._reactInternals)?Eo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=pn(),i=fs(t),s=wi(r,i);s.payload=e,n!=null&&(s.callback=n),e=hs(t,s,i),e!==null&&(xr(e,t,i,r),bh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=pn(),i=fs(t),s=wi(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=hs(t,s,i),e!==null&&(xr(e,t,i,r),bh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pn(),r=fs(t),i=wi(n,r);i.tag=2,e!=null&&(i.callback=e),e=hs(t,i,r),e!==null&&(xr(e,t,r,n),bh(e,t,r))}};function lw(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!ku(n,r)||!ku(i,s):!0}function iT(t,e,n){var r=!1,i=Es,s=e.contextType;return typeof s=="object"&&s!==null?s=ar(s):(i=In(e)?oo:sn.current,r=e.contextTypes,s=(r=r!=null)?La(t,i):Es),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=nf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function uw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&nf.enqueueReplaceState(e,e.state,null)}function Rm(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},d_(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ar(s):(s=In(e)?oo:sn.current,i.context=La(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(bm(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&nf.enqueueReplaceState(i,i.state,null),dd(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Va(t,e){try{var n="",r=e;do n+=bk(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function wp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Nm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var rb=typeof WeakMap=="function"?WeakMap:Map;function sT(t,e,n){n=wi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){_d||(_d=!0,Bm=r),Nm(t,e)},n}function oT(t,e,n){n=wi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Nm(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Nm(t,e),typeof r!="function"&&(ds===null?ds=new Set([this]):ds.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function cw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new rb;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=_b.bind(null,t,e,n),e.then(t,t))}function hw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function dw(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=wi(-1,1),e.tag=2,hs(n,e,1))),n.lanes|=1),t)}var ib=bi.ReactCurrentOwner,Tn=!1;function fn(t,e,n,r){e.child=t===null?Dx(e,null,n,r):Da(e,t.child,n,r)}function fw(t,e,n,r,i){n=n.render;var s=e.ref;return Sa(e,i),r=__(t,e,n,r,s,i),n=y_(),t!==null&&!Tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ii(t,e,i)):(ut&&n&&s_(e),e.flags|=1,fn(t,e,r,i),e.child)}function pw(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!k_(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,aT(t,e,s,r,i)):(t=Mh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:ku,n(a,r)&&t.ref===e.ref)return Ii(t,e,i)}return e.flags|=1,t=ps(s,r),t.ref=e.ref,t.return=e,e.child=t}function aT(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ku(s,r)&&t.ref===e.ref)if(Tn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Tn=!0);else return e.lanes=t.lanes,Ii(t,e,i)}return Lm(t,e,n,r,i)}function lT(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt(ya,Mn),Mn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,nt(ya,Mn),Mn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,nt(ya,Mn),Mn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,nt(ya,Mn),Mn|=r;return fn(t,e,i,n),e.child}function uT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Lm(t,e,n,r,i){var s=In(n)?oo:sn.current;return s=La(e,s),Sa(e,i),n=__(t,e,n,r,s,i),r=y_(),t!==null&&!Tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ii(t,e,i)):(ut&&r&&s_(e),e.flags|=1,fn(t,e,n,i),e.child)}function mw(t,e,n,r,i){if(In(n)){var s=!0;ad(e)}else s=!1;if(Sa(e,i),e.stateNode===null)Lh(t,e),iT(e,n,r),Rm(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var c=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=ar(f):(f=In(n)?oo:sn.current,f=La(e,f));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==r||c!==f)&&uw(e,a,r,f),Qi=!1;var y=e.memoizedState;a.state=y,dd(e,r,a,i),c=e.memoizedState,u!==r||y!==c||Sn.current||Qi?(typeof p=="function"&&(bm(e,n,p,r),c=e.memoizedState),(u=Qi||lw(e,n,u,r,y,c,f))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=f,r=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Vx(t,e),u=e.memoizedProps,f=e.type===e.elementType?u:gr(e.type,u),a.props=f,m=e.pendingProps,y=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=ar(c):(c=In(n)?oo:sn.current,c=La(e,c));var v=n.getDerivedStateFromProps;(p=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==m||y!==c)&&uw(e,a,r,c),Qi=!1,y=e.memoizedState,a.state=y,dd(e,r,a,i);var T=e.memoizedState;u!==m||y!==T||Sn.current||Qi?(typeof v=="function"&&(bm(e,n,v,r),T=e.memoizedState),(f=Qi||lw(e,n,f,r,y,T,c)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,T,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,T,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),a.props=r,a.state=T,a.context=c,r=f):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return Om(t,e,n,r,s,i)}function Om(t,e,n,r,i,s){uT(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&ew(e,n,!1),Ii(t,e,s);r=e.stateNode,ib.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Da(e,t.child,null,s),e.child=Da(e,null,u,s)):fn(t,e,u,s),e.memoizedState=r.state,i&&ew(e,n,!0),e.child}function cT(t){var e=t.stateNode;e.pendingContext?Xv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Xv(t,e.context,!1),f_(t,e.containerInfo)}function gw(t,e,n,r,i){return Oa(),a_(i),e.flags|=256,fn(t,e,n,r),e.child}var Dm={dehydrated:null,treeContext:null,retryLane:0};function Mm(t){return{baseLanes:t,cachePool:null,transitions:null}}function hT(t,e,n){var r=e.pendingProps,i=dt.current,s=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(i&2)!==0),u?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),nt(dt,i&1),t===null)return km(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=of(a,r,0,null),t=ro(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Mm(n),e.memoizedState=Dm,t):E_(e,a));if(i=t.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return sb(t,e,a,r,u,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,u=i.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=ps(i,c),r.subtreeFlags=i.subtreeFlags&14680064),u!==null?s=ps(u,s):(s=ro(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?Mm(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=Dm,r}return s=t.child,t=s.sibling,r=ps(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function E_(t,e){return e=of({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ch(t,e,n,r){return r!==null&&a_(r),Da(e,t.child,null,n),t=E_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function sb(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=wp(Error(ie(422))),ch(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=of({mode:"visible",children:r.children},i,0,null),s=ro(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Da(e,t.child,null,a),e.child.memoizedState=Mm(a),e.memoizedState=Dm,s);if(!(e.mode&1))return ch(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var u=r.dgst;return r=u,s=Error(ie(419)),r=wp(s,r,void 0),ch(t,e,a,r)}if(u=(a&t.childLanes)!==0,Tn||u){if(r=jt,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Si(t,i),xr(r,t,i,-1))}return C_(),r=wp(Error(ie(421))),ch(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=yb.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Vn=cs(i.nextSibling),zn=e,ut=!0,yr=null,t!==null&&(nr[rr++]=mi,nr[rr++]=gi,nr[rr++]=ao,mi=t.id,gi=t.overflow,ao=e),e=E_(e,r.children),e.flags|=4096,e)}function _w(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Am(t.return,e,n)}function Ep(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function dT(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(fn(t,e,r.children,n),r=dt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&_w(t,n,e);else if(t.tag===19)_w(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(nt(dt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&fd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ep(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&fd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ep(e,!0,n,null,s);break;case"together":Ep(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Lh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ii(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),uo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ie(153));if(e.child!==null){for(t=e.child,n=ps(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ps(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ob(t,e,n){switch(e.tag){case 3:cT(e),Oa();break;case 5:Fx(e);break;case 1:In(e.type)&&ad(e);break;case 4:f_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;nt(cd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(nt(dt,dt.current&1),e.flags|=128,null):n&e.child.childLanes?hT(t,e,n):(nt(dt,dt.current&1),t=Ii(t,e,n),t!==null?t.sibling:null);nt(dt,dt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return dT(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),nt(dt,dt.current),r)break;return null;case 22:case 23:return e.lanes=0,lT(t,e,n)}return Ii(t,e,n)}var fT,Vm,pT,mT;fT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Vm=function(){};pT=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Xs(Ur.current);var s=null;switch(n){case"input":i=sm(t,i),r=sm(t,r),s=[];break;case"select":i=pt({},i,{value:void 0}),r=pt({},r,{value:void 0}),s=[];break;case"textarea":i=lm(t,i),r=lm(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=sd)}cm(n,r);var a;n=null;for(f in i)if(!r.hasOwnProperty(f)&&i.hasOwnProperty(f)&&i[f]!=null)if(f==="style"){var u=i[f];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Eu.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var c=r[f];if(u=i!=null?i[f]:void 0,r.hasOwnProperty(f)&&c!==u&&(c!=null||u!=null))if(f==="style")if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(f,n)),n=c;else f==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(s=s||[]).push(f,c)):f==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(f,""+c):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Eu.hasOwnProperty(f)?(c!=null&&f==="onScroll"&&it("scroll",t),s||u===c||(s=[])):(s=s||[]).push(f,c))}n&&(s=s||[]).push("style",n);var f=s;(e.updateQueue=f)&&(e.flags|=4)}};mT=function(t,e,n,r){n!==r&&(e.flags|=4)};function zl(t,e){if(!ut)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Jt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ab(t,e,n){var r=e.pendingProps;switch(o_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jt(e),null;case 1:return In(e.type)&&od(),Jt(e),null;case 3:return r=e.stateNode,Ma(),ot(Sn),ot(sn),m_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(lh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,yr!==null&&(qm(yr),yr=null))),Vm(t,e),Jt(e),null;case 5:p_(e);var i=Xs(Lu.current);if(n=e.type,t!==null&&e.stateNode!=null)pT(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ie(166));return Jt(e),null}if(t=Xs(Ur.current),lh(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Vr]=e,r[Ru]=s,t=(e.mode&1)!==0,n){case"dialog":it("cancel",r),it("close",r);break;case"iframe":case"object":case"embed":it("load",r);break;case"video":case"audio":for(i=0;i<Zl.length;i++)it(Zl[i],r);break;case"source":it("error",r);break;case"img":case"image":case"link":it("error",r),it("load",r);break;case"details":it("toggle",r);break;case"input":Pv(r,s),it("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},it("invalid",r);break;case"textarea":kv(r,s),it("invalid",r)}cm(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var u=s[a];a==="children"?typeof u=="string"?r.textContent!==u&&(s.suppressHydrationWarning!==!0&&ah(r.textContent,u,t),i=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(s.suppressHydrationWarning!==!0&&ah(r.textContent,u,t),i=["children",""+u]):Eu.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&it("scroll",r)}switch(n){case"input":Xc(r),Cv(r,s,!0);break;case"textarea":Xc(r),Av(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=sd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Vr]=e,t[Ru]=r,fT(t,e,!1,!1),e.stateNode=t;e:{switch(a=hm(n,r),n){case"dialog":it("cancel",t),it("close",t),i=r;break;case"iframe":case"object":case"embed":it("load",t),i=r;break;case"video":case"audio":for(i=0;i<Zl.length;i++)it(Zl[i],t);i=r;break;case"source":it("error",t),i=r;break;case"img":case"image":case"link":it("error",t),it("load",t),i=r;break;case"details":it("toggle",t),i=r;break;case"input":Pv(t,r),i=sm(t,r),it("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=pt({},r,{value:void 0}),it("invalid",t);break;case"textarea":kv(t,r),i=lm(t,r),it("invalid",t);break;default:i=r}cm(n,i),u=i;for(s in u)if(u.hasOwnProperty(s)){var c=u[s];s==="style"?W1(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&H1(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&xu(t,c):typeof c=="number"&&xu(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Eu.hasOwnProperty(s)?c!=null&&s==="onScroll"&&it("scroll",t):c!=null&&qg(t,s,c,a))}switch(n){case"input":Xc(t),Cv(t,r,!1);break;case"textarea":Xc(t),Av(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ws(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?wa(t,!!r.multiple,s,!1):r.defaultValue!=null&&wa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=sd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Jt(e),null;case 6:if(t&&e.stateNode!=null)mT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ie(166));if(n=Xs(Lu.current),Xs(Ur.current),lh(e)){if(r=e.stateNode,n=e.memoizedProps,r[Vr]=e,(s=r.nodeValue!==n)&&(t=zn,t!==null))switch(t.tag){case 3:ah(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ah(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Vr]=e,e.stateNode=r}return Jt(e),null;case 13:if(ot(dt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ut&&Vn!==null&&e.mode&1&&!(e.flags&128))Lx(),Oa(),e.flags|=98560,s=!1;else if(s=lh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ie(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ie(317));s[Vr]=e}else Oa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Jt(e),s=!1}else yr!==null&&(qm(yr),yr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||dt.current&1?Lt===0&&(Lt=3):C_())),e.updateQueue!==null&&(e.flags|=4),Jt(e),null);case 4:return Ma(),Vm(t,e),t===null&&Au(e.stateNode.containerInfo),Jt(e),null;case 10:return c_(e.type._context),Jt(e),null;case 17:return In(e.type)&&od(),Jt(e),null;case 19:if(ot(dt),s=e.memoizedState,s===null)return Jt(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)zl(s,!1);else{if(Lt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=fd(t),a!==null){for(e.flags|=128,zl(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return nt(dt,dt.current&1|2),e.child}t=t.sibling}s.tail!==null&&wt()>Fa&&(e.flags|=128,r=!0,zl(s,!1),e.lanes=4194304)}else{if(!r)if(t=fd(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),zl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!ut)return Jt(e),null}else 2*wt()-s.renderingStartTime>Fa&&n!==1073741824&&(e.flags|=128,r=!0,zl(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=wt(),e.sibling=null,n=dt.current,nt(dt,r?n&1|2:n&1),e):(Jt(e),null);case 22:case 23:return P_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Mn&1073741824&&(Jt(e),e.subtreeFlags&6&&(e.flags|=8192)):Jt(e),null;case 24:return null;case 25:return null}throw Error(ie(156,e.tag))}function lb(t,e){switch(o_(e),e.tag){case 1:return In(e.type)&&od(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ma(),ot(Sn),ot(sn),m_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return p_(e),null;case 13:if(ot(dt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ie(340));Oa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ot(dt),null;case 4:return Ma(),null;case 10:return c_(e.type._context),null;case 22:case 23:return P_(),null;case 24:return null;default:return null}}var hh=!1,tn=!1,ub=typeof WeakSet=="function"?WeakSet:Set,ue=null;function _a(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){_t(t,e,r)}else n.current=null}function Fm(t,e,n){try{n()}catch(r){_t(t,e,r)}}var yw=!1;function cb(t,e){if(Em=nd,t=wx(),i_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,u=-1,c=-1,f=0,p=0,m=t,y=null;t:for(;;){for(var v;m!==n||i!==0&&m.nodeType!==3||(u=a+i),m!==s||r!==0&&m.nodeType!==3||(c=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(v=m.firstChild)!==null;)y=m,m=v;for(;;){if(m===t)break t;if(y===n&&++f===i&&(u=a),y===s&&++p===r&&(c=a),(v=m.nextSibling)!==null)break;m=y,y=m.parentNode}m=v}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(xm={focusedElem:t,selectionRange:n},nd=!1,ue=e;ue!==null;)if(e=ue,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ue=t;else for(;ue!==null;){e=ue;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var I=T.memoizedProps,O=T.memoizedState,S=e.stateNode,k=S.getSnapshotBeforeUpdate(e.elementType===e.type?I:gr(e.type,I),O);S.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ie(163))}}catch(B){_t(e,e.return,B)}if(t=e.sibling,t!==null){t.return=e.return,ue=t;break}ue=e.return}return T=yw,yw=!1,T}function uu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Fm(e,n,s)}i=i.next}while(i!==r)}}function rf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function jm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function gT(t){var e=t.alternate;e!==null&&(t.alternate=null,gT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Vr],delete e[Ru],delete e[Im],delete e[WA],delete e[GA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function _T(t){return t.tag===5||t.tag===3||t.tag===4}function vw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_T(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=sd));else if(r!==4&&(t=t.child,t!==null))for(zm(t,e,n),t=t.sibling;t!==null;)zm(t,e,n),t=t.sibling}function Um(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Um(t,e,n),t=t.sibling;t!==null;)Um(t,e,n),t=t.sibling}var Bt=null,_r=!1;function qi(t,e,n){for(n=n.child;n!==null;)yT(t,e,n),n=n.sibling}function yT(t,e,n){if(zr&&typeof zr.onCommitFiberUnmount=="function")try{zr.onCommitFiberUnmount(Zd,n)}catch{}switch(n.tag){case 5:tn||_a(n,e);case 6:var r=Bt,i=_r;Bt=null,qi(t,e,n),Bt=r,_r=i,Bt!==null&&(_r?(t=Bt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Bt.removeChild(n.stateNode));break;case 18:Bt!==null&&(_r?(t=Bt,n=n.stateNode,t.nodeType===8?pp(t.parentNode,n):t.nodeType===1&&pp(t,n),Pu(t)):pp(Bt,n.stateNode));break;case 4:r=Bt,i=_r,Bt=n.stateNode.containerInfo,_r=!0,qi(t,e,n),Bt=r,_r=i;break;case 0:case 11:case 14:case 15:if(!tn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Fm(n,e,a),i=i.next}while(i!==r)}qi(t,e,n);break;case 1:if(!tn&&(_a(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){_t(n,e,u)}qi(t,e,n);break;case 21:qi(t,e,n);break;case 22:n.mode&1?(tn=(r=tn)||n.memoizedState!==null,qi(t,e,n),tn=r):qi(t,e,n);break;default:qi(t,e,n)}}function ww(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ub),e.forEach(function(r){var i=vb.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function pr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:Bt=u.stateNode,_r=!1;break e;case 3:Bt=u.stateNode.containerInfo,_r=!0;break e;case 4:Bt=u.stateNode.containerInfo,_r=!0;break e}u=u.return}if(Bt===null)throw Error(ie(160));yT(s,a,i),Bt=null,_r=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(f){_t(i,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)vT(e,t),e=e.sibling}function vT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(pr(e,t),Lr(t),r&4){try{uu(3,t,t.return),rf(3,t)}catch(I){_t(t,t.return,I)}try{uu(5,t,t.return)}catch(I){_t(t,t.return,I)}}break;case 1:pr(e,t),Lr(t),r&512&&n!==null&&_a(n,n.return);break;case 5:if(pr(e,t),Lr(t),r&512&&n!==null&&_a(n,n.return),t.flags&32){var i=t.stateNode;try{xu(i,"")}catch(I){_t(t,t.return,I)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&s.type==="radio"&&s.name!=null&&U1(i,s),hm(u,a);var f=hm(u,s);for(a=0;a<c.length;a+=2){var p=c[a],m=c[a+1];p==="style"?W1(i,m):p==="dangerouslySetInnerHTML"?H1(i,m):p==="children"?xu(i,m):qg(i,p,m,f)}switch(u){case"input":om(i,s);break;case"textarea":B1(i,s);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?wa(i,!!s.multiple,v,!1):y!==!!s.multiple&&(s.defaultValue!=null?wa(i,!!s.multiple,s.defaultValue,!0):wa(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ru]=s}catch(I){_t(t,t.return,I)}}break;case 6:if(pr(e,t),Lr(t),r&4){if(t.stateNode===null)throw Error(ie(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(I){_t(t,t.return,I)}}break;case 3:if(pr(e,t),Lr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Pu(e.containerInfo)}catch(I){_t(t,t.return,I)}break;case 4:pr(e,t),Lr(t);break;case 13:pr(e,t),Lr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(S_=wt())),r&4&&ww(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(tn=(f=tn)||p,pr(e,t),tn=f):pr(e,t),Lr(t),r&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!p&&t.mode&1)for(ue=t,p=t.child;p!==null;){for(m=ue=p;ue!==null;){switch(y=ue,v=y.child,y.tag){case 0:case 11:case 14:case 15:uu(4,y,y.return);break;case 1:_a(y,y.return);var T=y.stateNode;if(typeof T.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(I){_t(r,n,I)}}break;case 5:_a(y,y.return);break;case 22:if(y.memoizedState!==null){xw(m);continue}}v!==null?(v.return=y,ue=v):xw(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{i=m.stateNode,f?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(u=m.stateNode,c=m.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=q1("display",a))}catch(I){_t(t,t.return,I)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=f?"":m.memoizedProps}catch(I){_t(t,t.return,I)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:pr(e,t),Lr(t),r&4&&ww(t);break;case 21:break;default:pr(e,t),Lr(t)}}function Lr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(_T(n)){var r=n;break e}n=n.return}throw Error(ie(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(xu(i,""),r.flags&=-33);var s=vw(t);Um(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,u=vw(t);zm(t,u,a);break;default:throw Error(ie(161))}}catch(c){_t(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function hb(t,e,n){ue=t,wT(t)}function wT(t,e,n){for(var r=(t.mode&1)!==0;ue!==null;){var i=ue,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||hh;if(!a){var u=i.alternate,c=u!==null&&u.memoizedState!==null||tn;u=hh;var f=tn;if(hh=a,(tn=c)&&!f)for(ue=i;ue!==null;)a=ue,c=a.child,a.tag===22&&a.memoizedState!==null?Tw(i):c!==null?(c.return=a,ue=c):Tw(i);for(;s!==null;)ue=s,wT(s),s=s.sibling;ue=i,hh=u,tn=f}Ew(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ue=s):Ew(t)}}function Ew(t){for(;ue!==null;){var e=ue;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:tn||rf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!tn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:gr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&sw(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}sw(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var p=f.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&Pu(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ie(163))}tn||e.flags&512&&jm(e)}catch(y){_t(e,e.return,y)}}if(e===t){ue=null;break}if(n=e.sibling,n!==null){n.return=e.return,ue=n;break}ue=e.return}}function xw(t){for(;ue!==null;){var e=ue;if(e===t){ue=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ue=n;break}ue=e.return}}function Tw(t){for(;ue!==null;){var e=ue;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{rf(4,e)}catch(c){_t(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){_t(e,i,c)}}var s=e.return;try{jm(e)}catch(c){_t(e,s,c)}break;case 5:var a=e.return;try{jm(e)}catch(c){_t(e,a,c)}}}catch(c){_t(e,e.return,c)}if(e===t){ue=null;break}var u=e.sibling;if(u!==null){u.return=e.return,ue=u;break}ue=e.return}}var db=Math.ceil,gd=bi.ReactCurrentDispatcher,x_=bi.ReactCurrentOwner,or=bi.ReactCurrentBatchConfig,We=0,jt=null,Ct=null,qt=0,Mn=0,ya=Cs(0),Lt=0,Vu=null,uo=0,sf=0,T_=0,cu=null,En=null,S_=0,Fa=1/0,fi=null,_d=!1,Bm=null,ds=null,dh=!1,is=null,yd=0,hu=0,$m=null,Oh=-1,Dh=0;function pn(){return We&6?wt():Oh!==-1?Oh:Oh=wt()}function fs(t){return t.mode&1?We&2&&qt!==0?qt&-qt:ZA.transition!==null?(Dh===0&&(Dh=ix()),Dh):(t=Qe,t!==0||(t=window.event,t=t===void 0?16:hx(t.type)),t):1}function xr(t,e,n,r){if(50<hu)throw hu=0,$m=null,Error(ie(185));Ju(t,n,r),(!(We&2)||t!==jt)&&(t===jt&&(!(We&2)&&(sf|=n),Lt===4&&Ji(t,qt)),Pn(t,r),n===1&&We===0&&!(e.mode&1)&&(Fa=wt()+500,ef&&ks()))}function Pn(t,e){var n=t.callbackNode;Zk(t,e);var r=td(t,t===jt?qt:0);if(r===0)n!==null&&Nv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Nv(n),e===1)t.tag===0?KA(Sw.bind(null,t)):bx(Sw.bind(null,t)),HA(function(){!(We&6)&&ks()}),n=null;else{switch(sx(r)){case 1:n=Qg;break;case 4:n=nx;break;case 16:n=ed;break;case 536870912:n=rx;break;default:n=ed}n=kT(n,ET.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ET(t,e){if(Oh=-1,Dh=0,We&6)throw Error(ie(327));var n=t.callbackNode;if(Ia()&&t.callbackNode!==n)return null;var r=td(t,t===jt?qt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=vd(t,r);else{e=r;var i=We;We|=2;var s=TT();(jt!==t||qt!==e)&&(fi=null,Fa=wt()+500,no(t,e));do try{mb();break}catch(u){xT(t,u)}while(!0);u_(),gd.current=s,We=i,Ct!==null?e=0:(jt=null,qt=0,e=Lt)}if(e!==0){if(e===2&&(i=gm(t),i!==0&&(r=i,e=Hm(t,i))),e===1)throw n=Vu,no(t,0),Ji(t,r),Pn(t,wt()),n;if(e===6)Ji(t,r);else{if(i=t.current.alternate,!(r&30)&&!fb(i)&&(e=vd(t,r),e===2&&(s=gm(t),s!==0&&(r=s,e=Hm(t,s))),e===1))throw n=Vu,no(t,0),Ji(t,r),Pn(t,wt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ie(345));case 2:Ks(t,En,fi);break;case 3:if(Ji(t,r),(r&130023424)===r&&(e=S_+500-wt(),10<e)){if(td(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){pn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Sm(Ks.bind(null,t,En,fi),e);break}Ks(t,En,fi);break;case 4:if(Ji(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-Er(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=wt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*db(r/1960))-r,10<r){t.timeoutHandle=Sm(Ks.bind(null,t,En,fi),r);break}Ks(t,En,fi);break;case 5:Ks(t,En,fi);break;default:throw Error(ie(329))}}}return Pn(t,wt()),t.callbackNode===n?ET.bind(null,t):null}function Hm(t,e){var n=cu;return t.current.memoizedState.isDehydrated&&(no(t,e).flags|=256),t=vd(t,e),t!==2&&(e=En,En=n,e!==null&&qm(e)),t}function qm(t){En===null?En=t:En.push.apply(En,t)}function fb(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Sr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ji(t,e){for(e&=~T_,e&=~sf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Er(e),r=1<<n;t[n]=-1,e&=~r}}function Sw(t){if(We&6)throw Error(ie(327));Ia();var e=td(t,0);if(!(e&1))return Pn(t,wt()),null;var n=vd(t,e);if(t.tag!==0&&n===2){var r=gm(t);r!==0&&(e=r,n=Hm(t,r))}if(n===1)throw n=Vu,no(t,0),Ji(t,e),Pn(t,wt()),n;if(n===6)throw Error(ie(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ks(t,En,fi),Pn(t,wt()),null}function I_(t,e){var n=We;We|=1;try{return t(e)}finally{We=n,We===0&&(Fa=wt()+500,ef&&ks())}}function co(t){is!==null&&is.tag===0&&!(We&6)&&Ia();var e=We;We|=1;var n=or.transition,r=Qe;try{if(or.transition=null,Qe=1,t)return t()}finally{Qe=r,or.transition=n,We=e,!(We&6)&&ks()}}function P_(){Mn=ya.current,ot(ya)}function no(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,$A(n)),Ct!==null)for(n=Ct.return;n!==null;){var r=n;switch(o_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&od();break;case 3:Ma(),ot(Sn),ot(sn),m_();break;case 5:p_(r);break;case 4:Ma();break;case 13:ot(dt);break;case 19:ot(dt);break;case 10:c_(r.type._context);break;case 22:case 23:P_()}n=n.return}if(jt=t,Ct=t=ps(t.current,null),qt=Mn=e,Lt=0,Vu=null,T_=sf=uo=0,En=cu=null,Js!==null){for(e=0;e<Js.length;e++)if(n=Js[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Js=null}return t}function xT(t,e){do{var n=Ct;try{if(u_(),Rh.current=md,pd){for(var r=ft.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}pd=!1}if(lo=0,Ft=Nt=ft=null,lu=!1,Ou=0,x_.current=null,n===null||n.return===null){Lt=1,Vu=e,Ct=null;break}e:{var s=t,a=n.return,u=n,c=e;if(e=qt,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=c,p=u,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var y=p.alternate;y?(p.updateQueue=y.updateQueue,p.memoizedState=y.memoizedState,p.lanes=y.lanes):(p.updateQueue=null,p.memoizedState=null)}var v=hw(a);if(v!==null){v.flags&=-257,dw(v,a,u,s,e),v.mode&1&&cw(s,f,e),e=v,c=f;var T=e.updateQueue;if(T===null){var I=new Set;I.add(c),e.updateQueue=I}else T.add(c);break e}else{if(!(e&1)){cw(s,f,e),C_();break e}c=Error(ie(426))}}else if(ut&&u.mode&1){var O=hw(a);if(O!==null){!(O.flags&65536)&&(O.flags|=256),dw(O,a,u,s,e),a_(Va(c,u));break e}}s=c=Va(c,u),Lt!==4&&(Lt=2),cu===null?cu=[s]:cu.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var S=sT(s,c,e);iw(s,S);break e;case 1:u=c;var k=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof k.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(ds===null||!ds.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var B=oT(s,u,e);iw(s,B);break e}}s=s.return}while(s!==null)}IT(n)}catch(G){e=G,Ct===n&&n!==null&&(Ct=n=n.return);continue}break}while(!0)}function TT(){var t=gd.current;return gd.current=md,t===null?md:t}function C_(){(Lt===0||Lt===3||Lt===2)&&(Lt=4),jt===null||!(uo&268435455)&&!(sf&268435455)||Ji(jt,qt)}function vd(t,e){var n=We;We|=2;var r=TT();(jt!==t||qt!==e)&&(fi=null,no(t,e));do try{pb();break}catch(i){xT(t,i)}while(!0);if(u_(),We=n,gd.current=r,Ct!==null)throw Error(ie(261));return jt=null,qt=0,Lt}function pb(){for(;Ct!==null;)ST(Ct)}function mb(){for(;Ct!==null&&!zk();)ST(Ct)}function ST(t){var e=CT(t.alternate,t,Mn);t.memoizedProps=t.pendingProps,e===null?IT(t):Ct=e,x_.current=null}function IT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=lb(n,e),n!==null){n.flags&=32767,Ct=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Lt=6,Ct=null;return}}else if(n=ab(n,e,Mn),n!==null){Ct=n;return}if(e=e.sibling,e!==null){Ct=e;return}Ct=e=t}while(e!==null);Lt===0&&(Lt=5)}function Ks(t,e,n){var r=Qe,i=or.transition;try{or.transition=null,Qe=1,gb(t,e,n,r)}finally{or.transition=i,Qe=r}return null}function gb(t,e,n,r){do Ia();while(is!==null);if(We&6)throw Error(ie(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ie(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Qk(t,s),t===jt&&(Ct=jt=null,qt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||dh||(dh=!0,kT(ed,function(){return Ia(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=or.transition,or.transition=null;var a=Qe;Qe=1;var u=We;We|=4,x_.current=null,cb(t,n),vT(n,t),MA(xm),nd=!!Em,xm=Em=null,t.current=n,hb(n),Uk(),We=u,Qe=a,or.transition=s}else t.current=n;if(dh&&(dh=!1,is=t,yd=i),s=t.pendingLanes,s===0&&(ds=null),Hk(n.stateNode),Pn(t,wt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(_d)throw _d=!1,t=Bm,Bm=null,t;return yd&1&&t.tag!==0&&Ia(),s=t.pendingLanes,s&1?t===$m?hu++:(hu=0,$m=t):hu=0,ks(),null}function Ia(){if(is!==null){var t=sx(yd),e=or.transition,n=Qe;try{if(or.transition=null,Qe=16>t?16:t,is===null)var r=!1;else{if(t=is,is=null,yd=0,We&6)throw Error(ie(331));var i=We;for(We|=4,ue=t.current;ue!==null;){var s=ue,a=s.child;if(ue.flags&16){var u=s.deletions;if(u!==null){for(var c=0;c<u.length;c++){var f=u[c];for(ue=f;ue!==null;){var p=ue;switch(p.tag){case 0:case 11:case 15:uu(8,p,s)}var m=p.child;if(m!==null)m.return=p,ue=m;else for(;ue!==null;){p=ue;var y=p.sibling,v=p.return;if(gT(p),p===f){ue=null;break}if(y!==null){y.return=v,ue=y;break}ue=v}}}var T=s.alternate;if(T!==null){var I=T.child;if(I!==null){T.child=null;do{var O=I.sibling;I.sibling=null,I=O}while(I!==null)}}ue=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,ue=a;else e:for(;ue!==null;){if(s=ue,s.flags&2048)switch(s.tag){case 0:case 11:case 15:uu(9,s,s.return)}var S=s.sibling;if(S!==null){S.return=s.return,ue=S;break e}ue=s.return}}var k=t.current;for(ue=k;ue!==null;){a=ue;var C=a.child;if(a.subtreeFlags&2064&&C!==null)C.return=a,ue=C;else e:for(a=k;ue!==null;){if(u=ue,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:rf(9,u)}}catch(G){_t(u,u.return,G)}if(u===a){ue=null;break e}var B=u.sibling;if(B!==null){B.return=u.return,ue=B;break e}ue=u.return}}if(We=i,ks(),zr&&typeof zr.onPostCommitFiberRoot=="function")try{zr.onPostCommitFiberRoot(Zd,t)}catch{}r=!0}return r}finally{Qe=n,or.transition=e}}return!1}function Iw(t,e,n){e=Va(n,e),e=sT(t,e,1),t=hs(t,e,1),e=pn(),t!==null&&(Ju(t,1,e),Pn(t,e))}function _t(t,e,n){if(t.tag===3)Iw(t,t,n);else for(;e!==null;){if(e.tag===3){Iw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ds===null||!ds.has(r))){t=Va(n,t),t=oT(e,t,1),e=hs(e,t,1),t=pn(),e!==null&&(Ju(e,1,t),Pn(e,t));break}}e=e.return}}function _b(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=pn(),t.pingedLanes|=t.suspendedLanes&n,jt===t&&(qt&n)===n&&(Lt===4||Lt===3&&(qt&130023424)===qt&&500>wt()-S_?no(t,0):T_|=n),Pn(t,e)}function PT(t,e){e===0&&(t.mode&1?(e=nh,nh<<=1,!(nh&130023424)&&(nh=4194304)):e=1);var n=pn();t=Si(t,e),t!==null&&(Ju(t,e,n),Pn(t,n))}function yb(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),PT(t,n)}function vb(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ie(314))}r!==null&&r.delete(e),PT(t,n)}var CT;CT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Sn.current)Tn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Tn=!1,ob(t,e,n);Tn=!!(t.flags&131072)}else Tn=!1,ut&&e.flags&1048576&&Rx(e,ud,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Lh(t,e),t=e.pendingProps;var i=La(e,sn.current);Sa(e,n),i=__(null,e,r,t,i,n);var s=y_();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,In(r)?(s=!0,ad(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,d_(e),i.updater=nf,e.stateNode=i,i._reactInternals=e,Rm(e,r,t,n),e=Om(null,e,r,!0,s,n)):(e.tag=0,ut&&s&&s_(e),fn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Lh(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Eb(r),t=gr(r,t),i){case 0:e=Lm(null,e,r,t,n);break e;case 1:e=mw(null,e,r,t,n);break e;case 11:e=fw(null,e,r,t,n);break e;case 14:e=pw(null,e,r,gr(r.type,t),n);break e}throw Error(ie(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gr(r,i),Lm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gr(r,i),mw(t,e,r,i,n);case 3:e:{if(cT(e),t===null)throw Error(ie(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Vx(t,e),dd(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Va(Error(ie(423)),e),e=gw(t,e,r,n,i);break e}else if(r!==i){i=Va(Error(ie(424)),e),e=gw(t,e,r,n,i);break e}else for(Vn=cs(e.stateNode.containerInfo.firstChild),zn=e,ut=!0,yr=null,n=Dx(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Oa(),r===i){e=Ii(t,e,n);break e}fn(t,e,r,n)}e=e.child}return e;case 5:return Fx(e),t===null&&km(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,Tm(r,i)?a=null:s!==null&&Tm(r,s)&&(e.flags|=32),uT(t,e),fn(t,e,a,n),e.child;case 6:return t===null&&km(e),null;case 13:return hT(t,e,n);case 4:return f_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Da(e,null,r,n):fn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gr(r,i),fw(t,e,r,i,n);case 7:return fn(t,e,e.pendingProps,n),e.child;case 8:return fn(t,e,e.pendingProps.children,n),e.child;case 12:return fn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,nt(cd,r._currentValue),r._currentValue=a,s!==null)if(Sr(s.value,a)){if(s.children===i.children&&!Sn.current){e=Ii(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var u=s.dependencies;if(u!==null){a=s.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=wi(-1,n&-n),c.tag=2;var f=s.updateQueue;if(f!==null){f=f.shared;var p=f.pending;p===null?c.next=c:(c.next=p.next,p.next=c),f.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),Am(s.return,n,e),u.lanes|=n;break}c=c.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(ie(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),Am(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}fn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Sa(e,n),i=ar(i),r=r(i),e.flags|=1,fn(t,e,r,n),e.child;case 14:return r=e.type,i=gr(r,e.pendingProps),i=gr(r.type,i),pw(t,e,r,i,n);case 15:return aT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gr(r,i),Lh(t,e),e.tag=1,In(r)?(t=!0,ad(e)):t=!1,Sa(e,n),iT(e,r,i),Rm(e,r,i,n),Om(null,e,r,!0,t,n);case 19:return dT(t,e,n);case 22:return lT(t,e,n)}throw Error(ie(156,e.tag))};function kT(t,e){return tx(t,e)}function wb(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sr(t,e,n,r){return new wb(t,e,n,r)}function k_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Eb(t){if(typeof t=="function")return k_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Gg)return 11;if(t===Kg)return 14}return 2}function ps(t,e){var n=t.alternate;return n===null?(n=sr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Mh(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")k_(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case la:return ro(n.children,i,s,e);case Wg:a=8,i|=8;break;case tm:return t=sr(12,n,e,i|2),t.elementType=tm,t.lanes=s,t;case nm:return t=sr(13,n,e,i),t.elementType=nm,t.lanes=s,t;case rm:return t=sr(19,n,e,i),t.elementType=rm,t.lanes=s,t;case F1:return of(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case M1:a=10;break e;case V1:a=9;break e;case Gg:a=11;break e;case Kg:a=14;break e;case Zi:a=16,r=null;break e}throw Error(ie(130,t==null?t:typeof t,""))}return e=sr(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ro(t,e,n,r){return t=sr(7,t,r,e),t.lanes=n,t}function of(t,e,n,r){return t=sr(22,t,r,e),t.elementType=F1,t.lanes=n,t.stateNode={isHidden:!1},t}function xp(t,e,n){return t=sr(6,t,null,e),t.lanes=n,t}function Tp(t,e,n){return e=sr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function xb(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rp(0),this.expirationTimes=rp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function A_(t,e,n,r,i,s,a,u,c){return t=new xb(t,e,n,u,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=sr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},d_(s),t}function Tb(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:aa,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function AT(t){if(!t)return Es;t=t._reactInternals;e:{if(Eo(t)!==t||t.tag!==1)throw Error(ie(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(In(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ie(171))}if(t.tag===1){var n=t.type;if(In(n))return Ax(t,n,e)}return e}function bT(t,e,n,r,i,s,a,u,c){return t=A_(n,r,!0,t,i,s,a,u,c),t.context=AT(null),n=t.current,r=pn(),i=fs(n),s=wi(r,i),s.callback=e??null,hs(n,s,i),t.current.lanes=i,Ju(t,i,r),Pn(t,r),t}function af(t,e,n,r){var i=e.current,s=pn(),a=fs(i);return n=AT(n),e.context===null?e.context=n:e.pendingContext=n,e=wi(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=hs(i,e,a),t!==null&&(xr(t,i,a,s),bh(t,i,a)),a}function wd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Pw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function b_(t,e){Pw(t,e),(t=t.alternate)&&Pw(t,e)}function Sb(){return null}var RT=typeof reportError=="function"?reportError:function(t){console.error(t)};function R_(t){this._internalRoot=t}lf.prototype.render=R_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ie(409));af(t,e,null,null)};lf.prototype.unmount=R_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;co(function(){af(null,t,null,null)}),e[Ti]=null}};function lf(t){this._internalRoot=t}lf.prototype.unstable_scheduleHydration=function(t){if(t){var e=lx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Yi.length&&e!==0&&e<Yi[n].priority;n++);Yi.splice(n,0,t),n===0&&cx(t)}};function N_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function uf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Cw(){}function Ib(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var f=wd(a);s.call(f)}}var a=bT(e,r,t,0,null,!1,!1,"",Cw);return t._reactRootContainer=a,t[Ti]=a.current,Au(t.nodeType===8?t.parentNode:t),co(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var u=r;r=function(){var f=wd(c);u.call(f)}}var c=A_(t,0,!1,null,null,!1,!1,"",Cw);return t._reactRootContainer=c,t[Ti]=c.current,Au(t.nodeType===8?t.parentNode:t),co(function(){af(e,c,n,r)}),c}function cf(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var u=i;i=function(){var c=wd(a);u.call(c)}}af(e,a,t,i)}else a=Ib(n,e,t,i,r);return wd(a)}ox=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Kl(e.pendingLanes);n!==0&&(Yg(e,n|1),Pn(e,wt()),!(We&6)&&(Fa=wt()+500,ks()))}break;case 13:co(function(){var r=Si(t,1);if(r!==null){var i=pn();xr(r,t,1,i)}}),b_(t,1)}};Jg=function(t){if(t.tag===13){var e=Si(t,134217728);if(e!==null){var n=pn();xr(e,t,134217728,n)}b_(t,134217728)}};ax=function(t){if(t.tag===13){var e=fs(t),n=Si(t,e);if(n!==null){var r=pn();xr(n,t,e,r)}b_(t,e)}};lx=function(){return Qe};ux=function(t,e){var n=Qe;try{return Qe=t,e()}finally{Qe=n}};fm=function(t,e,n){switch(e){case"input":if(om(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Xd(r);if(!i)throw Error(ie(90));z1(r),om(r,i)}}}break;case"textarea":B1(t,n);break;case"select":e=n.value,e!=null&&wa(t,!!n.multiple,e,!1)}};Z1=I_;Q1=co;var Pb={usingClientEntryPoint:!1,Events:[ec,da,Xd,G1,K1,I_]},Ul={findFiberByHostInstance:Ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Cb={bundleType:Ul.bundleType,version:Ul.version,rendererPackageName:Ul.rendererPackageName,rendererConfig:Ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=X1(t),t===null?null:t.stateNode},findFiberByHostInstance:Ul.findFiberByHostInstance||Sb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fh.isDisabled&&fh.supportsFiber)try{Zd=fh.inject(Cb),zr=fh}catch{}}$n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pb;$n.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!N_(e))throw Error(ie(200));return Tb(t,e,null,n)};$n.createRoot=function(t,e){if(!N_(t))throw Error(ie(299));var n=!1,r="",i=RT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=A_(t,1,!1,null,null,n,!1,r,i),t[Ti]=e.current,Au(t.nodeType===8?t.parentNode:t),new R_(e)};$n.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ie(188)):(t=Object.keys(t).join(","),Error(ie(268,t)));return t=X1(e),t=t===null?null:t.stateNode,t};$n.flushSync=function(t){return co(t)};$n.hydrate=function(t,e,n){if(!uf(e))throw Error(ie(200));return cf(null,t,e,!0,n)};$n.hydrateRoot=function(t,e,n){if(!N_(t))throw Error(ie(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=RT;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=bT(e,null,t,1,n??null,i,!1,s,a),t[Ti]=e.current,Au(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new lf(e)};$n.render=function(t,e,n){if(!uf(e))throw Error(ie(200));return cf(null,t,e,!1,n)};$n.unmountComponentAtNode=function(t){if(!uf(t))throw Error(ie(40));return t._reactRootContainer?(co(function(){cf(null,null,t,!1,function(){t._reactRootContainer=null,t[Ti]=null})}),!0):!1};$n.unstable_batchedUpdates=I_;$n.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!uf(n))throw Error(ie(200));if(t==null||t._reactInternals===void 0)throw Error(ie(38));return cf(t,e,n,!1,r)};$n.version="18.3.1-next-f1338f8080-20240426";function NT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(NT)}catch(t){console.error(t)}}NT(),N1.exports=$n;var kb=N1.exports,kw=kb;Xp.createRoot=kw.createRoot,Xp.hydrateRoot=kw.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fu(){return Fu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fu.apply(this,arguments)}var ss;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ss||(ss={}));const Aw="popstate";function Ab(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:a,hash:u}=r.location;return Wm("",{pathname:s,search:a,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Ed(i)}return Rb(e,n,null,t)}function At(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function LT(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function bb(){return Math.random().toString(36).substr(2,8)}function bw(t,e){return{usr:t.state,key:t.key,idx:e}}function Wm(t,e,n,r){return n===void 0&&(n=null),Fu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Qa(e):e,{state:n,key:e&&e.key||r||bb()})}function Ed(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Qa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Rb(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,u=ss.Pop,c=null,f=p();f==null&&(f=0,a.replaceState(Fu({},a.state,{idx:f}),""));function p(){return(a.state||{idx:null}).idx}function m(){u=ss.Pop;let O=p(),S=O==null?null:O-f;f=O,c&&c({action:u,location:I.location,delta:S})}function y(O,S){u=ss.Push;let k=Wm(I.location,O,S);f=p()+1;let C=bw(k,f),B=I.createHref(k);try{a.pushState(C,"",B)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;i.location.assign(B)}s&&c&&c({action:u,location:I.location,delta:1})}function v(O,S){u=ss.Replace;let k=Wm(I.location,O,S);f=p();let C=bw(k,f),B=I.createHref(k);a.replaceState(C,"",B),s&&c&&c({action:u,location:I.location,delta:0})}function T(O){let S=i.location.origin!=="null"?i.location.origin:i.location.href,k=typeof O=="string"?O:Ed(O);return k=k.replace(/ $/,"%20"),At(S,"No window.location.(origin|href) available to create URL for href: "+k),new URL(k,S)}let I={get action(){return u},get location(){return t(i,a)},listen(O){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(Aw,m),c=O,()=>{i.removeEventListener(Aw,m),c=null}},createHref(O){return e(i,O)},createURL:T,encodeLocation(O){let S=T(O);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:y,replace:v,go(O){return a.go(O)}};return I}var Rw;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Rw||(Rw={}));function Nb(t,e,n){return n===void 0&&(n="/"),Lb(t,e,n)}function Lb(t,e,n,r){let i=typeof e=="string"?Qa(e):e,s=L_(i.pathname||"/",n);if(s==null)return null;let a=OT(t);Ob(a);let u=null;for(let c=0;u==null&&c<a.length;++c){let f=Wb(s);u=$b(a[c],f)}return u}function OT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,a,u)=>{let c={relativePath:u===void 0?s.path||"":u,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};c.relativePath.startsWith("/")&&(At(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let f=ms([r,c.relativePath]),p=n.concat(c);s.children&&s.children.length>0&&(At(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),OT(s.children,e,p,f)),!(s.path==null&&!s.index)&&e.push({path:f,score:Ub(f,s.index),routesMeta:p})};return t.forEach((s,a)=>{var u;if(s.path===""||!((u=s.path)!=null&&u.includes("?")))i(s,a);else for(let c of DT(s.path))i(s,a,c)}),e}function DT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=DT(r.join("/")),u=[];return u.push(...a.map(c=>c===""?s:[s,c].join("/"))),i&&u.push(...a),u.map(c=>t.startsWith("/")&&c===""?"/":c)}function Ob(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Bb(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Db=/^:[\w-]+$/,Mb=3,Vb=2,Fb=1,jb=10,zb=-2,Nw=t=>t==="*";function Ub(t,e){let n=t.split("/"),r=n.length;return n.some(Nw)&&(r+=zb),e&&(r+=Vb),n.filter(i=>!Nw(i)).reduce((i,s)=>i+(Db.test(s)?Mb:s===""?Fb:jb),r)}function Bb(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function $b(t,e,n){let{routesMeta:r}=t,i={},s="/",a=[];for(let u=0;u<r.length;++u){let c=r[u],f=u===r.length-1,p=s==="/"?e:e.slice(s.length)||"/",m=Hb({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},p),y=c.route;if(!m)return null;Object.assign(i,m.params),a.push({params:i,pathname:ms([s,m.pathname]),pathnameBase:Qb(ms([s,m.pathnameBase])),route:y}),m.pathnameBase!=="/"&&(s=ms([s,m.pathnameBase]))}return a}function Hb(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=qb(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((f,p,m)=>{let{paramName:y,isOptional:v}=p;if(y==="*"){let I=u[m]||"";a=s.slice(0,s.length-I.length).replace(/(.)\/+$/,"$1")}const T=u[m];return v&&!T?f[y]=void 0:f[y]=(T||"").replace(/%2F/g,"/"),f},{}),pathname:s,pathnameBase:a,pattern:t}}function qb(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),LT(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Wb(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return LT(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function L_(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Gb(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Qa(t):t;return{pathname:n?n.startsWith("/")?n:Kb(n,e):e,search:Yb(r),hash:Jb(i)}}function Kb(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Sp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Zb(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function MT(t,e){let n=Zb(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function VT(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Qa(t):(i=Fu({},t),At(!i.pathname||!i.pathname.includes("?"),Sp("?","pathname","search",i)),At(!i.pathname||!i.pathname.includes("#"),Sp("#","pathname","hash",i)),At(!i.search||!i.search.includes("#"),Sp("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,u;if(a==null)u=n;else{let m=e.length-1;if(!r&&a.startsWith("..")){let y=a.split("/");for(;y[0]==="..";)y.shift(),m-=1;i.pathname=y.join("/")}u=m>=0?e[m]:"/"}let c=Gb(i,u),f=a&&a!=="/"&&a.endsWith("/"),p=(s||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(f||p)&&(c.pathname+="/"),c}const ms=t=>t.join("/").replace(/\/\/+/g,"/"),Qb=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Yb=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Jb=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Xb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const FT=["post","put","patch","delete"];new Set(FT);const eR=["get",...FT];new Set(eR);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ju(){return ju=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ju.apply(this,arguments)}const O_=H.createContext(null),tR=H.createContext(null),xo=H.createContext(null),hf=H.createContext(null),To=H.createContext({outlet:null,matches:[],isDataRoute:!1}),jT=H.createContext(null);function nR(t,e){let{relative:n}=e===void 0?{}:e;nc()||At(!1);let{basename:r,navigator:i}=H.useContext(xo),{hash:s,pathname:a,search:u}=UT(t,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:ms([r,a])),i.createHref({pathname:c,search:u,hash:s})}function nc(){return H.useContext(hf)!=null}function df(){return nc()||At(!1),H.useContext(hf).location}function zT(t){H.useContext(xo).static||H.useLayoutEffect(t)}function ff(){let{isDataRoute:t}=H.useContext(To);return t?mR():rR()}function rR(){nc()||At(!1);let t=H.useContext(O_),{basename:e,future:n,navigator:r}=H.useContext(xo),{matches:i}=H.useContext(To),{pathname:s}=df(),a=JSON.stringify(MT(i,n.v7_relativeSplatPath)),u=H.useRef(!1);return zT(()=>{u.current=!0}),H.useCallback(function(f,p){if(p===void 0&&(p={}),!u.current)return;if(typeof f=="number"){r.go(f);return}let m=VT(f,JSON.parse(a),s,p.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:ms([e,m.pathname])),(p.replace?r.replace:r.push)(m,p.state,p)},[e,r,a,s,t])}function UT(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=H.useContext(xo),{matches:i}=H.useContext(To),{pathname:s}=df(),a=JSON.stringify(MT(i,r.v7_relativeSplatPath));return H.useMemo(()=>VT(t,JSON.parse(a),s,n==="path"),[t,a,s,n])}function iR(t,e){return sR(t,e)}function sR(t,e,n,r){nc()||At(!1);let{navigator:i,static:s}=H.useContext(xo),{matches:a}=H.useContext(To),u=a[a.length-1],c=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let p=df(),m;if(e){var y;let S=typeof e=="string"?Qa(e):e;f==="/"||(y=S.pathname)!=null&&y.startsWith(f)||At(!1),m=S}else m=p;let v=m.pathname||"/",T=v;if(f!=="/"){let S=f.replace(/^\//,"").split("/");T="/"+v.replace(/^\//,"").split("/").slice(S.length).join("/")}let I=Nb(t,{pathname:T}),O=cR(I&&I.map(S=>Object.assign({},S,{params:Object.assign({},c,S.params),pathname:ms([f,i.encodeLocation?i.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?f:ms([f,i.encodeLocation?i.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),a,n,r);return e&&O?H.createElement(hf.Provider,{value:{location:ju({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:ss.Pop}},O):O}function oR(){let t=pR(),e=Xb(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),n?H.createElement("pre",{style:i},n):null,null)}const aR=H.createElement(oR,null);class lR extends H.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?H.createElement(To.Provider,{value:this.props.routeContext},H.createElement(jT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function uR(t){let{routeContext:e,match:n,children:r}=t,i=H.useContext(O_);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),H.createElement(To.Provider,{value:e},r)}function cR(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,u=(i=n)==null?void 0:i.errors;if(u!=null){let p=a.findIndex(m=>m.route.id&&(u==null?void 0:u[m.route.id])!==void 0);p>=0||At(!1),a=a.slice(0,Math.min(a.length,p+1))}let c=!1,f=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<a.length;p++){let m=a[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(f=p),m.route.id){let{loaderData:y,errors:v}=n,T=m.route.loader&&y[m.route.id]===void 0&&(!v||v[m.route.id]===void 0);if(m.route.lazy||T){c=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((p,m,y)=>{let v,T=!1,I=null,O=null;n&&(v=u&&m.route.id?u[m.route.id]:void 0,I=m.route.errorElement||aR,c&&(f<0&&y===0?(gR("route-fallback"),T=!0,O=null):f===y&&(T=!0,O=m.route.hydrateFallbackElement||null)));let S=e.concat(a.slice(0,y+1)),k=()=>{let C;return v?C=I:T?C=O:m.route.Component?C=H.createElement(m.route.Component,null):m.route.element?C=m.route.element:C=p,H.createElement(uR,{match:m,routeContext:{outlet:p,matches:S,isDataRoute:n!=null},children:C})};return n&&(m.route.ErrorBoundary||m.route.errorElement||y===0)?H.createElement(lR,{location:n.location,revalidation:n.revalidation,component:I,error:v,children:k(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):k()},null)}var BT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(BT||{}),$T=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}($T||{});function hR(t){let e=H.useContext(O_);return e||At(!1),e}function dR(t){let e=H.useContext(tR);return e||At(!1),e}function fR(t){let e=H.useContext(To);return e||At(!1),e}function HT(t){let e=fR(),n=e.matches[e.matches.length-1];return n.route.id||At(!1),n.route.id}function pR(){var t;let e=H.useContext(jT),n=dR(),r=HT();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function mR(){let{router:t}=hR(BT.UseNavigateStable),e=HT($T.UseNavigateStable),n=H.useRef(!1);return zT(()=>{n.current=!0}),H.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ju({fromRouteId:e},s)))},[t,e])}const Lw={};function gR(t,e,n){Lw[t]||(Lw[t]=!0)}function _R(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Ki(t){At(!1)}function yR(t){let{basename:e="/",children:n=null,location:r,navigationType:i=ss.Pop,navigator:s,static:a=!1,future:u}=t;nc()&&At(!1);let c=e.replace(/^\/*/,"/"),f=H.useMemo(()=>({basename:c,navigator:s,static:a,future:ju({v7_relativeSplatPath:!1},u)}),[c,u,s,a]);typeof r=="string"&&(r=Qa(r));let{pathname:p="/",search:m="",hash:y="",state:v=null,key:T="default"}=r,I=H.useMemo(()=>{let O=L_(p,c);return O==null?null:{location:{pathname:O,search:m,hash:y,state:v,key:T},navigationType:i}},[c,p,m,y,v,T,i]);return I==null?null:H.createElement(xo.Provider,{value:f},H.createElement(hf.Provider,{children:n,value:I}))}function vR(t){let{children:e,location:n}=t;return iR(Gm(e),n)}new Promise(()=>{});function Gm(t,e){e===void 0&&(e=[]);let n=[];return H.Children.forEach(t,(r,i)=>{if(!H.isValidElement(r))return;let s=[...e,i];if(r.type===H.Fragment){n.push.apply(n,Gm(r.props.children,s));return}r.type!==Ki&&At(!1),!r.props.index||!r.props.children||At(!1);let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Gm(r.props.children,s)),n.push(a)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Km(){return Km=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Km.apply(this,arguments)}function wR(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function ER(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function xR(t,e){return t.button===0&&(!e||e==="_self")&&!ER(t)}const TR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],SR="6";try{window.__reactRouterVersion=SR}catch{}const IR="startTransition",Ow=_k[IR];function PR(t){let{basename:e,children:n,future:r,window:i}=t,s=H.useRef();s.current==null&&(s.current=Ab({window:i,v5Compat:!0}));let a=s.current,[u,c]=H.useState({action:a.action,location:a.location}),{v7_startTransition:f}=r||{},p=H.useCallback(m=>{f&&Ow?Ow(()=>c(m)):c(m)},[c,f]);return H.useLayoutEffect(()=>a.listen(p),[a,p]),H.useEffect(()=>_R(r),[r]),H.createElement(yR,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:a,future:r})}const CR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",kR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mr=H.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:a,state:u,target:c,to:f,preventScrollReset:p,viewTransition:m}=e,y=wR(e,TR),{basename:v}=H.useContext(xo),T,I=!1;if(typeof f=="string"&&kR.test(f)&&(T=f,CR))try{let C=new URL(window.location.href),B=f.startsWith("//")?new URL(C.protocol+f):new URL(f),G=L_(B.pathname,v);B.origin===C.origin&&G!=null?f=G+B.search+B.hash:I=!0}catch{}let O=nR(f,{relative:i}),S=AR(f,{replace:a,state:u,target:c,preventScrollReset:p,relative:i,viewTransition:m});function k(C){r&&r(C),C.defaultPrevented||S(C)}return H.createElement("a",Km({},y,{href:T||O,onClick:I||s?r:k,ref:n,target:c}))});var Dw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Dw||(Dw={}));var Mw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Mw||(Mw={}));function AR(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:u}=e===void 0?{}:e,c=ff(),f=df(),p=UT(t,{relative:a});return H.useCallback(m=>{if(xR(m,n)){m.preventDefault();let y=r!==void 0?r:Ed(f)===Ed(p);c(t,{replace:y,state:i,preventScrollReset:s,relative:a,viewTransition:u})}},[f,c,p,r,i,n,t,s,a,u])}var Vw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},bR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],u=t[n++],c=((i&7)<<18|(s&63)<<12|(a&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},WT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,u=a?t[i+1]:0,c=i+2<t.length,f=c?t[i+2]:0,p=s>>2,m=(s&3)<<4|u>>4;let y=(u&15)<<2|f>>6,v=f&63;c||(v=64,a||(y=64)),r.push(n[p],n[m],n[y],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(qT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):bR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],u=i<t.length?n[t.charAt(i)]:0;++i;const f=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||u==null||f==null||m==null)throw new RR;const y=s<<2|u>>4;if(r.push(y),f!==64){const v=u<<4&240|f>>2;if(r.push(v),m!==64){const T=f<<6&192|m;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class RR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NR=function(t){const e=qT(t);return WT.encodeByteArray(e,!0)},xd=function(t){return NR(t).replace(/\./g,"")},GT=function(t){try{return WT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR=()=>LR().__FIREBASE_DEFAULTS__,DR=()=>{if(typeof process>"u"||typeof Vw>"u")return;const t=Vw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},MR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&GT(t[1]);return e&&JSON.parse(e)},pf=()=>{try{return OR()||DR()||MR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},KT=t=>{var e,n;return(n=(e=pf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ZT=t=>{const e=KT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},QT=()=>{var t;return(t=pf())===null||t===void 0?void 0:t.config},YT=t=>{var e;return(e=pf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[xd(JSON.stringify(n)),xd(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function FR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())}function jR(){var t;const e=(t=pf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function zR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function UR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function BR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $R(){const t=on();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function HR(){return!jR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qR(){try{return typeof indexedDB=="object"}catch{return!1}}function WR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GR="FirebaseError";class Yr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=GR,Object.setPrototypeOf(this,Yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rc.prototype.create)}}class rc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?KR(s,r):"Error",u=`${this.serviceName}: ${a} (${i}).`;return new Yr(i,u,r)}}function KR(t,e){return t.replace(ZR,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const ZR=/\{\$([^}]+)}/g;function QR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Td(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(Fw(s)&&Fw(a)){if(!Td(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Fw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ic(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ql(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Yl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function YR(t,e){const n=new JR(t,e);return n.subscribe.bind(n)}class JR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");XR(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Ip),i.error===void 0&&(i.error=Ip),i.complete===void 0&&(i.complete=Ip);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ip(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(t){return t&&t._delegate?t._delegate:t}class xs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new VR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(n2(e))try{this.getOrInitializeService({instanceIdentifier:Zs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Zs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zs){return this.instances.has(e)}getOptions(e=Zs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(s);r===u&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:t2(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Zs){return this.component?this.component.multipleInstances?e:Zs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function t2(t){return t===Zs?void 0:t}function n2(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new e2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Be||(Be={}));const i2={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},s2=Be.INFO,o2={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},a2=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=o2[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class D_{constructor(e){this.name=e,this._logLevel=s2,this._logHandler=a2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?i2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const l2=(t,e)=>e.some(n=>t instanceof n);let jw,zw;function u2(){return jw||(jw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function c2(){return zw||(zw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const XT=new WeakMap,Zm=new WeakMap,eS=new WeakMap,Pp=new WeakMap,M_=new WeakMap;function h2(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(gs(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&XT.set(n,t)}).catch(()=>{}),M_.set(e,t),e}function d2(t){if(Zm.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});Zm.set(t,e)}let Qm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Zm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||eS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function f2(t){Qm=t(Qm)}function p2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Cp(this),e,...n);return eS.set(r,e.sort?e.sort():[e]),gs(r)}:c2().includes(t)?function(...e){return t.apply(Cp(this),e),gs(XT.get(this))}:function(...e){return gs(t.apply(Cp(this),e))}}function m2(t){return typeof t=="function"?p2(t):(t instanceof IDBTransaction&&d2(t),l2(t,u2())?new Proxy(t,Qm):t)}function gs(t){if(t instanceof IDBRequest)return h2(t);if(Pp.has(t))return Pp.get(t);const e=m2(t);return e!==t&&(Pp.set(t,e),M_.set(e,t)),e}const Cp=t=>M_.get(t);function g2(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),u=gs(a);return r&&a.addEventListener("upgradeneeded",c=>{r(gs(a.result),c.oldVersion,c.newVersion,gs(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const _2=["get","getKey","getAll","getAllKeys","count"],y2=["put","add","delete","clear"],kp=new Map;function Uw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(kp.get(e))return kp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=y2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||_2.includes(n)))return;const s=async function(a,...u){const c=this.transaction(a,i?"readwrite":"readonly");let f=c.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),i&&c.done]))[0]};return kp.set(e,s),s}f2(t=>({...t,get:(e,n,r)=>Uw(e,n)||t.get(e,n,r),has:(e,n)=>!!Uw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(w2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function w2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ym="@firebase/app",Bw="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi=new D_("@firebase/app"),E2="@firebase/app-compat",x2="@firebase/analytics-compat",T2="@firebase/analytics",S2="@firebase/app-check-compat",I2="@firebase/app-check",P2="@firebase/auth",C2="@firebase/auth-compat",k2="@firebase/database",A2="@firebase/data-connect",b2="@firebase/database-compat",R2="@firebase/functions",N2="@firebase/functions-compat",L2="@firebase/installations",O2="@firebase/installations-compat",D2="@firebase/messaging",M2="@firebase/messaging-compat",V2="@firebase/performance",F2="@firebase/performance-compat",j2="@firebase/remote-config",z2="@firebase/remote-config-compat",U2="@firebase/storage",B2="@firebase/storage-compat",$2="@firebase/firestore",H2="@firebase/vertexai-preview",q2="@firebase/firestore-compat",W2="firebase",G2="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="[DEFAULT]",K2={[Ym]:"fire-core",[E2]:"fire-core-compat",[T2]:"fire-analytics",[x2]:"fire-analytics-compat",[I2]:"fire-app-check",[S2]:"fire-app-check-compat",[P2]:"fire-auth",[C2]:"fire-auth-compat",[k2]:"fire-rtdb",[A2]:"fire-data-connect",[b2]:"fire-rtdb-compat",[R2]:"fire-fn",[N2]:"fire-fn-compat",[L2]:"fire-iid",[O2]:"fire-iid-compat",[D2]:"fire-fcm",[M2]:"fire-fcm-compat",[V2]:"fire-perf",[F2]:"fire-perf-compat",[j2]:"fire-rc",[z2]:"fire-rc-compat",[U2]:"fire-gcs",[B2]:"fire-gcs-compat",[$2]:"fire-fst",[q2]:"fire-fst-compat",[H2]:"fire-vertex","fire-js":"fire-js",[W2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd=new Map,Z2=new Map,Xm=new Map;function $w(t,e){try{t.container.addComponent(e)}catch(n){Pi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ho(t){const e=t.name;if(Xm.has(e))return Pi.debug(`There were multiple attempts to register component ${e}.`),!1;Xm.set(e,t);for(const n of Sd.values())$w(n,t);for(const n of Z2.values())$w(n,t);return!0}function mf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function jr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_s=new rc("app","Firebase",Q2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _s.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So=G2;function tS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Jm,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw _s.create("bad-app-name",{appName:String(i)});if(n||(n=QT()),!n)throw _s.create("no-options");const s=Sd.get(i);if(s){if(Td(n,s.options)&&Td(r,s.config))return s;throw _s.create("duplicate-app",{appName:i})}const a=new r2(i);for(const c of Xm.values())a.addComponent(c);const u=new Y2(n,r,a);return Sd.set(i,u),u}function V_(t=Jm){const e=Sd.get(t);if(!e&&t===Jm&&QT())return tS();if(!e)throw _s.create("no-app",{appName:t});return e}function Br(t,e,n){var r;let i=(r=K2[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const u=[`Unable to register library "${i}" with version "${e}":`];s&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pi.warn(u.join(" "));return}ho(new xs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2="firebase-heartbeat-database",X2=1,zu="firebase-heartbeat-store";let Ap=null;function nS(){return Ap||(Ap=g2(J2,X2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(zu)}catch(n){console.warn(n)}}}}).catch(t=>{throw _s.create("idb-open",{originalErrorMessage:t.message})})),Ap}async function eN(t){try{const n=(await nS()).transaction(zu),r=await n.objectStore(zu).get(rS(t));return await n.done,r}catch(e){if(e instanceof Yr)Pi.warn(e.message);else{const n=_s.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Pi.warn(n.message)}}}async function Hw(t,e){try{const r=(await nS()).transaction(zu,"readwrite");await r.objectStore(zu).put(e,rS(t)),await r.done}catch(n){if(n instanceof Yr)Pi.warn(n.message);else{const r=_s.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Pi.warn(r.message)}}}function rS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=1024,nN=30*24*60*60*1e3;class rN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new sN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=qw();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const u=new Date(a.date).valueOf();return Date.now()-u<=nN}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Pi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=qw(),{heartbeatsToSend:r,unsentEntries:i}=iN(this._heartbeatsCache.heartbeats),s=xd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Pi.warn(n),""}}}function qw(){return new Date().toISOString().substring(0,10)}function iN(t,e=tN){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),Ww(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ww(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class sN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qR()?WR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await eN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Hw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Hw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Ww(t){return xd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(t){ho(new xs("platform-logger",e=>new v2(e),"PRIVATE")),ho(new xs("heartbeat",e=>new rN(e),"PRIVATE")),Br(Ym,Bw,t),Br(Ym,Bw,"esm2017"),Br("fire-js","")}oN("");function F_(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function iS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const aN=iS,sS=new rc("auth","Firebase",iS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id=new D_("@firebase/auth");function lN(t,...e){Id.logLevel<=Be.WARN&&Id.warn(`Auth (${So}): ${t}`,...e)}function Vh(t,...e){Id.logLevel<=Be.ERROR&&Id.error(`Auth (${So}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(t,...e){throw j_(t,...e)}function $r(t,...e){return j_(t,...e)}function oS(t,e,n){const r=Object.assign(Object.assign({},aN()),{[e]:n});return new rc("auth","Firebase",r).create(e,{appName:t.name})}function Ei(t){return oS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function j_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return sS.create(t,...e)}function Te(t,e,...n){if(!t)throw j_(e,...n)}function _i(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Vh(e),new Error(e)}function Ci(t,e){t||_i(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function uN(){return Gw()==="http:"||Gw()==="https:"}function Gw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uN()||UR()||"connection"in navigator)?navigator.onLine:!0}function hN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ci(n>e,"Short delay should be less than long delay!"),this.isMobile=FR()||BR()}get(){return cN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(t,e){Ci(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_i("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_i("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_i("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=new sc(3e4,6e4);function As(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function bs(t,e,n,r,i={}){return lS(t,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const u=ic(Object.assign({key:t.config.apiKey},a)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:c},s);return zR()||(f.referrerPolicy="no-referrer"),aS.fetch()(uS(t,t.config.apiHost,n,u),f)})}async function lS(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},dN),e);try{const i=new mN(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw ph(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const u=s.ok?a.errorMessage:a.error.message,[c,f]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ph(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw ph(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw ph(t,"user-disabled",a);const p=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw oS(t,p,f);Ir(t,p)}}catch(i){if(i instanceof Yr)throw i;Ir(t,"network-request-failed",{message:String(i)})}}async function oc(t,e,n,r,i={}){const s=await bs(t,e,n,r,i);return"mfaPendingCredential"in s&&Ir(t,"multi-factor-auth-required",{_serverResponse:s}),s}function uS(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?z_(t.config,i):`${t.config.apiScheme}://${i}`}function pN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r($r(this.auth,"network-request-failed")),fN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ph(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=$r(t,e,r);return i.customData._tokenResponse=n,i}function Kw(t){return t!==void 0&&t.enterprise!==void 0}class gN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return pN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function _N(t,e){return bs(t,"GET","/v2/recaptchaConfig",As(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yN(t,e){return bs(t,"POST","/v1/accounts:delete",e)}async function cS(t,e){return bs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vN(t,e=!1){const n=bt(t),r=await n.getIdToken(e),i=U_(r);Te(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:du(bp(i.auth_time)),issuedAtTime:du(bp(i.iat)),expirationTime:du(bp(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function bp(t){return Number(t)*1e3}function U_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Vh("JWT malformed, contained fewer than 3 sections"),null;try{const i=GT(n);return i?JSON.parse(i):(Vh("Failed to decode base64 JWT payload"),null)}catch(i){return Vh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Zw(t){const e=U_(t);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Yr&&wN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function wN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=du(this.lastLoginAt),this.creationTime=du(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pd(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Uu(t,cS(n,{idToken:r}));Te(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?hS(s.providerUserInfo):[],u=TN(t.providerData,a),c=t.isAnonymous,f=!(t.email&&s.passwordHash)&&!(u!=null&&u.length),p=c?f:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:u,metadata:new tg(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function xN(t){const e=bt(t);await Pd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function TN(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function hS(t){return t.map(e=>{var{providerId:n}=e,r=F_(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SN(t,e){const n=await lS(t,{},async()=>{const r=ic({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=uS(t,i,"/v1/token",`key=${s}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",aS.fetch()(a,{method:"POST",headers:u,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function IN(t,e){return bs(t,"POST","/v2/accounts:revokeToken",As(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Zw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const n=Zw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await SN(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,a=new Pa;return r&&(Te(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(Te(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Te(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Pa,this.toJSON())}_performRefresh(){return _i("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(t,e){Te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class yi{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=F_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new EN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new tg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Uu(this,this.stsTokenManager.getToken(this.auth,e));return Te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return vN(this,e)}reload(){return xN(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new yi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Pd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jr(this.auth.app))return Promise.reject(Ei(this.auth));const e=await this.getIdToken();return await Uu(this,yN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,a,u,c,f,p;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,y=(i=n.email)!==null&&i!==void 0?i:void 0,v=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,T=(a=n.photoURL)!==null&&a!==void 0?a:void 0,I=(u=n.tenantId)!==null&&u!==void 0?u:void 0,O=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,S=(f=n.createdAt)!==null&&f!==void 0?f:void 0,k=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:C,emailVerified:B,isAnonymous:G,providerData:$,stsTokenManager:R}=n;Te(C&&R,e,"internal-error");const A=Pa.fromJSON(this.name,R);Te(typeof C=="string",e,"internal-error"),Wi(m,e.name),Wi(y,e.name),Te(typeof B=="boolean",e,"internal-error"),Te(typeof G=="boolean",e,"internal-error"),Wi(v,e.name),Wi(T,e.name),Wi(I,e.name),Wi(O,e.name),Wi(S,e.name),Wi(k,e.name);const D=new yi({uid:C,auth:e,email:y,emailVerified:B,displayName:m,isAnonymous:G,photoURL:T,phoneNumber:v,tenantId:I,stsTokenManager:A,createdAt:S,lastLoginAt:k});return $&&Array.isArray($)&&(D.providerData=$.map(M=>Object.assign({},M))),O&&(D._redirectEventId=O),D}static async _fromIdTokenResponse(e,n,r=!1){const i=new Pa;i.updateFromServerResponse(n);const s=new yi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Pd(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Te(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?hS(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),u=new Pa;u.updateFromIdToken(r);const c=new yi({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:a}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new tg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,f),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw=new Map;function vi(t){Ci(t instanceof Function,"Expected a class definition");let e=Qw.get(t);return e?(Ci(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Qw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}dS.type="NONE";const Yw=dS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fh(t,e,n){return`firebase:${t}:${e}:${n}`}class Ca{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Fh(this.userKey,i.apiKey,s),this.fullPersistenceKey=Fh("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?yi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ca(vi(Yw),e,r);const i=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let s=i[0]||vi(Yw);const a=Fh(r,e.config.apiKey,e.name);let u=null;for(const f of n)try{const p=await f._get(a);if(p){const m=yi._fromJSON(e,p);f!==s&&(u=m),s=f;break}}catch{}const c=i.filter(f=>f._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Ca(s,e,r):(s=c[0],u&&await s._set(a,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==s)try{await f._remove(a)}catch{}})),new Ca(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(gS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(fS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yS(e))return"Blackberry";if(vS(e))return"Webos";if(pS(e))return"Safari";if((e.includes("chrome/")||mS(e))&&!e.includes("edge/"))return"Chrome";if(_S(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function fS(t=on()){return/firefox\//i.test(t)}function pS(t=on()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mS(t=on()){return/crios\//i.test(t)}function gS(t=on()){return/iemobile/i.test(t)}function _S(t=on()){return/android/i.test(t)}function yS(t=on()){return/blackberry/i.test(t)}function vS(t=on()){return/webos/i.test(t)}function B_(t=on()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function PN(t=on()){var e;return B_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function CN(){return $R()&&document.documentMode===10}function wS(t=on()){return B_(t)||_S(t)||vS(t)||yS(t)||/windows phone/i.test(t)||gS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(t,e=[]){let n;switch(t){case"Browser":n=Jw(on());break;case"Worker":n=`${Jw(on())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${So}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((a,u)=>{try{const c=e(s);a(c)}catch(c){u(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AN(t,e={}){return bs(t,"GET","/v2/passwordPolicy",As(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN=6;class RN{constructor(e){var n,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:bN,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,a,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xw(this),this.idTokenSubscription=new Xw(this),this.beforeStateQueue=new kN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=vi(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ca.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await cS(this,{idToken:e}),r=await yi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(jr(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===u)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Pd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jr(this.app))return Promise.reject(Ei(this));const n=e?bt(e):null;return n&&Te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jr(this.app)?Promise.reject(Ei(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jr(this.app)?Promise.reject(Ei(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await AN(this),n=new RN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new rc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await IN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&vi(e)||this._popupRedirectResolver;Te(n,this,"argument-error"),this.redirectPersistenceManager=await Ca.create(this,[vi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(u,this,"internal-error"),u.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ES(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&lN(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Io(t){return bt(t)}class Xw{constructor(e){this.auth=e,this.observer=null,this.addObserver=YR(n=>this.observer=n)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function LN(t){gf=t}function xS(t){return gf.loadJS(t)}function ON(){return gf.recaptchaEnterpriseScript}function DN(){return gf.gapiScript}function MN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const VN="recaptcha-enterprise",FN="NO_RECAPTCHA";class jN{constructor(e){this.type=VN,this.auth=Io(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,u)=>{_N(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new gN(c);return s.tenantId==null?s._agentRecaptchaConfig=f:s._tenantRecaptchaConfigs[s.tenantId]=f,a(f.siteKey)}}).catch(c=>{u(c)})})}function i(s,a,u){const c=window.grecaptcha;Kw(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(f=>{a(f)}).catch(()=>{a(FN)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{r(this.auth).then(u=>{if(!n&&Kw(window.grecaptcha))i(u,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=ON();c.length!==0&&(c+=u),xS(c).then(()=>{i(u,s,a)}).catch(f=>{a(f)})}}).catch(u=>{a(u)})})}}async function e0(t,e,n,r=!1){const i=new jN(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function ng(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await e0(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await e0(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(t,e){const n=mf(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Td(s,e??{}))return i;Ir(i,"already-initialized")}return n.initialize({options:e})}function UN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(vi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function BN(t,e,n){const r=Io(t);Te(r._canInitEmulator,r,"emulator-config-failed"),Te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=TS(e),{host:a,port:u}=$N(e),c=u===null?"":`:${u}`;r.config.emulator={url:`${s}//${a}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:u,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),HN()}function TS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function $N(t){const e=TS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:t0(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:t0(a)}}}function t0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function HN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return _i("not implemented")}_getIdTokenResponse(e){return _i("not implemented")}_linkToIdToken(e,n){return _i("not implemented")}_getReauthenticationResolver(e){return _i("not implemented")}}async function qN(t,e){return bs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WN(t,e){return oc(t,"POST","/v1/accounts:signInWithPassword",As(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GN(t,e){return oc(t,"POST","/v1/accounts:signInWithEmailLink",As(t,e))}async function KN(t,e){return oc(t,"POST","/v1/accounts:signInWithEmailLink",As(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu extends $_{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Bu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Bu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ng(e,n,"signInWithPassword",WN);case"emailLink":return GN(e,{email:this._email,oobCode:this._password});default:Ir(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ng(e,r,"signUpPassword",qN);case"emailLink":return KN(e,{idToken:n,email:this._email,oobCode:this._password});default:Ir(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ka(t,e){return oc(t,"POST","/v1/accounts:signInWithIdp",As(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN="http://localhost";class fo extends $_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new fo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ir("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=F_(n,["providerId","signInMethod"]);if(!r||!i)return null;const a=new fo(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return ka(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ka(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ka(e,n)}buildRequest(){const e={requestUri:ZN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ic(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function YN(t){const e=Ql(Yl(t)).link,n=e?Ql(Yl(e)).deep_link_id:null,r=Ql(Yl(t)).deep_link_id;return(r?Ql(Yl(r)).link:null)||r||n||e||t}class H_{constructor(e){var n,r,i,s,a,u;const c=Ql(Yl(e)),f=(n=c.apiKey)!==null&&n!==void 0?n:null,p=(r=c.oobCode)!==null&&r!==void 0?r:null,m=QN((i=c.mode)!==null&&i!==void 0?i:null);Te(f&&p&&m,"argument-error"),this.apiKey=f,this.operation=m,this.code=p,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=c.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(u=c.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=YN(e);try{return new H_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(){this.providerId=Ya.PROVIDER_ID}static credential(e,n){return Bu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=H_.parseLink(n);return Te(r,"argument-error"),Bu._fromEmailAndCode(e,r.code,r.tenantId)}}Ya.PROVIDER_ID="password";Ya.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ya.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac extends SS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends ac{constructor(){super("facebook.com")}static credential(e){return fo._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xi.credential(e.oauthAccessToken)}catch{return null}}}Xi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends ac{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return fo._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return es.credential(n,r)}catch{return null}}}es.GOOGLE_SIGN_IN_METHOD="google.com";es.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends ac{constructor(){super("github.com")}static credential(e){return fo._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ts.credential(e.oauthAccessToken)}catch{return null}}}ts.GITHUB_SIGN_IN_METHOD="github.com";ts.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends ac{constructor(){super("twitter.com")}static credential(e,n){return fo._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ns.credential(n,r)}catch{return null}}}ns.TWITTER_SIGN_IN_METHOD="twitter.com";ns.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JN(t,e){return oc(t,"POST","/v1/accounts:signUp",As(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await yi._fromIdTokenResponse(e,r,i),a=n0(r);return new po({user:s,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=n0(r);return new po({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function n0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd extends Yr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Cd.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Cd(e,n,r,i)}}function IS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Cd._fromErrorAndOperation(t,s,e,r):s})}async function XN(t,e,n=!1){const r=await Uu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return po._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eL(t,e,n=!1){const{auth:r}=t;if(jr(r.app))return Promise.reject(Ei(r));const i="reauthenticate";try{const s=await Uu(t,IS(r,i,e,t),n);Te(s.idToken,r,"internal-error");const a=U_(s.idToken);Te(a,r,"internal-error");const{sub:u}=a;return Te(t.uid===u,r,"user-mismatch"),po._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ir(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PS(t,e,n=!1){if(jr(t.app))return Promise.reject(Ei(t));const r="signIn",i=await IS(t,r,e),s=await po._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function tL(t,e){return PS(Io(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CS(t){const e=Io(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function nL(t,e,n){if(jr(t.app))return Promise.reject(Ei(t));const r=Io(t),a=await ng(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",JN).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&CS(t),c}),u=await po._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(u.user),u}function rL(t,e,n){return jr(t.app)?Promise.reject(Ei(t)):tL(bt(t),Ya.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&CS(t),r})}function iL(t,e,n,r){return bt(t).onIdTokenChanged(e,n,r)}function sL(t,e,n){return bt(t).beforeAuthStateChanged(e,n)}function oL(t,e,n,r){return bt(t).onAuthStateChanged(e,n,r)}function aL(t){return bt(t).signOut()}const kd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(kd,"1"),this.storage.removeItem(kd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL=1e3,uL=10;class AS extends kS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,c)=>{this.notifyListeners(a,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);CN()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,uL):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},lL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}AS.type="LOCAL";const cL=AS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS extends kS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}bS.type="SESSION";const RS=bS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new _f(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(a).map(async f=>f(n.origin,s)),c=await hL(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_f.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((u,c)=>{const f=q_("",20);i.port1.start();const p=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(m){const y=m;if(y.data.eventId===f)switch(y.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),u(y.data.response);break;default:clearTimeout(p),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(){return window}function fL(t){Hr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(){return typeof Hr().WorkerGlobalScope<"u"&&typeof Hr().importScripts=="function"}async function pL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function mL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function gL(){return NS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS="firebaseLocalStorageDb",_L=1,Ad="firebaseLocalStorage",OS="fbase_key";class lc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function yf(t,e){return t.transaction([Ad],e?"readwrite":"readonly").objectStore(Ad)}function yL(){const t=indexedDB.deleteDatabase(LS);return new lc(t).toPromise()}function rg(){const t=indexedDB.open(LS,_L);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ad,{keyPath:OS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ad)?e(r):(r.close(),await yL(),e(await rg()))})})}async function r0(t,e,n){const r=yf(t,!0).put({[OS]:e,value:n});return new lc(r).toPromise()}async function vL(t,e){const n=yf(t,!1).get(e),r=await new lc(n).toPromise();return r===void 0?null:r.value}function i0(t,e){const n=yf(t,!0).delete(e);return new lc(n).toPromise()}const wL=800,EL=3;class DS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>EL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return NS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_f._getInstance(gL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await pL(),!this.activeServiceWorker)return;this.sender=new dL(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||mL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rg();return await r0(e,kd,"1"),await i0(e,kd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>r0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>vL(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>i0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=yf(i,!1).getAll();return new lc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}DS.type="LOCAL";const xL=DS;new sc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TL(t,e){return e?vi(e):(Te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_ extends $_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ka(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ka(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ka(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function SL(t){return PS(t.auth,new W_(t),t.bypassAuthState)}function IL(t){const{auth:e,user:n}=t;return Te(n,e,"internal-error"),eL(n,new W_(t),t.bypassAuthState)}async function PL(t){const{auth:e,user:n}=t;return Te(n,e,"internal-error"),XN(n,new W_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:a,type:u}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return SL;case"linkViaPopup":case"linkViaRedirect":return PL;case"reauthViaPopup":case"reauthViaRedirect":return IL;default:Ir(this.auth,"internal-error")}}resolve(e){Ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL=new sc(2e3,1e4);class va extends MS{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,va.currentPopupAction&&va.currentPopupAction.cancel(),va.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){Ci(this.filter.length===1,"Popup operations only handle one event");const e=q_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject($r(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject($r(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,va.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($r(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CL.get())};e()}}va.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL="pendingRedirect",jh=new Map;class AL extends MS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=jh.get(this.auth._key());if(!e){try{const r=await bL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}jh.set(this.auth._key(),e)}return this.bypassAuthState||jh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bL(t,e){const n=LL(e),r=NL(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function RL(t,e){jh.set(t._key(),e)}function NL(t){return vi(t._redirectPersistence)}function LL(t){return Fh(kL,t.config.apiKey,t.name)}async function OL(t,e,n=!1){if(jr(t.app))return Promise.reject(Ei(t));const r=Io(t),i=TL(r,e),a=await new AL(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DL=10*60*1e3;class ML{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!VL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!VS(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError($r(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=DL&&this.cachedEventUids.clear(),this.cachedEventUids.has(s0(e))}saveEventToCache(e){this.cachedEventUids.add(s0(e)),this.lastProcessedEventTime=Date.now()}}function s0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function VS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function VL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return VS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FL(t,e={}){return bs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zL=/^https?/;async function UL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await FL(t);for(const n of e)try{if(BL(n))return}catch{}Ir(t,"unauthorized-domain")}function BL(t){const e=eg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!zL.test(n))return!1;if(jL.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L=new sc(3e4,6e4);function o0(){const t=Hr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function HL(t){return new Promise((e,n)=>{var r,i,s;function a(){o0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{o0(),n($r(t,"network-request-failed"))},timeout:$L.get()})}if(!((i=(r=Hr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Hr().gapi)===null||s===void 0)&&s.load)a();else{const u=MN("iframefcb");return Hr()[u]=()=>{gapi.load?a():n($r(t,"network-request-failed"))},xS(`${DN()}?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw zh=null,e})}let zh=null;function qL(t){return zh=zh||HL(t),zh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WL=new sc(5e3,15e3),GL="__/auth/iframe",KL="emulator/auth/iframe",ZL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},QL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function YL(t){const e=t.config;Te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?z_(e,KL):`https://${t.config.authDomain}/${GL}`,r={apiKey:e.apiKey,appName:t.name,v:So},i=QL.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ic(r).slice(1)}`}async function JL(t){const e=await qL(t),n=Hr().gapi;return Te(n,t,"internal-error"),e.open({where:document.body,url:YL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ZL,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=$r(t,"network-request-failed"),u=Hr().setTimeout(()=>{s(a)},WL.get());function c(){Hr().clearTimeout(u),i(r)}r.ping(c).then(c,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eO=500,tO=600,nO="_blank",rO="http://localhost";class a0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function iO(t,e,n,r=eO,i=tO){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},XL),{width:r.toString(),height:i.toString(),top:s,left:a}),f=on().toLowerCase();n&&(u=mS(f)?nO:n),fS(f)&&(e=e||rO,c.scrollbars="yes");const p=Object.entries(c).reduce((y,[v,T])=>`${y}${v}=${T},`,"");if(PN(f)&&u!=="_self")return sO(e||"",u),new a0(null);const m=window.open(e||"",u,p);Te(m,t,"popup-blocked");try{m.focus()}catch{}return new a0(m)}function sO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO="__/auth/handler",aO="emulator/auth/handler",lO=encodeURIComponent("fac");async function l0(t,e,n,r,i,s){Te(t.config.authDomain,t,"auth-domain-config-required"),Te(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:So,eventId:i};if(e instanceof SS){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",QR(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))a[p]=m}if(e instanceof ac){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(a.scopes=p.join(","))}t.tenantId&&(a.tid=t.tenantId);const u=a;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const c=await t._getAppCheckToken(),f=c?`#${lO}=${encodeURIComponent(c)}`:"";return`${uO(t)}?${ic(u).slice(1)}${f}`}function uO({config:t}){return t.emulator?z_(t,aO):`https://${t.authDomain}/${oO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp="webStorageSupport";class cO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RS,this._completeRedirectFn=OL,this._overrideRedirectResult=RL}async _openPopup(e,n,r,i){var s;Ci((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await l0(e,n,r,eg(),i);return iO(e,a,q_())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await l0(e,n,r,eg(),i);return fL(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ci(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await JL(e),r=new ML(e);return n.register("authEvent",i=>(Te(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Rp,{type:Rp},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Rp];a!==void 0&&n(!!a),Ir(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=UL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return wS()||pS()||B_()}}const hO=cO;var u0="@firebase/auth",c0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pO(t){ho(new xs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=r.options;Te(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ES(t)},f=new NN(r,i,s,c);return UN(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ho(new xs("auth-internal",e=>{const n=Io(e.getProvider("auth").getImmediate());return(r=>new dO(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Br(u0,c0,fO(t)),Br(u0,c0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mO=5*60,gO=YT("authIdTokenMaxAge")||mO;let h0=null;const _O=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>gO)return;const i=n==null?void 0:n.token;h0!==i&&(h0=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function vf(t=V_()){const e=mf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=zN(t,{popupRedirectResolver:hO,persistence:[xL,cL,RS]}),r=YT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=_O(s.toString());sL(n,a,()=>a(n.currentUser)),iL(n,u=>a(u))}}const i=KT("auth");return i&&BN(n,`http://${i}`),n}function yO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}LN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=$r("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",yO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pO("Browser");var FS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},d0=wr.createContext&&wr.createContext(FS),vO=["attr","size","title"];function wO(t,e){if(t==null)return{};var n=EO(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function EO(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function bd(){return bd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bd.apply(this,arguments)}function f0(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f0(Object(n),!0).forEach(function(r){xO(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f0(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xO(t,e,n){return e=TO(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TO(t){var e=SO(t,"string");return typeof e=="symbol"?e:e+""}function SO(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jS(t){return t&&t.map((e,n)=>wr.createElement(e.tag,Rd({key:n},e.attr),jS(e.child)))}function qn(t){return e=>wr.createElement(IO,bd({attr:Rd({},t.attr)},e),jS(t.child))}function IO(t){var e=n=>{var{attr:r,size:i,title:s}=t,a=wO(t,vO),u=i||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),wr.createElement("svg",bd({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,a,{className:c,style:Rd(Rd({color:t.color||n.color},n.style),t.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),s&&wr.createElement("title",null,s),t.children)};return d0!==void 0?wr.createElement(d0.Consumer,null,n=>e(n)):e(FS)}function PO(t){return qn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(t)}function p0(t){return qn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(t)}function m0(t){return qn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(t)}function zS(t){return qn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z"},child:[]}]})(t)}function g0(t){return qn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function mh(t){return qn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 480H48c-26.51 0-48-21.49-48-48V80c0-26.51 21.49-48 48-48h416c26.51 0 48 21.49 48 48v352c0 26.51-21.49 48-48 48zM128 120c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zm0 96c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zm0 96c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zm288-136v-32c0-6.627-5.373-12-12-12H204c-6.627 0-12 5.373-12 12v32c0 6.627 5.373 12 12 12h200c6.627 0 12-5.373 12-12zm0 96v-32c0-6.627-5.373-12-12-12H204c-6.627 0-12 5.373-12 12v32c0 6.627 5.373 12 12 12h200c6.627 0 12-5.373 12-12zm0 96v-32c0-6.627-5.373-12-12-12H204c-6.627 0-12 5.373-12 12v32c0 6.627 5.373 12 12 12h200c6.627 0 12-5.373 12-12z"},child:[]}]})(t)}function _0(t){return qn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function US(t){return qn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M500.33 0h-47.41a12 12 0 0 0-12 12.57l4 82.76A247.42 247.42 0 0 0 256 8C119.34 8 7.9 119.53 8 256.19 8.1 393.07 119.1 504 256 504a247.1 247.1 0 0 0 166.18-63.91 12 12 0 0 0 .48-17.43l-34-34a12 12 0 0 0-16.38-.55A176 176 0 1 1 402.1 157.8l-101.53-4.87a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12h200.33a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12z"},child:[]}]})(t)}function CO(t){return qn({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 352h-16V243.9c0-12.7-5.1-24.9-14.1-33.9L494 110.1c-9-9-21.2-14.1-33.9-14.1H416V48c0-26.5-21.5-48-48-48H112C85.5 0 64 21.5 64 48v48H8c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h272c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H40c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h208c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H8c-4.4 0-8 3.6-8 8v16c0 4.4 3.6 8 8 8h208c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H64v128c0 53 43 96 96 96s96-43 96-96h128c0 53 43 96 96 96s96-43 96-96h48c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zM160 464c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm320 0c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48zm80-208H416V144h44.1l99.9 99.9V256z"},child:[]}]})(t)}function y0(t){return qn({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function kO(t){return qn({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M128 160h320v192H128V160zm400 96c0 26.51 21.49 48 48 48v96c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48v-96c26.51 0 48-21.49 48-48s-21.49-48-48-48v-96c0-26.51 21.49-48 48-48h480c26.51 0 48 21.49 48 48v96c-26.51 0-48 21.49-48 48zm-48-104c0-13.255-10.745-24-24-24H120c-13.255 0-24 10.745-24 24v208c0 13.255 10.745 24 24 24h336c13.255 0 24-10.745 24-24V152z"},child:[]}]})(t)}function BS(t){return qn({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function AO(t){return qn({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm95.8 32.6L272 480l-32-136 32-56h-96l32 56-32 136-47.8-191.4C56.9 292 0 350.3 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-72.1-56.9-130.4-128.2-133.8z"},child:[]}]})(t)}const bO=()=>{const t=async()=>{const n=vf();try{await aL(n)}catch(r){console.error("Sign out error",r)}},e=x.jsxs(x.Fragment,{children:[x.jsx("li",{children:x.jsxs(mr,{to:"/dashboard",title:"Dashboard",children:[x.jsx(g0,{className:"inline-block mr-1 md:mr-2"})," ",x.jsx("span",{className:"hidden md:inline",children:"Dashboard"})]})}),x.jsx("li",{children:x.jsxs(mr,{to:"/sap",title:"Tickets SAP",children:[x.jsx(mh,{className:"inline-block mr-1 md:mr-2"})," ",x.jsx("span",{className:"hidden md:inline",children:"SAP Tickets"})]})}),x.jsx("li",{children:x.jsxs(mr,{to:"/sap/create",title:"Créer Ticket SAP",children:[x.jsx(_0,{className:"inline-block mr-1 md:mr-2"})," ",x.jsx("span",{className:"hidden md:inline",children:"Créer Ticket"})]})}),x.jsx("li",{children:x.jsxs(mr,{to:"/envois",title:"Envois",children:[x.jsx(mh,{className:"inline-block mr-1 md:mr-2"})," ",x.jsx("span",{className:"hidden md:inline",children:"Envois"})]})}),x.jsx("li",{children:x.jsxs(mr,{to:"/admin",title:"Admin",children:[x.jsx(p0,{className:"inline-block mr-1 md:mr-2"})," ",x.jsx("span",{className:"hidden md:inline",children:"Admin"})]})}),x.jsx("li",{children:x.jsxs("button",{className:"btn btn-ghost",onClick:t,title:"Se déconnecter",children:[x.jsx(y0,{className:"inline-block mr-1 md:mr-2"})," ",x.jsx("span",{className:"hidden md:inline",children:"Déconnexion"})]})})]});return x.jsxs("div",{className:"navbar bg-base-200 shadow-md mb-6 sticky top-0 z-50 rounded-box mx-auto max-w-7xl mt-2",children:[" ",x.jsxs("div",{className:"navbar-start",children:[x.jsxs("div",{className:"dropdown",children:[x.jsxs("label",{tabIndex:0,className:"btn btn-ghost lg:hidden",children:[" ",x.jsx(PO,{className:"h-5 w-5"})]}),x.jsxs("ul",{tabIndex:0,className:"menu menu-sm dropdown-content mt-3 z-[1] p-2 shadow bg-base-100 rounded-box w-52",children:[x.jsx("li",{children:x.jsxs(mr,{to:"/dashboard",children:[x.jsx(g0,{className:"inline-block mr-2"})," Dashboard"]})}),x.jsx("li",{children:x.jsxs(mr,{to:"/sap",children:[x.jsx(mh,{className:"inline-block mr-2"})," SAP Tickets"]})}),x.jsx("li",{children:x.jsxs(mr,{to:"/sap/create",children:[x.jsx(_0,{className:"inline-block mr-2"})," Créer Ticket"]})}),x.jsx("li",{children:x.jsxs(mr,{to:"/envois",children:[x.jsx(mh,{className:"inline-block mr-2"})," Envois"]})}),x.jsx("li",{children:x.jsxs(mr,{to:"/admin",children:[x.jsx(p0,{className:"inline-block mr-2"})," Admin"]})}),x.jsx("li",{children:x.jsxs("button",{onClick:t,children:[x.jsx(y0,{className:"inline-block mr-2"})," Déconnexion"]})})]})]}),x.jsx(mr,{to:"/",className:"btn btn-ghost normal-case text-xl",children:"JDC SAP"})]}),x.jsxs("div",{className:"navbar-center hidden lg:flex",children:[" ",x.jsxs("ul",{className:"menu menu-horizontal px-1",children:[e," "]})]})]})},RO=({envoisCount:t,ticketsCount:e,loading:n,error:r})=>x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[x.jsx("div",{className:"stats shadow bg-primary text-primary-content",children:x.jsxs("div",{className:"stat",children:[x.jsxs("div",{className:"stat-figure text-primary-content",children:[" ",x.jsx(CO,{size:32})]}),x.jsx("div",{className:"stat-title text-primary-content",children:"Envois Actifs"})," ",n?x.jsx("div",{className:"stat-value text-primary-content",children:x.jsx("span",{className:"loading loading-dots loading-md"})}):r?x.jsx("div",{className:"stat-value text-error",children:x.jsx(m0,{})}):x.jsx("div",{className:"stat-value text-primary-content",children:t}),x.jsx("div",{className:"stat-desc text-primary-content opacity-75",children:"Nombre total d'envois"})," "]})}),x.jsx("div",{className:"stats shadow bg-secondary text-secondary-content",children:x.jsxs("div",{className:"stat",children:[x.jsxs("div",{className:"stat-figure text-secondary-content",children:[" ",x.jsx(kO,{size:32})]}),x.jsx("div",{className:"stat-title text-secondary-content",children:"Tickets SAP Ouverts"})," ",n?x.jsx("div",{className:"stat-value text-secondary-content",children:x.jsx("span",{className:"loading loading-dots loading-md"})}):r?x.jsx("div",{className:"stat-value text-error",children:x.jsx(m0,{})}):x.jsx("div",{className:"stat-value text-secondary-content",children:e}),x.jsx("div",{className:"stat-desc text-secondary-content opacity-75",children:"Total tickets tous secteurs"})," "]})}),x.jsx("div",{className:"stats shadow bg-accent text-accent-content",children:x.jsxs("div",{className:"stat",children:[x.jsx("div",{className:"stat-title text-accent-content",children:"Autre Statistique"})," ",x.jsx("div",{className:"stat-value text-accent-content",children:"..."})," ",x.jsx("div",{className:"stat-desc text-accent-content opacity-75",children:"Description"})," "]})}),x.jsxs("div",{className:"stats shadow",children:[" ",x.jsxs("div",{className:"stat",children:[x.jsx("div",{className:"stat-title text-base-content",children:"Encore une Statistique"})," ",x.jsx("div",{className:"stat-value text-base-content",children:"..."})," ",x.jsx("div",{className:"stat-desc text-base-content opacity-75",children:"Description"})," "]})]})]});var ig={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(wu,function(n){var r="1.9.4";function i(o){var l,d,g,w;for(d=1,g=arguments.length;d<g;d++){w=arguments[d];for(l in w)o[l]=w[l]}return o}var s=Object.create||function(){function o(){}return function(l){return o.prototype=l,new o}}();function a(o,l){var d=Array.prototype.slice;if(o.bind)return o.bind.apply(o,d.call(arguments,1));var g=d.call(arguments,2);return function(){return o.apply(l,g.length?g.concat(d.call(arguments)):arguments)}}var u=0;function c(o){return"_leaflet_id"in o||(o._leaflet_id=++u),o._leaflet_id}function f(o,l,d){var g,w,P,U;return U=function(){g=!1,w&&(P.apply(d,w),w=!1)},P=function(){g?w=arguments:(o.apply(d,arguments),setTimeout(U,l),g=!0)},P}function p(o,l,d){var g=l[1],w=l[0],P=g-w;return o===g&&d?o:((o-w)%P+P)%P+w}function m(){return!1}function y(o,l){if(l===!1)return o;var d=Math.pow(10,l===void 0?6:l);return Math.round(o*d)/d}function v(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function T(o){return v(o).split(/\s+/)}function I(o,l){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?s(o.options):{});for(var d in l)o.options[d]=l[d];return o.options}function O(o,l,d){var g=[];for(var w in o)g.push(encodeURIComponent(d?w.toUpperCase():w)+"="+encodeURIComponent(o[w]));return(!l||l.indexOf("?")===-1?"?":"&")+g.join("&")}var S=/\{ *([\w_ -]+) *\}/g;function k(o,l){return o.replace(S,function(d,g){var w=l[g];if(w===void 0)throw new Error("No value provided for variable "+d);return typeof w=="function"&&(w=w(l)),w})}var C=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function B(o,l){for(var d=0;d<o.length;d++)if(o[d]===l)return d;return-1}var G="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function $(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var R=0;function A(o){var l=+new Date,d=Math.max(0,16-(l-R));return R=l+d,window.setTimeout(o,d)}var D=window.requestAnimationFrame||$("RequestAnimationFrame")||A,M=window.cancelAnimationFrame||$("CancelAnimationFrame")||$("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function V(o,l,d){if(d&&D===A)o.call(l);else return D.call(window,a(o,l))}function z(o){o&&M.call(window,o)}var F={__proto__:null,extend:i,create:s,bind:a,get lastId(){return u},stamp:c,throttle:f,wrapNum:p,falseFn:m,formatNum:y,trim:v,splitWords:T,setOptions:I,getParamString:O,template:k,isArray:C,indexOf:B,emptyImageUrl:G,requestFn:D,cancelFn:M,requestAnimFrame:V,cancelAnimFrame:z};function ae(){}ae.extend=function(o){var l=function(){I(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,g=s(d);g.constructor=l,l.prototype=g;for(var w in this)Object.prototype.hasOwnProperty.call(this,w)&&w!=="prototype"&&w!=="__super__"&&(l[w]=this[w]);return o.statics&&i(l,o.statics),o.includes&&(ce(o.includes),i.apply(null,[g].concat(o.includes))),i(g,o),delete g.statics,delete g.includes,g.options&&(g.options=d.options?s(d.options):{},i(g.options,o.options)),g._initHooks=[],g.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var P=0,U=g._initHooks.length;P<U;P++)g._initHooks[P].call(this)}},l},ae.include=function(o){var l=this.prototype.options;return i(this.prototype,o),o.options&&(this.prototype.options=l,this.mergeOptions(o.options)),this},ae.mergeOptions=function(o){return i(this.prototype.options,o),this},ae.addInitHook=function(o){var l=Array.prototype.slice.call(arguments,1),d=typeof o=="function"?o:function(){this[o].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function ce(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=C(o)?o:[o];for(var l=0;l<o.length;l++)o[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Oe={on:function(o,l,d){if(typeof o=="object")for(var g in o)this._on(g,o[g],l);else{o=T(o);for(var w=0,P=o.length;w<P;w++)this._on(o[w],l,d)}return this},off:function(o,l,d){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var g in o)this._off(g,o[g],l);else{o=T(o);for(var w=arguments.length===1,P=0,U=o.length;P<U;P++)w?this._off(o[P]):this._off(o[P],l,d)}return this},_on:function(o,l,d,g){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(o,l,d)===!1){d===this&&(d=void 0);var w={fn:l,ctx:d};g&&(w.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(w)}},_off:function(o,l,d){var g,w,P;if(this._events&&(g=this._events[o],!!g)){if(arguments.length===1){if(this._firingCount)for(w=0,P=g.length;w<P;w++)g[w].fn=m;delete this._events[o];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var U=this._listens(o,l,d);if(U!==!1){var W=g[U];this._firingCount&&(W.fn=m,this._events[o]=g=g.slice()),g.splice(U,1)}}},fire:function(o,l,d){if(!this.listens(o,d))return this;var g=i({},l,{type:o,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var w=this._events[o];if(w){this._firingCount=this._firingCount+1||1;for(var P=0,U=w.length;P<U;P++){var W=w[P],K=W.fn;W.once&&this.off(o,K,W.ctx),K.call(W.ctx||this,g)}this._firingCount--}}return d&&this._propagateEvent(g),this},listens:function(o,l,d,g){typeof o!="string"&&console.warn('"string" type argument expected');var w=l;typeof l!="function"&&(g=!!l,w=void 0,d=void 0);var P=this._events&&this._events[o];if(P&&P.length&&this._listens(o,w,d)!==!1)return!0;if(g){for(var U in this._eventParents)if(this._eventParents[U].listens(o,l,d,g))return!0}return!1},_listens:function(o,l,d){if(!this._events)return!1;var g=this._events[o]||[];if(!l)return!!g.length;d===this&&(d=void 0);for(var w=0,P=g.length;w<P;w++)if(g[w].fn===l&&g[w].ctx===d)return w;return!1},once:function(o,l,d){if(typeof o=="object")for(var g in o)this._on(g,o[g],l,!0);else{o=T(o);for(var w=0,P=o.length;w<P;w++)this._on(o[w],l,d,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[c(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[c(o)],this},_propagateEvent:function(o){for(var l in this._eventParents)this._eventParents[l].fire(o.type,i({layer:o.target,propagatedFrom:o.target},o),!0)}};Oe.addEventListener=Oe.on,Oe.removeEventListener=Oe.clearAllEventListeners=Oe.off,Oe.addOneTimeEventListener=Oe.once,Oe.fireEvent=Oe.fire,Oe.hasEventListeners=Oe.listens;var ze=ae.extend(Oe);function J(o,l,d){this.x=d?Math.round(o):o,this.y=d?Math.round(l):l}var me=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};J.prototype={clone:function(){return new J(this.x,this.y)},add:function(o){return this.clone()._add(N(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(N(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new J(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new J(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=me(this.x),this.y=me(this.y),this},distanceTo:function(o){o=N(o);var l=o.x-this.x,d=o.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(o){return o=N(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=N(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function N(o,l,d){return o instanceof J?o:C(o)?new J(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new J(o.x,o.y):new J(o,l,d)}function fe(o,l){if(o)for(var d=l?[o,l]:o,g=0,w=d.length;g<w;g++)this.extend(d[g])}fe.prototype={extend:function(o){var l,d;if(!o)return this;if(o instanceof J||typeof o[0]=="number"||"x"in o)l=d=N(o);else if(o=_e(o),l=o.min,d=o.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(o){return N((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return N(this.min.x,this.max.y)},getTopRight:function(){return N(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var l,d;return typeof o[0]=="number"||o instanceof J?o=N(o):o=_e(o),o instanceof fe?(l=o.min,d=o.max):l=d=o,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(o){o=_e(o);var l=this.min,d=this.max,g=o.min,w=o.max,P=w.x>=l.x&&g.x<=d.x,U=w.y>=l.y&&g.y<=d.y;return P&&U},overlaps:function(o){o=_e(o);var l=this.min,d=this.max,g=o.min,w=o.max,P=w.x>l.x&&g.x<d.x,U=w.y>l.y&&g.y<d.y;return P&&U},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var l=this.min,d=this.max,g=Math.abs(l.x-d.x)*o,w=Math.abs(l.y-d.y)*o;return _e(N(l.x-g,l.y-w),N(d.x+g,d.y+w))},equals:function(o){return o?(o=_e(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function _e(o,l){return!o||o instanceof fe?o:new fe(o,l)}function j(o,l){if(o)for(var d=l?[o,l]:o,g=0,w=d.length;g<w;g++)this.extend(d[g])}j.prototype={extend:function(o){var l=this._southWest,d=this._northEast,g,w;if(o instanceof xe)g=o,w=o;else if(o instanceof j){if(g=o._southWest,w=o._northEast,!g||!w)return this}else return o?this.extend(X(o)||Ce(o)):this;return!l&&!d?(this._southWest=new xe(g.lat,g.lng),this._northEast=new xe(w.lat,w.lng)):(l.lat=Math.min(g.lat,l.lat),l.lng=Math.min(g.lng,l.lng),d.lat=Math.max(w.lat,d.lat),d.lng=Math.max(w.lng,d.lng)),this},pad:function(o){var l=this._southWest,d=this._northEast,g=Math.abs(l.lat-d.lat)*o,w=Math.abs(l.lng-d.lng)*o;return new j(new xe(l.lat-g,l.lng-w),new xe(d.lat+g,d.lng+w))},getCenter:function(){return new xe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new xe(this.getNorth(),this.getWest())},getSouthEast:function(){return new xe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof xe||"lat"in o?o=X(o):o=Ce(o);var l=this._southWest,d=this._northEast,g,w;return o instanceof j?(g=o.getSouthWest(),w=o.getNorthEast()):g=w=o,g.lat>=l.lat&&w.lat<=d.lat&&g.lng>=l.lng&&w.lng<=d.lng},intersects:function(o){o=Ce(o);var l=this._southWest,d=this._northEast,g=o.getSouthWest(),w=o.getNorthEast(),P=w.lat>=l.lat&&g.lat<=d.lat,U=w.lng>=l.lng&&g.lng<=d.lng;return P&&U},overlaps:function(o){o=Ce(o);var l=this._southWest,d=this._northEast,g=o.getSouthWest(),w=o.getNorthEast(),P=w.lat>l.lat&&g.lat<d.lat,U=w.lng>l.lng&&g.lng<d.lng;return P&&U},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,l){return o?(o=Ce(o),this._southWest.equals(o.getSouthWest(),l)&&this._northEast.equals(o.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ce(o,l){return o instanceof j?o:new j(o,l)}function xe(o,l,d){if(isNaN(o)||isNaN(l))throw new Error("Invalid LatLng object: ("+o+", "+l+")");this.lat=+o,this.lng=+l,d!==void 0&&(this.alt=+d)}xe.prototype={equals:function(o,l){if(!o)return!1;o=X(o);var d=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return d<=(l===void 0?1e-9:l)},toString:function(o){return"LatLng("+y(this.lat,o)+", "+y(this.lng,o)+")"},distanceTo:function(o){return Ue.distance(this,X(o))},wrap:function(){return Ue.wrapLatLng(this)},toBounds:function(o){var l=180*o/40075017,d=l/Math.cos(Math.PI/180*this.lat);return Ce([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new xe(this.lat,this.lng,this.alt)}};function X(o,l,d){return o instanceof xe?o:C(o)&&typeof o[0]!="object"?o.length===3?new xe(o[0],o[1],o[2]):o.length===2?new xe(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new xe(o.lat,"lng"in o?o.lng:o.lon,o.alt):l===void 0?null:new xe(o,l,d)}var de={latLngToPoint:function(o,l){var d=this.projection.project(o),g=this.scale(l);return this.transformation._transform(d,g)},pointToLatLng:function(o,l){var d=this.scale(l),g=this.transformation.untransform(o,d);return this.projection.unproject(g)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(o),g=this.transformation.transform(l.min,d),w=this.transformation.transform(l.max,d);return new fe(g,w)},infinite:!1,wrapLatLng:function(o){var l=this.wrapLng?p(o.lng,this.wrapLng,!0):o.lng,d=this.wrapLat?p(o.lat,this.wrapLat,!0):o.lat,g=o.alt;return new xe(d,l,g)},wrapLatLngBounds:function(o){var l=o.getCenter(),d=this.wrapLatLng(l),g=l.lat-d.lat,w=l.lng-d.lng;if(g===0&&w===0)return o;var P=o.getSouthWest(),U=o.getNorthEast(),W=new xe(P.lat-g,P.lng-w),K=new xe(U.lat-g,U.lng-w);return new j(W,K)}},Ue=i({},de,{wrapLng:[-180,180],R:6371e3,distance:function(o,l){var d=Math.PI/180,g=o.lat*d,w=l.lat*d,P=Math.sin((l.lat-o.lat)*d/2),U=Math.sin((l.lng-o.lng)*d/2),W=P*P+Math.cos(g)*Math.cos(w)*U*U,K=2*Math.atan2(Math.sqrt(W),Math.sqrt(1-W));return this.R*K}}),xt=6378137,Rt={R:xt,MAX_LATITUDE:85.0511287798,project:function(o){var l=Math.PI/180,d=this.MAX_LATITUDE,g=Math.max(Math.min(d,o.lat),-d),w=Math.sin(g*l);return new J(this.R*o.lng*l,this.R*Math.log((1+w)/(1-w))/2)},unproject:function(o){var l=180/Math.PI;return new xe((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*l,o.x*l/this.R)},bounds:function(){var o=xt*Math.PI;return new fe([-o,-o],[o,o])}()};function Zt(o,l,d,g){if(C(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=l,this._c=d,this._d=g}Zt.prototype={transform:function(o,l){return this._transform(o.clone(),l)},_transform:function(o,l){return l=l||1,o.x=l*(this._a*o.x+this._b),o.y=l*(this._c*o.y+this._d),o},untransform:function(o,l){return l=l||1,new J((o.x/l-this._b)/this._a,(o.y/l-this._d)/this._c)}};function Rn(o,l,d,g){return new Zt(o,l,d,g)}var Xr=i({},Ue,{code:"EPSG:3857",projection:Rt,transformation:function(){var o=.5/(Math.PI*Rt.R);return Rn(o,.5,-o,.5)}()}),Os=i({},Xr,{code:"EPSG:900913"});function ei(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function Ri(o,l){var d="",g,w,P,U,W,K;for(g=0,P=o.length;g<P;g++){for(W=o[g],w=0,U=W.length;w<U;w++)K=W[w],d+=(w?"L":"M")+K.x+" "+K.y;d+=l?ge.svg?"z":"x":""}return d||"M0 0"}var Ni=document.documentElement.style,Li="ActiveXObject"in window,Ds=Li&&!document.addEventListener,ti="msLaunchUri"in navigator&&!("documentMode"in document),Oi=Kn("webkit"),bo=Kn("android"),Di=Kn("android 2")||Kn("android 3"),Ms=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ro=bo&&Kn("Google")&&Ms<537&&!("AudioNode"in window),Q=!!window.opera,re=!ti&&Kn("chrome"),ve=Kn("gecko")&&!Oi&&!Q&&!Li,Le=!re&&Kn("safari"),qe=Kn("phantom"),Qt="OTransition"in Ni,ln=navigator.platform.indexOf("Win")===0,un=Li&&"transition"in Ni,Wn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Di,Gn="MozPerspective"in Ni,zt=!window.L_DISABLE_3D&&(un||Wn||Gn)&&!Qt&&!qe,_n=typeof orientation<"u"||Kn("mobile"),cn=_n&&Oi,Ec=_n&&Wn,sl=!window.PointerEvent&&window.MSPointerEvent,Mi=!!(window.PointerEvent||sl),No="ontouchstart"in window||!!window.TouchEvent,ol=!window.L_NO_TOUCH&&(No||Mi),ni=_n&&Q,xc=_n&&ve,Lo=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Tc=function(){var o=!1;try{var l=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",m,l),window.removeEventListener("testPassiveEventSupport",m,l)}catch{}return o}(),Vs=function(){return!!document.createElement("canvas").getContext}(),Oo=!!(document.createElementNS&&ei("svg").createSVGRect),Ut=!!Oo&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Sc=!Oo&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var l=o.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Fs=navigator.platform.indexOf("Mac")===0,js=navigator.platform.indexOf("Linux")===0;function Kn(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var ge={ie:Li,ielt9:Ds,edge:ti,webkit:Oi,android:bo,android23:Di,androidStock:Ro,opera:Q,chrome:re,gecko:ve,safari:Le,phantom:qe,opera12:Qt,win:ln,ie3d:un,webkit3d:Wn,gecko3d:Gn,any3d:zt,mobile:_n,mobileWebkit:cn,mobileWebkit3d:Ec,msPointer:sl,pointer:Mi,touch:ol,touchNative:No,mobileOpera:ni,mobileGecko:xc,retina:Lo,passiveEvents:Tc,canvas:Vs,svg:Oo,vml:Sc,inlineSvg:Ut,mac:Fs,linux:js},ri=ge.msPointer?"MSPointerDown":"pointerdown",Ic=ge.msPointer?"MSPointerMove":"pointermove",Pc=ge.msPointer?"MSPointerUp":"pointerup",zs=ge.msPointer?"MSPointerCancel":"pointercancel",Do={touchstart:ri,touchmove:Ic,touchend:Pc,touchcancel:zs},Mo={touchstart:Fo,touchmove:Vo,touchend:Vo,touchcancel:Vo},ur={},cr=!1;function Cc(o,l,d){return l==="touchstart"&&Ac(),Mo[l]?(d=Mo[l].bind(this,d),o.addEventListener(Do[l],d,!1),d):(console.warn("wrong event specified:",l),m)}function kc(o,l,d){if(!Do[l]){console.warn("wrong event specified:",l);return}o.removeEventListener(Do[l],d,!1)}function al(o){ur[o.pointerId]=o}function ll(o){ur[o.pointerId]&&(ur[o.pointerId]=o)}function ul(o){delete ur[o.pointerId]}function Ac(){cr||(document.addEventListener(ri,al,!0),document.addEventListener(Ic,ll,!0),document.addEventListener(Pc,ul,!0),document.addEventListener(zs,ul,!0),cr=!0)}function Vo(o,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in ur)l.touches.push(ur[d]);l.changedTouches=[l],o(l)}}function Fo(o,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&ct(l),Vo(o,l)}function bc(o){var l={},d,g;for(g in o)d=o[g],l[g]=d&&d.bind?d.bind(o):d;return o=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var cl=200;function Us(o,l){o.addEventListener("dblclick",l);var d=0,g;function w(P){if(P.detail!==1){g=P.detail;return}if(!(P.pointerType==="mouse"||P.sourceCapabilities&&!P.sourceCapabilities.firesTouchEvents)){var U=xl(P);if(!(U.some(function(K){return K instanceof HTMLLabelElement&&K.attributes.for})&&!U.some(function(K){return K instanceof HTMLInputElement||K instanceof HTMLSelectElement}))){var W=Date.now();W-d<=cl?(g++,g===2&&l(bc(P))):g=1,d=W}}}return o.addEventListener("click",w),{dblclick:l,simDblclick:w}}function ii(o,l){o.removeEventListener("dblclick",l.dblclick),o.removeEventListener("click",l.simDblclick)}var Bs=oi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),$s=oi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),hl=$s==="webkitTransition"||$s==="OTransition"?$s+"End":"transitionend";function dl(o){return typeof o=="string"?document.getElementById(o):o}function Vi(o,l){var d=o.style[l]||o.currentStyle&&o.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var g=document.defaultView.getComputedStyle(o,null);d=g?g[l]:null}return d==="auto"?null:d}function Fe(o,l,d){var g=document.createElement(o);return g.className=l||"",d&&d.appendChild(g),g}function et(o){var l=o.parentNode;l&&l.removeChild(o)}function Hs(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function si(o){var l=o.parentNode;l&&l.lastChild!==o&&l.appendChild(o)}function Fi(o){var l=o.parentNode;l&&l.firstChild!==o&&l.insertBefore(o,l.firstChild)}function fl(o,l){if(o.classList!==void 0)return o.classList.contains(l);var d=Zn(o);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function be(o,l){if(o.classList!==void 0)for(var d=T(l),g=0,w=d.length;g<w;g++)o.classList.add(d[g]);else if(!fl(o,l)){var P=Zn(o);pl(o,(P?P+" ":"")+l)}}function at(o,l){o.classList!==void 0?o.classList.remove(l):pl(o,v((" "+Zn(o)+" ").replace(" "+l+" "," ")))}function pl(o,l){o.className.baseVal===void 0?o.className=l:o.className.baseVal=l}function Zn(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function gt(o,l){"opacity"in o.style?o.style.opacity=l:"filter"in o.style&&jo(o,l)}function jo(o,l){var d=!1,g="DXImageTransform.Microsoft.Alpha";try{d=o.filters.item(g)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):o.style.filter+=" progid:"+g+"(opacity="+l+")"}function oi(o){for(var l=document.documentElement.style,d=0;d<o.length;d++)if(o[d]in l)return o[d];return!1}function Ar(o,l,d){var g=l||new J(0,0);o.style[Bs]=(ge.ie3d?"translate("+g.x+"px,"+g.y+"px)":"translate3d("+g.x+"px,"+g.y+"px,0)")+(d?" scale("+d+")":"")}function Ie(o,l){o._leaflet_pos=l,ge.any3d?Ar(o,l):(o.style.left=l.x+"px",o.style.top=l.y+"px")}function Qn(o){return o._leaflet_pos||new J(0,0)}var hr,dr,ml;if("onselectstart"in document)hr=function(){we(window,"selectstart",ct)},dr=function(){Je(window,"selectstart",ct)};else{var ji=oi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);hr=function(){if(ji){var o=document.documentElement.style;ml=o[ji],o[ji]="none"}},dr=function(){ji&&(document.documentElement.style[ji]=ml,ml=void 0)}}function gl(){we(window,"dragstart",ct)}function _l(){Je(window,"dragstart",ct)}var zo,yl;function ai(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(Nn(),zo=o,yl=o.style.outlineStyle,o.style.outlineStyle="none",we(window,"keydown",Nn))}function Nn(){zo&&(zo.style.outlineStyle=yl,zo=void 0,yl=void 0,Je(window,"keydown",Nn))}function vl(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function Uo(o){var l=o.getBoundingClientRect();return{x:l.width/o.offsetWidth||1,y:l.height/o.offsetHeight||1,boundingClientRect:l}}var Rc={__proto__:null,TRANSFORM:Bs,TRANSITION:$s,TRANSITION_END:hl,get:dl,getStyle:Vi,create:Fe,remove:et,empty:Hs,toFront:si,toBack:Fi,hasClass:fl,addClass:be,removeClass:at,setClass:pl,getClass:Zn,setOpacity:gt,testProp:oi,setTransform:Ar,setPosition:Ie,getPosition:Qn,get disableTextSelection(){return hr},get enableTextSelection(){return dr},disableImageDrag:gl,enableImageDrag:_l,preventOutline:ai,restoreOutline:Nn,getSizedParentNode:vl,getScale:Uo};function we(o,l,d,g){if(l&&typeof l=="object")for(var w in l)wl(o,w,l[w],d);else{l=T(l);for(var P=0,U=l.length;P<U;P++)wl(o,l[P],d,g)}return this}var Yn="_leaflet_events";function Je(o,l,d,g){if(arguments.length===1)Nc(o),delete o[Yn];else if(l&&typeof l=="object")for(var w in l)El(o,w,l[w],d);else if(l=T(l),arguments.length===2)Nc(o,function(W){return B(l,W)!==-1});else for(var P=0,U=l.length;P<U;P++)El(o,l[P],d,g);return this}function Nc(o,l){for(var d in o[Yn]){var g=d.split(/\d/)[0];(!l||l(g))&&El(o,g,null,null,d)}}var Jn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function wl(o,l,d,g){var w=l+c(d)+(g?"_"+c(g):"");if(o[Yn]&&o[Yn][w])return this;var P=function(W){return d.call(g||o,W||window.event)},U=P;!ge.touchNative&&ge.pointer&&l.indexOf("touch")===0?P=Cc(o,l,P):ge.touch&&l==="dblclick"?P=Us(o,P):"addEventListener"in o?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?o.addEventListener(Jn[l]||l,P,ge.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(P=function(W){W=W||window.event,Tl(o,W)&&U(W)},o.addEventListener(Jn[l],P,!1)):o.addEventListener(l,U,!1):o.attachEvent("on"+l,P),o[Yn]=o[Yn]||{},o[Yn][w]=P}function El(o,l,d,g,w){w=w||l+c(d)+(g?"_"+c(g):"");var P=o[Yn]&&o[Yn][w];if(!P)return this;!ge.touchNative&&ge.pointer&&l.indexOf("touch")===0?kc(o,l,P):ge.touch&&l==="dblclick"?ii(o,P):"removeEventListener"in o?o.removeEventListener(Jn[l]||l,P,!1):o.detachEvent("on"+l,P),o[Yn][w]=null}function Xn(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function zi(o){return wl(o,"wheel",Xn),this}function Ui(o){return we(o,"mousedown touchstart dblclick contextmenu",Xn),o._leaflet_disable_click=!0,this}function ct(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function Ln(o){return ct(o),Xn(o),this}function xl(o){if(o.composedPath)return o.composedPath();for(var l=[],d=o.target;d;)l.push(d),d=d.parentNode;return l}function Bo(o,l){if(!l)return new J(o.clientX,o.clientY);var d=Uo(l),g=d.boundingClientRect;return new J((o.clientX-g.left)/d.x-l.clientLeft,(o.clientY-g.top)/d.y-l.clientTop)}var lt=ge.linux&&ge.chrome?window.devicePixelRatio:ge.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Lc(o){return ge.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/lt:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function Tl(o,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==o;)d=d.parentNode}catch{return!1}return d!==o}var Oc={__proto__:null,on:we,off:Je,stopPropagation:Xn,disableScrollPropagation:zi,disableClickPropagation:Ui,preventDefault:ct,stop:Ln,getPropagationPath:xl,getMousePosition:Bo,getWheelDelta:Lc,isExternalTarget:Tl,addListener:we,removeListener:Je},Sl=ze.extend({run:function(o,l,d,g){this.stop(),this._el=o,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(g||.5,.2),this._startPos=Qn(o),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=V(this._animate,this),this._step()},_step:function(o){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),o):(this._runFrame(1),this._complete())},_runFrame:function(o,l){var d=this._startPos.add(this._offset.multiplyBy(o));l&&d._round(),Ie(this._el,d),this.fire("step")},_complete:function(){z(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),Me=ze.extend({options:{crs:Xr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,l){l=I(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(X(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=$s&&ge.any3d&&!ge.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),we(this._proxy,hl,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),o=this._limitCenter(X(o),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=i({animate:d.animate},d.zoom),d.pan=i({animate:d.animate,duration:d.duration},d.pan));var g=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,l,d.zoom):this._tryAnimatedPan(o,d.pan);if(g)return clearTimeout(this._sizeTimer),this}return this._resetView(o,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(o,l){return this._loaded?this.setView(this.getCenter(),o,{zoom:l}):(this._zoom=o,this)},zoomIn:function(o,l){return o=o||(ge.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,l)},zoomOut:function(o,l){return o=o||(ge.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,l)},setZoomAround:function(o,l,d){var g=this.getZoomScale(l),w=this.getSize().divideBy(2),P=o instanceof J?o:this.latLngToContainerPoint(o),U=P.subtract(w).multiplyBy(1-1/g),W=this.containerPointToLatLng(w.add(U));return this.setView(W,l,{zoom:d})},_getBoundsCenterZoom:function(o,l){l=l||{},o=o.getBounds?o.getBounds():Ce(o);var d=N(l.paddingTopLeft||l.padding||[0,0]),g=N(l.paddingBottomRight||l.padding||[0,0]),w=this.getBoundsZoom(o,!1,d.add(g));if(w=typeof l.maxZoom=="number"?Math.min(l.maxZoom,w):w,w===1/0)return{center:o.getCenter(),zoom:w};var P=g.subtract(d).divideBy(2),U=this.project(o.getSouthWest(),w),W=this.project(o.getNorthEast(),w),K=this.unproject(U.add(W).divideBy(2).add(P),w);return{center:K,zoom:w}},fitBounds:function(o,l){if(o=Ce(o),!o.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(o,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,l){return this.setView(o,this._zoom,{pan:l})},panBy:function(o,l){if(o=N(o).round(),l=l||{},!o.x&&!o.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Sl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){be(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,l,d){if(d=d||{},d.animate===!1||!ge.any3d)return this.setView(o,l,d);this._stop();var g=this.project(this.getCenter()),w=this.project(o),P=this.getSize(),U=this._zoom;o=X(o),l=l===void 0?U:l;var W=Math.max(P.x,P.y),K=W*this.getZoomScale(U,l),te=w.distanceTo(g)||1,le=1.42,Ee=le*le;function De(St){var Qc=St?-1:1,YC=St?K:W,JC=K*K-W*W+Qc*Ee*Ee*te*te,XC=2*YC*Ee*te,Yf=JC/XC,vv=Math.sqrt(Yf*Yf+1)-Yf,ek=vv<1e-9?-18:Math.log(vv);return ek}function dn(St){return(Math.exp(St)-Math.exp(-St))/2}function Mt(St){return(Math.exp(St)+Math.exp(-St))/2}function tr(St){return dn(St)/Mt(St)}var vn=De(0);function ta(St){return W*(Mt(vn)/Mt(vn+le*St))}function GC(St){return W*(Mt(vn)*tr(vn+le*St)-dn(vn))/Ee}function KC(St){return 1-Math.pow(1-St,1.5)}var ZC=Date.now(),_v=(De(1)-vn)/le,QC=d.duration?1e3*d.duration:1e3*_v*.8;function yv(){var St=(Date.now()-ZC)/QC,Qc=KC(St)*_v;St<=1?(this._flyToFrame=V(yv,this),this._move(this.unproject(g.add(w.subtract(g).multiplyBy(GC(Qc)/te)),U),this.getScaleZoom(W/ta(Qc),U),{flyTo:!0})):this._move(o,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),yv.call(this),this},flyToBounds:function(o,l){var d=this._getBoundsCenterZoom(o,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(o){return o=Ce(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var l=this.options.minZoom;return this.options.minZoom=o,this._loaded&&l!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var l=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&l!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,l){this._enforcingBounds=!0;var d=this.getCenter(),g=this._limitCenter(d,this._zoom,Ce(o));return d.equals(g)||this.panTo(g,l),this._enforcingBounds=!1,this},panInside:function(o,l){l=l||{};var d=N(l.paddingTopLeft||l.padding||[0,0]),g=N(l.paddingBottomRight||l.padding||[0,0]),w=this.project(this.getCenter()),P=this.project(o),U=this.getPixelBounds(),W=_e([U.min.add(d),U.max.subtract(g)]),K=W.getSize();if(!W.contains(P)){this._enforcingBounds=!0;var te=P.subtract(W.getCenter()),le=W.extend(P).getSize().subtract(K);w.x+=te.x<0?-le.x:le.x,w.y+=te.y<0?-le.y:le.y,this.panTo(this.unproject(w),l),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=i({animate:!1,pan:!0},o===!0?{animate:!0}:o);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),g=l.divideBy(2).round(),w=d.divideBy(2).round(),P=g.subtract(w);return!P.x&&!P.y?this:(o.animate&&o.pan?this.panBy(P):(o.pan&&this._rawPanBy(P),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=i({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),d=a(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,o):navigator.geolocation.getCurrentPosition(l,d,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var l=o.code,d=o.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var l=o.coords.latitude,d=o.coords.longitude,g=new xe(l,d),w=g.toBounds(o.coords.accuracy*2),P=this._locateOptions;if(P.setView){var U=this.getBoundsZoom(w);this.setView(g,P.maxZoom?Math.min(U,P.maxZoom):U)}var W={latlng:g,bounds:w,timestamp:o.timestamp};for(var K in o.coords)typeof o.coords[K]=="number"&&(W[K]=o.coords[K]);this.fire("locationfound",W)}},addHandler:function(o,l){if(!l)return this;var d=this[o]=new l(this);return this._handlers.push(d),this.options[o]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),et(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(z(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)et(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,l){var d="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),g=Fe("div",d,l||this._mapPane);return o&&(this._panes[o]=g),g},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),l=this.unproject(o.getBottomLeft()),d=this.unproject(o.getTopRight());return new j(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,l,d){o=Ce(o),d=N(d||[0,0]);var g=this.getZoom()||0,w=this.getMinZoom(),P=this.getMaxZoom(),U=o.getNorthWest(),W=o.getSouthEast(),K=this.getSize().subtract(d),te=_e(this.project(W,g),this.project(U,g)).getSize(),le=ge.any3d?this.options.zoomSnap:1,Ee=K.x/te.x,De=K.y/te.y,dn=l?Math.max(Ee,De):Math.min(Ee,De);return g=this.getScaleZoom(dn,g),le&&(g=Math.round(g/(le/100))*(le/100),g=l?Math.ceil(g/le)*le:Math.floor(g/le)*le),Math.max(w,Math.min(P,g))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new J(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,l){var d=this._getTopLeftPoint(o,l);return new fe(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(o)/d.scale(l)},getScaleZoom:function(o,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var g=d.zoom(o*d.scale(l));return isNaN(g)?1/0:g},project:function(o,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(X(o),l)},unproject:function(o,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(N(o),l)},layerPointToLatLng:function(o){var l=N(o).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(o){var l=this.project(X(o))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(X(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(Ce(o))},distance:function(o,l){return this.options.crs.distance(X(o),X(l))},containerPointToLayerPoint:function(o){return N(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return N(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var l=this.containerPointToLayerPoint(N(o));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(X(o)))},mouseEventToContainerPoint:function(o){return Bo(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var l=this._container=dl(o);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");we(l,"scroll",this._onScroll,this),this._containerId=c(l)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&ge.any3d,be(o,"leaflet-container"+(ge.touch?" leaflet-touch":"")+(ge.retina?" leaflet-retina":"")+(ge.ielt9?" leaflet-oldie":"")+(ge.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Vi(o,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ie(this._mapPane,new J(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(be(o.markerPane,"leaflet-zoom-hide"),be(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,l,d){Ie(this._mapPane,new J(0,0));var g=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var w=this._zoom!==l;this._moveStart(w,d)._move(o,l)._moveEnd(w),this.fire("viewreset"),g&&this.fire("load")},_moveStart:function(o,l){return o&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(o,l,d,g){l===void 0&&(l=this._zoom);var w=this._zoom!==l;return this._zoom=l,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),g?d&&d.pinch&&this.fire("zoom",d):((w||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return z(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){Ie(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[c(this._container)]=this;var l=o?Je:we;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),ge.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){z(this._resizeRequest),this._resizeRequest=V(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,l){for(var d=[],g,w=l==="mouseout"||l==="mouseover",P=o.target||o.srcElement,U=!1;P;){if(g=this._targets[c(P)],g&&(l==="click"||l==="preclick")&&this._draggableMoved(g)){U=!0;break}if(g&&g.listens(l,!0)&&(w&&!Tl(P,o)||(d.push(g),w))||P===this._container)break;P=P.parentNode}return!d.length&&!U&&!w&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var l=o.target||o.srcElement;if(!(!this._loaded||l._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(l))){var d=o.type;d==="mousedown"&&ai(l),this._fireDOMEvent(o,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,l,d){if(o.type==="click"){var g=i({},o);g.type="preclick",this._fireDOMEvent(g,g.type,d)}var w=this._findEventTargets(o,l);if(d){for(var P=[],U=0;U<d.length;U++)d[U].listens(l,!0)&&P.push(d[U]);w=P.concat(w)}if(w.length){l==="contextmenu"&&ct(o);var W=w[0],K={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var te=W.getLatLng&&(!W._radius||W._radius<=10);K.containerPoint=te?this.latLngToContainerPoint(W.getLatLng()):this.mouseEventToContainerPoint(o),K.layerPoint=this.containerPointToLayerPoint(K.containerPoint),K.latlng=te?W.getLatLng():this.layerPointToLatLng(K.layerPoint)}for(U=0;U<w.length;U++)if(w[U].fire(l,K,!0),K.originalEvent._stopped||w[U].options.bubblingMouseEvents===!1&&B(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,l=this._handlers.length;o<l;o++)this._handlers[o].disable()},whenReady:function(o,l){return this._loaded?o.call(l||this,{target:this}):this.on("load",o,l),this},_getMapPanePos:function(){return Qn(this._mapPane)||new J(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,l){var d=o&&l!==void 0?this._getNewPixelOrigin(o,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,l){var d=this.getSize()._divideBy(2);return this.project(o,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,l,d){var g=this._getNewPixelOrigin(d,l);return this.project(o,l)._subtract(g)},_latLngBoundsToNewLayerBounds:function(o,l,d){var g=this._getNewPixelOrigin(d,l);return _e([this.project(o.getSouthWest(),l)._subtract(g),this.project(o.getNorthWest(),l)._subtract(g),this.project(o.getSouthEast(),l)._subtract(g),this.project(o.getNorthEast(),l)._subtract(g)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,l,d){if(!d)return o;var g=this.project(o,l),w=this.getSize().divideBy(2),P=new fe(g.subtract(w),g.add(w)),U=this._getBoundsOffset(P,d,l);return Math.abs(U.x)<=1&&Math.abs(U.y)<=1?o:this.unproject(g.add(U),l)},_limitOffset:function(o,l){if(!l)return o;var d=this.getPixelBounds(),g=new fe(d.min.add(o),d.max.add(o));return o.add(this._getBoundsOffset(g,l))},_getBoundsOffset:function(o,l,d){var g=_e(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),w=g.min.subtract(o.min),P=g.max.subtract(o.max),U=this._rebound(w.x,-P.x),W=this._rebound(w.y,-P.y);return new J(U,W)},_rebound:function(o,l){return o+l>0?Math.round(o-l)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(l))},_limitZoom:function(o){var l=this.getMinZoom(),d=this.getMaxZoom(),g=ge.any3d?this.options.zoomSnap:1;return g&&(o=Math.round(o/g)*g),Math.max(l,Math.min(d,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){at(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,l){var d=this._getCenterOffset(o)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var o=this._proxy=Fe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(l){var d=Bs,g=this._proxy.style[d];Ar(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),g===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){et(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),l=this.getZoom();Ar(this._proxy,this.project(o,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var g=this.getZoomScale(l),w=this._getCenterOffset(o)._divideBy(1-1/g);return d.animate!==!0&&!this.getSize().contains(w)?!1:(V(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(o,l,!0)},this),!0)},_animateZoom:function(o,l,d,g){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=l,be(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:l,noUpdate:g}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&at(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function $o(o,l){return new Me(o,l)}var yn=ae.extend({options:{position:"topright"},initialize:function(o){I(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var l=this._map;return l&&l.removeControl(this),this.options.position=o,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var l=this._container=this.onAdd(o),d=this.getPosition(),g=o._controlCorners[d];return be(l,"leaflet-control"),d.indexOf("bottom")!==-1?g.insertBefore(l,g.firstChild):g.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(et(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),hn=function(o){return new yn(o)};Me.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},l="leaflet-",d=this._controlContainer=Fe("div",l+"control-container",this._container);function g(w,P){var U=l+w+" "+l+P;o[w+P]=Fe("div",U,d)}g("top","left"),g("top","right"),g("bottom","left"),g("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)et(this._controlCorners[o]);et(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Il=yn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,l,d,g){return d<g?-1:g<d?1:0}},initialize:function(o,l,d){I(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var g in o)this._addLayer(o[g],g);for(g in l)this._addLayer(l[g],g,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return yn.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,l){return this._addLayer(o,l),this._map?this._update():this},addOverlay:function(o,l){return this._addLayer(o,l,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var l=this._getLayer(c(o));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){be(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(be(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):at(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return at(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",l=this._container=Fe("div",o),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Ui(l),zi(l);var g=this._section=Fe("section",o+"-list");d&&(this._map.on("click",this.collapse,this),we(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var w=this._layersLink=Fe("a",o+"-toggle",l);w.href="#",w.title="Layers",w.setAttribute("role","button"),we(w,{keydown:function(P){P.keyCode===13&&this._expandSafely()},click:function(P){ct(P),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Fe("div",o+"-base",g),this._separator=Fe("div",o+"-separator",g),this._overlaysList=Fe("div",o+"-overlays",g),l.appendChild(g)},_getLayer:function(o){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&c(this._layers[l].layer)===o)return this._layers[l]},_addLayer:function(o,l,d){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(a(function(g,w){return this.options.sortFunction(g.layer,w.layer,g.name,w.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Hs(this._baseLayersList),Hs(this._overlaysList),this._layerControlInputs=[];var o,l,d,g,w=0;for(d=0;d<this._layers.length;d++)g=this._layers[d],this._addItem(g),l=l||g.overlay,o=o||!g.overlay,w+=g.overlay?0:1;return this.options.hideSingleBase&&(o=o&&w>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=l&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var l=this._getLayer(c(o.target)),d=l.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(o,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(l?' checked="checked"':"")+"/>",g=document.createElement("div");return g.innerHTML=d,g.firstChild},_addItem:function(o){var l=document.createElement("label"),d=this._map.hasLayer(o.layer),g;o.overlay?(g=document.createElement("input"),g.type="checkbox",g.className="leaflet-control-layers-selector",g.defaultChecked=d):g=this._createRadioElement("leaflet-base-layers_"+c(this),d),this._layerControlInputs.push(g),g.layerId=c(o.layer),we(g,"click",this._onInputClick,this);var w=document.createElement("span");w.innerHTML=" "+o.name;var P=document.createElement("span");l.appendChild(P),P.appendChild(g),P.appendChild(w);var U=o.overlay?this._overlaysList:this._baseLayersList;return U.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,l,d,g=[],w=[];this._handlingClick=!0;for(var P=o.length-1;P>=0;P--)l=o[P],d=this._getLayer(l.layerId).layer,l.checked?g.push(d):l.checked||w.push(d);for(P=0;P<w.length;P++)this._map.hasLayer(w[P])&&this._map.removeLayer(w[P]);for(P=0;P<g.length;P++)this._map.hasLayer(g[P])||this._map.addLayer(g[P]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,l,d,g=this._map.getZoom(),w=o.length-1;w>=0;w--)l=o[w],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&g<d.options.minZoom||d.options.maxZoom!==void 0&&g>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,we(o,"click",ct),this.expand();var l=this;setTimeout(function(){Je(o,"click",ct),l._preventClick=!1})}}),qf=function(o,l,d){return new Il(o,l,d)},li=yn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var l="leaflet-control-zoom",d=Fe("div",l+" leaflet-bar"),g=this.options;return this._zoomInButton=this._createButton(g.zoomInText,g.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(g.zoomOutText,g.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,l,d,g,w){var P=Fe("a",d,g);return P.innerHTML=o,P.href="#",P.title=l,P.setAttribute("role","button"),P.setAttribute("aria-label",l),Ui(P),we(P,"click",Ln),we(P,"click",w,this),we(P,"click",this._refocusOnMap,this),P},_updateDisabled:function(){var o=this._map,l="leaflet-disabled";at(this._zoomInButton,l),at(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(be(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(be(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Me.mergeOptions({zoomControl:!0}),Me.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new li,this.addControl(this.zoomControl))});var Dc=function(o){return new li(o)},Ho=yn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var l="leaflet-control-scale",d=Fe("div",l),g=this.options;return this._addScales(g,l+"-line",d),o.on(g.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),d},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,l,d){o.metric&&(this._mScale=Fe("div",l,d)),o.imperial&&(this._iScale=Fe("div",l,d))},_update:function(){var o=this._map,l=o.getSize().y/2,d=o.distance(o.containerPointToLatLng([0,l]),o.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var l=this._getRoundNum(o),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/o)},_updateImperial:function(o){var l=o*3.2808399,d,g,w;l>5280?(d=l/5280,g=this._getRoundNum(d),this._updateScale(this._iScale,g+" mi",g/d)):(w=this._getRoundNum(l),this._updateScale(this._iScale,w+" ft",w/l))},_updateScale:function(o,l,d){o.style.width=Math.round(this.options.maxWidth*d)+"px",o.innerHTML=l},_getRoundNum:function(o){var l=Math.pow(10,(Math.floor(o)+"").length-1),d=o/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),qo=function(o){return new Ho(o)},Mc='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Bi=yn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ge.inlineSvg?Mc+" ":"")+"Leaflet</a>"},initialize:function(o){I(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=Fe("div","leaflet-control-attribution"),Ui(this._container);for(var l in o._layers)o._layers[l].getAttribution&&this.addAttribution(o._layers[l].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var l in this._attributions)this._attributions[l]&&o.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),o.length&&d.push(o.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});Me.mergeOptions({attributionControl:!0}),Me.addInitHook(function(){this.options.attributionControl&&new Bi().addTo(this)});var Wf=function(o){return new Bi(o)};yn.Layers=Il,yn.Zoom=li,yn.Scale=Ho,yn.Attribution=Bi,hn.layers=qf,hn.zoom=Dc,hn.scale=qo,hn.attribution=Wf;var On=ae.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});On.addTo=function(o,l){return o.addHandler(l,this),this};var qs={Events:Oe},Pl=ge.touch?"touchstart mousedown":"mousedown",fr=ze.extend({options:{clickTolerance:3},initialize:function(o,l,d,g){I(this,g),this._element=o,this._dragStartTarget=l||o,this._preventOutline=d},enable:function(){this._enabled||(we(this._dragStartTarget,Pl,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(fr._dragging===this&&this.finishDrag(!0),Je(this._dragStartTarget,Pl,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!fl(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){fr._dragging===this&&this.finishDrag();return}if(!(fr._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(fr._dragging=this,this._preventOutline&&ai(this._element),gl(),hr(),!this._moving)){this.fire("down");var l=o.touches?o.touches[0]:o,d=vl(this._element);this._startPoint=new J(l.clientX,l.clientY),this._startPos=Qn(this._element),this._parentScale=Uo(d);var g=o.type==="mousedown";we(document,g?"mousemove":"touchmove",this._onMove,this),we(document,g?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var l=o.touches&&o.touches.length===1?o.touches[0]:o,d=new J(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,ct(o),this._moved||(this.fire("dragstart"),this._moved=!0,be(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),be(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),Ie(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){at(document.body,"leaflet-dragging"),this._lastTarget&&(at(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Je(document,"mousemove touchmove",this._onMove,this),Je(document,"mouseup touchend touchcancel",this._onUp,this),_l(),dr();var l=this._moved&&this._moving;this._moving=!1,fr._dragging=!1,l&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function Wo(o,l,d){var g,w=[1,4,2,8],P,U,W,K,te,le,Ee,De;for(P=0,le=o.length;P<le;P++)o[P]._code=br(o[P],l);for(W=0;W<4;W++){for(Ee=w[W],g=[],P=0,le=o.length,U=le-1;P<le;U=P++)K=o[P],te=o[U],K._code&Ee?te._code&Ee||(De=Dt(te,K,Ee,l,d),De._code=br(De,l),g.push(De)):(te._code&Ee&&(De=Dt(te,K,Ee,l,d),De._code=br(De,l),g.push(De)),g.push(K));o=g}return o}function Go(o,l){var d,g,w,P,U,W,K,te,le;if(!o||o.length===0)throw new Error("latlngs not passed");h(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var Ee=X([0,0]),De=Ce(o),dn=De.getNorthWest().distanceTo(De.getSouthWest())*De.getNorthEast().distanceTo(De.getNorthWest());dn<1700&&(Ee=Ko(o));var Mt=o.length,tr=[];for(d=0;d<Mt;d++){var vn=X(o[d]);tr.push(l.project(X([vn.lat-Ee.lat,vn.lng-Ee.lng])))}for(W=K=te=0,d=0,g=Mt-1;d<Mt;g=d++)w=tr[d],P=tr[g],U=w.y*P.x-P.y*w.x,K+=(w.x+P.x)*U,te+=(w.y+P.y)*U,W+=U*3;W===0?le=tr[0]:le=[K/W,te/W];var ta=l.unproject(N(le));return X([ta.lat+Ee.lat,ta.lng+Ee.lng])}function Ko(o){for(var l=0,d=0,g=0,w=0;w<o.length;w++){var P=X(o[w]);l+=P.lat,d+=P.lng,g++}return X([l/g,d/g])}var Zo={__proto__:null,clipPolygon:Wo,polygonCenter:Go,centroid:Ko};function Cl(o,l){if(!l||!o.length)return o.slice();var d=l*l;return o=Fc(o,d),o=Vc(o,d),o}function kl(o,l,d){return Math.sqrt(er(o,l,d,!0))}function ui(o,l,d){return er(o,l,d)}function Vc(o,l){var d=o.length,g=typeof Uint8Array<"u"?Uint8Array:Array,w=new g(d);w[0]=w[d-1]=1,Qo(o,w,l,0,d-1);var P,U=[];for(P=0;P<d;P++)w[P]&&U.push(o[P]);return U}function Qo(o,l,d,g,w){var P=0,U,W,K;for(W=g+1;W<=w-1;W++)K=er(o[W],o[g],o[w],!0),K>P&&(U=W,P=K);P>d&&(l[U]=1,Qo(o,l,d,g,U),Qo(o,l,d,U,w))}function Fc(o,l){for(var d=[o[0]],g=1,w=0,P=o.length;g<P;g++)jc(o[g],o[w])>l&&(d.push(o[g]),w=g);return w<P-1&&d.push(o[P-1]),d}var Al;function Ws(o,l,d,g,w){var P=g?Al:br(o,d),U=br(l,d),W,K,te;for(Al=U;;){if(!(P|U))return[o,l];if(P&U)return!1;W=P||U,K=Dt(o,l,W,d,w),te=br(K,d),W===P?(o=K,P=te):(l=K,U=te)}}function Dt(o,l,d,g,w){var P=l.x-o.x,U=l.y-o.y,W=g.min,K=g.max,te,le;return d&8?(te=o.x+P*(K.y-o.y)/U,le=K.y):d&4?(te=o.x+P*(W.y-o.y)/U,le=W.y):d&2?(te=K.x,le=o.y+U*(K.x-o.x)/P):d&1&&(te=W.x,le=o.y+U*(W.x-o.x)/P),new J(te,le,w)}function br(o,l){var d=0;return o.x<l.min.x?d|=1:o.x>l.max.x&&(d|=2),o.y<l.min.y?d|=4:o.y>l.max.y&&(d|=8),d}function jc(o,l){var d=l.x-o.x,g=l.y-o.y;return d*d+g*g}function er(o,l,d,g){var w=l.x,P=l.y,U=d.x-w,W=d.y-P,K=U*U+W*W,te;return K>0&&(te=((o.x-w)*U+(o.y-P)*W)/K,te>1?(w=d.x,P=d.y):te>0&&(w+=U*te,P+=W*te)),U=o.x-w,W=o.y-P,g?U*U+W*W:new J(w,P)}function h(o){return!C(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function _(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),h(o)}function E(o,l){var d,g,w,P,U,W,K,te;if(!o||o.length===0)throw new Error("latlngs not passed");h(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var le=X([0,0]),Ee=Ce(o),De=Ee.getNorthWest().distanceTo(Ee.getSouthWest())*Ee.getNorthEast().distanceTo(Ee.getNorthWest());De<1700&&(le=Ko(o));var dn=o.length,Mt=[];for(d=0;d<dn;d++){var tr=X(o[d]);Mt.push(l.project(X([tr.lat-le.lat,tr.lng-le.lng])))}for(d=0,g=0;d<dn-1;d++)g+=Mt[d].distanceTo(Mt[d+1])/2;if(g===0)te=Mt[0];else for(d=0,P=0;d<dn-1;d++)if(U=Mt[d],W=Mt[d+1],w=U.distanceTo(W),P+=w,P>g){K=(P-g)/w,te=[W.x-K*(W.x-U.x),W.y-K*(W.y-U.y)];break}var vn=l.unproject(N(te));return X([vn.lat+le.lat,vn.lng+le.lng])}var b={__proto__:null,simplify:Cl,pointToSegmentDistance:kl,closestPointOnSegment:ui,clipSegment:Ws,_getEdgeIntersection:Dt,_getBitCode:br,_sqClosestPointOnSegment:er,isFlat:h,_flat:_,polylineCenter:E},q={project:function(o){return new J(o.lng,o.lat)},unproject:function(o){return new xe(o.y,o.x)},bounds:new fe([-180,-90],[180,90])},Z={R:6378137,R_MINOR:6356752314245179e-9,bounds:new fe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var l=Math.PI/180,d=this.R,g=o.lat*l,w=this.R_MINOR/d,P=Math.sqrt(1-w*w),U=P*Math.sin(g),W=Math.tan(Math.PI/4-g/2)/Math.pow((1-U)/(1+U),P/2);return g=-d*Math.log(Math.max(W,1e-10)),new J(o.lng*l*d,g)},unproject:function(o){for(var l=180/Math.PI,d=this.R,g=this.R_MINOR/d,w=Math.sqrt(1-g*g),P=Math.exp(-o.y/d),U=Math.PI/2-2*Math.atan(P),W=0,K=.1,te;W<15&&Math.abs(K)>1e-7;W++)te=w*Math.sin(U),te=Math.pow((1-te)/(1+te),w/2),K=Math.PI/2-2*Math.atan(P*te)-U,U+=K;return new xe(U*l,o.x*l/d)}},oe={__proto__:null,LonLat:q,Mercator:Z,SphericalMercator:Rt},Ze=i({},Ue,{code:"EPSG:3395",projection:Z,transformation:function(){var o=.5/(Math.PI*Z.R);return Rn(o,.5,-o,.5)}()}),Tt=i({},Ue,{code:"EPSG:4326",projection:q,transformation:Rn(1/180,1,-1/180,.5)}),$e=i({},de,{projection:q,transformation:Rn(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,l){var d=l.lng-o.lng,g=l.lat-o.lat;return Math.sqrt(d*d+g*g)},infinite:!0});de.Earth=Ue,de.EPSG3395=Ze,de.EPSG3857=Xr,de.EPSG900913=Os,de.EPSG4326=Tt,de.Simple=$e;var Xe=ze.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[c(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[c(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var l=o.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Me.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var l=c(o);return this._layers[l]?this:(this._layers[l]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var l=c(o);return this._layers[l]?(this._loaded&&o.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return c(o)in this._layers},eachLayer:function(o,l){for(var d in this._layers)o.call(l,this._layers[d]);return this},_addLayers:function(o){o=o?C(o)?o:[o]:[];for(var l=0,d=o.length;l<d;l++)this.addLayer(o[l])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[c(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var l=c(o);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,l=-1/0,d=this._getZoomSpan();for(var g in this._zoomBoundLayers){var w=this._zoomBoundLayers[g].options;o=w.minZoom===void 0?o:Math.min(o,w.minZoom),l=w.maxZoom===void 0?l:Math.max(l,w.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=o===1/0?void 0:o,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ht=Xe.extend({initialize:function(o,l){I(this,l),this._layers={};var d,g;if(o)for(d=0,g=o.length;d<g;d++)this.addLayer(o[d])},addLayer:function(o){var l=this.getLayerId(o);return this._layers[l]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var l=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(o){var l=typeof o=="number"?o:this.getLayerId(o);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var l=Array.prototype.slice.call(arguments,1),d,g;for(d in this._layers)g=this._layers[d],g[o]&&g[o].apply(g,l);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,l){for(var d in this._layers)o.call(l,this._layers[d]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return c(o)}}),$i=function(o,l){return new ht(o,l)},yt=ht.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),ht.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),ht.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new j;for(var l in this._layers){var d=this._layers[l];o.extend(d.getBounds?d.getBounds():d.getLatLng())}return o}}),Yo=function(o,l){return new yt(o,l)},Rr=ae.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){I(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,l){var d=this._getIconUrl(o);if(!d){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var g=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(g,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),g},_setIconStyles:function(o,l){var d=this.options,g=d[l+"Size"];typeof g=="number"&&(g=[g,g]);var w=N(g),P=N(l==="shadow"&&d.shadowAnchor||d.iconAnchor||w&&w.divideBy(2,!0));o.className="leaflet-marker-"+l+" "+(d.className||""),P&&(o.style.marginLeft=-P.x+"px",o.style.marginTop=-P.y+"px"),w&&(o.style.width=w.x+"px",o.style.height=w.y+"px")},_createImg:function(o,l){return l=l||document.createElement("img"),l.src=o,l},_getIconUrl:function(o){return ge.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function kC(o){return new Rr(o)}var bl=Rr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof bl.imagePath!="string"&&(bl.imagePath=this._detectIconPath()),(this.options.imagePath||bl.imagePath)+Rr.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var l=function(d,g,w){var P=g.exec(d);return P&&P[w]};return o=l(o,/^url\((['"])?(.+)\1\)$/,2),o&&l(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=Fe("div","leaflet-default-icon-path",document.body),l=Vi(o,"background-image")||Vi(o,"backgroundImage");if(document.body.removeChild(o),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),Jy=On.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new fr(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),be(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&at(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var l=this._marker,d=l._map,g=this._marker.options.autoPanSpeed,w=this._marker.options.autoPanPadding,P=Qn(l._icon),U=d.getPixelBounds(),W=d.getPixelOrigin(),K=_e(U.min._subtract(W).add(w),U.max._subtract(W).subtract(w));if(!K.contains(P)){var te=N((Math.max(K.max.x,P.x)-K.max.x)/(U.max.x-K.max.x)-(Math.min(K.min.x,P.x)-K.min.x)/(U.min.x-K.min.x),(Math.max(K.max.y,P.y)-K.max.y)/(U.max.y-K.max.y)-(Math.min(K.min.y,P.y)-K.min.y)/(U.min.y-K.min.y)).multiplyBy(g);d.panBy(te,{animate:!1}),this._draggable._newPos._add(te),this._draggable._startPos._add(te),Ie(l._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=V(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(z(this._panRequest),this._panRequest=V(this._adjustPan.bind(this,o)))},_onDrag:function(o){var l=this._marker,d=l._shadow,g=Qn(l._icon),w=l._map.layerPointToLatLng(g);d&&Ie(d,g),l._latlng=w,o.latlng=w,o.oldLatLng=this._oldLatLng,l.fire("move",o).fire("drag",o)},_onDragEnd:function(o){z(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),zc=Xe.extend({options:{icon:new bl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,l){I(this,l),this._latlng=X(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var l=this._latlng;return this._latlng=X(o),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=o.icon.createIcon(this._icon),g=!1;d!==this._icon&&(this._icon&&this._removeIcon(),g=!0,o.title&&(d.title=o.title),d.tagName==="IMG"&&(d.alt=o.alt||"")),be(d,l),o.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&we(d,"focus",this._panOnFocus,this);var w=o.icon.createShadow(this._shadow),P=!1;w!==this._shadow&&(this._removeShadow(),P=!0),w&&(be(w,l),w.alt=""),this._shadow=w,o.opacity<1&&this._updateOpacity(),g&&this.getPane().appendChild(this._icon),this._initInteraction(),w&&P&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Je(this._icon,"focus",this._panOnFocus,this),et(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&et(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&Ie(this._icon,o),this._shadow&&Ie(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var l=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(be(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Jy)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Jy(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&gt(this._icon,o),this._shadow&&gt(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var l=this.options.icon.options,d=l.iconSize?N(l.iconSize):N(0,0),g=l.iconAnchor?N(l.iconAnchor):N(0,0);o.panInside(this._latlng,{paddingTopLeft:g,paddingBottomRight:d.subtract(g)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function AC(o,l){return new zc(o,l)}var Hi=Xe.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return I(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Uc=Hi.extend({options:{fill:!0,radius:10},initialize:function(o,l){I(this,l),this._latlng=X(o),this._radius=this.options.radius},setLatLng:function(o){var l=this._latlng;return this._latlng=X(o),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var l=o&&o.radius||this._radius;return Hi.prototype.setStyle.call(this,o),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,l=this._radiusY||o,d=this._clickTolerance(),g=[o+d,l+d];this._pxBounds=new fe(this._point.subtract(g),this._point.add(g))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function bC(o,l){return new Uc(o,l)}var Gf=Uc.extend({initialize:function(o,l,d){if(typeof l=="number"&&(l=i({},d,{radius:l})),I(this,l),this._latlng=X(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new j(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:Hi.prototype.setStyle,_project:function(){var o=this._latlng.lng,l=this._latlng.lat,d=this._map,g=d.options.crs;if(g.distance===Ue.distance){var w=Math.PI/180,P=this._mRadius/Ue.R/w,U=d.project([l+P,o]),W=d.project([l-P,o]),K=U.add(W).divideBy(2),te=d.unproject(K).lat,le=Math.acos((Math.cos(P*w)-Math.sin(l*w)*Math.sin(te*w))/(Math.cos(l*w)*Math.cos(te*w)))/w;(isNaN(le)||le===0)&&(le=P/Math.cos(Math.PI/180*l)),this._point=K.subtract(d.getPixelOrigin()),this._radius=isNaN(le)?0:K.x-d.project([te,o-le]).x,this._radiusY=K.y-U.y}else{var Ee=g.unproject(g.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(Ee).x}this._updateBounds()}});function RC(o,l,d){return new Gf(o,l,d)}var ci=Hi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,l){I(this,l),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var l=1/0,d=null,g=er,w,P,U=0,W=this._parts.length;U<W;U++)for(var K=this._parts[U],te=1,le=K.length;te<le;te++){w=K[te-1],P=K[te];var Ee=g(o,w,P,!0);Ee<l&&(l=Ee,d=g(o,w,P))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return E(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,l){return l=l||this._defaultShape(),o=X(o),l.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new j,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return h(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var l=[],d=h(o),g=0,w=o.length;g<w;g++)d?(l[g]=X(o[g]),this._bounds.extend(l[g])):l[g]=this._convertLatLngs(o[g]);return l},_project:function(){var o=new fe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),l=new J(o,o);this._rawPxBounds&&(this._pxBounds=new fe([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(o,l,d){var g=o[0]instanceof xe,w=o.length,P,U;if(g){for(U=[],P=0;P<w;P++)U[P]=this._map.latLngToLayerPoint(o[P]),d.extend(U[P]);l.push(U)}else for(P=0;P<w;P++)this._projectLatlngs(o[P],l,d)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,g,w,P,U,W,K;for(d=0,w=0,P=this._rings.length;d<P;d++)for(K=this._rings[d],g=0,U=K.length;g<U-1;g++)W=Ws(K[g],K[g+1],o,g,!0),W&&(l[w]=l[w]||[],l[w].push(W[0]),(W[1]!==K[g+1]||g===U-2)&&(l[w].push(W[1]),w++))}},_simplifyPoints:function(){for(var o=this._parts,l=this.options.smoothFactor,d=0,g=o.length;d<g;d++)o[d]=Cl(o[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,l){var d,g,w,P,U,W,K=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(d=0,P=this._parts.length;d<P;d++)for(W=this._parts[d],g=0,U=W.length,w=U-1;g<U;w=g++)if(!(!l&&g===0)&&kl(o,W[w],W[g])<=K)return!0;return!1}});function NC(o,l){return new ci(o,l)}ci._flat=_;var Jo=ci.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Go(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var l=ci.prototype._convertLatLngs.call(this,o),d=l.length;return d>=2&&l[0]instanceof xe&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(o){ci.prototype._setLatLngs.call(this,o),h(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return h(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,l=this.options.weight,d=new J(l,l);if(o=new fe(o.min.subtract(d),o.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var g=0,w=this._rings.length,P;g<w;g++)P=Wo(this._rings[g],o,!0),P.length&&this._parts.push(P)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var l=!1,d,g,w,P,U,W,K,te;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(P=0,K=this._parts.length;P<K;P++)for(d=this._parts[P],U=0,te=d.length,W=te-1;U<te;W=U++)g=d[U],w=d[W],g.y>o.y!=w.y>o.y&&o.x<(w.x-g.x)*(o.y-g.y)/(w.y-g.y)+g.x&&(l=!l);return l||ci.prototype._containsPoint.call(this,o,!0)}});function LC(o,l){return new Jo(o,l)}var hi=yt.extend({initialize:function(o,l){I(this,l),this._layers={},o&&this.addData(o)},addData:function(o){var l=C(o)?o:o.features,d,g,w;if(l){for(d=0,g=l.length;d<g;d++)w=l[d],(w.geometries||w.geometry||w.features||w.coordinates)&&this.addData(w);return this}var P=this.options;if(P.filter&&!P.filter(o))return this;var U=Bc(o,P);return U?(U.feature=qc(o),U.defaultOptions=U.options,this.resetStyle(U),P.onEachFeature&&P.onEachFeature(o,U),this.addLayer(U)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=i({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(l){this._setLayerStyle(l,o)},this)},_setLayerStyle:function(o,l){o.setStyle&&(typeof l=="function"&&(l=l(o.feature)),o.setStyle(l))}});function Bc(o,l){var d=o.type==="Feature"?o.geometry:o,g=d?d.coordinates:null,w=[],P=l&&l.pointToLayer,U=l&&l.coordsToLatLng||Kf,W,K,te,le;if(!g&&!d)return null;switch(d.type){case"Point":return W=U(g),Xy(P,o,W,l);case"MultiPoint":for(te=0,le=g.length;te<le;te++)W=U(g[te]),w.push(Xy(P,o,W,l));return new yt(w);case"LineString":case"MultiLineString":return K=$c(g,d.type==="LineString"?0:1,U),new ci(K,l);case"Polygon":case"MultiPolygon":return K=$c(g,d.type==="Polygon"?1:2,U),new Jo(K,l);case"GeometryCollection":for(te=0,le=d.geometries.length;te<le;te++){var Ee=Bc({geometry:d.geometries[te],type:"Feature",properties:o.properties},l);Ee&&w.push(Ee)}return new yt(w);case"FeatureCollection":for(te=0,le=d.features.length;te<le;te++){var De=Bc(d.features[te],l);De&&w.push(De)}return new yt(w);default:throw new Error("Invalid GeoJSON object.")}}function Xy(o,l,d,g){return o?o(l,d):new zc(d,g&&g.markersInheritOptions&&g)}function Kf(o){return new xe(o[1],o[0],o[2])}function $c(o,l,d){for(var g=[],w=0,P=o.length,U;w<P;w++)U=l?$c(o[w],l-1,d):(d||Kf)(o[w]),g.push(U);return g}function Zf(o,l){return o=X(o),o.alt!==void 0?[y(o.lng,l),y(o.lat,l),y(o.alt,l)]:[y(o.lng,l),y(o.lat,l)]}function Hc(o,l,d,g){for(var w=[],P=0,U=o.length;P<U;P++)w.push(l?Hc(o[P],h(o[P])?0:l-1,d,g):Zf(o[P],g));return!l&&d&&w.length>0&&w.push(w[0].slice()),w}function Xo(o,l){return o.feature?i({},o.feature,{geometry:l}):qc(l)}function qc(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var Qf={toGeoJSON:function(o){return Xo(this,{type:"Point",coordinates:Zf(this.getLatLng(),o)})}};zc.include(Qf),Gf.include(Qf),Uc.include(Qf),ci.include({toGeoJSON:function(o){var l=!h(this._latlngs),d=Hc(this._latlngs,l?1:0,!1,o);return Xo(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),Jo.include({toGeoJSON:function(o){var l=!h(this._latlngs),d=l&&!h(this._latlngs[0]),g=Hc(this._latlngs,d?2:l?1:0,!0,o);return l||(g=[g]),Xo(this,{type:(d?"Multi":"")+"Polygon",coordinates:g})}}),ht.include({toMultiPoint:function(o){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(o).geometry.coordinates)}),Xo(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(o){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(o);var d=l==="GeometryCollection",g=[];return this.eachLayer(function(w){if(w.toGeoJSON){var P=w.toGeoJSON(o);if(d)g.push(P.geometry);else{var U=qc(P);U.type==="FeatureCollection"?g.push.apply(g,U.features):g.push(U)}}}),d?Xo(this,{geometries:g,type:"GeometryCollection"}):{type:"FeatureCollection",features:g}}});function ev(o,l){return new hi(o,l)}var OC=ev,Wc=Xe.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,l,d){this._url=o,this._bounds=Ce(l),I(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(be(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){et(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&si(this._image),this},bringToBack:function(){return this._map&&Fi(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=Ce(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",l=this._image=o?this._url:Fe("img");if(be(l,"leaflet-image-layer"),this._zoomAnimated&&be(l,"leaflet-zoom-animated"),this.options.className&&be(l,this.options.className),l.onselectstart=m,l.onmousemove=m,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(o){var l=this._map.getZoomScale(o.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;Ar(this._image,d,l)},_reset:function(){var o=this._image,l=new fe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();Ie(o,l.min),o.style.width=d.x+"px",o.style.height=d.y+"px"},_updateOpacity:function(){gt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),DC=function(o,l,d){return new Wc(o,l,d)},tv=Wc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",l=this._image=o?this._url:Fe("video");if(be(l,"leaflet-image-layer"),this._zoomAnimated&&be(l,"leaflet-zoom-animated"),this.options.className&&be(l,this.options.className),l.onselectstart=m,l.onmousemove=m,l.onloadeddata=a(this.fire,this,"load"),o){for(var d=l.getElementsByTagName("source"),g=[],w=0;w<d.length;w++)g.push(d[w].src);this._url=d.length>0?g:[l.src];return}C(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var P=0;P<this._url.length;P++){var U=Fe("source");U.src=this._url[P],l.appendChild(U)}}});function MC(o,l,d){return new tv(o,l,d)}var nv=Wc.extend({_initImage:function(){var o=this._image=this._url;be(o,"leaflet-image-layer"),this._zoomAnimated&&be(o,"leaflet-zoom-animated"),this.options.className&&be(o,this.options.className),o.onselectstart=m,o.onmousemove=m}});function VC(o,l,d){return new nv(o,l,d)}var Nr=Xe.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,l){o&&(o instanceof xe||C(o))?(this._latlng=X(o),I(this,l)):(I(this,o),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&gt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&gt(this._container,1),this.bringToFront(),this.options.interactive&&(be(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(gt(this._container,0),this._removeTimeout=setTimeout(a(et,void 0,this._container),200)):et(this._container),this.options.interactive&&(at(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=X(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&si(this._container),this},bringToBack:function(){return this._map&&Fi(this._container),this},_prepareOpen:function(o){var l=this._source;if(!l._map)return!1;if(l instanceof yt){l=null;var d=this._source._layers;for(var g in d)if(d[g]._map){l=d[g];break}if(!l)return!1;this._source=l}if(!o)if(l.getCenter)o=l.getCenter();else if(l.getLatLng)o=l.getLatLng();else if(l.getBounds)o=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")o.innerHTML=l;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),l=N(this.options.offset),d=this._getAnchor();this._zoomAnimated?Ie(this._container,o.add(d)):l=l.add(o).add(d);var g=this._containerBottom=-l.y,w=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=g+"px",this._container.style.left=w+"px"}},_getAnchor:function(){return[0,0]}});Me.include({_initOverlay:function(o,l,d,g){var w=l;return w instanceof o||(w=new o(g).setContent(l)),d&&w.setLatLng(d),w}}),Xe.include({_initOverlay:function(o,l,d,g){var w=d;return w instanceof o?(I(w,g),w._source=this):(w=l&&!g?l:new o(g,this),w.setContent(d)),w}});var Gc=Nr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,Nr.prototype.openOn.call(this,o)},onAdd:function(o){Nr.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Hi||this._source.on("preclick",Xn))},onRemove:function(o){Nr.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Hi||this._source.off("preclick",Xn))},getEvents:function(){var o=Nr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",l=this._container=Fe("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Fe("div",o+"-content-wrapper",l);if(this._contentNode=Fe("div",o+"-content",d),Ui(l),zi(this._contentNode),we(l,"contextmenu",Xn),this._tipContainer=Fe("div",o+"-tip-container",l),this._tip=Fe("div",o+"-tip",this._tipContainer),this.options.closeButton){var g=this._closeButton=Fe("a",o+"-close-button",l);g.setAttribute("role","button"),g.setAttribute("aria-label","Close popup"),g.href="#close",g.innerHTML='<span aria-hidden="true">&#215;</span>',we(g,"click",function(w){ct(w),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,l=o.style;l.width="",l.whiteSpace="nowrap";var d=o.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var g=o.offsetHeight,w=this.options.maxHeight,P="leaflet-popup-scrolled";w&&g>w?(l.height=w+"px",be(o,P)):at(o,P),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var l=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),d=this._getAnchor();Ie(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,l=parseInt(Vi(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,g=this._containerWidth,w=new J(this._containerLeft,-d-this._containerBottom);w._add(Qn(this._container));var P=o.layerPointToContainerPoint(w),U=N(this.options.autoPanPadding),W=N(this.options.autoPanPaddingTopLeft||U),K=N(this.options.autoPanPaddingBottomRight||U),te=o.getSize(),le=0,Ee=0;P.x+g+K.x>te.x&&(le=P.x+g-te.x+K.x),P.x-le-W.x<0&&(le=P.x-W.x),P.y+d+K.y>te.y&&(Ee=P.y+d-te.y+K.y),P.y-Ee-W.y<0&&(Ee=P.y-W.y),(le||Ee)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([le,Ee]))}},_getAnchor:function(){return N(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),FC=function(o,l){return new Gc(o,l)};Me.mergeOptions({closePopupOnClick:!0}),Me.include({openPopup:function(o,l,d){return this._initOverlay(Gc,o,l,d).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),Xe.include({bindPopup:function(o,l){return this._popup=this._initOverlay(Gc,this._popup,o,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof yt||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){Ln(o);var l=o.layer||o.target;if(this._popup._source===l&&!(l instanceof Hi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=l,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var Kc=Nr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){Nr.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){Nr.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=Nr.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",l=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Fe("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+c(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var l,d,g=this._map,w=this._container,P=g.latLngToContainerPoint(g.getCenter()),U=g.layerPointToContainerPoint(o),W=this.options.direction,K=w.offsetWidth,te=w.offsetHeight,le=N(this.options.offset),Ee=this._getAnchor();W==="top"?(l=K/2,d=te):W==="bottom"?(l=K/2,d=0):W==="center"?(l=K/2,d=te/2):W==="right"?(l=0,d=te/2):W==="left"?(l=K,d=te/2):U.x<P.x?(W="right",l=0,d=te/2):(W="left",l=K+(le.x+Ee.x)*2,d=te/2),o=o.subtract(N(l,d,!0)).add(le).add(Ee),at(w,"leaflet-tooltip-right"),at(w,"leaflet-tooltip-left"),at(w,"leaflet-tooltip-top"),at(w,"leaflet-tooltip-bottom"),be(w,"leaflet-tooltip-"+W),Ie(w,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&gt(this._container,o)},_animateZoom:function(o){var l=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(l)},_getAnchor:function(){return N(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),jC=function(o,l){return new Kc(o,l)};Me.include({openTooltip:function(o,l,d){return this._initOverlay(Kc,o,l,d).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),Xe.include({bindTooltip:function(o,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Kc,this._tooltip,o,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var l=o?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof yt||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var l=typeof o.getElement=="function"&&o.getElement();l&&(we(l,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),we(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var l=typeof o.getElement=="function"&&o.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var l=o.latlng,d,g;this._tooltip.options.sticky&&o.originalEvent&&(d=this._map.mouseEventToContainerPoint(o.originalEvent),g=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(g)),this._tooltip.setLatLng(l)}});var rv=Rr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var l=o&&o.tagName==="DIV"?o:document.createElement("div"),d=this.options;if(d.html instanceof Element?(Hs(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var g=N(d.bgPos);l.style.backgroundPosition=-g.x+"px "+-g.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function zC(o){return new rv(o)}Rr.Default=bl;var Rl=Xe.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ge.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){I(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),et(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(si(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Fi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof J?o:new J(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var l=this.getPane().children,d=-o(-1/0,1/0),g=0,w=l.length,P;g<w;g++)P=l[g].style.zIndex,l[g]!==this._container&&P&&(d=o(d,+P));isFinite(d)&&(this.options.zIndex=d+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ge.ielt9){gt(this._container,this.options.opacity);var o=+new Date,l=!1,d=!1;for(var g in this._tiles){var w=this._tiles[g];if(!(!w.current||!w.loaded)){var P=Math.min(1,(o-w.loaded)/200);gt(w.el,P),P<1?l=!0:(w.active?d=!0:this._onOpaqueTile(w),w.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(z(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=Fe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,l=this.options.maxZoom;if(o!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===o?(this._levels[d].el.style.zIndex=l-Math.abs(o-d),this._onUpdateLevel(d)):(et(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var g=this._levels[o],w=this._map;return g||(g=this._levels[o]={},g.el=Fe("div","leaflet-tile-container leaflet-zoom-animated",this._container),g.el.style.zIndex=l,g.origin=w.project(w.unproject(w.getPixelOrigin()),o).round(),g.zoom=o,this._setZoomTransform(g,w.getCenter(),w.getZoom()),m(g.el.offsetWidth),this._onCreateLevel(g)),this._level=g,g}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(this._map){var o,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)l=this._tiles[o],l.retain=l.current;for(o in this._tiles)if(l=this._tiles[o],l.current&&!l.active){var g=l.coords;this._retainParent(g.x,g.y,g.z,g.z-5)||this._retainChildren(g.x,g.y,g.z,g.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var l in this._tiles)this._tiles[l].coords.z===o&&this._removeTile(l)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)et(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,l,d,g){var w=Math.floor(o/2),P=Math.floor(l/2),U=d-1,W=new J(+w,+P);W.z=+U;var K=this._tileCoordsToKey(W),te=this._tiles[K];return te&&te.active?(te.retain=!0,!0):(te&&te.loaded&&(te.retain=!0),U>g?this._retainParent(w,P,U,g):!1)},_retainChildren:function(o,l,d,g){for(var w=2*o;w<2*o+2;w++)for(var P=2*l;P<2*l+2;P++){var U=new J(w,P);U.z=d+1;var W=this._tileCoordsToKey(U),K=this._tiles[W];if(K&&K.active){K.retain=!0;continue}else K&&K.loaded&&(K.retain=!0);d+1<g&&this._retainChildren(w,P,d+1,g)}},_resetView:function(o){var l=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var l=this.options;return l.minNativeZoom!==void 0&&o<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<o?l.maxNativeZoom:o},_setView:function(o,l,d,g){var w=Math.round(l);this.options.maxZoom!==void 0&&w>this.options.maxZoom||this.options.minZoom!==void 0&&w<this.options.minZoom?w=void 0:w=this._clampZoom(w);var P=this.options.updateWhenZooming&&w!==this._tileZoom;(!g||P)&&(this._tileZoom=w,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),w!==void 0&&this._update(o),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(o,l)},_setZoomTransforms:function(o,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],o,l)},_setZoomTransform:function(o,l,d){var g=this._map.getZoomScale(d,o.zoom),w=o.origin.multiplyBy(g).subtract(this._map._getNewPixelOrigin(l,d)).round();ge.any3d?Ar(o.el,w,g):Ie(o.el,w)},_resetGrid:function(){var o=this._map,l=o.options.crs,d=this._tileSize=this.getTileSize(),g=this._tileZoom,w=this._map.getPixelWorldBounds(this._tileZoom);w&&(this._globalTileRange=this._pxBoundsToTileRange(w)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,l.wrapLng[0]],g).x/d.x),Math.ceil(o.project([0,l.wrapLng[1]],g).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([l.wrapLat[0],0],g).y/d.x),Math.ceil(o.project([l.wrapLat[1],0],g).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),g=l.getZoomScale(d,this._tileZoom),w=l.project(o,this._tileZoom).floor(),P=l.getSize().divideBy(g*2);return new fe(w.subtract(P),w.add(P))},_update:function(o){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(o===void 0&&(o=l.getCenter()),this._tileZoom!==void 0){var g=this._getTiledPixelBounds(o),w=this._pxBoundsToTileRange(g),P=w.getCenter(),U=[],W=this.options.keepBuffer,K=new fe(w.getBottomLeft().subtract([W,-W]),w.getTopRight().add([W,-W]));if(!(isFinite(w.min.x)&&isFinite(w.min.y)&&isFinite(w.max.x)&&isFinite(w.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var te in this._tiles){var le=this._tiles[te].coords;(le.z!==this._tileZoom||!K.contains(new J(le.x,le.y)))&&(this._tiles[te].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(o,d);return}for(var Ee=w.min.y;Ee<=w.max.y;Ee++)for(var De=w.min.x;De<=w.max.x;De++){var dn=new J(De,Ee);if(dn.z=this._tileZoom,!!this._isValidTile(dn)){var Mt=this._tiles[this._tileCoordsToKey(dn)];Mt?Mt.current=!0:U.push(dn)}}if(U.sort(function(vn,ta){return vn.distanceTo(P)-ta.distanceTo(P)}),U.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var tr=document.createDocumentFragment();for(De=0;De<U.length;De++)this._addTile(U[De],tr);this._level.el.appendChild(tr)}}}},_isValidTile:function(o){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(o.x<d.min.x||o.x>d.max.x)||!l.wrapLat&&(o.y<d.min.y||o.y>d.max.y))return!1}if(!this.options.bounds)return!0;var g=this._tileCoordsToBounds(o);return Ce(this.options.bounds).overlaps(g)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var l=this._map,d=this.getTileSize(),g=o.scaleBy(d),w=g.add(d),P=l.unproject(g,o.z),U=l.unproject(w,o.z);return[P,U]},_tileCoordsToBounds:function(o){var l=this._tileCoordsToNwSe(o),d=new j(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var l=o.split(":"),d=new J(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(o){var l=this._tiles[o];l&&(et(l.el),delete this._tiles[o],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){be(o,"leaflet-tile");var l=this.getTileSize();o.style.width=l.x+"px",o.style.height=l.y+"px",o.onselectstart=m,o.onmousemove=m,ge.ielt9&&this.options.opacity<1&&gt(o,this.options.opacity)},_addTile:function(o,l){var d=this._getTilePos(o),g=this._tileCoordsToKey(o),w=this.createTile(this._wrapCoords(o),a(this._tileReady,this,o));this._initTile(w),this.createTile.length<2&&V(a(this._tileReady,this,o,null,w)),Ie(w,d),this._tiles[g]={el:w,coords:o,current:!0},l.appendChild(w),this.fire("tileloadstart",{tile:w,coords:o})},_tileReady:function(o,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:o});var g=this._tileCoordsToKey(o);d=this._tiles[g],d&&(d.loaded=+new Date,this._map._fadeAnimated?(gt(d.el,0),z(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(be(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ge.ielt9||!this._map._fadeAnimated?V(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var l=new J(this._wrapX?p(o.x,this._wrapX):o.x,this._wrapY?p(o.y,this._wrapY):o.y);return l.z=o.z,l},_pxBoundsToTileRange:function(o){var l=this.getTileSize();return new fe(o.min.unscaleBy(l).floor(),o.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function UC(o){return new Rl(o)}var ea=Rl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,l){this._url=o,l=I(this,l),l.detectRetina&&ge.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,l){return this._url===o&&l===void 0&&(l=!0),this._url=o,l||this.redraw(),this},createTile:function(o,l){var d=document.createElement("img");return we(d,"load",a(this._tileOnLoad,this,l,d)),we(d,"error",a(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(o),d},getTileUrl:function(o){var l={r:ge.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-o.y;this.options.tms&&(l.y=d),l["-y"]=d}return k(this._url,i(l,this.options))},_tileOnLoad:function(o,l){ge.ielt9?setTimeout(a(o,this,null,l),0):o(null,l)},_tileOnError:function(o,l,d){var g=this.options.errorTileUrl;g&&l.getAttribute("src")!==g&&(l.src=g),o(d,l)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,g=this.options.zoomOffset;return d&&(o=l-o),o+g},_getSubdomain:function(o){var l=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var o,l;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(l=this._tiles[o].el,l.onload=m,l.onerror=m,!l.complete)){l.src=G;var d=this._tiles[o].coords;et(l),delete this._tiles[o],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(o){var l=this._tiles[o];if(l)return l.el.setAttribute("src",G),Rl.prototype._removeTile.call(this,o)},_tileReady:function(o,l,d){if(!(!this._map||d&&d.getAttribute("src")===G))return Rl.prototype._tileReady.call(this,o,l,d)}});function iv(o,l){return new ea(o,l)}var sv=ea.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,l){this._url=o;var d=i({},this.defaultWmsParams);for(var g in l)g in this.options||(d[g]=l[g]);l=I(this,l);var w=l.detectRetina&&ge.retina?2:1,P=this.getTileSize();d.width=P.x*w,d.height=P.y*w,this.wmsParams=d},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,ea.prototype.onAdd.call(this,o)},getTileUrl:function(o){var l=this._tileCoordsToNwSe(o),d=this._crs,g=_e(d.project(l[0]),d.project(l[1])),w=g.min,P=g.max,U=(this._wmsVersion>=1.3&&this._crs===Tt?[w.y,w.x,P.y,P.x]:[w.x,w.y,P.x,P.y]).join(","),W=ea.prototype.getTileUrl.call(this,o);return W+O(this.wmsParams,W,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+U},setParams:function(o,l){return i(this.wmsParams,o),l||this.redraw(),this}});function BC(o,l){return new sv(o,l)}ea.WMS=sv,iv.wms=BC;var di=Xe.extend({options:{padding:.1},initialize:function(o){I(this,o),c(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),be(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,l){var d=this._map.getZoomScale(l,this._zoom),g=this._map.getSize().multiplyBy(.5+this.options.padding),w=this._map.project(this._center,l),P=g.multiplyBy(-d).add(w).subtract(this._map._getNewPixelOrigin(o,l));ge.any3d?Ar(this._container,P,d):Ie(this._container,P)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-o)).round();this._bounds=new fe(d,d.add(l.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ov=di.extend({options:{tolerance:0},getEvents:function(){var o=di.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){di.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");we(o,"mousemove",this._onMouseMove,this),we(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),we(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){z(this._redrawRequest),delete this._ctx,et(this._container),Je(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var l in this._layers)o=this._layers[l],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){di.prototype._update.call(this);var o=this._bounds,l=this._container,d=o.getSize(),g=ge.retina?2:1;Ie(l,o.min),l.width=g*d.x,l.height=g*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",ge.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){di.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[c(o)]=o;var l=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var l=o._order,d=l.next,g=l.prev;d?d.prev=g:this._drawLast=g,g?g.next=d:this._drawFirst=d,delete o._order,delete this._layers[c(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var l=o.options.dashArray.split(/[, ]+/),d=[],g,w;for(w=0;w<l.length;w++){if(g=Number(l[w]),isNaN(g))return;d.push(g)}o.options._dashArray=d}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||V(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var l=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new fe,this._redrawBounds.extend(o._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(o._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var l=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var g=this._drawFirst;g;g=g.next)o=g.layer,(!l||o._pxBounds&&o._pxBounds.intersects(l))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,l){if(this._drawing){var d,g,w,P,U=o._parts,W=U.length,K=this._ctx;if(W){for(K.beginPath(),d=0;d<W;d++){for(g=0,w=U[d].length;g<w;g++)P=U[d][g],K[g?"lineTo":"moveTo"](P.x,P.y);l&&K.closePath()}this._fillStroke(K,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var l=o._point,d=this._ctx,g=Math.max(Math.round(o._radius),1),w=(Math.max(Math.round(o._radiusY),1)||g)/g;w!==1&&(d.save(),d.scale(1,w)),d.beginPath(),d.arc(l.x,l.y/w,g,0,Math.PI*2,!1),w!==1&&d.restore(),this._fillStroke(d,o)}},_fillStroke:function(o,l){var d=l.options;d.fill&&(o.globalAlpha=d.fillOpacity,o.fillStyle=d.fillColor||d.color,o.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(o.setLineDash&&o.setLineDash(l.options&&l.options._dashArray||[]),o.globalAlpha=d.opacity,o.lineWidth=d.weight,o.strokeStyle=d.color,o.lineCap=d.lineCap,o.lineJoin=d.lineJoin,o.stroke())},_onClick:function(o){for(var l=this._map.mouseEventToLayerPoint(o),d,g,w=this._drawFirst;w;w=w.next)d=w.layer,d.options.interactive&&d._containsPoint(l)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(d))&&(g=d);this._fireEvent(g?[g]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,l)}},_handleMouseOut:function(o){var l=this._hoveredLayer;l&&(at(this._container,"leaflet-interactive"),this._fireEvent([l],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,l){if(!this._mouseHoverThrottled){for(var d,g,w=this._drawFirst;w;w=w.next)d=w.layer,d.options.interactive&&d._containsPoint(l)&&(g=d);g!==this._hoveredLayer&&(this._handleMouseOut(o),g&&(be(this._container,"leaflet-interactive"),this._fireEvent([g],o,"mouseover"),this._hoveredLayer=g)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,l,d){this._map._fireDOMEvent(l,d||l.type,o)},_bringToFront:function(o){var l=o._order;if(l){var d=l.next,g=l.prev;if(d)d.prev=g;else return;g?g.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(o)}},_bringToBack:function(o){var l=o._order;if(l){var d=l.next,g=l.prev;if(g)g.next=d;else return;d?d.prev=g:g&&(this._drawLast=g),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(o)}}});function av(o){return ge.canvas?new ov(o):null}var Nl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),$C={_initContainer:function(){this._container=Fe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(di.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var l=o._container=Nl("shape");be(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",o._path=Nl("path"),l.appendChild(o._path),this._updateStyle(o),this._layers[c(o)]=o},_addPath:function(o){var l=o._container;this._container.appendChild(l),o.options.interactive&&o.addInteractiveTarget(l)},_removePath:function(o){var l=o._container;et(l),o.removeInteractiveTarget(l),delete this._layers[c(o)]},_updateStyle:function(o){var l=o._stroke,d=o._fill,g=o.options,w=o._container;w.stroked=!!g.stroke,w.filled=!!g.fill,g.stroke?(l||(l=o._stroke=Nl("stroke")),w.appendChild(l),l.weight=g.weight+"px",l.color=g.color,l.opacity=g.opacity,g.dashArray?l.dashStyle=C(g.dashArray)?g.dashArray.join(" "):g.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=g.lineCap.replace("butt","flat"),l.joinstyle=g.lineJoin):l&&(w.removeChild(l),o._stroke=null),g.fill?(d||(d=o._fill=Nl("fill")),w.appendChild(d),d.color=g.fillColor||g.color,d.opacity=g.fillOpacity):d&&(w.removeChild(d),o._fill=null)},_updateCircle:function(o){var l=o._point.round(),d=Math.round(o._radius),g=Math.round(o._radiusY||d);this._setPath(o,o._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+g+" 0,"+65535*360)},_setPath:function(o,l){o._path.v=l},_bringToFront:function(o){si(o._container)},_bringToBack:function(o){Fi(o._container)}},Zc=ge.vml?Nl:ei,Ll=di.extend({_initContainer:function(){this._container=Zc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Zc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){et(this._container),Je(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){di.prototype._update.call(this);var o=this._bounds,l=o.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),Ie(d,o.min),d.setAttribute("viewBox",[o.min.x,o.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(o){var l=o._path=Zc("path");o.options.className&&be(l,o.options.className),o.options.interactive&&be(l,"leaflet-interactive"),this._updateStyle(o),this._layers[c(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){et(o._path),o.removeInteractiveTarget(o._path),delete this._layers[c(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var l=o._path,d=o.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(o,l){this._setPath(o,Ri(o._parts,l))},_updateCircle:function(o){var l=o._point,d=Math.max(Math.round(o._radius),1),g=Math.max(Math.round(o._radiusY),1)||d,w="a"+d+","+g+" 0 1,0 ",P=o._empty()?"M0 0":"M"+(l.x-d)+","+l.y+w+d*2+",0 "+w+-d*2+",0 ";this._setPath(o,P)},_setPath:function(o,l){o._path.setAttribute("d",l)},_bringToFront:function(o){si(o._path)},_bringToBack:function(o){Fi(o._path)}});ge.vml&&Ll.include($C);function lv(o){return ge.svg||ge.vml?new Ll(o):null}Me.include({getRenderer:function(o){var l=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var l=this._paneRenderers[o];return l===void 0&&(l=this._createRenderer({pane:o}),this._paneRenderers[o]=l),l},_createRenderer:function(o){return this.options.preferCanvas&&av(o)||lv(o)}});var uv=Jo.extend({initialize:function(o,l){Jo.prototype.initialize.call(this,this._boundsToLatLngs(o),l)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=Ce(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function HC(o,l){return new uv(o,l)}Ll.create=Zc,Ll.pointsToPath=Ri,hi.geometryToLayer=Bc,hi.coordsToLatLng=Kf,hi.coordsToLatLngs=$c,hi.latLngToCoords=Zf,hi.latLngsToCoords=Hc,hi.getFeature=Xo,hi.asFeature=qc,Me.mergeOptions({boxZoom:!0});var cv=On.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){we(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Je(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){et(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),hr(),gl(),this._startPoint=this._map.mouseEventToContainerPoint(o),we(document,{contextmenu:Ln,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=Fe("div","leaflet-zoom-box",this._container),be(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var l=new fe(this._point,this._startPoint),d=l.getSize();Ie(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(et(this._box),at(this._container,"leaflet-crosshair")),dr(),_l(),Je(document,{contextmenu:Ln,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new j(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Me.addInitHook("addHandler","boxZoom",cv),Me.mergeOptions({doubleClickZoom:!0});var hv=On.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var l=this._map,d=l.getZoom(),g=l.options.zoomDelta,w=o.originalEvent.shiftKey?d-g:d+g;l.options.doubleClickZoom==="center"?l.setZoom(w):l.setZoomAround(o.containerPoint,w)}});Me.addInitHook("addHandler","doubleClickZoom",hv),Me.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var dv=On.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new fr(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}be(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){at(this._map._container,"leaflet-grab"),at(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Ce(this._map.options.maxBounds);this._offsetLimit=_e(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,l){return o-(o-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;o.x<l.min.x&&(o.x=this._viscousLimit(o.x,l.min.x)),o.y<l.min.y&&(o.y=this._viscousLimit(o.y,l.min.y)),o.x>l.max.x&&(o.x=this._viscousLimit(o.x,l.max.x)),o.y>l.max.y&&(o.y=this._viscousLimit(o.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,l=Math.round(o/2),d=this._initialWorldOffset,g=this._draggable._newPos.x,w=(g-l+d)%o+l-d,P=(g+l+d)%o-l-d,U=Math.abs(w+d)<Math.abs(P+d)?w:P;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=U},_onDragEnd:function(o){var l=this._map,d=l.options,g=!d.inertia||o.noInertia||this._times.length<2;if(l.fire("dragend",o),g)l.fire("moveend");else{this._prunePositions(+new Date);var w=this._lastPos.subtract(this._positions[0]),P=(this._lastTime-this._times[0])/1e3,U=d.easeLinearity,W=w.multiplyBy(U/P),K=W.distanceTo([0,0]),te=Math.min(d.inertiaMaxSpeed,K),le=W.multiplyBy(te/K),Ee=te/(d.inertiaDeceleration*U),De=le.multiplyBy(-Ee/2).round();!De.x&&!De.y?l.fire("moveend"):(De=l._limitOffset(De,l.options.maxBounds),V(function(){l.panBy(De,{duration:Ee,easeLinearity:U,noMoveStart:!0,animate:!0})}))}}});Me.addInitHook("addHandler","dragging",dv),Me.mergeOptions({keyboard:!0,keyboardPanDelta:80});var fv=On.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),we(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Je(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,l=document.documentElement,d=o.scrollTop||l.scrollTop,g=o.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(g,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var l=this._panKeys={},d=this.keyCodes,g,w;for(g=0,w=d.left.length;g<w;g++)l[d.left[g]]=[-1*o,0];for(g=0,w=d.right.length;g<w;g++)l[d.right[g]]=[o,0];for(g=0,w=d.down.length;g<w;g++)l[d.down[g]]=[0,o];for(g=0,w=d.up.length;g<w;g++)l[d.up[g]]=[0,-1*o]},_setZoomDelta:function(o){var l=this._zoomKeys={},d=this.keyCodes,g,w;for(g=0,w=d.zoomIn.length;g<w;g++)l[d.zoomIn[g]]=o;for(g=0,w=d.zoomOut.length;g<w;g++)l[d.zoomOut[g]]=-o},_addHooks:function(){we(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Je(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var l=o.keyCode,d=this._map,g;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(g=this._panKeys[l],o.shiftKey&&(g=N(g).multiplyBy(3)),d.options.maxBounds&&(g=d._limitOffset(N(g),d.options.maxBounds)),d.options.worldCopyJump){var w=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(g)));d.panTo(w)}else d.panBy(g)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;Ln(o)}}});Me.addInitHook("addHandler","keyboard",fv),Me.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var pv=On.extend({addHooks:function(){we(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Je(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var l=Lc(o),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var g=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),g),Ln(o)},_performZoom:function(){var o=this._map,l=o.getZoom(),d=this._map.options.zoomSnap||0;o._stop();var g=this._delta/(this._map.options.wheelPxPerZoomLevel*4),w=4*Math.log(2/(1+Math.exp(-Math.abs(g))))/Math.LN2,P=d?Math.ceil(w/d)*d:w,U=o._limitZoom(l+(this._delta>0?P:-P))-l;this._delta=0,this._startTime=null,U&&(o.options.scrollWheelZoom==="center"?o.setZoom(l+U):o.setZoomAround(this._lastMousePos,l+U))}});Me.addInitHook("addHandler","scrollWheelZoom",pv);var qC=600;Me.mergeOptions({tapHold:ge.touchNative&&ge.safari&&ge.mobile,tapTolerance:15});var mv=On.extend({addHooks:function(){we(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Je(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var l=o.touches[0];this._startPos=this._newPos=new J(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(we(document,"touchend",ct),we(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),qC),we(document,"touchend touchcancel contextmenu",this._cancel,this),we(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){Je(document,"touchend",ct),Je(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),Je(document,"touchend touchcancel contextmenu",this._cancel,this),Je(document,"touchmove",this._onMove,this)},_onMove:function(o){var l=o.touches[0];this._newPos=new J(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,l){var d=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});Me.addInitHook("addHandler","tapHold",mv),Me.mergeOptions({touchZoom:ge.touch,bounceAtZoomLimits:!0});var gv=On.extend({addHooks:function(){be(this._map._container,"leaflet-touch-zoom"),we(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){at(this._map._container,"leaflet-touch-zoom"),Je(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var l=this._map;if(!(!o.touches||o.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(o.touches[0]),g=l.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(g)._divideBy(2))),this._startDist=d.distanceTo(g),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),we(document,"touchmove",this._onTouchMove,this),we(document,"touchend touchcancel",this._onTouchEnd,this),ct(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(o.touches[0]),g=l.mouseEventToContainerPoint(o.touches[1]),w=d.distanceTo(g)/this._startDist;if(this._zoom=l.getScaleZoom(w,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&w<1||this._zoom>l.getMaxZoom()&&w>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,w===1)return}else{var P=d._add(g)._divideBy(2)._subtract(this._centerPoint);if(w===1&&P.x===0&&P.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(P),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),z(this._animRequest);var U=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=V(U,this,!0),ct(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,z(this._animRequest),Je(document,"touchmove",this._onTouchMove,this),Je(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Me.addInitHook("addHandler","touchZoom",gv),Me.BoxZoom=cv,Me.DoubleClickZoom=hv,Me.Drag=dv,Me.Keyboard=fv,Me.ScrollWheelZoom=pv,Me.TapHold=mv,Me.TouchZoom=gv,n.Bounds=fe,n.Browser=ge,n.CRS=de,n.Canvas=ov,n.Circle=Gf,n.CircleMarker=Uc,n.Class=ae,n.Control=yn,n.DivIcon=rv,n.DivOverlay=Nr,n.DomEvent=Oc,n.DomUtil=Rc,n.Draggable=fr,n.Evented=ze,n.FeatureGroup=yt,n.GeoJSON=hi,n.GridLayer=Rl,n.Handler=On,n.Icon=Rr,n.ImageOverlay=Wc,n.LatLng=xe,n.LatLngBounds=j,n.Layer=Xe,n.LayerGroup=ht,n.LineUtil=b,n.Map=Me,n.Marker=zc,n.Mixin=qs,n.Path=Hi,n.Point=J,n.PolyUtil=Zo,n.Polygon=Jo,n.Polyline=ci,n.Popup=Gc,n.PosAnimation=Sl,n.Projection=oe,n.Rectangle=uv,n.Renderer=di,n.SVG=Ll,n.SVGOverlay=nv,n.TileLayer=ea,n.Tooltip=Kc,n.Transformation=Zt,n.Util=F,n.VideoOverlay=tv,n.bind=a,n.bounds=_e,n.canvas=av,n.circle=RC,n.circleMarker=bC,n.control=hn,n.divIcon=zC,n.extend=i,n.featureGroup=Yo,n.geoJSON=ev,n.geoJson=OC,n.gridLayer=UC,n.icon=kC,n.imageOverlay=DC,n.latLng=X,n.latLngBounds=Ce,n.layerGroup=$i,n.map=$o,n.marker=AC,n.point=N,n.polygon=LC,n.polyline=NC,n.popup=FC,n.rectangle=HC,n.setOptions=I,n.stamp=c,n.svg=lv,n.svgOverlay=VC,n.tileLayer=iv,n.tooltip=jC,n.transformation=Rn,n.version=r,n.videoOverlay=MC;var WC=window.L;n.noConflict=function(){return window.L=WC,this},window.L=n})})(ig,ig.exports);var NO=ig.exports;const Jl=Gd(NO);function $S(t,e){return function(){return t.apply(e,arguments)}}const{toString:LO}=Object.prototype,{getPrototypeOf:G_}=Object,wf=(t=>e=>{const n=LO.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Cr=t=>(t=t.toLowerCase(),e=>wf(e)===t),Ef=t=>e=>typeof e===t,{isArray:Ja}=Array,$u=Ef("undefined");function OO(t){return t!==null&&!$u(t)&&t.constructor!==null&&!$u(t.constructor)&&Un(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const HS=Cr("ArrayBuffer");function DO(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&HS(t.buffer),e}const MO=Ef("string"),Un=Ef("function"),qS=Ef("number"),xf=t=>t!==null&&typeof t=="object",VO=t=>t===!0||t===!1,Uh=t=>{if(wf(t)!=="object")return!1;const e=G_(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},FO=Cr("Date"),jO=Cr("File"),zO=Cr("Blob"),UO=Cr("FileList"),BO=t=>xf(t)&&Un(t.pipe),$O=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Un(t.append)&&((e=wf(t))==="formdata"||e==="object"&&Un(t.toString)&&t.toString()==="[object FormData]"))},HO=Cr("URLSearchParams"),[qO,WO,GO,KO]=["ReadableStream","Request","Response","Headers"].map(Cr),ZO=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function uc(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Ja(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),a=s.length;let u;for(r=0;r<a;r++)u=s[r],e.call(null,t[u],u,t)}}function WS(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const eo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,GS=t=>!$u(t)&&t!==eo;function sg(){const{caseless:t}=GS(this)&&this||{},e={},n=(r,i)=>{const s=t&&WS(e,i)||i;Uh(e[s])&&Uh(r)?e[s]=sg(e[s],r):Uh(r)?e[s]=sg({},r):Ja(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&uc(arguments[r],n);return e}const QO=(t,e,n,{allOwnKeys:r}={})=>(uc(e,(i,s)=>{n&&Un(i)?t[s]=$S(i,n):t[s]=i},{allOwnKeys:r}),t),YO=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),JO=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},XO=(t,e,n,r)=>{let i,s,a;const u={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)a=i[s],(!r||r(a,t,e))&&!u[a]&&(e[a]=t[a],u[a]=!0);t=n!==!1&&G_(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},e4=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},t4=t=>{if(!t)return null;if(Ja(t))return t;let e=t.length;if(!qS(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},n4=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&G_(Uint8Array)),r4=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},i4=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},s4=Cr("HTMLFormElement"),o4=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),v0=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),a4=Cr("RegExp"),KS=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};uc(n,(i,s)=>{let a;(a=e(i,s,t))!==!1&&(r[s]=a||i)}),Object.defineProperties(t,r)},l4=t=>{KS(t,(e,n)=>{if(Un(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Un(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},u4=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return Ja(t)?r(t):r(String(t).split(e)),n},c4=()=>{},h4=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function d4(t){return!!(t&&Un(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const f4=t=>{const e=new Array(10),n=(r,i)=>{if(xf(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=Ja(r)?[]:{};return uc(r,(a,u)=>{const c=n(a,i+1);!$u(c)&&(s[u]=c)}),e[i]=void 0,s}}return r};return n(t,0)},p4=Cr("AsyncFunction"),m4=t=>t&&(xf(t)||Un(t))&&Un(t.then)&&Un(t.catch),ZS=((t,e)=>t?setImmediate:e?((n,r)=>(eo.addEventListener("message",({source:i,data:s})=>{i===eo&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),eo.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Un(eo.postMessage)),g4=typeof queueMicrotask<"u"?queueMicrotask.bind(eo):typeof process<"u"&&process.nextTick||ZS,Y={isArray:Ja,isArrayBuffer:HS,isBuffer:OO,isFormData:$O,isArrayBufferView:DO,isString:MO,isNumber:qS,isBoolean:VO,isObject:xf,isPlainObject:Uh,isReadableStream:qO,isRequest:WO,isResponse:GO,isHeaders:KO,isUndefined:$u,isDate:FO,isFile:jO,isBlob:zO,isRegExp:a4,isFunction:Un,isStream:BO,isURLSearchParams:HO,isTypedArray:n4,isFileList:UO,forEach:uc,merge:sg,extend:QO,trim:ZO,stripBOM:YO,inherits:JO,toFlatObject:XO,kindOf:wf,kindOfTest:Cr,endsWith:e4,toArray:t4,forEachEntry:r4,matchAll:i4,isHTMLForm:s4,hasOwnProperty:v0,hasOwnProp:v0,reduceDescriptors:KS,freezeMethods:l4,toObjectSet:u4,toCamelCase:o4,noop:c4,toFiniteNumber:h4,findKey:WS,global:eo,isContextDefined:GS,isSpecCompliantForm:d4,toJSONObject:f4,isAsyncFn:p4,isThenable:m4,setImmediate:ZS,asap:g4};function Ne(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Y.inherits(Ne,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Y.toJSONObject(this.config),code:this.code,status:this.status}}});const QS=Ne.prototype,YS={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{YS[t]={value:t}});Object.defineProperties(Ne,YS);Object.defineProperty(QS,"isAxiosError",{value:!0});Ne.from=(t,e,n,r,i,s)=>{const a=Object.create(QS);return Y.toFlatObject(t,a,function(c){return c!==Error.prototype},u=>u!=="isAxiosError"),Ne.call(a,t.message,e,n,r,i),a.cause=t,a.name=t.name,s&&Object.assign(a,s),a};const _4=null;function og(t){return Y.isPlainObject(t)||Y.isArray(t)}function JS(t){return Y.endsWith(t,"[]")?t.slice(0,-2):t}function w0(t,e,n){return t?t.concat(e).map(function(i,s){return i=JS(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function y4(t){return Y.isArray(t)&&!t.some(og)}const v4=Y.toFlatObject(Y,{},null,function(e){return/^is[A-Z]/.test(e)});function Tf(t,e,n){if(!Y.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Y.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(I,O){return!Y.isUndefined(O[I])});const r=n.metaTokens,i=n.visitor||p,s=n.dots,a=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&Y.isSpecCompliantForm(e);if(!Y.isFunction(i))throw new TypeError("visitor must be a function");function f(T){if(T===null)return"";if(Y.isDate(T))return T.toISOString();if(!c&&Y.isBlob(T))throw new Ne("Blob is not supported. Use a Buffer instead.");return Y.isArrayBuffer(T)||Y.isTypedArray(T)?c&&typeof Blob=="function"?new Blob([T]):Buffer.from(T):T}function p(T,I,O){let S=T;if(T&&!O&&typeof T=="object"){if(Y.endsWith(I,"{}"))I=r?I:I.slice(0,-2),T=JSON.stringify(T);else if(Y.isArray(T)&&y4(T)||(Y.isFileList(T)||Y.endsWith(I,"[]"))&&(S=Y.toArray(T)))return I=JS(I),S.forEach(function(C,B){!(Y.isUndefined(C)||C===null)&&e.append(a===!0?w0([I],B,s):a===null?I:I+"[]",f(C))}),!1}return og(T)?!0:(e.append(w0(O,I,s),f(T)),!1)}const m=[],y=Object.assign(v4,{defaultVisitor:p,convertValue:f,isVisitable:og});function v(T,I){if(!Y.isUndefined(T)){if(m.indexOf(T)!==-1)throw Error("Circular reference detected in "+I.join("."));m.push(T),Y.forEach(T,function(S,k){(!(Y.isUndefined(S)||S===null)&&i.call(e,S,Y.isString(k)?k.trim():k,I,y))===!0&&v(S,I?I.concat(k):[k])}),m.pop()}}if(!Y.isObject(t))throw new TypeError("data must be an object");return v(t),e}function E0(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function K_(t,e){this._pairs=[],t&&Tf(t,this,e)}const XS=K_.prototype;XS.append=function(e,n){this._pairs.push([e,n])};XS.toString=function(e){const n=e?function(r){return e.call(this,r,E0)}:E0;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function w4(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function eI(t,e,n){if(!e)return t;const r=n&&n.encode||w4;Y.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=Y.isURLSearchParams(e)?e.toString():new K_(e,n).toString(r),s){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class x0{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Y.forEach(this.handlers,function(r){r!==null&&e(r)})}}const tI={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},E4=typeof URLSearchParams<"u"?URLSearchParams:K_,x4=typeof FormData<"u"?FormData:null,T4=typeof Blob<"u"?Blob:null,S4={isBrowser:!0,classes:{URLSearchParams:E4,FormData:x4,Blob:T4},protocols:["http","https","file","blob","url","data"]},Z_=typeof window<"u"&&typeof document<"u",ag=typeof navigator=="object"&&navigator||void 0,I4=Z_&&(!ag||["ReactNative","NativeScript","NS"].indexOf(ag.product)<0),P4=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",C4=Z_&&window.location.href||"http://localhost",k4=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Z_,hasStandardBrowserEnv:I4,hasStandardBrowserWebWorkerEnv:P4,navigator:ag,origin:C4},Symbol.toStringTag,{value:"Module"})),rn={...k4,...S4};function A4(t,e){return Tf(t,new rn.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return rn.isNode&&Y.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function b4(t){return Y.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function R4(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function nI(t){function e(n,r,i,s){let a=n[s++];if(a==="__proto__")return!0;const u=Number.isFinite(+a),c=s>=n.length;return a=!a&&Y.isArray(i)?i.length:a,c?(Y.hasOwnProp(i,a)?i[a]=[i[a],r]:i[a]=r,!u):((!i[a]||!Y.isObject(i[a]))&&(i[a]=[]),e(n,r,i[a],s)&&Y.isArray(i[a])&&(i[a]=R4(i[a])),!u)}if(Y.isFormData(t)&&Y.isFunction(t.entries)){const n={};return Y.forEachEntry(t,(r,i)=>{e(b4(r),i,n,0)}),n}return null}function N4(t,e,n){if(Y.isString(t))try{return(e||JSON.parse)(t),Y.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const cc={transitional:tI,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=Y.isObject(e);if(s&&Y.isHTMLForm(e)&&(e=new FormData(e)),Y.isFormData(e))return i?JSON.stringify(nI(e)):e;if(Y.isArrayBuffer(e)||Y.isBuffer(e)||Y.isStream(e)||Y.isFile(e)||Y.isBlob(e)||Y.isReadableStream(e))return e;if(Y.isArrayBufferView(e))return e.buffer;if(Y.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return A4(e,this.formSerializer).toString();if((u=Y.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Tf(u?{"files[]":e}:e,c&&new c,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),N4(e)):e}],transformResponse:[function(e){const n=this.transitional||cc.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Y.isResponse(e)||Y.isReadableStream(e))return e;if(e&&Y.isString(e)&&(r&&!this.responseType||i)){const a=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(u){if(a)throw u.name==="SyntaxError"?Ne.from(u,Ne.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:rn.classes.FormData,Blob:rn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Y.forEach(["delete","get","head","post","put","patch"],t=>{cc.headers[t]={}});const L4=Y.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),O4=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(a){i=a.indexOf(":"),n=a.substring(0,i).trim().toLowerCase(),r=a.substring(i+1).trim(),!(!n||e[n]&&L4[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},T0=Symbol("internals");function Bl(t){return t&&String(t).trim().toLowerCase()}function Bh(t){return t===!1||t==null?t:Y.isArray(t)?t.map(Bh):String(t)}function D4(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const M4=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Np(t,e,n,r,i){if(Y.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!Y.isString(e)){if(Y.isString(r))return e.indexOf(r)!==-1;if(Y.isRegExp(r))return r.test(e)}}function V4(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function F4(t,e){const n=Y.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,a){return this[r].call(this,e,i,s,a)},configurable:!0})})}let Cn=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(u,c,f){const p=Bl(c);if(!p)throw new Error("header name must be a non-empty string");const m=Y.findKey(i,p);(!m||i[m]===void 0||f===!0||f===void 0&&i[m]!==!1)&&(i[m||c]=Bh(u))}const a=(u,c)=>Y.forEach(u,(f,p)=>s(f,p,c));if(Y.isPlainObject(e)||e instanceof this.constructor)a(e,n);else if(Y.isString(e)&&(e=e.trim())&&!M4(e))a(O4(e),n);else if(Y.isHeaders(e))for(const[u,c]of e.entries())s(c,u,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=Bl(e),e){const r=Y.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return D4(i);if(Y.isFunction(n))return n.call(this,i,r);if(Y.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Bl(e),e){const r=Y.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Np(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(a){if(a=Bl(a),a){const u=Y.findKey(r,a);u&&(!n||Np(r,r[u],u,n))&&(delete r[u],i=!0)}}return Y.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||Np(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return Y.forEach(this,(i,s)=>{const a=Y.findKey(r,s);if(a){n[a]=Bh(i),delete n[s];return}const u=e?V4(s):String(s).trim();u!==s&&delete n[s],n[u]=Bh(i),r[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Y.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&Y.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[T0]=this[T0]={accessors:{}}).accessors,i=this.prototype;function s(a){const u=Bl(a);r[u]||(F4(i,a),r[u]=!0)}return Y.isArray(e)?e.forEach(s):s(e),this}};Cn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Y.reduceDescriptors(Cn.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Y.freezeMethods(Cn);function Lp(t,e){const n=this||cc,r=e||n,i=Cn.from(r.headers);let s=r.data;return Y.forEach(t,function(u){s=u.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function rI(t){return!!(t&&t.__CANCEL__)}function Xa(t,e,n){Ne.call(this,t??"canceled",Ne.ERR_CANCELED,e,n),this.name="CanceledError"}Y.inherits(Xa,Ne,{__CANCEL__:!0});function iI(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Ne("Request failed with status code "+n.status,[Ne.ERR_BAD_REQUEST,Ne.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function j4(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function z4(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,a;return e=e!==void 0?e:1e3,function(c){const f=Date.now(),p=r[s];a||(a=f),n[i]=c,r[i]=f;let m=s,y=0;for(;m!==i;)y+=n[m++],m=m%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),f-a<e)return;const v=p&&f-p;return v?Math.round(y*1e3/v):void 0}}function U4(t,e){let n=0,r=1e3/e,i,s;const a=(f,p=Date.now())=>{n=p,i=null,s&&(clearTimeout(s),s=null),t.apply(null,f)};return[(...f)=>{const p=Date.now(),m=p-n;m>=r?a(f,p):(i=f,s||(s=setTimeout(()=>{s=null,a(i)},r-m)))},()=>i&&a(i)]}const Nd=(t,e,n=3)=>{let r=0;const i=z4(50,250);return U4(s=>{const a=s.loaded,u=s.lengthComputable?s.total:void 0,c=a-r,f=i(c),p=a<=u;r=a;const m={loaded:a,total:u,progress:u?a/u:void 0,bytes:c,rate:f||void 0,estimated:f&&u&&p?(u-a)/f:void 0,event:s,lengthComputable:u!=null,[e?"download":"upload"]:!0};t(m)},n)},S0=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},I0=t=>(...e)=>Y.asap(()=>t(...e)),B4=rn.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,rn.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(rn.origin),rn.navigator&&/(msie|trident)/i.test(rn.navigator.userAgent)):()=>!0,$4=rn.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const a=[t+"="+encodeURIComponent(e)];Y.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),Y.isString(r)&&a.push("path="+r),Y.isString(i)&&a.push("domain="+i),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function H4(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function q4(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function sI(t,e,n){let r=!H4(e);return t&&(r||n==!1)?q4(t,e):e}const P0=t=>t instanceof Cn?{...t}:t;function mo(t,e){e=e||{};const n={};function r(f,p,m,y){return Y.isPlainObject(f)&&Y.isPlainObject(p)?Y.merge.call({caseless:y},f,p):Y.isPlainObject(p)?Y.merge({},p):Y.isArray(p)?p.slice():p}function i(f,p,m,y){if(Y.isUndefined(p)){if(!Y.isUndefined(f))return r(void 0,f,m,y)}else return r(f,p,m,y)}function s(f,p){if(!Y.isUndefined(p))return r(void 0,p)}function a(f,p){if(Y.isUndefined(p)){if(!Y.isUndefined(f))return r(void 0,f)}else return r(void 0,p)}function u(f,p,m){if(m in e)return r(f,p);if(m in t)return r(void 0,f)}const c={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:u,headers:(f,p,m)=>i(P0(f),P0(p),m,!0)};return Y.forEach(Object.keys(Object.assign({},t,e)),function(p){const m=c[p]||i,y=m(t[p],e[p],p);Y.isUndefined(y)&&m!==u||(n[p]=y)}),n}const oI=t=>{const e=mo({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:a,auth:u}=e;e.headers=a=Cn.from(a),e.url=eI(sI(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),u&&a.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):"")));let c;if(Y.isFormData(n)){if(rn.hasStandardBrowserEnv||rn.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((c=a.getContentType())!==!1){const[f,...p]=c?c.split(";").map(m=>m.trim()).filter(Boolean):[];a.setContentType([f||"multipart/form-data",...p].join("; "))}}if(rn.hasStandardBrowserEnv&&(r&&Y.isFunction(r)&&(r=r(e)),r||r!==!1&&B4(e.url))){const f=i&&s&&$4.read(s);f&&a.set(i,f)}return e},W4=typeof XMLHttpRequest<"u",G4=W4&&function(t){return new Promise(function(n,r){const i=oI(t);let s=i.data;const a=Cn.from(i.headers).normalize();let{responseType:u,onUploadProgress:c,onDownloadProgress:f}=i,p,m,y,v,T;function I(){v&&v(),T&&T(),i.cancelToken&&i.cancelToken.unsubscribe(p),i.signal&&i.signal.removeEventListener("abort",p)}let O=new XMLHttpRequest;O.open(i.method.toUpperCase(),i.url,!0),O.timeout=i.timeout;function S(){if(!O)return;const C=Cn.from("getAllResponseHeaders"in O&&O.getAllResponseHeaders()),G={data:!u||u==="text"||u==="json"?O.responseText:O.response,status:O.status,statusText:O.statusText,headers:C,config:t,request:O};iI(function(R){n(R),I()},function(R){r(R),I()},G),O=null}"onloadend"in O?O.onloadend=S:O.onreadystatechange=function(){!O||O.readyState!==4||O.status===0&&!(O.responseURL&&O.responseURL.indexOf("file:")===0)||setTimeout(S)},O.onabort=function(){O&&(r(new Ne("Request aborted",Ne.ECONNABORTED,t,O)),O=null)},O.onerror=function(){r(new Ne("Network Error",Ne.ERR_NETWORK,t,O)),O=null},O.ontimeout=function(){let B=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const G=i.transitional||tI;i.timeoutErrorMessage&&(B=i.timeoutErrorMessage),r(new Ne(B,G.clarifyTimeoutError?Ne.ETIMEDOUT:Ne.ECONNABORTED,t,O)),O=null},s===void 0&&a.setContentType(null),"setRequestHeader"in O&&Y.forEach(a.toJSON(),function(B,G){O.setRequestHeader(G,B)}),Y.isUndefined(i.withCredentials)||(O.withCredentials=!!i.withCredentials),u&&u!=="json"&&(O.responseType=i.responseType),f&&([y,T]=Nd(f,!0),O.addEventListener("progress",y)),c&&O.upload&&([m,v]=Nd(c),O.upload.addEventListener("progress",m),O.upload.addEventListener("loadend",v)),(i.cancelToken||i.signal)&&(p=C=>{O&&(r(!C||C.type?new Xa(null,t,O):C),O.abort(),O=null)},i.cancelToken&&i.cancelToken.subscribe(p),i.signal&&(i.signal.aborted?p():i.signal.addEventListener("abort",p)));const k=j4(i.url);if(k&&rn.protocols.indexOf(k)===-1){r(new Ne("Unsupported protocol "+k+":",Ne.ERR_BAD_REQUEST,t));return}O.send(s||null)})},K4=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(f){if(!i){i=!0,u();const p=f instanceof Error?f:this.reason;r.abort(p instanceof Ne?p:new Xa(p instanceof Error?p.message:p))}};let a=e&&setTimeout(()=>{a=null,s(new Ne(`timeout ${e} of ms exceeded`,Ne.ETIMEDOUT))},e);const u=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(f=>{f.unsubscribe?f.unsubscribe(s):f.removeEventListener("abort",s)}),t=null)};t.forEach(f=>f.addEventListener("abort",s));const{signal:c}=r;return c.unsubscribe=()=>Y.asap(u),c}},Z4=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},Q4=async function*(t,e){for await(const n of Y4(t))yield*Z4(n,e)},Y4=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},C0=(t,e,n,r)=>{const i=Q4(t,e);let s=0,a,u=c=>{a||(a=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:f,value:p}=await i.next();if(f){u(),c.close();return}let m=p.byteLength;if(n){let y=s+=m;n(y)}c.enqueue(new Uint8Array(p))}catch(f){throw u(f),f}},cancel(c){return u(c),i.return()}},{highWaterMark:2})},Sf=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",aI=Sf&&typeof ReadableStream=="function",J4=Sf&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),lI=(t,...e)=>{try{return!!t(...e)}catch{return!1}},X4=aI&&lI(()=>{let t=!1;const e=new Request(rn.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),k0=64*1024,lg=aI&&lI(()=>Y.isReadableStream(new Response("").body)),Ld={stream:lg&&(t=>t.body)};Sf&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Ld[e]&&(Ld[e]=Y.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new Ne(`Response type '${e}' is not supported`,Ne.ERR_NOT_SUPPORT,r)})})})(new Response);const eD=async t=>{if(t==null)return 0;if(Y.isBlob(t))return t.size;if(Y.isSpecCompliantForm(t))return(await new Request(rn.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Y.isArrayBufferView(t)||Y.isArrayBuffer(t))return t.byteLength;if(Y.isURLSearchParams(t)&&(t=t+""),Y.isString(t))return(await J4(t)).byteLength},tD=async(t,e)=>{const n=Y.toFiniteNumber(t.getContentLength());return n??eD(e)},nD=Sf&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:a,onDownloadProgress:u,onUploadProgress:c,responseType:f,headers:p,withCredentials:m="same-origin",fetchOptions:y}=oI(t);f=f?(f+"").toLowerCase():"text";let v=K4([i,s&&s.toAbortSignal()],a),T;const I=v&&v.unsubscribe&&(()=>{v.unsubscribe()});let O;try{if(c&&X4&&n!=="get"&&n!=="head"&&(O=await tD(p,r))!==0){let G=new Request(e,{method:"POST",body:r,duplex:"half"}),$;if(Y.isFormData(r)&&($=G.headers.get("content-type"))&&p.setContentType($),G.body){const[R,A]=S0(O,Nd(I0(c)));r=C0(G.body,k0,R,A)}}Y.isString(m)||(m=m?"include":"omit");const S="credentials"in Request.prototype;T=new Request(e,{...y,signal:v,method:n.toUpperCase(),headers:p.normalize().toJSON(),body:r,duplex:"half",credentials:S?m:void 0});let k=await fetch(T);const C=lg&&(f==="stream"||f==="response");if(lg&&(u||C&&I)){const G={};["status","statusText","headers"].forEach(D=>{G[D]=k[D]});const $=Y.toFiniteNumber(k.headers.get("content-length")),[R,A]=u&&S0($,Nd(I0(u),!0))||[];k=new Response(C0(k.body,k0,R,()=>{A&&A(),I&&I()}),G)}f=f||"text";let B=await Ld[Y.findKey(Ld,f)||"text"](k,t);return!C&&I&&I(),await new Promise((G,$)=>{iI(G,$,{data:B,headers:Cn.from(k.headers),status:k.status,statusText:k.statusText,config:t,request:T})})}catch(S){throw I&&I(),S&&S.name==="TypeError"&&/fetch/i.test(S.message)?Object.assign(new Ne("Network Error",Ne.ERR_NETWORK,t,T),{cause:S.cause||S}):Ne.from(S,S&&S.code,t,T)}}),ug={http:_4,xhr:G4,fetch:nD};Y.forEach(ug,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const A0=t=>`- ${t}`,rD=t=>Y.isFunction(t)||t===null||t===!1,uI={getAdapter:t=>{t=Y.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let a;if(r=n,!rD(n)&&(r=ug[(a=String(n)).toLowerCase()],r===void 0))throw new Ne(`Unknown adapter '${a}'`);if(r)break;i[a||"#"+s]=r}if(!r){const s=Object.entries(i).map(([u,c])=>`adapter ${u} `+(c===!1?"is not supported by the environment":"is not available in the build"));let a=e?s.length>1?`since :
`+s.map(A0).join(`
`):" "+A0(s[0]):"as no adapter specified";throw new Ne("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return r},adapters:ug};function Op(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Xa(null,t)}function b0(t){return Op(t),t.headers=Cn.from(t.headers),t.data=Lp.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),uI.getAdapter(t.adapter||cc.adapter)(t).then(function(r){return Op(t),r.data=Lp.call(t,t.transformResponse,r),r.headers=Cn.from(r.headers),r},function(r){return rI(r)||(Op(t),r&&r.response&&(r.response.data=Lp.call(t,t.transformResponse,r.response),r.response.headers=Cn.from(r.response.headers))),Promise.reject(r)})}const cI="1.8.4",If={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{If[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const R0={};If.transitional=function(e,n,r){function i(s,a){return"[Axios v"+cI+"] Transitional option '"+s+"'"+a+(r?". "+r:"")}return(s,a,u)=>{if(e===!1)throw new Ne(i(a," has been removed"+(n?" in "+n:"")),Ne.ERR_DEPRECATED);return n&&!R0[a]&&(R0[a]=!0,console.warn(i(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,a,u):!0}};If.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function iD(t,e,n){if(typeof t!="object")throw new Ne("options must be an object",Ne.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],a=e[s];if(a){const u=t[s],c=u===void 0||a(u,s,t);if(c!==!0)throw new Ne("option "+s+" must be "+c,Ne.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ne("Unknown option "+s,Ne.ERR_BAD_OPTION)}}const $h={assertOptions:iD,validators:If},Or=$h.validators;let io=class{constructor(e){this.defaults=e,this.interceptors={request:new x0,response:new x0}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=mo(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&$h.assertOptions(r,{silentJSONParsing:Or.transitional(Or.boolean),forcedJSONParsing:Or.transitional(Or.boolean),clarifyTimeoutError:Or.transitional(Or.boolean)},!1),i!=null&&(Y.isFunction(i)?n.paramsSerializer={serialize:i}:$h.assertOptions(i,{encode:Or.function,serialize:Or.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),$h.assertOptions(n,{baseUrl:Or.spelling("baseURL"),withXsrfToken:Or.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=s&&Y.merge(s.common,s[n.method]);s&&Y.forEach(["delete","get","head","post","put","patch","common"],T=>{delete s[T]}),n.headers=Cn.concat(a,s);const u=[];let c=!0;this.interceptors.request.forEach(function(I){typeof I.runWhen=="function"&&I.runWhen(n)===!1||(c=c&&I.synchronous,u.unshift(I.fulfilled,I.rejected))});const f=[];this.interceptors.response.forEach(function(I){f.push(I.fulfilled,I.rejected)});let p,m=0,y;if(!c){const T=[b0.bind(this),void 0];for(T.unshift.apply(T,u),T.push.apply(T,f),y=T.length,p=Promise.resolve(n);m<y;)p=p.then(T[m++],T[m++]);return p}y=u.length;let v=n;for(m=0;m<y;){const T=u[m++],I=u[m++];try{v=T(v)}catch(O){I.call(this,O);break}}try{p=b0.call(this,v)}catch(T){return Promise.reject(T)}for(m=0,y=f.length;m<y;)p=p.then(f[m++],f[m++]);return p}getUri(e){e=mo(this.defaults,e);const n=sI(e.baseURL,e.url,e.allowAbsoluteUrls);return eI(n,e.params,e.paramsSerializer)}};Y.forEach(["delete","get","head","options"],function(e){io.prototype[e]=function(n,r){return this.request(mo(r||{},{method:e,url:n,data:(r||{}).data}))}});Y.forEach(["post","put","patch"],function(e){function n(r){return function(s,a,u){return this.request(mo(u||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}io.prototype[e]=n(),io.prototype[e+"Form"]=n(!0)});let sD=class hI{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const a=new Promise(u=>{r.subscribe(u),s=u}).then(i);return a.cancel=function(){r.unsubscribe(s)},a},e(function(s,a,u){r.reason||(r.reason=new Xa(s,a,u),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new hI(function(i){e=i}),cancel:e}}};function oD(t){return function(n){return t.apply(null,n)}}function aD(t){return Y.isObject(t)&&t.isAxiosError===!0}const cg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(cg).forEach(([t,e])=>{cg[e]=t});function dI(t){const e=new io(t),n=$S(io.prototype.request,e);return Y.extend(n,io.prototype,e,{allOwnKeys:!0}),Y.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return dI(mo(t,i))},n}const Et=dI(cc);Et.Axios=io;Et.CanceledError=Xa;Et.CancelToken=sD;Et.isCancel=rI;Et.VERSION=cI;Et.toFormData=Tf;Et.AxiosError=Ne;Et.Cancel=Et.CanceledError;Et.all=function(e){return Promise.all(e)};Et.spread=oD;Et.isAxiosError=aD;Et.mergeConfig=mo;Et.AxiosHeaders=Cn;Et.formToJSON=t=>nI(Y.isHTMLForm(t)?new FormData(t):t);Et.getAdapter=uI.getAdapter;Et.HttpStatusCode=cg;Et.default=Et;const{Axios:h9,AxiosError:d9,CanceledError:f9,isCancel:p9,CancelToken:m9,VERSION:g9,all:_9,Cancel:y9,isAxiosError:v9,spread:w9,toFormData:E9,AxiosHeaders:x9,HttpStatusCode:T9,formToJSON:S9,getAdapter:I9,mergeConfig:P9}=Et;var lD="firebase",uD="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Br(lD,uD,"app");var N0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var so,fI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,A){function D(){}D.prototype=A.prototype,R.D=A.prototype,R.prototype=new D,R.prototype.constructor=R,R.C=function(M,V,z){for(var F=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)F[ae-2]=arguments[ae];return A.prototype[V].apply(M,F)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,A,D){D||(D=0);var M=Array(16);if(typeof A=="string")for(var V=0;16>V;++V)M[V]=A.charCodeAt(D++)|A.charCodeAt(D++)<<8|A.charCodeAt(D++)<<16|A.charCodeAt(D++)<<24;else for(V=0;16>V;++V)M[V]=A[D++]|A[D++]<<8|A[D++]<<16|A[D++]<<24;A=R.g[0],D=R.g[1],V=R.g[2];var z=R.g[3],F=A+(z^D&(V^z))+M[0]+3614090360&4294967295;A=D+(F<<7&4294967295|F>>>25),F=z+(V^A&(D^V))+M[1]+3905402710&4294967295,z=A+(F<<12&4294967295|F>>>20),F=V+(D^z&(A^D))+M[2]+606105819&4294967295,V=z+(F<<17&4294967295|F>>>15),F=D+(A^V&(z^A))+M[3]+3250441966&4294967295,D=V+(F<<22&4294967295|F>>>10),F=A+(z^D&(V^z))+M[4]+4118548399&4294967295,A=D+(F<<7&4294967295|F>>>25),F=z+(V^A&(D^V))+M[5]+1200080426&4294967295,z=A+(F<<12&4294967295|F>>>20),F=V+(D^z&(A^D))+M[6]+2821735955&4294967295,V=z+(F<<17&4294967295|F>>>15),F=D+(A^V&(z^A))+M[7]+4249261313&4294967295,D=V+(F<<22&4294967295|F>>>10),F=A+(z^D&(V^z))+M[8]+1770035416&4294967295,A=D+(F<<7&4294967295|F>>>25),F=z+(V^A&(D^V))+M[9]+2336552879&4294967295,z=A+(F<<12&4294967295|F>>>20),F=V+(D^z&(A^D))+M[10]+4294925233&4294967295,V=z+(F<<17&4294967295|F>>>15),F=D+(A^V&(z^A))+M[11]+2304563134&4294967295,D=V+(F<<22&4294967295|F>>>10),F=A+(z^D&(V^z))+M[12]+1804603682&4294967295,A=D+(F<<7&4294967295|F>>>25),F=z+(V^A&(D^V))+M[13]+4254626195&4294967295,z=A+(F<<12&4294967295|F>>>20),F=V+(D^z&(A^D))+M[14]+2792965006&4294967295,V=z+(F<<17&4294967295|F>>>15),F=D+(A^V&(z^A))+M[15]+1236535329&4294967295,D=V+(F<<22&4294967295|F>>>10),F=A+(V^z&(D^V))+M[1]+4129170786&4294967295,A=D+(F<<5&4294967295|F>>>27),F=z+(D^V&(A^D))+M[6]+3225465664&4294967295,z=A+(F<<9&4294967295|F>>>23),F=V+(A^D&(z^A))+M[11]+643717713&4294967295,V=z+(F<<14&4294967295|F>>>18),F=D+(z^A&(V^z))+M[0]+3921069994&4294967295,D=V+(F<<20&4294967295|F>>>12),F=A+(V^z&(D^V))+M[5]+3593408605&4294967295,A=D+(F<<5&4294967295|F>>>27),F=z+(D^V&(A^D))+M[10]+38016083&4294967295,z=A+(F<<9&4294967295|F>>>23),F=V+(A^D&(z^A))+M[15]+3634488961&4294967295,V=z+(F<<14&4294967295|F>>>18),F=D+(z^A&(V^z))+M[4]+3889429448&4294967295,D=V+(F<<20&4294967295|F>>>12),F=A+(V^z&(D^V))+M[9]+568446438&4294967295,A=D+(F<<5&4294967295|F>>>27),F=z+(D^V&(A^D))+M[14]+3275163606&4294967295,z=A+(F<<9&4294967295|F>>>23),F=V+(A^D&(z^A))+M[3]+4107603335&4294967295,V=z+(F<<14&4294967295|F>>>18),F=D+(z^A&(V^z))+M[8]+1163531501&4294967295,D=V+(F<<20&4294967295|F>>>12),F=A+(V^z&(D^V))+M[13]+2850285829&4294967295,A=D+(F<<5&4294967295|F>>>27),F=z+(D^V&(A^D))+M[2]+4243563512&4294967295,z=A+(F<<9&4294967295|F>>>23),F=V+(A^D&(z^A))+M[7]+1735328473&4294967295,V=z+(F<<14&4294967295|F>>>18),F=D+(z^A&(V^z))+M[12]+2368359562&4294967295,D=V+(F<<20&4294967295|F>>>12),F=A+(D^V^z)+M[5]+4294588738&4294967295,A=D+(F<<4&4294967295|F>>>28),F=z+(A^D^V)+M[8]+2272392833&4294967295,z=A+(F<<11&4294967295|F>>>21),F=V+(z^A^D)+M[11]+1839030562&4294967295,V=z+(F<<16&4294967295|F>>>16),F=D+(V^z^A)+M[14]+4259657740&4294967295,D=V+(F<<23&4294967295|F>>>9),F=A+(D^V^z)+M[1]+2763975236&4294967295,A=D+(F<<4&4294967295|F>>>28),F=z+(A^D^V)+M[4]+1272893353&4294967295,z=A+(F<<11&4294967295|F>>>21),F=V+(z^A^D)+M[7]+4139469664&4294967295,V=z+(F<<16&4294967295|F>>>16),F=D+(V^z^A)+M[10]+3200236656&4294967295,D=V+(F<<23&4294967295|F>>>9),F=A+(D^V^z)+M[13]+681279174&4294967295,A=D+(F<<4&4294967295|F>>>28),F=z+(A^D^V)+M[0]+3936430074&4294967295,z=A+(F<<11&4294967295|F>>>21),F=V+(z^A^D)+M[3]+3572445317&4294967295,V=z+(F<<16&4294967295|F>>>16),F=D+(V^z^A)+M[6]+76029189&4294967295,D=V+(F<<23&4294967295|F>>>9),F=A+(D^V^z)+M[9]+3654602809&4294967295,A=D+(F<<4&4294967295|F>>>28),F=z+(A^D^V)+M[12]+3873151461&4294967295,z=A+(F<<11&4294967295|F>>>21),F=V+(z^A^D)+M[15]+530742520&4294967295,V=z+(F<<16&4294967295|F>>>16),F=D+(V^z^A)+M[2]+3299628645&4294967295,D=V+(F<<23&4294967295|F>>>9),F=A+(V^(D|~z))+M[0]+4096336452&4294967295,A=D+(F<<6&4294967295|F>>>26),F=z+(D^(A|~V))+M[7]+1126891415&4294967295,z=A+(F<<10&4294967295|F>>>22),F=V+(A^(z|~D))+M[14]+2878612391&4294967295,V=z+(F<<15&4294967295|F>>>17),F=D+(z^(V|~A))+M[5]+4237533241&4294967295,D=V+(F<<21&4294967295|F>>>11),F=A+(V^(D|~z))+M[12]+1700485571&4294967295,A=D+(F<<6&4294967295|F>>>26),F=z+(D^(A|~V))+M[3]+2399980690&4294967295,z=A+(F<<10&4294967295|F>>>22),F=V+(A^(z|~D))+M[10]+4293915773&4294967295,V=z+(F<<15&4294967295|F>>>17),F=D+(z^(V|~A))+M[1]+2240044497&4294967295,D=V+(F<<21&4294967295|F>>>11),F=A+(V^(D|~z))+M[8]+1873313359&4294967295,A=D+(F<<6&4294967295|F>>>26),F=z+(D^(A|~V))+M[15]+4264355552&4294967295,z=A+(F<<10&4294967295|F>>>22),F=V+(A^(z|~D))+M[6]+2734768916&4294967295,V=z+(F<<15&4294967295|F>>>17),F=D+(z^(V|~A))+M[13]+1309151649&4294967295,D=V+(F<<21&4294967295|F>>>11),F=A+(V^(D|~z))+M[4]+4149444226&4294967295,A=D+(F<<6&4294967295|F>>>26),F=z+(D^(A|~V))+M[11]+3174756917&4294967295,z=A+(F<<10&4294967295|F>>>22),F=V+(A^(z|~D))+M[2]+718787259&4294967295,V=z+(F<<15&4294967295|F>>>17),F=D+(z^(V|~A))+M[9]+3951481745&4294967295,R.g[0]=R.g[0]+A&4294967295,R.g[1]=R.g[1]+(V+(F<<21&4294967295|F>>>11))&4294967295,R.g[2]=R.g[2]+V&4294967295,R.g[3]=R.g[3]+z&4294967295}r.prototype.u=function(R,A){A===void 0&&(A=R.length);for(var D=A-this.blockSize,M=this.B,V=this.h,z=0;z<A;){if(V==0)for(;z<=D;)i(this,R,z),z+=this.blockSize;if(typeof R=="string"){for(;z<A;)if(M[V++]=R.charCodeAt(z++),V==this.blockSize){i(this,M),V=0;break}}else for(;z<A;)if(M[V++]=R[z++],V==this.blockSize){i(this,M),V=0;break}}this.h=V,this.o+=A},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var A=1;A<R.length-8;++A)R[A]=0;var D=8*this.o;for(A=R.length-8;A<R.length;++A)R[A]=D&255,D/=256;for(this.u(R),R=Array(16),A=D=0;4>A;++A)for(var M=0;32>M;M+=8)R[D++]=this.g[A]>>>M&255;return R};function s(R,A){var D=u;return Object.prototype.hasOwnProperty.call(D,R)?D[R]:D[R]=A(R)}function a(R,A){this.h=A;for(var D=[],M=!0,V=R.length-1;0<=V;V--){var z=R[V]|0;M&&z==A||(D[V]=z,M=!1)}this.g=D}var u={};function c(R){return-128<=R&&128>R?s(R,function(A){return new a([A|0],0>A?-1:0)}):new a([R|0],0>R?-1:0)}function f(R){if(isNaN(R)||!isFinite(R))return m;if(0>R)return O(f(-R));for(var A=[],D=1,M=0;R>=D;M++)A[M]=R/D|0,D*=4294967296;return new a(A,0)}function p(R,A){if(R.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(R.charAt(0)=="-")return O(p(R.substring(1),A));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=f(Math.pow(A,8)),M=m,V=0;V<R.length;V+=8){var z=Math.min(8,R.length-V),F=parseInt(R.substring(V,V+z),A);8>z?(z=f(Math.pow(A,z)),M=M.j(z).add(f(F))):(M=M.j(D),M=M.add(f(F)))}return M}var m=c(0),y=c(1),v=c(16777216);t=a.prototype,t.m=function(){if(I(this))return-O(this).m();for(var R=0,A=1,D=0;D<this.g.length;D++){var M=this.i(D);R+=(0<=M?M:4294967296+M)*A,A*=4294967296}return R},t.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(T(this))return"0";if(I(this))return"-"+O(this).toString(R);for(var A=f(Math.pow(R,6)),D=this,M="";;){var V=B(D,A).g;D=S(D,V.j(A));var z=((0<D.g.length?D.g[0]:D.h)>>>0).toString(R);if(D=V,T(D))return z+M;for(;6>z.length;)z="0"+z;M=z+M}},t.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function T(R){if(R.h!=0)return!1;for(var A=0;A<R.g.length;A++)if(R.g[A]!=0)return!1;return!0}function I(R){return R.h==-1}t.l=function(R){return R=S(this,R),I(R)?-1:T(R)?0:1};function O(R){for(var A=R.g.length,D=[],M=0;M<A;M++)D[M]=~R.g[M];return new a(D,~R.h).add(y)}t.abs=function(){return I(this)?O(this):this},t.add=function(R){for(var A=Math.max(this.g.length,R.g.length),D=[],M=0,V=0;V<=A;V++){var z=M+(this.i(V)&65535)+(R.i(V)&65535),F=(z>>>16)+(this.i(V)>>>16)+(R.i(V)>>>16);M=F>>>16,z&=65535,F&=65535,D[V]=F<<16|z}return new a(D,D[D.length-1]&-2147483648?-1:0)};function S(R,A){return R.add(O(A))}t.j=function(R){if(T(this)||T(R))return m;if(I(this))return I(R)?O(this).j(O(R)):O(O(this).j(R));if(I(R))return O(this.j(O(R)));if(0>this.l(v)&&0>R.l(v))return f(this.m()*R.m());for(var A=this.g.length+R.g.length,D=[],M=0;M<2*A;M++)D[M]=0;for(M=0;M<this.g.length;M++)for(var V=0;V<R.g.length;V++){var z=this.i(M)>>>16,F=this.i(M)&65535,ae=R.i(V)>>>16,ce=R.i(V)&65535;D[2*M+2*V]+=F*ce,k(D,2*M+2*V),D[2*M+2*V+1]+=z*ce,k(D,2*M+2*V+1),D[2*M+2*V+1]+=F*ae,k(D,2*M+2*V+1),D[2*M+2*V+2]+=z*ae,k(D,2*M+2*V+2)}for(M=0;M<A;M++)D[M]=D[2*M+1]<<16|D[2*M];for(M=A;M<2*A;M++)D[M]=0;return new a(D,0)};function k(R,A){for(;(R[A]&65535)!=R[A];)R[A+1]+=R[A]>>>16,R[A]&=65535,A++}function C(R,A){this.g=R,this.h=A}function B(R,A){if(T(A))throw Error("division by zero");if(T(R))return new C(m,m);if(I(R))return A=B(O(R),A),new C(O(A.g),O(A.h));if(I(A))return A=B(R,O(A)),new C(O(A.g),A.h);if(30<R.g.length){if(I(R)||I(A))throw Error("slowDivide_ only works with positive integers.");for(var D=y,M=A;0>=M.l(R);)D=G(D),M=G(M);var V=$(D,1),z=$(M,1);for(M=$(M,2),D=$(D,2);!T(M);){var F=z.add(M);0>=F.l(R)&&(V=V.add(D),z=F),M=$(M,1),D=$(D,1)}return A=S(R,V.j(A)),new C(V,A)}for(V=m;0<=R.l(A);){for(D=Math.max(1,Math.floor(R.m()/A.m())),M=Math.ceil(Math.log(D)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),z=f(D),F=z.j(A);I(F)||0<F.l(R);)D-=M,z=f(D),F=z.j(A);T(z)&&(z=y),V=V.add(z),R=S(R,F)}return new C(V,R)}t.A=function(R){return B(this,R).h},t.and=function(R){for(var A=Math.max(this.g.length,R.g.length),D=[],M=0;M<A;M++)D[M]=this.i(M)&R.i(M);return new a(D,this.h&R.h)},t.or=function(R){for(var A=Math.max(this.g.length,R.g.length),D=[],M=0;M<A;M++)D[M]=this.i(M)|R.i(M);return new a(D,this.h|R.h)},t.xor=function(R){for(var A=Math.max(this.g.length,R.g.length),D=[],M=0;M<A;M++)D[M]=this.i(M)^R.i(M);return new a(D,this.h^R.h)};function G(R){for(var A=R.g.length+1,D=[],M=0;M<A;M++)D[M]=R.i(M)<<1|R.i(M-1)>>>31;return new a(D,R.h)}function $(R,A){var D=A>>5;A%=32;for(var M=R.g.length-D,V=[],z=0;z<M;z++)V[z]=0<A?R.i(z+D)>>>A|R.i(z+D+1)<<32-A:R.i(z+D);return new a(V,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,fI=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=p,so=a}).apply(typeof N0<"u"?N0:typeof self<"u"?self:typeof window<"u"?window:{});var gh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var pI,Xl,mI,Hh,hg,gI,_I,yI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,E){return h==Array.prototype||h==Object.prototype||(h[_]=E.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof gh=="object"&&gh];for(var _=0;_<h.length;++_){var E=h[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function i(h,_){if(_)e:{var E=r;h=h.split(".");for(var b=0;b<h.length-1;b++){var q=h[b];if(!(q in E))break e;E=E[q]}h=h[h.length-1],b=E[h],_=_(b),_!=b&&_!=null&&e(E,h,{configurable:!0,writable:!0,value:_})}}function s(h,_){h instanceof String&&(h+="");var E=0,b=!1,q={next:function(){if(!b&&E<h.length){var Z=E++;return{value:_(Z,h[Z]),done:!1}}return b=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}i("Array.prototype.values",function(h){return h||function(){return s(this,function(_,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function c(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function f(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function p(h,_,E){return h.call.apply(h.bind,arguments)}function m(h,_,E){if(!h)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,b),h.apply(_,q)}}return function(){return h.apply(_,arguments)}}function y(h,_,E){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,y.apply(null,arguments)}function v(h,_){var E=Array.prototype.slice.call(arguments,1);return function(){var b=E.slice();return b.push.apply(b,arguments),h.apply(this,b)}}function T(h,_){function E(){}E.prototype=_.prototype,h.aa=_.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(b,q,Z){for(var oe=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)oe[Ze-2]=arguments[Ze];return _.prototype[q].apply(b,oe)}}function I(h){const _=h.length;if(0<_){const E=Array(_);for(let b=0;b<_;b++)E[b]=h[b];return E}return[]}function O(h,_){for(let E=1;E<arguments.length;E++){const b=arguments[E];if(c(b)){const q=h.length||0,Z=b.length||0;h.length=q+Z;for(let oe=0;oe<Z;oe++)h[q+oe]=b[oe]}else h.push(b)}}class S{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function k(h){return/^[\s\xa0]*$/.test(h)}function C(){var h=u.navigator;return h&&(h=h.userAgent)?h:""}function B(h){return B[" "](h),h}B[" "]=function(){};var G=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function $(h,_,E){for(const b in h)_.call(E,h[b],b,h)}function R(h,_){for(const E in h)_.call(void 0,h[E],E,h)}function A(h){const _={};for(const E in h)_[E]=h[E];return _}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(h,_){let E,b;for(let q=1;q<arguments.length;q++){b=arguments[q];for(E in b)h[E]=b[E];for(let Z=0;Z<D.length;Z++)E=D[Z],Object.prototype.hasOwnProperty.call(b,E)&&(h[E]=b[E])}}function V(h){var _=1;h=h.split(":");const E=[];for(;0<_&&h.length;)E.push(h.shift()),_--;return h.length&&E.push(h.join(":")),E}function z(h){u.setTimeout(()=>{throw h},0)}function F(){var h=me;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class ae{constructor(){this.h=this.g=null}add(_,E){const b=ce.get();b.set(_,E),this.h?this.h.next=b:this.g=b,this.h=b}}var ce=new S(()=>new Oe,h=>h.reset());class Oe{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ze,J=!1,me=new ae,N=()=>{const h=u.Promise.resolve(void 0);ze=()=>{h.then(fe)}};var fe=()=>{for(var h;h=F();){try{h.h.call(h.g)}catch(E){z(E)}var _=ce;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}J=!1};function _e(){this.s=this.s,this.C=this.C}_e.prototype.s=!1,_e.prototype.ma=function(){this.s||(this.s=!0,this.N())},_e.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var Ce=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};u.addEventListener("test",E,_),u.removeEventListener("test",E,_)}catch{}return h}();function xe(h,_){if(j.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,b=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(G){e:{try{B(_.nodeName);var q=!0;break e}catch{}q=!1}q||(_=null)}}else E=="mouseover"?_=h.fromElement:E=="mouseout"&&(_=h.toElement);this.relatedTarget=_,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:X[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&xe.aa.h.call(this)}}T(xe,j);var X={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var de="closure_listenable_"+(1e6*Math.random()|0),Ue=0;function xt(h,_,E,b,q){this.listener=h,this.proxy=null,this.src=_,this.type=E,this.capture=!!b,this.ha=q,this.key=++Ue,this.da=this.fa=!1}function Rt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Zt(h){this.src=h,this.g={},this.h=0}Zt.prototype.add=function(h,_,E,b,q){var Z=h.toString();h=this.g[Z],h||(h=this.g[Z]=[],this.h++);var oe=Xr(h,_,b,q);return-1<oe?(_=h[oe],E||(_.fa=!1)):(_=new xt(_,this.src,Z,!!b,q),_.fa=E,h.push(_)),_};function Rn(h,_){var E=_.type;if(E in h.g){var b=h.g[E],q=Array.prototype.indexOf.call(b,_,void 0),Z;(Z=0<=q)&&Array.prototype.splice.call(b,q,1),Z&&(Rt(_),h.g[E].length==0&&(delete h.g[E],h.h--))}}function Xr(h,_,E,b){for(var q=0;q<h.length;++q){var Z=h[q];if(!Z.da&&Z.listener==_&&Z.capture==!!E&&Z.ha==b)return q}return-1}var Os="closure_lm_"+(1e6*Math.random()|0),ei={};function Ri(h,_,E,b,q){if(Array.isArray(_)){for(var Z=0;Z<_.length;Z++)Ri(h,_[Z],E,b,q);return null}return E=Ro(E),h&&h[de]?h.K(_,E,f(b)?!!b.capture:!1,q):Ni(h,_,E,!1,b,q)}function Ni(h,_,E,b,q,Z){if(!_)throw Error("Invalid event type");var oe=f(q)?!!q.capture:!!q,Ze=Di(h);if(Ze||(h[Os]=Ze=new Zt(h)),E=Ze.add(_,E,b,oe,Z),E.proxy)return E;if(b=Li(),E.proxy=b,b.src=h,b.listener=E,h.addEventListener)Ce||(q=oe),q===void 0&&(q=!1),h.addEventListener(_.toString(),b,q);else if(h.attachEvent)h.attachEvent(Oi(_.toString()),b);else if(h.addListener&&h.removeListener)h.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Li(){function h(E){return _.call(h.src,h.listener,E)}const _=bo;return h}function Ds(h,_,E,b,q){if(Array.isArray(_))for(var Z=0;Z<_.length;Z++)Ds(h,_[Z],E,b,q);else b=f(b)?!!b.capture:!!b,E=Ro(E),h&&h[de]?(h=h.i,_=String(_).toString(),_ in h.g&&(Z=h.g[_],E=Xr(Z,E,b,q),-1<E&&(Rt(Z[E]),Array.prototype.splice.call(Z,E,1),Z.length==0&&(delete h.g[_],h.h--)))):h&&(h=Di(h))&&(_=h.g[_.toString()],h=-1,_&&(h=Xr(_,E,b,q)),(E=-1<h?_[h]:null)&&ti(E))}function ti(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[de])Rn(_.i,h);else{var E=h.type,b=h.proxy;_.removeEventListener?_.removeEventListener(E,b,h.capture):_.detachEvent?_.detachEvent(Oi(E),b):_.addListener&&_.removeListener&&_.removeListener(b),(E=Di(_))?(Rn(E,h),E.h==0&&(E.src=null,_[Os]=null)):Rt(h)}}}function Oi(h){return h in ei?ei[h]:ei[h]="on"+h}function bo(h,_){if(h.da)h=!0;else{_=new xe(_,this);var E=h.listener,b=h.ha||h.src;h.fa&&ti(h),h=E.call(b,_)}return h}function Di(h){return h=h[Os],h instanceof Zt?h:null}var Ms="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ro(h){return typeof h=="function"?h:(h[Ms]||(h[Ms]=function(_){return h.handleEvent(_)}),h[Ms])}function Q(){_e.call(this),this.i=new Zt(this),this.M=this,this.F=null}T(Q,_e),Q.prototype[de]=!0,Q.prototype.removeEventListener=function(h,_,E,b){Ds(this,h,_,E,b)};function re(h,_){var E,b=h.F;if(b)for(E=[];b;b=b.F)E.push(b);if(h=h.M,b=_.type||_,typeof _=="string")_=new j(_,h);else if(_ instanceof j)_.target=_.target||h;else{var q=_;_=new j(b,h),M(_,q)}if(q=!0,E)for(var Z=E.length-1;0<=Z;Z--){var oe=_.g=E[Z];q=ve(oe,b,!0,_)&&q}if(oe=_.g=h,q=ve(oe,b,!0,_)&&q,q=ve(oe,b,!1,_)&&q,E)for(Z=0;Z<E.length;Z++)oe=_.g=E[Z],q=ve(oe,b,!1,_)&&q}Q.prototype.N=function(){if(Q.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var E=h.g[_],b=0;b<E.length;b++)Rt(E[b]);delete h.g[_],h.h--}}this.F=null},Q.prototype.K=function(h,_,E,b){return this.i.add(String(h),_,!1,E,b)},Q.prototype.L=function(h,_,E,b){return this.i.add(String(h),_,!0,E,b)};function ve(h,_,E,b){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var q=!0,Z=0;Z<_.length;++Z){var oe=_[Z];if(oe&&!oe.da&&oe.capture==E){var Ze=oe.listener,Tt=oe.ha||oe.src;oe.fa&&Rn(h.i,oe),q=Ze.call(Tt,b)!==!1&&q}}return q&&!b.defaultPrevented}function Le(h,_,E){if(typeof h=="function")E&&(h=y(h,E));else if(h&&typeof h.handleEvent=="function")h=y(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:u.setTimeout(h,_||0)}function qe(h){h.g=Le(()=>{h.g=null,h.i&&(h.i=!1,qe(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Qt extends _e{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:qe(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ln(h){_e.call(this),this.h=h,this.g={}}T(ln,_e);var un=[];function Wn(h){$(h.g,function(_,E){this.g.hasOwnProperty(E)&&ti(_)},h),h.g={}}ln.prototype.N=function(){ln.aa.N.call(this),Wn(this)},ln.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gn=u.JSON.stringify,zt=u.JSON.parse,_n=class{stringify(h){return u.JSON.stringify(h,void 0)}parse(h){return u.JSON.parse(h,void 0)}};function cn(){}cn.prototype.h=null;function Ec(h){return h.h||(h.h=h.i())}function sl(){}var Mi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function No(){j.call(this,"d")}T(No,j);function ol(){j.call(this,"c")}T(ol,j);var ni={},xc=null;function Lo(){return xc=xc||new Q}ni.La="serverreachability";function Tc(h){j.call(this,ni.La,h)}T(Tc,j);function Vs(h){const _=Lo();re(_,new Tc(_))}ni.STAT_EVENT="statevent";function Oo(h,_){j.call(this,ni.STAT_EVENT,h),this.stat=_}T(Oo,j);function Ut(h){const _=Lo();re(_,new Oo(_,h))}ni.Ma="timingevent";function Sc(h,_){j.call(this,ni.Ma,h),this.size=_}T(Sc,j);function Fs(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){h()},_)}function js(){this.g=!0}js.prototype.xa=function(){this.g=!1};function Kn(h,_,E,b,q,Z){h.info(function(){if(h.g)if(Z)for(var oe="",Ze=Z.split("&"),Tt=0;Tt<Ze.length;Tt++){var $e=Ze[Tt].split("=");if(1<$e.length){var Xe=$e[0];$e=$e[1];var ht=Xe.split("_");oe=2<=ht.length&&ht[1]=="type"?oe+(Xe+"="+$e+"&"):oe+(Xe+"=redacted&")}}else oe=null;else oe=Z;return"XMLHTTP REQ ("+b+") [attempt "+q+"]: "+_+`
`+E+`
`+oe})}function ge(h,_,E,b,q,Z,oe){h.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+q+"]: "+_+`
`+E+`
`+Z+" "+oe})}function ri(h,_,E,b){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Pc(h,E)+(b?" "+b:"")})}function Ic(h,_){h.info(function(){return"TIMEOUT: "+_})}js.prototype.info=function(){};function Pc(h,_){if(!h.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E){for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var b=E[h];if(!(2>b.length)){var q=b[1];if(Array.isArray(q)&&!(1>q.length)){var Z=q[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var oe=1;oe<q.length;oe++)q[oe]=""}}}}return Gn(E)}catch{return _}}var zs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Do={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Mo;function ur(){}T(ur,cn),ur.prototype.g=function(){return new XMLHttpRequest},ur.prototype.i=function(){return{}},Mo=new ur;function cr(h,_,E,b){this.j=h,this.i=_,this.l=E,this.R=b||1,this.U=new ln(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Cc}function Cc(){this.i=null,this.g="",this.h=!1}var kc={},al={};function ll(h,_,E){h.L=1,h.v=Qn(gt(_)),h.m=E,h.P=!0,ul(h,null)}function ul(h,_){h.F=Date.now(),Fo(h),h.A=gt(h.v);var E=h.A,b=h.R;Array.isArray(b)||(b=[String(b)]),Rc(E.i,"t",b),h.C=0,E=h.j.J,h.h=new Cc,h.g=Fc(h.j,E?_:null,!h.m),0<h.O&&(h.M=new Qt(y(h.Y,h,h.g),h.O)),_=h.U,E=h.g,b=h.ca;var q="readystatechange";Array.isArray(q)||(q&&(un[0]=q.toString()),q=un);for(var Z=0;Z<q.length;Z++){var oe=Ri(E,q[Z],b||_.handleEvent,!1,_.h||_);if(!oe)break;_.g[oe.key]=oe}_=h.H?A(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Vs(),Kn(h.i,h.u,h.A,h.l,h.R,h.m)}cr.prototype.ca=function(h){h=h.target;const _=this.M;_&&hn(h)==3?_.j():this.Y(h)},cr.prototype.Y=function(h){try{if(h==this.g)e:{const ht=hn(this.g);var _=this.g.Ba();const $i=this.g.Z();if(!(3>ht)&&(ht!=3||this.g&&(this.h.h||this.g.oa()||Il(this.g)))){this.J||ht!=4||_==7||(_==8||0>=$i?Vs(3):Vs(2)),cl(this);var E=this.g.Z();this.X=E;t:if(Ac(this)){var b=Il(this.g);h="";var q=b.length,Z=hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ii(this),Us(this);var oe="";break t}this.h.i=new u.TextDecoder}for(_=0;_<q;_++)this.h.h=!0,h+=this.h.i.decode(b[_],{stream:!(Z&&_==q-1)});b.length=0,this.h.g+=h,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=E==200,ge(this.i,this.u,this.A,this.l,this.R,ht,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Ze,Tt=this.g;if((Ze=Tt.g?Tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(Ze)){var $e=Ze;break t}}$e=null}if(E=$e)ri(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Bs(this,E);else{this.o=!1,this.s=3,Ut(12),ii(this),Us(this);break e}}if(this.P){E=!0;let yt;for(;!this.J&&this.C<oe.length;)if(yt=Vo(this,oe),yt==al){ht==4&&(this.s=4,Ut(14),E=!1),ri(this.i,this.l,null,"[Incomplete Response]");break}else if(yt==kc){this.s=4,Ut(15),ri(this.i,this.l,oe,"[Invalid Chunk]"),E=!1;break}else ri(this.i,this.l,yt,null),Bs(this,yt);if(Ac(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ht!=4||oe.length!=0||this.h.h||(this.s=1,Ut(16),E=!1),this.o=this.o&&E,!E)ri(this.i,this.l,oe,"[Invalid Chunked Response]"),ii(this),Us(this);else if(0<oe.length&&!this.W){this.W=!0;var Xe=this.j;Xe.g==this&&Xe.ba&&!Xe.M&&(Xe.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),Go(Xe),Xe.M=!0,Ut(11))}}else ri(this.i,this.l,oe,null),Bs(this,oe);ht==4&&ii(this),this.o&&!this.J&&(ht==4?Cl(this.j,this):(this.o=!1,Fo(this)))}else qf(this.g),E==400&&0<oe.indexOf("Unknown SID")?(this.s=3,Ut(12)):(this.s=0,Ut(13)),ii(this),Us(this)}}}catch{}finally{}};function Ac(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Vo(h,_){var E=h.C,b=_.indexOf(`
`,E);return b==-1?al:(E=Number(_.substring(E,b)),isNaN(E)?kc:(b+=1,b+E>_.length?al:(_=_.slice(b,b+E),h.C=b+E,_)))}cr.prototype.cancel=function(){this.J=!0,ii(this)};function Fo(h){h.S=Date.now()+h.I,bc(h,h.I)}function bc(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Fs(y(h.ba,h),_)}function cl(h){h.B&&(u.clearTimeout(h.B),h.B=null)}cr.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Ic(this.i,this.A),this.L!=2&&(Vs(),Ut(17)),ii(this),this.s=2,Us(this)):bc(this,this.S-h)};function Us(h){h.j.G==0||h.J||Cl(h.j,h)}function ii(h){cl(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,Wn(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function Bs(h,_){try{var E=h.j;if(E.G!=0&&(E.g==h||Fe(E.h,h))){if(!h.K&&Fe(E.h,h)&&E.G==3){try{var b=E.Da.g.parse(_)}catch{b=null}if(Array.isArray(b)&&b.length==3){var q=b;if(q[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<h.F)Zo(E),qo(E);else break e;Wo(E),Ut(18)}}else E.za=q[1],0<E.za-E.T&&37500>q[2]&&E.F&&E.v==0&&!E.C&&(E.C=Fs(y(E.Za,E),6e3));if(1>=Vi(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else ui(E,11)}else if((h.K||E.g==h)&&Zo(E),!k(_))for(q=E.Da.g.parse(_),_=0;_<q.length;_++){let $e=q[_];if(E.T=$e[0],$e=$e[1],E.G==2)if($e[0]=="c"){E.K=$e[1],E.ia=$e[2];const Xe=$e[3];Xe!=null&&(E.la=Xe,E.j.info("VER="+E.la));const ht=$e[4];ht!=null&&(E.Aa=ht,E.j.info("SVER="+E.Aa));const $i=$e[5];$i!=null&&typeof $i=="number"&&0<$i&&(b=1.5*$i,E.L=b,E.j.info("backChannelRequestTimeoutMs_="+b)),b=E;const yt=h.g;if(yt){const Yo=yt.g?yt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yo){var Z=b.h;Z.g||Yo.indexOf("spdy")==-1&&Yo.indexOf("quic")==-1&&Yo.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(et(Z,Z.h),Z.h=null))}if(b.D){const Rr=yt.g?yt.g.getResponseHeader("X-HTTP-Session-Id"):null;Rr&&(b.ya=Rr,Ie(b.I,b.D,Rr))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms")),b=E;var oe=h;if(b.qa=Qo(b,b.J?b.ia:null,b.W),oe.K){Hs(b.h,oe);var Ze=oe,Tt=b.L;Tt&&(Ze.I=Tt),Ze.B&&(cl(Ze),Fo(Ze)),b.g=oe}else fr(b);0<E.i.length&&Bi(E)}else $e[0]!="stop"&&$e[0]!="close"||ui(E,7);else E.G==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?ui(E,7):Ho(E):$e[0]!="noop"&&E.l&&E.l.ta($e),E.v=0)}}Vs(4)}catch{}}var $s=class{constructor(h,_){this.g=h,this.map=_}};function hl(h){this.l=h||10,u.PerformanceNavigationTiming?(h=u.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function dl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Vi(h){return h.h?1:h.g?h.g.size:0}function Fe(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function et(h,_){h.g?h.g.add(_):h.h=_}function Hs(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}hl.prototype.cancel=function(){if(this.i=si(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function si(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const E of h.g.values())_=_.concat(E.D);return _}return I(h.i)}function Fi(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(c(h)){for(var _=[],E=h.length,b=0;b<E;b++)_.push(h[b]);return _}_=[],E=0;for(b in h)_[E++]=h[b];return _}function fl(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(c(h)||typeof h=="string"){var _=[];h=h.length;for(var E=0;E<h;E++)_.push(E);return _}_=[],E=0;for(const b in h)_[E++]=b;return _}}}function be(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(c(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var E=fl(h),b=Fi(h),q=b.length,Z=0;Z<q;Z++)_.call(void 0,b[Z],E&&E[Z],h)}var at=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pl(h,_){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var b=h[E].indexOf("="),q=null;if(0<=b){var Z=h[E].substring(0,b);q=h[E].substring(b+1)}else Z=h[E];_(Z,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Zn(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Zn){this.h=h.h,jo(this,h.j),this.o=h.o,this.g=h.g,oi(this,h.s),this.l=h.l;var _=h.i,E=new ai;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),Ar(this,E),this.m=h.m}else h&&(_=String(h).match(at))?(this.h=!1,jo(this,_[1]||"",!0),this.o=hr(_[2]||""),this.g=hr(_[3]||"",!0),oi(this,_[4]),this.l=hr(_[5]||"",!0),Ar(this,_[6]||"",!0),this.m=hr(_[7]||"")):(this.h=!1,this.i=new ai(null,this.h))}Zn.prototype.toString=function(){var h=[],_=this.j;_&&h.push(dr(_,ji,!0),":");var E=this.g;return(E||_=="file")&&(h.push("//"),(_=this.o)&&h.push(dr(_,ji,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&h.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(dr(E,E.charAt(0)=="/"?_l:gl,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",dr(E,yl)),h.join("")};function gt(h){return new Zn(h)}function jo(h,_,E){h.j=E?hr(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function oi(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function Ar(h,_,E){_ instanceof ai?(h.i=_,Yn(h.i,h.h)):(E||(_=dr(_,zo)),h.i=new ai(_,h.h))}function Ie(h,_,E){h.i.set(_,E)}function Qn(h){return Ie(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function hr(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function dr(h,_,E){return typeof h=="string"?(h=encodeURI(h).replace(_,ml),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function ml(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var ji=/[#\/\?@]/g,gl=/[#\?:]/g,_l=/[#\?]/g,zo=/[#\?@]/g,yl=/#/g;function ai(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Nn(h){h.g||(h.g=new Map,h.h=0,h.i&&pl(h.i,function(_,E){h.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}t=ai.prototype,t.add=function(h,_){Nn(this),this.i=null,h=we(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(_),this.h+=1,this};function vl(h,_){Nn(h),_=we(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function Uo(h,_){return Nn(h),_=we(h,_),h.g.has(_)}t.forEach=function(h,_){Nn(this),this.g.forEach(function(E,b){E.forEach(function(q){h.call(_,q,b,this)},this)},this)},t.na=function(){Nn(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let b=0;b<_.length;b++){const q=h[b];for(let Z=0;Z<q.length;Z++)E.push(_[b])}return E},t.V=function(h){Nn(this);let _=[];if(typeof h=="string")Uo(this,h)&&(_=_.concat(this.g.get(we(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)_=_.concat(h[E])}return _},t.set=function(h,_){return Nn(this),this.i=null,h=we(this,h),Uo(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},t.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function Rc(h,_,E){vl(h,_),0<E.length&&(h.i=null,h.g.set(we(h,_),I(E)),h.h+=E.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var b=_[E];const Z=encodeURIComponent(String(b)),oe=this.V(b);for(b=0;b<oe.length;b++){var q=Z;oe[b]!==""&&(q+="="+encodeURIComponent(String(oe[b]))),h.push(q)}}return this.i=h.join("&")};function we(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Yn(h,_){_&&!h.j&&(Nn(h),h.i=null,h.g.forEach(function(E,b){var q=b.toLowerCase();b!=q&&(vl(this,b),Rc(this,q,E))},h)),h.j=_}function Je(h,_){const E=new js;if(u.Image){const b=new Image;b.onload=v(Jn,E,"TestLoadImage: loaded",!0,_,b),b.onerror=v(Jn,E,"TestLoadImage: error",!1,_,b),b.onabort=v(Jn,E,"TestLoadImage: abort",!1,_,b),b.ontimeout=v(Jn,E,"TestLoadImage: timeout",!1,_,b),u.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=h}else _(!1)}function Nc(h,_){const E=new js,b=new AbortController,q=setTimeout(()=>{b.abort(),Jn(E,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:b.signal}).then(Z=>{clearTimeout(q),Z.ok?Jn(E,"TestPingServer: ok",!0,_):Jn(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(q),Jn(E,"TestPingServer: error",!1,_)})}function Jn(h,_,E,b,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),b(E)}catch{}}function wl(){this.g=new _n}function El(h,_,E){const b=E||"";try{be(h,function(q,Z){let oe=q;f(q)&&(oe=Gn(q)),_.push(b+Z+"="+encodeURIComponent(oe))})}catch(q){throw _.push(b+"type="+encodeURIComponent("_badmap")),q}}function Xn(h){this.l=h.Ub||null,this.j=h.eb||!1}T(Xn,cn),Xn.prototype.g=function(){return new zi(this.l,this.j)},Xn.prototype.i=function(h){return function(){return h}}({});function zi(h,_){Q.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(zi,Q),t=zi.prototype,t.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Ln(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||u).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ct(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ln(this)),this.g&&(this.readyState=3,Ln(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ui(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ui(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?ct(this):Ln(this),this.readyState==3&&Ui(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,ct(this))},t.Qa=function(h){this.g&&(this.response=h,ct(this))},t.ga=function(){this.g&&ct(this)};function ct(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Ln(h)}t.setRequestHeader=function(h,_){this.u.append(h,_)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=_.next();return h.join(`\r
`)};function Ln(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(zi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function xl(h){let _="";return $(h,function(E,b){_+=b,_+=":",_+=E,_+=`\r
`}),_}function Bo(h,_,E){e:{for(b in E){var b=!1;break e}b=!0}b||(E=xl(E),typeof h=="string"?E!=null&&encodeURIComponent(String(E)):Ie(h,_,E))}function lt(h){Q.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(lt,Q);var Lc=/^https?$/i,Tl=["POST","PUT"];t=lt.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,_,E,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Mo.g(),this.v=this.o?Ec(this.o):Ec(Mo),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(Z){Oc(this,Z);return}if(h=E||"",E=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var q in b)E.set(q,b[q]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const Z of b.keys())E.set(Z,b.get(Z));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(E.keys()).find(Z=>Z.toLowerCase()=="content-type"),q=u.FormData&&h instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Tl,_,void 0))||b||q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,oe]of E)this.g.setRequestHeader(Z,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{yn(this),this.u=!0,this.g.send(h),this.u=!1}catch(Z){Oc(this,Z)}};function Oc(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,Sl(h),$o(h)}function Sl(h){h.A||(h.A=!0,re(h,"complete"),re(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,re(this,"complete"),re(this,"abort"),$o(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$o(this,!0)),lt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Me(this):this.bb())},t.bb=function(){Me(this)};function Me(h){if(h.h&&typeof a<"u"&&(!h.v[1]||hn(h)!=4||h.Z()!=2)){if(h.u&&hn(h)==4)Le(h.Ea,0,h);else if(re(h,"readystatechange"),hn(h)==4){h.h=!1;try{const oe=h.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var b;if(b=oe===0){var q=String(h.D).match(at)[1]||null;!q&&u.self&&u.self.location&&(q=u.self.location.protocol.slice(0,-1)),b=!Lc.test(q?q.toLowerCase():"")}E=b}if(E)re(h,"complete"),re(h,"success");else{h.m=6;try{var Z=2<hn(h)?h.g.statusText:""}catch{Z=""}h.l=Z+" ["+h.Z()+"]",Sl(h)}}finally{$o(h)}}}}function $o(h,_){if(h.g){yn(h);const E=h.g,b=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||re(h,"ready");try{E.onreadystatechange=b}catch{}}}function yn(h){h.I&&(u.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function hn(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<hn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),zt(_)}};function Il(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function qf(h){const _={};h=(h.g&&2<=hn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<h.length;b++){if(k(h[b]))continue;var E=V(h[b]);const q=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Z=_[q]||[];_[q]=Z,Z.push(E)}R(_,function(b){return b.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function li(h,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||_}function Dc(h){this.Aa=0,this.i=[],this.j=new js,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=li("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=li("baseRetryDelayMs",5e3,h),this.cb=li("retryDelaySeedMs",1e4,h),this.Wa=li("forwardChannelMaxRetries",2,h),this.wa=li("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new hl(h&&h.concurrentRequestLimit),this.Da=new wl,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Dc.prototype,t.la=8,t.G=1,t.connect=function(h,_,E,b){Ut(0),this.W=h,this.H=_||{},E&&b!==void 0&&(this.H.OSID=E,this.H.OAID=b),this.F=this.X,this.I=Qo(this,null,this.W),Bi(this)};function Ho(h){if(Mc(h),h.G==3){var _=h.U++,E=gt(h.I);if(Ie(E,"SID",h.K),Ie(E,"RID",_),Ie(E,"TYPE","terminate"),qs(h,E),_=new cr(h,h.j,_),_.L=2,_.v=Qn(gt(E)),E=!1,u.navigator&&u.navigator.sendBeacon)try{E=u.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&u.Image&&(new Image().src=_.v,E=!0),E||(_.g=Fc(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Fo(_)}Vc(h)}function qo(h){h.g&&(Go(h),h.g.cancel(),h.g=null)}function Mc(h){qo(h),h.u&&(u.clearTimeout(h.u),h.u=null),Zo(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&u.clearTimeout(h.s),h.s=null)}function Bi(h){if(!dl(h.h)&&!h.s){h.s=!0;var _=h.Ga;ze||N(),J||(ze(),J=!0),me.add(_,h),h.B=0}}function Wf(h,_){return Vi(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Fs(y(h.Ga,h,_),kl(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const q=new cr(this,this.j,h);let Z=this.o;if(this.S&&(Z?(Z=A(Z),M(Z,this.S)):Z=this.S),this.m!==null||this.O||(q.H=Z,Z=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var b=this.i[E];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(_+=b,4096<_){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=Pl(this,q,_),E=gt(this.I),Ie(E,"RID",h),Ie(E,"CVER",22),this.D&&Ie(E,"X-HTTP-Session-Id",this.D),qs(this,E),Z&&(this.O?_="headers="+encodeURIComponent(String(xl(Z)))+"&"+_:this.m&&Bo(E,this.m,Z)),et(this.h,q),this.Ua&&Ie(E,"TYPE","init"),this.P?(Ie(E,"$req",_),Ie(E,"SID","null"),q.T=!0,ll(q,E,null)):ll(q,E,_),this.G=2}}else this.G==3&&(h?On(this,h):this.i.length==0||dl(this.h)||On(this))};function On(h,_){var E;_?E=_.l:E=h.U++;const b=gt(h.I);Ie(b,"SID",h.K),Ie(b,"RID",E),Ie(b,"AID",h.T),qs(h,b),h.m&&h.o&&Bo(b,h.m,h.o),E=new cr(h,h.j,E,h.B+1),h.m===null&&(E.H=h.o),_&&(h.i=_.D.concat(h.i)),_=Pl(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),et(h.h,E),ll(E,b,_)}function qs(h,_){h.H&&$(h.H,function(E,b){Ie(_,b,E)}),h.l&&be({},function(E,b){Ie(_,b,E)})}function Pl(h,_,E){E=Math.min(h.i.length,E);var b=h.l?y(h.l.Na,h.l,h):null;e:{var q=h.i;let Z=-1;for(;;){const oe=["count="+E];Z==-1?0<E?(Z=q[0].g,oe.push("ofs="+Z)):Z=0:oe.push("ofs="+Z);let Ze=!0;for(let Tt=0;Tt<E;Tt++){let $e=q[Tt].g;const Xe=q[Tt].map;if($e-=Z,0>$e)Z=Math.max(0,q[Tt].g-100),Ze=!1;else try{El(Xe,oe,"req"+$e+"_")}catch{b&&b(Xe)}}if(Ze){b=oe.join("&");break e}}}return h=h.i.splice(0,E),_.D=h,b}function fr(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;ze||N(),J||(ze(),J=!0),me.add(_,h),h.v=0}}function Wo(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Fs(y(h.Fa,h),kl(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,Ko(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Fs(y(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ut(10),qo(this),Ko(this))};function Go(h){h.A!=null&&(u.clearTimeout(h.A),h.A=null)}function Ko(h){h.g=new cr(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=gt(h.qa);Ie(_,"RID","rpc"),Ie(_,"SID",h.K),Ie(_,"AID",h.T),Ie(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&Ie(_,"TO",h.ja),Ie(_,"TYPE","xmlhttp"),qs(h,_),h.m&&h.o&&Bo(_,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=Qn(gt(_)),E.m=null,E.P=!0,ul(E,h)}t.Za=function(){this.C!=null&&(this.C=null,qo(this),Wo(this),Ut(19))};function Zo(h){h.C!=null&&(u.clearTimeout(h.C),h.C=null)}function Cl(h,_){var E=null;if(h.g==_){Zo(h),Go(h),h.g=null;var b=2}else if(Fe(h.h,_))E=_.D,Hs(h.h,_),b=1;else return;if(h.G!=0){if(_.o)if(b==1){E=_.m?_.m.length:0,_=Date.now()-_.F;var q=h.B;b=Lo(),re(b,new Sc(b,E)),Bi(h)}else fr(h);else if(q=_.s,q==3||q==0&&0<_.X||!(b==1&&Wf(h,_)||b==2&&Wo(h)))switch(E&&0<E.length&&(_=h.h,_.i=_.i.concat(E)),q){case 1:ui(h,5);break;case 4:ui(h,10);break;case 3:ui(h,6);break;default:ui(h,2)}}}function kl(h,_){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*_}function ui(h,_){if(h.j.info("Error code "+_),_==2){var E=y(h.fb,h),b=h.Xa;const q=!b;b=new Zn(b||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||jo(b,"https"),Qn(b),q?Je(b.toString(),E):Nc(b.toString(),E)}else Ut(2);h.G=0,h.l&&h.l.sa(_),Vc(h),Mc(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function Vc(h){if(h.G=0,h.ka=[],h.l){const _=si(h.h);(_.length!=0||h.i.length!=0)&&(O(h.ka,_),O(h.ka,h.i),h.h.i.length=0,I(h.i),h.i.length=0),h.l.ra()}}function Qo(h,_,E){var b=E instanceof Zn?gt(E):new Zn(E);if(b.g!="")_&&(b.g=_+"."+b.g),oi(b,b.s);else{var q=u.location;b=q.protocol,_=_?_+"."+q.hostname:q.hostname,q=+q.port;var Z=new Zn(null);b&&jo(Z,b),_&&(Z.g=_),q&&oi(Z,q),E&&(Z.l=E),b=Z}return E=h.D,_=h.ya,E&&_&&Ie(b,E,_),Ie(b,"VER",h.la),qs(h,b),b}function Fc(h,_,E){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new lt(new Xn({eb:E})):new lt(h.pa),_.Ha(h.J),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Al(){}t=Al.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ws(){}Ws.prototype.g=function(h,_){return new Dt(h,_)};function Dt(h,_){Q.call(this),this.g=new Dc(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!k(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!k(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new er(this)}T(Dt,Q),Dt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dt.prototype.close=function(){Ho(this.g)},Dt.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.u&&(E={},E.__data__=Gn(h),h=E);_.i.push(new $s(_.Ya++,h)),_.G==3&&Bi(_)},Dt.prototype.N=function(){this.g.l=null,delete this.j,Ho(this.g),delete this.g,Dt.aa.N.call(this)};function br(h){No.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const E in _){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}T(br,No);function jc(){ol.call(this),this.status=1}T(jc,ol);function er(h){this.g=h}T(er,Al),er.prototype.ua=function(){re(this.g,"a")},er.prototype.ta=function(h){re(this.g,new br(h))},er.prototype.sa=function(h){re(this.g,new jc)},er.prototype.ra=function(){re(this.g,"b")},Ws.prototype.createWebChannel=Ws.prototype.g,Dt.prototype.send=Dt.prototype.o,Dt.prototype.open=Dt.prototype.m,Dt.prototype.close=Dt.prototype.close,yI=function(){return new Ws},_I=function(){return Lo()},gI=ni,hg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zs.NO_ERROR=0,zs.TIMEOUT=8,zs.HTTP_ERROR=6,Hh=zs,Do.COMPLETE="complete",mI=Do,sl.EventType=Mi,Mi.OPEN="a",Mi.CLOSE="b",Mi.ERROR="c",Mi.MESSAGE="d",Q.prototype.listen=Q.prototype.K,Xl=sl,lt.prototype.listenOnce=lt.prototype.L,lt.prototype.getLastError=lt.prototype.Ka,lt.prototype.getLastErrorCode=lt.prototype.Ba,lt.prototype.getStatus=lt.prototype.Z,lt.prototype.getResponseJson=lt.prototype.Oa,lt.prototype.getResponseText=lt.prototype.oa,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Ha,pI=lt}).apply(typeof gh<"u"?gh:typeof self<"u"?self:typeof window<"u"?window:{});const L0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let el="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go=new D_("@firebase/firestore");function $l(){return go.logLevel}function pe(t,...e){if(go.logLevel<=Be.DEBUG){const n=e.map(Q_);go.debug(`Firestore (${el}): ${t}`,...n)}}function ki(t,...e){if(go.logLevel<=Be.ERROR){const n=e.map(Q_);go.error(`Firestore (${el}): ${t}`,...n)}}function ja(t,...e){if(go.logLevel<=Be.WARN){const n=e.map(Q_);go.warn(`Firestore (${el}): ${t}`,...n)}}function Q_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(t="Unexpected state"){const e=`FIRESTORE (${el}) INTERNAL ASSERTION FAILED: `+t;throw ki(e),new Error(e)}function Ye(t,e){t||Pe()}function Ae(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Yr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(en.UNAUTHENTICATED))}shutdown(){}}class hD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class dD{constructor(e){this.t=e,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ye(this.o===void 0);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new ys;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ys,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},u=c=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ys)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ye(typeof r.accessToken=="string"),new vI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ye(e===null||typeof e=="string"),new en(e)}}class fD{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=en.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class pD{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new fD(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(en.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class mD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gD{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ye(this.o===void 0);const r=s=>{s.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,pe("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ye(typeof n.token=="string"),this.R=n.token,new mD(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=_D(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Ge(t,e){return t<e?-1:t>e?1:0}function za(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new he(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ot.fromMillis(Date.now())}static fromDate(e){return Ot.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ot(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ge(this.nanoseconds,e.nanoseconds):Ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ke(e)}static min(){return new ke(new Ot(0,0))}static max(){return new ke(new Ot(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,n,r){n===void 0?n=0:n>e.length&&Pe(),r===void 0?r=e.length-n:r>e.length-n&&Pe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Hu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Hu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),a=n.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class st extends Hu{construct(e,n,r){return new st(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new st(n)}static emptyPath(){return new st([])}}const yD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ht extends Hu{construct(e,n,r){return new Ht(e,n,r)}static isValidIdentifier(e){return yD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ht.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ht(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new he(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new he(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new he(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else u==="`"?(a=!a,i++):u!=="."||a?(r+=u,i++):(s(),i++)}if(s(),a)throw new he(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ht(n)}static emptyPath(){return new Ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(st.fromString(e))}static fromName(e){return new ye(st.fromString(e).popFirst(5))}static empty(){return new ye(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return st.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new st(e.slice()))}}function vD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ke.fromTimestamp(r===1e9?new Ot(n+1,0):new Ot(n,r));return new Ts(i,ye.empty(),e)}function wD(t){return new Ts(t.readTime,t.key,-1)}class Ts{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ts(ke.min(),ye.empty(),-1)}static max(){return new Ts(ke.max(),ye.empty(),-1)}}function ED(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ye.comparator(t.documentKey,e.documentKey),n!==0?n:Ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hc(t){if(t.code!==ee.FAILED_PRECONDITION||t.message!==xD)throw t;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ne((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ne?n:ne.resolve(n)}catch(n){return ne.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ne.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ne.reject(n)}static resolve(e){return new ne((n,r)=>{n(e)})}static reject(e){return new ne((n,r)=>{r(e)})}static waitFor(e){return new ne((n,r)=>{let i=0,s=0,a=!1;e.forEach(u=>{++i,u.next(()=>{++s,a&&s===i&&n()},c=>r(c))}),a=!0,s===i&&n()})}static or(e){let n=ne.resolve(!1);for(const r of e)n=n.next(i=>i?ne.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new ne((r,i)=>{const s=e.length,a=new Array(s);let u=0;for(let c=0;c<s;c++){const f=c;n(e[f]).next(p=>{a[f]=p,++u,u===s&&r(a)},p=>i(p))}})}static doWhile(e,n){return new ne((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function SD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function dc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Y_.oe=-1;function Pf(t){return t==null}function Od(t){return t===0&&1/t==-1/0}function ID(t){return typeof t=="number"&&Number.isInteger(t)&&!Od(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Po(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function EI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n){this.comparator=e,this.root=n||$t.EMPTY}insert(e,n){return new mt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$t.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _h(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _h(this.root,e,this.comparator,!1)}getReverseIterator(){return new _h(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _h(this.root,e,this.comparator,!0)}}class _h{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??$t.RED,this.left=i??$t.EMPTY,this.right=s??$t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new $t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return $t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return $t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Pe();const e=this.left.check();if(e!==this.right.check())throw Pe();return e+(this.isRed()?0:1)}}$t.EMPTY=null,$t.RED=!0,$t.BLACK=!1;$t.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe()}get value(){throw Pe()}get color(){throw Pe()}get left(){throw Pe()}get right(){throw Pe()}copy(e,n,r,i,s){return this}insert(e,n,r){return new $t(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new D0(this.data.getIterator())}getIteratorFrom(e){return new D0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Wt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Wt(this.comparator);return n.data=e,n}}class D0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.fields=e,e.sort(Ht.comparator)}static empty(){return new Fn([])}unionWith(e){let n=new Wt(Ht.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Fn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return za(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new xI("Invalid base64 string: "+s):s}}(e);return new Kt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new Kt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kt.EMPTY_BYTE_STRING=new Kt("");const PD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ss(t){if(Ye(!!t),typeof t=="string"){let e=0;const n=PD.exec(t);if(Ye(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:vt(t.seconds),nanos:vt(t.nanos)}}function vt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function _o(t){return typeof t=="string"?Kt.fromBase64String(t):Kt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function X_(t){const e=t.mapValue.fields.__previous_value__;return J_(e)?X_(e):e}function qu(t){const e=Ss(t.mapValue.fields.__local_write_time__.timestampValue);return new Ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e,n,r,i,s,a,u,c,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=f}}class Wu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Wu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Wu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh={mapValue:{}};function yo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?J_(t)?4:AD(t)?9007199254740991:kD(t)?10:11:Pe()}function Kr(t,e){if(t===e)return!0;const n=yo(t);if(n!==yo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qu(t).isEqual(qu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Ss(i.timestampValue),u=Ss(s.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return _o(i.bytesValue).isEqual(_o(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return vt(i.geoPointValue.latitude)===vt(s.geoPointValue.latitude)&&vt(i.geoPointValue.longitude)===vt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return vt(i.integerValue)===vt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=vt(i.doubleValue),u=vt(s.doubleValue);return a===u?Od(a)===Od(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return za(t.arrayValue.values||[],e.arrayValue.values||[],Kr);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},u=s.mapValue.fields||{};if(O0(a)!==O0(u))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(u[c]===void 0||!Kr(a[c],u[c])))return!1;return!0}(t,e);default:return Pe()}}function Gu(t,e){return(t.values||[]).find(n=>Kr(n,e))!==void 0}function Ua(t,e){if(t===e)return 0;const n=yo(t),r=yo(e);if(n!==r)return Ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ge(t.booleanValue,e.booleanValue);case 2:return function(s,a){const u=vt(s.integerValue||s.doubleValue),c=vt(a.integerValue||a.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return M0(t.timestampValue,e.timestampValue);case 4:return M0(qu(t),qu(e));case 5:return Ge(t.stringValue,e.stringValue);case 6:return function(s,a){const u=_o(s),c=_o(a);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const u=s.split("/"),c=a.split("/");for(let f=0;f<u.length&&f<c.length;f++){const p=Ge(u[f],c[f]);if(p!==0)return p}return Ge(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const u=Ge(vt(s.latitude),vt(a.latitude));return u!==0?u:Ge(vt(s.longitude),vt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return V0(t.arrayValue,e.arrayValue);case 10:return function(s,a){var u,c,f,p;const m=s.fields||{},y=a.fields||{},v=(u=m.value)===null||u===void 0?void 0:u.arrayValue,T=(c=y.value)===null||c===void 0?void 0:c.arrayValue,I=Ge(((f=v==null?void 0:v.values)===null||f===void 0?void 0:f.length)||0,((p=T==null?void 0:T.values)===null||p===void 0?void 0:p.length)||0);return I!==0?I:V0(v,T)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===yh.mapValue&&a===yh.mapValue)return 0;if(s===yh.mapValue)return 1;if(a===yh.mapValue)return-1;const u=s.fields||{},c=Object.keys(u),f=a.fields||{},p=Object.keys(f);c.sort(),p.sort();for(let m=0;m<c.length&&m<p.length;++m){const y=Ge(c[m],p[m]);if(y!==0)return y;const v=Ua(u[c[m]],f[p[m]]);if(v!==0)return v}return Ge(c.length,p.length)}(t.mapValue,e.mapValue);default:throw Pe()}}function M0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ge(t,e);const n=Ss(t),r=Ss(e),i=Ge(n.seconds,r.seconds);return i!==0?i:Ge(n.nanos,r.nanos)}function V0(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ua(n[i],r[i]);if(s)return s}return Ge(n.length,r.length)}function Ba(t){return dg(t)}function dg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ss(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return _o(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ye.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=dg(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${dg(n.fields[a])}`;return i+"}"}(t.mapValue):Pe()}function F0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function fg(t){return!!t&&"integerValue"in t}function ey(t){return!!t&&"arrayValue"in t}function j0(t){return!!t&&"nullValue"in t}function z0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function qh(t){return!!t&&"mapValue"in t}function kD(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function fu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Po(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=fu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function AD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.value=e}static empty(){return new xn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!qh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fu(n)}setAll(e){let n=Ht.emptyPath(),r={},i=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=u.popLast()}a?r[u.lastSegment()]=fu(a):i.push(u.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());qh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Kr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];qh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Po(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new xn(fu(this.value))}}function TI(t){const e=[];return Po(t.fields,(n,r)=>{const i=new Ht([n]);if(qh(r)){const s=TI(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new Fn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,n,r,i,s,a,u){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=u}static newInvalidDocument(e){return new nn(e,0,ke.min(),ke.min(),ke.min(),xn.empty(),0)}static newFoundDocument(e,n,r,i){return new nn(e,1,n,ke.min(),r,i,0)}static newNoDocument(e,n){return new nn(e,2,n,ke.min(),ke.min(),xn.empty(),0)}static newUnknownDocument(e,n){return new nn(e,3,n,ke.min(),ke.min(),xn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,n){this.position=e,this.inclusive=n}}function U0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=ye.comparator(ye.fromName(a.referenceValue),n.key):r=Ua(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function B0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Kr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,n="asc"){this.field=e,this.dir=n}}function bD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{}class kt extends SI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ND(e,n,r):n==="array-contains"?new DD(e,r):n==="in"?new MD(e,r):n==="not-in"?new VD(e,r):n==="array-contains-any"?new FD(e,r):new kt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new LD(e,r):new OD(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ua(n,this.value)):n!==null&&yo(this.value)===yo(n)&&this.matchesComparison(Ua(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Pr extends SI{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Pr(e,n)}matches(e){return II(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function II(t){return t.op==="and"}function PI(t){return RD(t)&&II(t)}function RD(t){for(const e of t.filters)if(e instanceof Pr)return!1;return!0}function pg(t){if(t instanceof kt)return t.field.canonicalString()+t.op.toString()+Ba(t.value);if(PI(t))return t.filters.map(e=>pg(e)).join(",");{const e=t.filters.map(n=>pg(n)).join(",");return`${t.op}(${e})`}}function CI(t,e){return t instanceof kt?function(r,i){return i instanceof kt&&r.op===i.op&&r.field.isEqual(i.field)&&Kr(r.value,i.value)}(t,e):t instanceof Pr?function(r,i){return i instanceof Pr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,u)=>s&&CI(a,i.filters[u]),!0):!1}(t,e):void Pe()}function kI(t){return t instanceof kt?function(n){return`${n.field.canonicalString()} ${n.op} ${Ba(n.value)}`}(t):t instanceof Pr?function(n){return n.op.toString()+" {"+n.getFilters().map(kI).join(" ,")+"}"}(t):"Filter"}class ND extends kt{constructor(e,n,r){super(e,n,r),this.key=ye.fromName(r.referenceValue)}matches(e){const n=ye.comparator(e.key,this.key);return this.matchesComparison(n)}}class LD extends kt{constructor(e,n){super(e,"in",n),this.keys=AI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class OD extends kt{constructor(e,n){super(e,"not-in",n),this.keys=AI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function AI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ye.fromName(r.referenceValue))}class DD extends kt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ey(n)&&Gu(n.arrayValue,this.value)}}class MD extends kt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Gu(this.value.arrayValue,n)}}class VD extends kt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Gu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Gu(this.value.arrayValue,n)}}class FD extends kt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ey(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Gu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e,n=null,r=[],i=[],s=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=u,this.ue=null}}function $0(t,e=null,n=[],r=[],i=null,s=null,a=null){return new jD(t,e,n,r,i,s,a)}function ty(t){const e=Ae(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>pg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Pf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ba(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ba(r)).join(",")),e.ue=n}return e.ue}function ny(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!bD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!CI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!B0(t.startAt,e.startAt)&&B0(t.endAt,e.endAt)}function mg(t){return ye.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,n=null,r=[],i=[],s=null,a="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=u,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function zD(t,e,n,r,i,s,a,u){return new fc(t,e,n,r,i,s,a,u)}function ry(t){return new fc(t)}function H0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function bI(t){return t.collectionGroup!==null}function pu(t){const e=Ae(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new Wt(Ht.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Md(s,r))}),n.has(Ht.keyField().canonicalString())||e.ce.push(new Md(Ht.keyField(),r))}return e.ce}function qr(t){const e=Ae(t);return e.le||(e.le=UD(e,pu(t))),e.le}function UD(t,e){if(t.limitType==="F")return $0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Md(i.field,s)});const n=t.endAt?new Dd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Dd(t.startAt.position,t.startAt.inclusive):null;return $0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function gg(t,e){const n=t.filters.concat([e]);return new fc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function _g(t,e,n){return new fc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Cf(t,e){return ny(qr(t),qr(e))&&t.limitType===e.limitType}function RI(t){return`${ty(qr(t))}|lt:${t.limitType}`}function ia(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>kI(i)).join(", ")}]`),Pf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ba(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ba(i)).join(",")),`Target(${r})`}(qr(t))}; limitType=${t.limitType})`}function kf(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ye.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of pu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,u,c){const f=U0(a,u,c);return a.inclusive?f<=0:f<0}(r.startAt,pu(r),i)||r.endAt&&!function(a,u,c){const f=U0(a,u,c);return a.inclusive?f>=0:f>0}(r.endAt,pu(r),i))}(t,e)}function BD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function NI(t){return(e,n)=>{let r=!1;for(const i of pu(t)){const s=$D(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function $D(t,e,n){const r=t.field.isKeyField()?ye.comparator(e.key,n.key):function(s,a,u){const c=a.data.field(s),f=u.data.field(s);return c!==null&&f!==null?Ua(c,f):Pe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Po(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return EI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD=new mt(ye.comparator);function Ai(){return HD}const LI=new mt(ye.comparator);function eu(...t){let e=LI;for(const n of t)e=e.insert(n.key,n);return e}function OI(t){let e=LI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function to(){return mu()}function DI(){return mu()}function mu(){return new tl(t=>t.toString(),(t,e)=>t.isEqual(e))}const qD=new mt(ye.comparator),WD=new Wt(ye.comparator);function je(...t){let e=WD;for(const n of t)e=e.add(n);return e}const GD=new Wt(Ge);function KD(){return GD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Od(e)?"-0":e}}function MI(t){return{integerValue:""+t}}function ZD(t,e){return ID(e)?MI(e):iy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(){this._=void 0}}function QD(t,e,n){return t instanceof Vd?function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&J_(s)&&(s=X_(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(n,e):t instanceof Ku?FI(t,e):t instanceof Zu?jI(t,e):function(i,s){const a=VI(i,s),u=q0(a)+q0(i.Pe);return fg(a)&&fg(i.Pe)?MI(u):iy(i.serializer,u)}(t,e)}function YD(t,e,n){return t instanceof Ku?FI(t,e):t instanceof Zu?jI(t,e):n}function VI(t,e){return t instanceof Fd?function(r){return fg(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Vd extends Af{}class Ku extends Af{constructor(e){super(),this.elements=e}}function FI(t,e){const n=zI(e);for(const r of t.elements)n.some(i=>Kr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Zu extends Af{constructor(e){super(),this.elements=e}}function jI(t,e){let n=zI(e);for(const r of t.elements)n=n.filter(i=>!Kr(i,r));return{arrayValue:{values:n}}}class Fd extends Af{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function q0(t){return vt(t.integerValue||t.doubleValue)}function zI(t){return ey(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function JD(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ku&&i instanceof Ku||r instanceof Zu&&i instanceof Zu?za(r.elements,i.elements,Kr):r instanceof Fd&&i instanceof Fd?Kr(r.Pe,i.Pe):r instanceof Vd&&i instanceof Vd}(t.transform,e.transform)}class XD{constructor(e,n){this.version=e,this.transformResults=n}}class Tr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Tr}static exists(e){return new Tr(void 0,e)}static updateTime(e){return new Tr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class bf{}function UI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new sy(t.key,Tr.none()):new pc(t.key,t.data,Tr.none());{const n=t.data,r=xn.empty();let i=new Wt(Ht.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Rs(t.key,r,new Fn(i.toArray()),Tr.none())}}function eM(t,e,n){t instanceof pc?function(i,s,a){const u=i.value.clone(),c=G0(i.fieldTransforms,s,a.transformResults);u.setAll(c),s.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Rs?function(i,s,a){if(!Wh(i.precondition,s))return void s.convertToUnknownDocument(a.version);const u=G0(i.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(BI(i)),c.setAll(u),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function gu(t,e,n,r){return t instanceof pc?function(s,a,u,c){if(!Wh(s.precondition,a))return u;const f=s.value.clone(),p=K0(s.fieldTransforms,c,a);return f.setAll(p),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,r):t instanceof Rs?function(s,a,u,c){if(!Wh(s.precondition,a))return u;const f=K0(s.fieldTransforms,c,a),p=a.data;return p.setAll(BI(s)),p.setAll(f),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(s,a,u){return Wh(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function tM(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=VI(r.transform,i||null);s!=null&&(n===null&&(n=xn.empty()),n.set(r.field,s))}return n||null}function W0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&za(r,i,(s,a)=>JD(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class pc extends bf{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Rs extends bf{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function BI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function G0(t,e,n){const r=new Map;Ye(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,u=e.data.field(s.field);r.set(s.field,YD(a,u,n[i]))}return r}function K0(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,QD(s,a,e))}return r}class sy extends bf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nM extends bf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&eM(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=gu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=gu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=DI();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let u=this.applyToLocalView(a,s.mutatedFields);u=n.has(i.key)?null:u;const c=UI(a,u);c!==null&&r.set(i.key,c),a.isValidDocument()||a.convertToNoDocument(ke.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),je())}isEqual(e){return this.batchId===e.batchId&&za(this.mutations,e.mutations,(n,r)=>W0(n,r))&&za(this.baseMutations,e.baseMutations,(n,r)=>W0(n,r))}}class oy{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ye(e.mutations.length===r.length);let i=function(){return qD}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new oy(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It,He;function oM(t){switch(t){default:return Pe();case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0}}function $I(t){if(t===void 0)return ki("GRPC error has no .code"),ee.UNKNOWN;switch(t){case It.OK:return ee.OK;case It.CANCELLED:return ee.CANCELLED;case It.UNKNOWN:return ee.UNKNOWN;case It.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case It.INTERNAL:return ee.INTERNAL;case It.UNAVAILABLE:return ee.UNAVAILABLE;case It.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case It.NOT_FOUND:return ee.NOT_FOUND;case It.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case It.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case It.ABORTED:return ee.ABORTED;case It.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case It.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case It.DATA_LOSS:return ee.DATA_LOSS;default:return Pe()}}(He=It||(It={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM=new so([4294967295,4294967295],0);function Z0(t){const e=aM().encode(t),n=new fI;return n.update(e),new Uint8Array(n.digest())}function Q0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new so([n,r],0),new so([i,s],0)]}class ay{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new tu(`Invalid padding: ${n}`);if(r<0)throw new tu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new tu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new tu(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=so.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(so.fromNumber(r)));return i.compare(lM)===1&&(i=new so([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Z0(e),[r,i]=Q0(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new ay(s,i,n);return r.forEach(u=>a.insert(u)),a}insert(e){if(this.Ie===0)return;const n=Z0(e),[r,i]=Q0(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class tu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,mc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Rf(ke.min(),i,new mt(Ge),Ai(),je())}}class mc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new mc(r,n,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class HI{constructor(e,n){this.targetId=e,this.me=n}}class qI{constructor(e,n,r=Kt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Y0{constructor(){this.fe=0,this.ge=X0(),this.pe=Kt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=je(),n=je(),r=je();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Pe()}}),new mc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=X0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ye(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class uM{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ai(),this.qe=J0(),this.Qe=new mt(Ge)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Pe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(mg(s))if(r===0){const a=new ye(s.path);this.Ue(n,a,nn.newNoDocument(a,ke.min()))}else Ye(r===1);else{const a=this.Ye(n);if(a!==r){const u=this.Ze(e),c=u?this.Xe(u,e,a):1;if(c!==0){this.je(n);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,f)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,u;try{a=_o(r).toUint8Array()}catch(c){if(c instanceof xI)return ja("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new ay(a,i,s)}catch(c){return ja(c instanceof tu?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Ie===0?null:u}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.Le.tt(),u=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,a)=>{const u=this.Je(a);if(u){if(s.current&&mg(u.target)){const c=new ye(u.target.path);this.ke.get(c)!==null||this.it(a,c)||this.Ue(a,c,nn.newNoDocument(c,e))}s.be&&(n.set(a,s.ve()),s.Ce())}});let r=je();this.qe.forEach((s,a)=>{let u=!0;a.forEachWhile(c=>{const f=this.Je(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));const i=new Rf(e,n,this.Qe,this.ke,r);return this.ke=Ai(),this.qe=J0(),this.Qe=new mt(Ge),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Y0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Wt(Ge),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||pe("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Y0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function J0(){return new mt(ye.comparator)}function X0(){return new mt(ye.comparator)}const cM={asc:"ASCENDING",desc:"DESCENDING"},hM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dM={and:"AND",or:"OR"};class fM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function yg(t,e){return t.useProto3Json||Pf(e)?e:{value:e}}function jd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function pM(t,e){return jd(t,e.toTimestamp())}function Wr(t){return Ye(!!t),ke.fromTimestamp(function(n){const r=Ss(n);return new Ot(r.seconds,r.nanos)}(t))}function ly(t,e){return vg(t,e).canonicalString()}function vg(t,e){const n=function(i){return new st(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function GI(t){const e=st.fromString(t);return Ye(JI(e)),e}function wg(t,e){return ly(t.databaseId,e.path)}function Dp(t,e){const n=GI(e);if(n.get(1)!==t.databaseId.projectId)throw new he(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new he(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ye(ZI(n))}function KI(t,e){return ly(t.databaseId,e)}function mM(t){const e=GI(t);return e.length===4?st.emptyPath():ZI(e)}function Eg(t){return new st(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ZI(t){return Ye(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function eE(t,e,n){return{name:wg(t,e),fields:n.value.mapValue.fields}}function gM(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Pe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(f,p){return f.useProto3Json?(Ye(p===void 0||typeof p=="string"),Kt.fromBase64String(p||"")):(Ye(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Kt.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(f){const p=f.code===void 0?ee.UNKNOWN:$I(f.code);return new he(p,f.message||"")}(a);n=new qI(r,i,s,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Dp(t,r.document.name),s=Wr(r.document.updateTime),a=r.document.createTime?Wr(r.document.createTime):ke.min(),u=new xn({mapValue:{fields:r.document.fields}}),c=nn.newFoundDocument(i,s,a,u),f=r.targetIds||[],p=r.removedTargetIds||[];n=new Gh(f,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Dp(t,r.document),s=r.readTime?Wr(r.readTime):ke.min(),a=nn.newNoDocument(i,s),u=r.removedTargetIds||[];n=new Gh([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Dp(t,r.document),s=r.removedTargetIds||[];n=new Gh([],s,i,null)}else{if(!("filter"in e))return Pe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new sM(i,s),u=r.targetId;n=new HI(u,a)}}return n}function _M(t,e){let n;if(e instanceof pc)n={update:eE(t,e.key,e.value)};else if(e instanceof sy)n={delete:wg(t,e.key)};else if(e instanceof Rs)n={update:eE(t,e.key,e.data),updateMask:PM(e.fieldMask)};else{if(!(e instanceof nM))return Pe();n={verify:wg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const u=a.transform;if(u instanceof Vd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Ku)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Zu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Fd)return{fieldPath:a.field.canonicalString(),increment:u.Pe};throw Pe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:pM(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Pe()}(t,e.precondition)),n}function yM(t,e){return t&&t.length>0?(Ye(e!==void 0),t.map(n=>function(i,s){let a=i.updateTime?Wr(i.updateTime):Wr(s);return a.isEqual(ke.min())&&(a=Wr(s)),new XD(a,i.transformResults||[])}(n,e))):[]}function vM(t,e){return{documents:[KI(t,e.path)]}}function wM(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=KI(t,i);const s=function(f){if(f.length!==0)return YI(Pr.create(f,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(f){if(f.length!==0)return f.map(p=>function(y){return{field:sa(y.field),direction:TM(y.dir)}}(p))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=yg(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{_t:n,parent:i}}function EM(t){let e=mM(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ye(r===1);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(m){const y=QI(m);return y instanceof Pr&&PI(y)?y.getFilters():[y]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(y=>function(T){return new Md(oa(T.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(y))}(n.orderBy));let u=null;n.limit&&(u=function(m){let y;return y=typeof m=="object"?m.value:m,Pf(y)?null:y}(n.limit));let c=null;n.startAt&&(c=function(m){const y=!!m.before,v=m.values||[];return new Dd(v,y)}(n.startAt));let f=null;return n.endAt&&(f=function(m){const y=!m.before,v=m.values||[];return new Dd(v,y)}(n.endAt)),zD(e,i,a,s,u,"F",c,f)}function xM(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function QI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=oa(n.unaryFilter.field);return kt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=oa(n.unaryFilter.field);return kt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=oa(n.unaryFilter.field);return kt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=oa(n.unaryFilter.field);return kt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Pe()}}(t):t.fieldFilter!==void 0?function(n){return kt.create(oa(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Pe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Pr.create(n.compositeFilter.filters.map(r=>QI(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Pe()}}(n.compositeFilter.op))}(t):Pe()}function TM(t){return cM[t]}function SM(t){return hM[t]}function IM(t){return dM[t]}function sa(t){return{fieldPath:t.canonicalString()}}function oa(t){return Ht.fromServerFormat(t.fieldPath)}function YI(t){return t instanceof kt?function(n){if(n.op==="=="){if(z0(n.value))return{unaryFilter:{field:sa(n.field),op:"IS_NAN"}};if(j0(n.value))return{unaryFilter:{field:sa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(z0(n.value))return{unaryFilter:{field:sa(n.field),op:"IS_NOT_NAN"}};if(j0(n.value))return{unaryFilter:{field:sa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sa(n.field),op:SM(n.op),value:n.value}}}(t):t instanceof Pr?function(n){const r=n.getFilters().map(i=>YI(i));return r.length===1?r[0]:{compositeFilter:{op:IM(n.op),filters:r}}}(t):Pe()}function PM(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function JI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,n,r,i,s=ke.min(),a=ke.min(),u=Kt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new os(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(e){this.ct=e}}function kM(t){const e=EM({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?_g(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(){this.un=new bM}addToCollectionParentIndex(e,n){return this.un.add(n),ne.resolve()}getCollectionParents(e,n){return ne.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return ne.resolve()}deleteFieldIndex(e,n){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,n){return ne.resolve()}getDocumentsMatchingTarget(e,n){return ne.resolve(null)}getIndexType(e,n){return ne.resolve(0)}getFieldIndexes(e,n){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,n){return ne.resolve(Ts.min())}getMinOffsetFromCollectionGroup(e,n){return ne.resolve(Ts.min())}updateCollectionGroup(e,n,r){return ne.resolve()}updateIndexEntries(e,n){return ne.resolve()}}class bM{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Wt(st.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Wt(st.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new $a(0)}static kn(){return new $a(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(){this.changes=new tl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ne.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&gu(r.mutation,i,Fn.empty(),Ot.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,je()).next(()=>r))}getLocalViewOfDocuments(e,n,r=je()){const i=to();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=eu();return s.forEach((u,c)=>{a=a.insert(u,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=to();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,je()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,r,i){let s=Ai();const a=mu(),u=function(){return mu()}();return n.forEach((c,f)=>{const p=r.get(f.key);i.has(f.key)&&(p===void 0||p.mutation instanceof Rs)?s=s.insert(f.key,f):p!==void 0?(a.set(f.key,p.mutation.getFieldMask()),gu(p.mutation,f,p.mutation.getFieldMask(),Ot.now())):a.set(f.key,Fn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((f,p)=>a.set(f,p)),n.forEach((f,p)=>{var m;return u.set(f,new NM(p,(m=a.get(f))!==null&&m!==void 0?m:null))}),u))}recalculateAndSaveOverlays(e,n){const r=mu();let i=new mt((a,u)=>a-u),s=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(c=>{const f=n.get(c);if(f===null)return;let p=r.get(c)||Fn.empty();p=u.applyToLocalView(f,p),r.set(c,p);const m=(i.get(u.batchId)||je()).add(c);i=i.insert(u.batchId,m)})}).next(()=>{const a=[],u=i.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),f=c.key,p=c.value,m=DI();p.forEach(y=>{if(!s.has(y)){const v=UI(n.get(y),r.get(y));v!==null&&m.set(y,v),s=s.add(y)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,m))}return ne.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return ye.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):bI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):ne.resolve(to());let u=-1,c=s;return a.next(f=>ne.forEach(f,(p,m)=>(u<m.largestBatchId&&(u=m.largestBatchId),s.get(p)?ne.resolve():this.remoteDocumentCache.getEntry(e,p).next(y=>{c=c.insert(p,y)}))).next(()=>this.populateOverlays(e,f,s)).next(()=>this.computeViews(e,c,f,je())).next(p=>({batchId:u,changes:OI(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ye(n)).next(r=>{let i=eu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=eu();return this.indexManager.getCollectionParents(e,s).next(u=>ne.forEach(u,c=>{const f=function(m,y){return new fc(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(p=>{p.forEach((m,y)=>{a=a.insert(m,y)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((c,f)=>{const p=f.getKey();a.get(p)===null&&(a=a.insert(p,nn.newInvalidDocument(p)))});let u=eu();return a.forEach((c,f)=>{const p=s.get(c);p!==void 0&&gu(p.mutation,f,Fn.empty(),Ot.now()),kf(n,f)&&(u=u.insert(c,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return ne.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Wr(i.createTime)}}(n)),ne.resolve()}getNamedQuery(e,n){return ne.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:kM(i.bundledQuery),readTime:Wr(i.readTime)}}(n)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(){this.overlays=new mt(ye.comparator),this.Ir=new Map}getOverlay(e,n){return ne.resolve(this.overlays.get(n))}getOverlays(e,n){const r=to();return ne.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),ne.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),ne.resolve()}getOverlaysForCollection(e,n,r){const i=to(),s=n.length+1,a=new ye(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const c=u.getNext().value,f=c.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return ne.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new mt((f,p)=>f-p);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let p=s.get(f.largestBatchId);p===null&&(p=to(),s=s.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const u=to(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((f,p)=>u.set(f,p)),!(u.size()>=i)););return ne.resolve(u)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new iM(n,r));let s=this.Ir.get(n);s===void 0&&(s=je(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(){this.sessionToken=Kt.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(){this.Tr=new Wt(Vt.Er),this.dr=new Wt(Vt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Vt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Vt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ye(new st([])),r=new Vt(n,e),i=new Vt(n,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ye(new st([])),r=new Vt(n,e),i=new Vt(n,e+1);let s=je();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new Vt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Vt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ye.comparator(e.key,n.key)||Ge(e.wr,n.wr)}static Ar(e,n){return Ge(e.wr,n.wr)||ye.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Wt(Vt.Er)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new rM(s,n,r,i);this.mutationQueue.push(a);for(const u of i)this.br=this.br.add(new Vt(u.key,s)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return ne.resolve(a)}lookupMutationBatch(e,n){return ne.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return ne.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Vt(n,0),i=new Vt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{const u=this.Dr(a.wr);s.push(u)}),ne.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Wt(Ge);return n.forEach(i=>{const s=new Vt(i,0),a=new Vt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],u=>{r=r.add(u.wr)})}),ne.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ye.isDocumentKey(s)||(s=s.child(""));const a=new Vt(new ye(s),0);let u=new Wt(Ge);return this.br.forEachWhile(c=>{const f=c.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(u=u.add(c.wr)),!0)},a),ne.resolve(this.Cr(u))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ye(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return ne.forEach(n.mutations,i=>{const s=new Vt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Vt(n,0),i=this.br.firstAfterOrEqual(r);return ne.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(e){this.Mr=e,this.docs=function(){return new mt(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ne.resolve(r?r.document.mutableCopy():nn.newInvalidDocument(n))}getEntries(e,n){let r=Ai();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():nn.newInvalidDocument(i))}),ne.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Ai();const a=n.path,u=new ye(a.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:f,value:{document:p}}=c.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||ED(wD(p),r)<=0||(i.has(p.key)||kf(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return ne.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Pe()}Or(e,n){return ne.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new jM(this)}getSize(e){return ne.resolve(this.size)}}class jM extends RM{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),ne.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e){this.persistence=e,this.Nr=new tl(n=>ty(n),ny),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.Lr=0,this.Br=new uy,this.targetCount=0,this.kr=$a.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),ne.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new $a(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,ne.resolve()}updateTargetData(e,n){return this.Kn(n),ne.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((a,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),ne.waitFor(s).next(()=>i)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return ne.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),ne.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),ne.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),ne.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return ne.resolve(r)}containsKey(e,n){return ne.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Y_(0),this.Kr=!1,this.Kr=!0,this.$r=new MM,this.referenceDelegate=e(this),this.Ur=new zM(this),this.indexManager=new AM,this.remoteDocumentCache=function(i){return new FM(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new CM(n),this.Gr=new OM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new DM,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new VM(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){pe("MemoryPersistence","Starting transaction:",e);const i=new BM(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return ne.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class BM extends TD{constructor(e){super(),this.currentSequenceNumber=e}}class cy{constructor(e){this.persistence=e,this.Jr=new uy,this.Yr=null}static Zr(e){return new cy(e)}get Xr(){if(this.Yr)return this.Yr;throw Pe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),ne.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),ne.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.Xr,r=>{const i=ye.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ke.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return ne.or([()=>ne.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=je(),i=je();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new hy(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return HR()?8:SD(on())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new $M;return this.Xi(e,n,a).next(u=>{if(s.result=u,this.zi)return this.es(e,n,a,u.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?($l()<=Be.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",ia(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ne.resolve()):($l()<=Be.DEBUG&&pe("QueryEngine","Query:",ia(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?($l()<=Be.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",ia(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qr(n))):ne.resolve())}Yi(e,n){if(H0(n))return ne.resolve(null);let r=qr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=_g(n,null,"F"),r=qr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=je(...s);return this.Ji.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const f=this.ts(n,u);return this.ns(n,f,a,c.readTime)?this.Yi(e,_g(n,null,"F")):this.rs(e,f,n,c)}))})))}Zi(e,n,r,i){return H0(n)||i.isEqual(ke.min())?ne.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const a=this.ts(n,s);return this.ns(n,a,r,i)?ne.resolve(null):($l()<=Be.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ia(n)),this.rs(e,a,n,vD(i,-1)).next(u=>u))})}ts(e,n){let r=new Wt(NI(e));return n.forEach((i,s)=>{kf(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return $l()<=Be.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",ia(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ts.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new mt(Ge),this._s=new tl(s=>ty(s),ny),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LM(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function WM(t,e,n,r){return new qM(t,e,n,r)}async function XI(t,e){const n=Ae(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],u=[];let c=je();for(const f of i){a.push(f.batchId);for(const p of f.mutations)c=c.add(p.key)}for(const f of s){u.push(f.batchId);for(const p of f.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(r,c).next(f=>({hs:f,removedBatchIds:a,addedBatchIds:u}))})})}function GM(t,e){const n=Ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(u,c,f,p){const m=f.batch,y=m.keys();let v=ne.resolve();return y.forEach(T=>{v=v.next(()=>p.getEntry(c,T)).next(I=>{const O=f.docVersions.get(T);Ye(O!==null),I.version.compareTo(O)<0&&(m.applyToRemoteDocument(I,f),I.isValidDocument()&&(I.setReadTime(f.commitVersion),p.addEntry(I)))})}),v.next(()=>u.mutationQueue.removeMutationBatch(c,m))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=je();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(c=c.add(u.batch.mutations[f].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function eP(t){const e=Ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function KM(t,e){const n=Ae(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const u=[];e.targetChanges.forEach((p,m)=>{const y=i.get(m);if(!y)return;u.push(n.Ur.removeMatchingKeys(s,p.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(s,p.addedDocuments,m)));let v=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?v=v.withResumeToken(Kt.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):p.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(p.resumeToken,r)),i=i.insert(m,v),function(I,O,S){return I.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(y,v,p)&&u.push(n.Ur.updateTargetData(s,v))});let c=Ai(),f=je();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))}),u.push(ZM(s,a,e.documentUpdates).next(p=>{c=p.Ps,f=p.Is})),!r.isEqual(ke.min())){const p=n.Ur.getLastRemoteSnapshotVersion(s).next(m=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));u.push(p)}return ne.waitFor(u).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,f)).next(()=>c)}).then(s=>(n.os=i,s))}function ZM(t,e,n){let r=je(),i=je();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=Ai();return n.forEach((u,c)=>{const f=s.get(u);c.isFoundDocument()!==f.isFoundDocument()&&(i=i.add(u)),c.isNoDocument()&&c.version.isEqual(ke.min())?(e.removeEntry(u,c.readTime),a=a.insert(u,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(c),a=a.insert(u,c)):pe("LocalStore","Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",c.version)}),{Ps:a,Is:i}})}function QM(t,e){const n=Ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function YM(t,e){const n=Ae(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,ne.resolve(i)):n.Ur.allocateTargetId(r).next(a=>(i=new os(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function xg(t,e,n){const r=Ae(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!dc(a))throw a;pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function tE(t,e,n){const r=Ae(t);let i=ke.min(),s=je();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,f,p){const m=Ae(c),y=m._s.get(p);return y!==void 0?ne.resolve(m.os.get(y)):m.Ur.getTargetData(f,p)}(r,a,qr(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,u.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?i:ke.min(),n?s:je())).next(u=>(JM(r,BD(e),u),{documents:u,Ts:s})))}function JM(t,e,n){let r=t.us.get(e)||ke.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class nE{constructor(){this.activeTargetIds=KD()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class XM{constructor(){this.so=new nE,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new nE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vh=null;function Mp(){return vh===null?vh=function(){return 268435456+Math.round(2147483648*Math.random())}():vh++,"0x"+vh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class rV extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,a){const u=Mp(),c=this.xo(n,r.toUriEncodedString());pe("RestConnection",`Sending RPC '${n}' ${u}:`,c,i);const f={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(f,s,a),this.No(n,c,f,i).then(p=>(pe("RestConnection",`Received RPC '${n}' ${u}: `,p),p),p=>{throw ja("RestConnection",`RPC '${n}' ${u} failed with error: `,p,"url: ",c,"request:",i),p})}Lo(n,r,i,s,a,u){return this.Mo(n,r,i,s,a)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+el}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>n[a]=s),i&&i.headers.forEach((s,a)=>n[a]=s)}xo(n,r){const i=tV[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Mp();return new Promise((a,u)=>{const c=new pI;c.setWithCredentials(!0),c.listenOnce(mI.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Hh.NO_ERROR:const p=c.getResponseJson();pe(Xt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Hh.TIMEOUT:pe(Xt,`RPC '${e}' ${s} timed out`),u(new he(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Hh.HTTP_ERROR:const m=c.getStatus();if(pe(Xt,`RPC '${e}' ${s} failed with status:`,m,"response text:",c.getResponseText()),m>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);const v=y==null?void 0:y.error;if(v&&v.status&&v.message){const T=function(O){const S=O.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(S)>=0?S:ee.UNKNOWN}(v.status);u(new he(T,v.message))}else u(new he(ee.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new he(ee.UNAVAILABLE,"Connection failed."));break;default:Pe()}}finally{pe(Xt,`RPC '${e}' ${s} completed.`)}});const f=JSON.stringify(i);pe(Xt,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",f,r,15)})}Bo(e,n,r){const i=Mp(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=yI(),u=_I(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const p=s.join("");pe(Xt,`Creating RPC '${e}' stream ${i}: ${p}`,c);const m=a.createWebChannel(p,c);let y=!1,v=!1;const T=new nV({Io:O=>{v?pe(Xt,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(y||(pe(Xt,`Opening RPC '${e}' stream ${i} transport.`),m.open(),y=!0),pe(Xt,`RPC '${e}' stream ${i} sending:`,O),m.send(O))},To:()=>m.close()}),I=(O,S,k)=>{O.listen(S,C=>{try{k(C)}catch(B){setTimeout(()=>{throw B},0)}})};return I(m,Xl.EventType.OPEN,()=>{v||(pe(Xt,`RPC '${e}' stream ${i} transport opened.`),T.yo())}),I(m,Xl.EventType.CLOSE,()=>{v||(v=!0,pe(Xt,`RPC '${e}' stream ${i} transport closed`),T.So())}),I(m,Xl.EventType.ERROR,O=>{v||(v=!0,ja(Xt,`RPC '${e}' stream ${i} transport errored:`,O),T.So(new he(ee.UNAVAILABLE,"The operation could not be completed")))}),I(m,Xl.EventType.MESSAGE,O=>{var S;if(!v){const k=O.data[0];Ye(!!k);const C=k,B=C.error||((S=C[0])===null||S===void 0?void 0:S.error);if(B){pe(Xt,`RPC '${e}' stream ${i} received error:`,B);const G=B.status;let $=function(D){const M=It[D];if(M!==void 0)return $I(M)}(G),R=B.message;$===void 0&&($=ee.INTERNAL,R="Unknown error status: "+G+" with message "+B.message),v=!0,T.So(new he($,R)),m.close()}else pe(Xt,`RPC '${e}' stream ${i} received:`,k),T.bo(k)}}),I(u,gI.STAT_EVENT,O=>{O.stat===hg.PROXY?pe(Xt,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===hg.NOPROXY&&pe(Xt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.wo()},0),T}}function Vp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(t){return new fM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&pe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e,n,r,i,s,a,u,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new tP(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===ee.RESOURCE_EXHAUSTED?(ki(n.toString()),ki("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new he(ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iV extends nP{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=gM(this.serializer,e),r=function(s){if(!("targetChange"in s))return ke.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?ke.min():a.readTime?Wr(a.readTime):ke.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Eg(this.serializer),n.addTarget=function(s,a){let u;const c=a.target;if(u=mg(c)?{documents:vM(s,c)}:{query:wM(s,c)._t},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=WI(s,a.resumeToken);const f=yg(s,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(ke.min())>0){u.readTime=jd(s,a.snapshotVersion.toTimestamp());const f=yg(s,a.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const r=xM(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Eg(this.serializer),n.removeTarget=e,this.a_(n)}}class sV extends nP{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ye(!!e.streamToken),this.lastStreamToken=e.streamToken,Ye(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ye(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=yM(e.writeResults,e.commitTime),r=Wr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Eg(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>_M(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new he(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,vg(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new he(ee.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Lo(e,vg(n,r),i,a,u,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new he(ee.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class aV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ki(n),this.D_=!1):pe("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(async()=>{Co(this)&&(pe("RemoteStore","Restarting streams for network reachability change."),await async function(c){const f=Ae(c);f.L_.add(4),await gc(f),f.q_.set("Unknown"),f.L_.delete(4),await Lf(f)}(this))})}),this.q_=new aV(r,i)}}async function Lf(t){if(Co(t))for(const e of t.B_)await e(!0)}async function gc(t){for(const e of t.B_)await e(!1)}function rP(t,e){const n=Ae(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),my(n)?py(n):nl(n).r_()&&fy(n,e))}function dy(t,e){const n=Ae(t),r=nl(n);n.N_.delete(e),r.r_()&&iP(n,e),n.N_.size===0&&(r.r_()?r.o_():Co(n)&&n.q_.set("Unknown"))}function fy(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}nl(t).A_(e)}function iP(t,e){t.Q_.xe(e),nl(t).R_(e)}function py(t){t.Q_=new uM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),nl(t).start(),t.q_.v_()}function my(t){return Co(t)&&!nl(t).n_()&&t.N_.size>0}function Co(t){return Ae(t).L_.size===0}function sP(t){t.Q_=void 0}async function uV(t){t.q_.set("Online")}async function cV(t){t.N_.forEach((e,n)=>{fy(t,e)})}async function hV(t,e){sP(t),my(t)?(t.q_.M_(e),py(t)):t.q_.set("Unknown")}async function dV(t,e,n){if(t.q_.set("Online"),e instanceof qI&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const u of s.targetIds)i.N_.has(u)&&(await i.remoteSyncer.rejectListen(u,a),i.N_.delete(u),i.Q_.removeTarget(u))}(t,e)}catch(r){pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await zd(t,r)}else if(e instanceof Gh?t.Q_.Ke(e):e instanceof HI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ke.min()))try{const r=await eP(t.localStore);n.compareTo(r)>=0&&await function(s,a){const u=s.Q_.rt(a);return u.targetChanges.forEach((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const p=s.N_.get(f);p&&s.N_.set(f,p.withResumeToken(c.resumeToken,a))}}),u.targetMismatches.forEach((c,f)=>{const p=s.N_.get(c);if(!p)return;s.N_.set(c,p.withResumeToken(Kt.EMPTY_BYTE_STRING,p.snapshotVersion)),iP(s,c);const m=new os(p.target,c,f,p.sequenceNumber);fy(s,m)}),s.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){pe("RemoteStore","Failed to raise snapshot:",r),await zd(t,r)}}async function zd(t,e,n){if(!dc(e))throw e;t.L_.add(1),await gc(t),t.q_.set("Offline"),n||(n=()=>eP(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{pe("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Lf(t)})}function oP(t,e){return e().catch(n=>zd(t,n,e))}async function Of(t){const e=Ae(t),n=Is(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;fV(e);)try{const i=await QM(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,pV(e,i)}catch(i){await zd(e,i)}aP(e)&&lP(e)}function fV(t){return Co(t)&&t.O_.length<10}function pV(t,e){t.O_.push(e);const n=Is(t);n.r_()&&n.V_&&n.m_(e.mutations)}function aP(t){return Co(t)&&!Is(t).n_()&&t.O_.length>0}function lP(t){Is(t).start()}async function mV(t){Is(t).p_()}async function gV(t){const e=Is(t);for(const n of t.O_)e.m_(n.mutations)}async function _V(t,e,n){const r=t.O_.shift(),i=oy.from(r,e,n);await oP(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Of(t)}async function yV(t,e){e&&Is(t).V_&&await async function(r,i){if(function(a){return oM(a)&&a!==ee.ABORTED}(i.code)){const s=r.O_.shift();Is(r).s_(),await oP(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Of(r)}}(t,e),aP(t)&&lP(t)}async function iE(t,e){const n=Ae(t);n.asyncQueue.verifyOperationInProgress(),pe("RemoteStore","RemoteStore received new credentials");const r=Co(n);n.L_.add(3),await gc(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Lf(n)}async function vV(t,e){const n=Ae(t);e?(n.L_.delete(2),await Lf(n)):e||(n.L_.add(2),await gc(n),n.q_.set("Unknown"))}function nl(t){return t.K_||(t.K_=function(n,r,i){const s=Ae(n);return s.w_(),new iV(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:uV.bind(null,t),Ro:cV.bind(null,t),mo:hV.bind(null,t),d_:dV.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),my(t)?py(t):t.q_.set("Unknown")):(await t.K_.stop(),sP(t))})),t.K_}function Is(t){return t.U_||(t.U_=function(n,r,i){const s=Ae(n);return s.w_(),new sV(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:mV.bind(null,t),mo:yV.bind(null,t),f_:gV.bind(null,t),g_:_V.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Of(t)):(await t.U_.stop(),t.O_.length>0&&(pe("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ys,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,u=new gy(e,n,a,i,s);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _y(t,e){if(ki("AsyncQueue",`${e}: ${t}`),dc(t))return new he(ee.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ye.comparator(n.key,r.key):(n,r)=>ye.comparator(n.key,r.key),this.keyedMap=eu(),this.sortedSet=new mt(this.comparator)}static emptySet(e){return new Aa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Aa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Aa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(){this.W_=new mt(ye.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Pe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ha{constructor(e,n,r,i,s,a,u,c,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new Ha(e,n,Aa.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class EV{constructor(){this.queries=oE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Ae(n),s=i.queries;i.queries=oE(),s.forEach((a,u)=>{for(const c of u.j_)c.onError(r)})})(this,new he(ee.ABORTED,"Firestore shutting down"))}}function oE(){return new tl(t=>RI(t),Cf)}async function uP(t,e){const n=Ae(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new wV,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const u=_y(a,`Initialization of query '${ia(e.query)}' failed`);return void e.onError(u)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&yy(n)}async function cP(t,e){const n=Ae(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function xV(t,e){const n=Ae(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const u of a.j_)u.X_(i)&&(r=!0);a.z_=i}}r&&yy(n)}function TV(t,e,n){const r=Ae(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function yy(t){t.Y_.forEach(e=>{e.next()})}var Tg,aE;(aE=Tg||(Tg={})).ea="default",aE.Cache="cache";class hP{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ha(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ha.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Tg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e){this.key=e}}class fP{constructor(e){this.key=e}}class SV{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=je(),this.mutatedKeys=je(),this.Aa=NI(e),this.Ra=new Aa(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new sE,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,u=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,f=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,m)=>{const y=i.get(p),v=kf(this.query,m)?m:null,T=!!y&&this.mutatedKeys.has(y.key),I=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let O=!1;y&&v?y.data.isEqual(v.data)?T!==I&&(r.track({type:3,doc:v}),O=!0):this.ga(y,v)||(r.track({type:2,doc:v}),O=!0,(c&&this.Aa(v,c)>0||f&&this.Aa(v,f)<0)&&(u=!0)):!y&&v?(r.track({type:0,doc:v}),O=!0):y&&!v&&(r.track({type:1,doc:y}),O=!0,(c||f)&&(u=!0)),O&&(v?(a=a.add(v),s=I?s.add(p):s.delete(p)):(a=a.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{Ra:a,fa:r,ns:u,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((p,m)=>function(v,T){const I=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe()}};return I(v)-I(T)}(p.type,m.type)||this.Aa(p.doc,m.doc)),this.pa(r),i=i!=null&&i;const u=n&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,f=c!==this.Ea;return this.Ea=c,a.length!==0||f?{snapshot:new Ha(this.query,e.Ra,s,a,e.mutatedKeys,c===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new sE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=je(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new fP(r))}),this.da.forEach(r=>{e.has(r)||n.push(new dP(r))}),n}ba(e){this.Ta=e.Ts,this.da=je();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ha.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class IV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class PV{constructor(e){this.key=e,this.va=!1}}class CV{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new tl(u=>RI(u),Cf),this.Ma=new Map,this.xa=new Set,this.Oa=new mt(ye.comparator),this.Na=new Map,this.La=new uy,this.Ba={},this.ka=new Map,this.qa=$a.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function kV(t,e,n=!0){const r=vP(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await pP(r,e,n,!0),i}async function AV(t,e){const n=vP(t);await pP(n,e,!0,!1)}async function pP(t,e,n,r){const i=await YM(t.localStore,qr(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let u;return r&&(u=await bV(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&rP(t.remoteStore,i),u}async function bV(t,e,n,r,i){t.Ka=(m,y,v)=>async function(I,O,S,k){let C=O.view.ma(S);C.ns&&(C=await tE(I.localStore,O.query,!1).then(({documents:R})=>O.view.ma(R,C)));const B=k&&k.targetChanges.get(O.targetId),G=k&&k.targetMismatches.get(O.targetId)!=null,$=O.view.applyChanges(C,I.isPrimaryClient,B,G);return uE(I,O.targetId,$.wa),$.snapshot}(t,m,y,v);const s=await tE(t.localStore,e,!0),a=new SV(e,s.Ts),u=a.ma(s.documents),c=mc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),f=a.applyChanges(u,t.isPrimaryClient,c);uE(t,n,f.wa);const p=new IV(e,n,a);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),f.snapshot}async function RV(t,e,n){const r=Ae(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(a=>!Cf(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await xg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&dy(r.remoteStore,i.targetId),Sg(r,i.targetId)}).catch(hc)):(Sg(r,i.targetId),await xg(r.localStore,i.targetId,!0))}async function NV(t,e){const n=Ae(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),dy(n.remoteStore,r.targetId))}async function LV(t,e,n){const r=zV(t);try{const i=await function(a,u){const c=Ae(a),f=Ot.now(),p=u.reduce((v,T)=>v.add(T.key),je());let m,y;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let T=Ai(),I=je();return c.cs.getEntries(v,p).next(O=>{T=O,T.forEach((S,k)=>{k.isValidDocument()||(I=I.add(S))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,T)).next(O=>{m=O;const S=[];for(const k of u){const C=tM(k,m.get(k.key).overlayedDocument);C!=null&&S.push(new Rs(k.key,C,TI(C.value.mapValue),Tr.exists(!0)))}return c.mutationQueue.addMutationBatch(v,f,S,u)}).next(O=>{y=O;const S=O.applyToLocalDocumentSet(m,I);return c.documentOverlayCache.saveOverlays(v,O.batchId,S)})}).then(()=>({batchId:y.batchId,changes:OI(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,u,c){let f=a.Ba[a.currentUser.toKey()];f||(f=new mt(Ge)),f=f.insert(u,c),a.Ba[a.currentUser.toKey()]=f}(r,i.batchId,n),await _c(r,i.changes),await Of(r.remoteStore)}catch(i){const s=_y(i,"Failed to persist write");n.reject(s)}}async function mP(t,e){const n=Ae(t);try{const r=await KM(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Na.get(s);a&&(Ye(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?Ye(a.va):i.removedDocuments.size>0&&(Ye(a.va),a.va=!1))}),await _c(n,r,e)}catch(r){await hc(r)}}function lE(t,e,n){const r=Ae(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,a)=>{const u=a.view.Z_(e);u.snapshot&&i.push(u.snapshot)}),function(a,u){const c=Ae(a);c.onlineState=u;let f=!1;c.queries.forEach((p,m)=>{for(const y of m.j_)y.Z_(u)&&(f=!0)}),f&&yy(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function OV(t,e,n){const r=Ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let a=new mt(ye.comparator);a=a.insert(s,nn.newNoDocument(s,ke.min()));const u=je().add(s),c=new Rf(ke.min(),new Map,new mt(Ge),a,u);await mP(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),vy(r)}else await xg(r.localStore,e,!1).then(()=>Sg(r,e,n)).catch(hc)}async function DV(t,e){const n=Ae(t),r=e.batch.batchId;try{const i=await GM(n.localStore,e);_P(n,r,null),gP(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await _c(n,i)}catch(i){await hc(i)}}async function MV(t,e,n){const r=Ae(t);try{const i=await function(a,u){const c=Ae(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let p;return c.mutationQueue.lookupMutationBatch(f,u).next(m=>(Ye(m!==null),p=m.keys(),c.mutationQueue.removeMutationBatch(f,m))).next(()=>c.mutationQueue.performConsistencyCheck(f)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(f,p,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p)).next(()=>c.localDocuments.getDocuments(f,p))})}(r.localStore,e);_P(r,e,n),gP(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await _c(r,i)}catch(i){await hc(i)}}function gP(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function _P(t,e,n){const r=Ae(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Sg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||yP(t,r)})}function yP(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(dy(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),vy(t))}function uE(t,e,n){for(const r of n)r instanceof dP?(t.La.addReference(r.key,e),VV(t,r)):r instanceof fP?(pe("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||yP(t,r.key)):Pe()}function VV(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(pe("SyncEngine","New document in limbo: "+n),t.xa.add(r),vy(t))}function vy(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ye(st.fromString(e)),r=t.qa.next();t.Na.set(r,new PV(n)),t.Oa=t.Oa.insert(n,r),rP(t.remoteStore,new os(qr(ry(n.path)),r,"TargetPurposeLimboResolution",Y_.oe))}}async function _c(t,e,n){const r=Ae(t),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((u,c)=>{a.push(r.Ka(c,e,n).then(f=>{var p;if((f||n)&&r.isPrimaryClient){const m=f?!f.fromCache:(p=n==null?void 0:n.targetChanges.get(c.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(f){i.push(f);const m=hy.Wi(c.targetId,f);s.push(m)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(c,f){const p=Ae(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>ne.forEach(f,y=>ne.forEach(y.$i,v=>p.persistence.referenceDelegate.addReference(m,y.targetId,v)).next(()=>ne.forEach(y.Ui,v=>p.persistence.referenceDelegate.removeReference(m,y.targetId,v)))))}catch(m){if(!dc(m))throw m;pe("LocalStore","Failed to update sequence numbers: "+m)}for(const m of f){const y=m.targetId;if(!m.fromCache){const v=p.os.get(y),T=v.snapshotVersion,I=v.withLastLimboFreeSnapshotVersion(T);p.os=p.os.insert(y,I)}}}(r.localStore,s))}async function FV(t,e){const n=Ae(t);if(!n.currentUser.isEqual(e)){pe("SyncEngine","User change. New user:",e.toKey());const r=await XI(n.localStore,e);n.currentUser=e,function(s,a){s.ka.forEach(u=>{u.forEach(c=>{c.reject(new he(ee.CANCELLED,a))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await _c(n,r.hs)}}function jV(t,e){const n=Ae(t),r=n.Na.get(e);if(r&&r.va)return je().add(r.key);{let i=je();const s=n.Ma.get(e);if(!s)return i;for(const a of s){const u=n.Fa.get(a);i=i.unionWith(u.view.Va)}return i}}function vP(t){const e=Ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=mP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=OV.bind(null,e),e.Ca.d_=xV.bind(null,e.eventManager),e.Ca.$a=TV.bind(null,e.eventManager),e}function zV(t){const e=Ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=MV.bind(null,e),e}class Ud{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Nf(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return WM(this.persistence,new HM,e.initialUser,this.serializer)}Ga(e){return new UM(cy.Zr,this.serializer)}Wa(e){return new XM}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ud.provider={build:()=>new Ud};class Ig{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=FV.bind(null,this.syncEngine),await vV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new EV}()}createDatastore(e){const n=Nf(e.databaseInfo.databaseId),r=function(s){return new rV(s)}(e.databaseInfo);return function(s,a,u,c){return new oV(s,a,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,u){return new lV(r,i,s,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>lE(this.syncEngine,n,0),function(){return rE.D()?new rE:new eV}())}createSyncEngine(e,n){return function(i,s,a,u,c,f,p){const m=new CV(i,s,a,u,c,f);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Ae(i);pe("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await gc(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ig.provider={build:()=>new Ig};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ki("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=en.UNAUTHENTICATED,this.clientId=wI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{pe("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(pe("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ys;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=_y(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Fp(t,e){t.asyncQueue.verifyOperationInProgress(),pe("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await XI(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function cE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await BV(t);pe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>iE(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>iE(e.remoteStore,i)),t._onlineComponents=e}async function BV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){pe("FirestoreClient","Using user provided OfflineComponentProvider");try{await Fp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===ee.FAILED_PRECONDITION||i.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ja("Error using user provided cache. Falling back to memory cache: "+n),await Fp(t,new Ud)}}else pe("FirestoreClient","Using default OfflineComponentProvider"),await Fp(t,new Ud);return t._offlineComponents}async function EP(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(pe("FirestoreClient","Using user provided OnlineComponentProvider"),await cE(t,t._uninitializedComponentsProvider._online)):(pe("FirestoreClient","Using default OnlineComponentProvider"),await cE(t,new Ig))),t._onlineComponents}function $V(t){return EP(t).then(e=>e.syncEngine)}async function Pg(t){const e=await EP(t),n=e.eventManager;return n.onListen=kV.bind(null,e.syncEngine),n.onUnlisten=RV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=AV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=NV.bind(null,e.syncEngine),n}function HV(t,e,n={}){const r=new ys;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,u,c,f){const p=new wP({next:y=>{p.Za(),a.enqueueAndForget(()=>cP(s,m)),y.fromCache&&c.source==="server"?f.reject(new he(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(y)},error:y=>f.reject(y)}),m=new hP(u,p,{includeMetadataChanges:!0,_a:!0});return uP(s,m)}(await Pg(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(t,e,n){if(!n)throw new he(ee.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function qV(t,e,n,r){if(e===!0&&r===!0)throw new he(ee.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function dE(t){if(!ye.isDocumentKey(t))throw new he(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fE(t){if(ye.isDocumentKey(t))throw new he(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Df(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Pe()}function Gr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new he(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Df(t);throw new he(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new he(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new he(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new he(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pE(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new cD;switch(r.type){case"firstParty":return new pD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=hE.get(n);r&&(pe("ComponentProvider","Removing Datastore"),hE.delete(n),r.terminate())}(this),Promise.resolve()}}function WV(t,e,n,r={}){var i;const s=(t=Gr(t,Mf))._getSettings(),a=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&ja("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let u,c;if(typeof r.mockUserToken=="string")u=r.mockUserToken,c=en.MOCK_USER;else{u=JT(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new he(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new en(f)}t._authCredentials=new hD(new vI(u,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ko(this.firestore,e,this._query)}}class kn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kn(this.firestore,e,this._key)}}class vs extends ko{constructor(e,n,r){super(e,n,ry(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kn(this.firestore,null,new ye(e))}withConverter(e){return new vs(this.firestore,e,this._path)}}function Ns(t,e,...n){if(t=bt(t),TP("collection","path",e),t instanceof Mf){const r=st.fromString(e,...n);return fE(r),new vs(t,null,r)}{if(!(t instanceof kn||t instanceof vs))throw new he(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(st.fromString(e,...n));return fE(r),new vs(t.firestore,null,r)}}function Vf(t,e,...n){if(t=bt(t),arguments.length===1&&(e=wI.newId()),TP("doc","path",e),t instanceof Mf){const r=st.fromString(e,...n);return dE(r),new kn(t,null,new ye(r))}{if(!(t instanceof kn||t instanceof vs))throw new he(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(st.fromString(e,...n));return dE(r),new kn(t.firestore,t instanceof vs?t.converter:null,new ye(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new tP(this,"async_queue_retry"),this.Vu=()=>{const r=Vp();r&&pe("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Vp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Vp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new ys;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!dc(e))throw e;pe("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),u}(r);throw ki("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=gy.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Pe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function gE(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class vo extends Mf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new mE,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mE(e),this._firestoreClient=void 0,await e}}}function GV(t,e){const n=typeof t=="object"?t:V_(),r=typeof t=="string"?t:"(default)",i=mf(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=ZT("firestore");s&&WV(i,...s)}return i}function wy(t){if(t._terminated)throw new he(ee.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||KV(t),t._firestoreClient}function KV(t){var e,n,r;const i=t._freezeSettings(),s=function(u,c,f,p){return new CD(u,c,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,xP(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new UV(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qa(Kt.fromBase64String(e))}catch(n){throw new he(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new qa(Kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ge(this._lat,e._lat)||Ge(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV=/^__.*__$/;class QV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Rs(e,this.data,this.fieldMask,n,this.fieldTransforms):new pc(e,this.data,n,this.fieldTransforms)}}class SP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Rs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function IP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe()}}class Sy{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Sy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Bd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(IP(this.Cu)&&ZV.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class YV{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Nf(e)}Qu(e,n,r,i=!1){return new Sy({Cu:e,methodName:n,qu:r,path:Ht.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Iy(t){const e=t._freezeSettings(),n=Nf(t._databaseId);return new YV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function JV(t,e,n,r,i,s={}){const a=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Py("Data must be an object, but it was:",a,r);const u=PP(r,a);let c,f;if(s.merge)c=new Fn(a.fieldMask),f=a.fieldTransforms;else if(s.mergeFields){const p=[];for(const m of s.mergeFields){const y=Cg(e,m,n);if(!a.contains(y))throw new he(ee.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);kP(p,y)||p.push(y)}c=new Fn(p),f=a.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,f=a.fieldTransforms;return new QV(new xn(u),c,f)}class jf extends Ey{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jf}}function XV(t,e,n,r){const i=t.Qu(1,e,n);Py("Data must be an object, but it was:",i,r);const s=[],a=xn.empty();Po(r,(c,f)=>{const p=Cy(e,c,n);f=bt(f);const m=i.Nu(p);if(f instanceof jf)s.push(p);else{const y=yc(f,m);y!=null&&(s.push(p),a.set(p,y))}});const u=new Fn(s);return new SP(a,u,i.fieldTransforms)}function e3(t,e,n,r,i,s){const a=t.Qu(1,e,n),u=[Cg(e,r,n)],c=[i];if(s.length%2!=0)throw new he(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)u.push(Cg(e,s[y])),c.push(s[y+1]);const f=[],p=xn.empty();for(let y=u.length-1;y>=0;--y)if(!kP(f,u[y])){const v=u[y];let T=c[y];T=bt(T);const I=a.Nu(v);if(T instanceof jf)f.push(v);else{const O=yc(T,I);O!=null&&(f.push(v),p.set(v,O))}}const m=new Fn(f);return new SP(p,m,a.fieldTransforms)}function t3(t,e,n,r=!1){return yc(n,t.Qu(r?4:3,e))}function yc(t,e){if(CP(t=bt(t)))return Py("Unsupported field value:",e,t),PP(t,e);if(t instanceof Ey)return function(r,i){if(!IP(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const u of r){let c=yc(u,i.Lu(a));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=bt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ZD(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ot.fromDate(r);return{timestampValue:jd(i.serializer,s)}}if(r instanceof Ot){const s=new Ot(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:jd(i.serializer,s)}}if(r instanceof xy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qa)return{bytesValue:WI(i.serializer,r._byteString)};if(r instanceof kn){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ly(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ty)return function(a,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw u.Bu("VectorValues must only contain numeric values.");return iy(u.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Df(r)}`)}(t,e)}function PP(t,e){const n={};return EI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Po(t,(r,i)=>{const s=yc(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function CP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ot||t instanceof xy||t instanceof qa||t instanceof kn||t instanceof Ey||t instanceof Ty)}function Py(t,e,n){if(!CP(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Df(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Cg(t,e,n){if((e=bt(e))instanceof Ff)return e._internalPath;if(typeof e=="string")return Cy(t,e);throw Bd("Field path arguments must be of type string or ",t,!1,void 0,n)}const n3=new RegExp("[~\\*/\\[\\]]");function Cy(t,e,n){if(e.search(n3)>=0)throw Bd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ff(...e.split("."))._internalPath}catch{throw Bd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Bd(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${r}`),a&&(c+=` in document ${i}`),c+=")"),new he(ee.INVALID_ARGUMENT,u+t+c)}function kP(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new kn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new r3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ky("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class r3 extends AP{data(){return super.data()}}function ky(t,e){return typeof e=="string"?Cy(t,e):e instanceof Ff?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new he(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ay{}class i3 extends Ay{}function RP(t,e,...n){let r=[];e instanceof Ay&&r.push(e),r=r.concat(n),function(s){const a=s.filter(c=>c instanceof by).length,u=s.filter(c=>c instanceof zf).length;if(a>1||a>0&&u>0)throw new he(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class zf extends i3{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new zf(e,n,r)}_apply(e){const n=this._parse(e);return NP(e._query,n),new ko(e.firestore,e.converter,gg(e._query,n))}_parse(e){const n=Iy(e.firestore);return function(s,a,u,c,f,p,m){let y;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new he(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){yE(m,p);const v=[];for(const T of m)v.push(_E(c,s,T));y={arrayValue:{values:v}}}else y=_E(c,s,m)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||yE(m,p),y=t3(u,a,m,p==="in"||p==="not-in");return kt.create(f,p,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function s3(t,e,n){const r=e,i=ky("where",t);return zf._create(i,r,n)}class by extends Ay{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new by(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Pr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let a=i;const u=s.getFlattenedFilters();for(const c of u)NP(a,c),a=gg(a,c)}(e._query,n),new ko(e.firestore,e.converter,gg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function _E(t,e,n){if(typeof(n=bt(n))=="string"){if(n==="")throw new he(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bI(e)&&n.indexOf("/")!==-1)throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(st.fromString(n));if(!ye.isDocumentKey(r))throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return F0(t,new ye(r))}if(n instanceof kn)return F0(t,n._key);throw new he(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Df(n)}.`)}function yE(t,e){if(!Array.isArray(t)||t.length===0)throw new he(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function NP(t,e){const n=function(i,s){for(const a of i)for(const u of a.getFlattenedFilters())if(s.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new he(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class o3{convertValue(e,n="none"){switch(yo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(_o(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Po(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>vt(a.doubleValue));return new Ty(s)}convertGeoPoint(e){return new xy(vt(e.latitude),vt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=X_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(qu(e));default:return null}}convertTimestamp(e){const n=Ss(e);return new Ot(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=st.fromString(e);Ye(JI(r));const i=new Wu(r.get(1),r.get(3)),s=new ye(r.popFirst(5));return i.isEqual(n)||ki(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class LP extends AP{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Kh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ky("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Kh extends LP{data(e={}){return super.data(e)}}class OP{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new nu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Kh(this._firestore,this._userDataWriter,r.key,r,new nu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(u=>{const c=new Kh(i._firestore,i._userDataWriter,u.doc.key,u.doc,new nu(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>s||u.type!==3).map(u=>{const c=new Kh(i._firestore,i._userDataWriter,u.doc.key,u.doc,new nu(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,p=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),p=a.indexOf(u.doc.key)),{type:l3(u.type),doc:c,oldIndex:f,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function l3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe()}}class Ry extends o3{constructor(e){super(),this.firestore=e}convertBytes(e){return new qa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new kn(this.firestore,null,n)}}function Ny(t){t=Gr(t,ko);const e=Gr(t.firestore,vo),n=wy(e),r=new Ry(e);return bP(t._query),HV(n,t._query).then(i=>new OP(e,r,t,i))}function Wa(t,e,n,...r){t=Gr(t,kn);const i=Gr(t.firestore,vo),s=Iy(i);let a;return a=typeof(e=bt(e))=="string"||e instanceof Ff?e3(s,"updateDoc",t._key,e,n,r):XV(s,"updateDoc",t._key,e),Oy(i,[a.toMutation(t._key,Tr.exists(!0))])}function u3(t){return Oy(Gr(t.firestore,vo),[new sy(t._key,Tr.none())])}function DP(t,e){const n=Gr(t.firestore,vo),r=Vf(t),i=a3(t.converter,e);return Oy(n,[JV(Iy(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Tr.exists(!1))]).then(()=>r)}function Ly(t,...e){var n,r,i;t=bt(t);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||gE(e[a])||(s=e[a],a++);const u={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(gE(e[a])){const m=e[a];e[a]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[a+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[a+2]=(i=m.complete)===null||i===void 0?void 0:i.bind(m)}let c,f,p;if(t instanceof kn)f=Gr(t.firestore,vo),p=ry(t._key.path),c={next:m=>{e[a]&&e[a](c3(f,t,m))},error:e[a+1],complete:e[a+2]};else{const m=Gr(t,ko);f=Gr(m.firestore,vo),p=m._query;const y=new Ry(f);c={next:v=>{e[a]&&e[a](new OP(f,y,m,v))},error:e[a+1],complete:e[a+2]},bP(t._query)}return function(y,v,T,I){const O=new wP(I),S=new hP(v,O,T);return y.asyncQueue.enqueueAndForget(async()=>uP(await Pg(y),S)),()=>{O.Za(),y.asyncQueue.enqueueAndForget(async()=>cP(await Pg(y),S))}}(wy(f),p,u,c)}function Oy(t,e){return function(r,i){const s=new ys;return r.asyncQueue.enqueueAndForget(async()=>LV(await $V(r),i,s)),s.promise}(wy(t),e)}function c3(t,e,n){const r=n.docs.get(e._key),i=new Ry(t);return new LP(t,i,e._key,r,new nu(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){el=i})(So),ho(new xs("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),u=new vo(new dD(r.getProvider("auth-internal")),new gD(r.getProvider("app-check-internal")),function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new he(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wu(f.options.projectId,p)}(a,i),a);return s=Object.assign({useFetchStreams:n},s),u._setSettings(s),u},"PUBLIC").setMultipleInstances(!0)),Br(L0,"4.7.3",e),Br(L0,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP="firebasestorage.googleapis.com",h3="storageBucket",d3=2*60*1e3,f3=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends Yr{constructor(e,n,r=0){super(jp(e),`Firebase Storage: ${n} (${jp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Jr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return jp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Zr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Zr||(Zr={}));function jp(t){return"storage/"+t}function p3(){const t="An unknown error occurred, please check the error payload for server response.";return new Jr(Zr.UNKNOWN,t)}function m3(){return new Jr(Zr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function g3(){return new Jr(Zr.CANCELED,"User canceled the upload/download.")}function _3(t){return new Jr(Zr.INVALID_URL,"Invalid URL '"+t+"'.")}function y3(t){return new Jr(Zr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function vE(t){return new Jr(Zr.INVALID_ARGUMENT,t)}function VP(){return new Jr(Zr.APP_DELETED,"The Firebase app was deleted.")}function v3(t){return new Jr(Zr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=vr.makeFromUrl(e,n)}catch{return new vr(e,"")}if(r.path==="")return r;throw y3(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(B){B.path.charAt(B.path.length-1)==="/"&&(B.path_=B.path_.slice(0,-1))}const a="(/(.*))?$",u=new RegExp("^gs://"+i+a,"i"),c={bucket:1,path:3};function f(B){B.path_=decodeURIComponent(B.path)}const p="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",v=new RegExp(`^https?://${m}/${p}/b/${i}/o${y}`,"i"),T={bucket:1,path:3},I=n===MP?"(?:storage.googleapis.com|storage.cloud.google.com)":n,O="([^?#]*)",S=new RegExp(`^https?://${I}/${i}/${O}`,"i"),C=[{regex:u,indices:c,postModify:s},{regex:v,indices:T,postModify:f},{regex:S,indices:{bucket:1,path:2},postModify:f}];for(let B=0;B<C.length;B++){const G=C[B],$=G.regex.exec(e);if($){const R=$[G.indices.bucket];let A=$[G.indices.path];A||(A=""),r=new vr(R,A),G.postModify(r);break}}if(r==null)throw _3(e);return r}}class w3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E3(t,e,n){let r=1,i=null,s=null,a=!1,u=0;function c(){return u===2}let f=!1;function p(...O){f||(f=!0,e.apply(null,O))}function m(O){i=setTimeout(()=>{i=null,t(v,c())},O)}function y(){s&&clearTimeout(s)}function v(O,...S){if(f){y();return}if(O){y(),p.call(null,O,...S);return}if(c()||a){y(),p.call(null,O,...S);return}r<64&&(r*=2);let C;u===1?(u=2,C=0):C=(r+Math.random())*1e3,m(C)}let T=!1;function I(O){T||(T=!0,y(),!f&&(i!==null?(O||(u=2),clearTimeout(i),m(0)):O||(u=1)))}return m(0),s=setTimeout(()=>{a=!0,I(!0)},n),I}function x3(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T3(t){return t!==void 0}function wE(t,e,n,r){if(r<e)throw vE(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw vE(`Invalid value for '${t}'. Expected ${n} or less.`)}function S3(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var $d;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})($d||($d={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I3(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e,n,r,i,s,a,u,c,f,p,m,y=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=u,this.errorCallback_=c,this.timeout_=f,this.progressCallback_=p,this.connectionFactory_=m,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,T)=>{this.resolve_=v,this.reject_=T,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new wh(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=u=>{const c=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,f)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const u=s.getErrorCode()===$d.NO_ERROR,c=s.getStatus();if(!u||I3(c,this.additionalRetryCodes_)&&this.retry){const p=s.getErrorCode()===$d.ABORT;r(!1,new wh(!1,null,p));return}const f=this.successCodes_.indexOf(c)!==-1;r(!0,new wh(f,s))})},n=(r,i)=>{const s=this.resolve_,a=this.reject_,u=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(u,u.getResponse());T3(c)?s(c):s()}catch(c){a(c)}else if(u!==null){const c=p3();c.serverResponse=u.getErrorText(),this.errorCallback_?a(this.errorCallback_(u,c)):a(c)}else if(i.canceled){const c=this.appDelete_?VP():g3();a(c)}else{const c=m3();a(c)}};this.canceled_?n(!1,new wh(!1,null,!0)):this.backoffId_=E3(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&x3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class wh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function C3(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function k3(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function A3(t,e){e&&(t["X-Firebase-GMPID"]=e)}function b3(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function R3(t,e,n,r,i,s,a=!0){const u=S3(t.urlParams),c=t.url+u,f=Object.assign({},t.headers);return A3(f,e),C3(f,n),k3(f,s),b3(f,r),new P3(c,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N3(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function L3(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,n){this._service=e,n instanceof vr?this._location=n:this._location=vr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Hd(e,n)}get root(){const e=new vr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return L3(this._location.path)}get storage(){return this._service}get parent(){const e=N3(this._location.path);if(e===null)return null;const n=new vr(this._location.bucket,e);return new Hd(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw v3(e)}}function EE(t,e){const n=e==null?void 0:e[h3];return n==null?null:vr.makeFromBucketSpec(n,t)}function O3(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:JT(i,t.app.options.projectId))}class D3{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=MP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=d3,this._maxUploadRetryTime=f3,this._requests=new Set,i!=null?this._bucket=vr.makeFromBucketSpec(i,this._host):this._bucket=EE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=vr.makeFromBucketSpec(this._url,e):this._bucket=EE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){wE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){wE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Hd(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new w3(VP());{const a=R3(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const xE="@firebase/storage",TE="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP="storage";function M3(t=V_(),e){t=bt(t);const r=mf(t,FP).getImmediate({identifier:e}),i=ZT("storage");return i&&V3(r,...i),r}function V3(t,e,n,r={}){O3(t,e,n,r)}function F3(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new D3(n,r,i,e,So)}function j3(){ho(new xs(FP,F3,"PUBLIC").setMultipleInstances(!0)),Br(xE,TE,""),Br(xE,TE,"esm2017")}j3();const z3={apiKey:"AIzaSyADAy8ySvJsUP5diMyR9eIUgtPFimpydcA",authDomain:"sap-jdc.firebaseapp.com",projectId:"sap-jdc",storageBucket:"sap-jdc.firebasestorage.app",messagingSenderId:"1079234336489",appId:"1:1079234336489:web:2428621b62a393068ec278",measurementId:"G-PRWSK0TEFZ"},Dy=tS(z3),SE=vf(Dy),kr=GV(Dy);M3(Dy);const jP=async t=>{try{return(await Ny(Ns(kr,t))).docs.map(n=>({id:n.id,...n.data()}))}catch(e){throw console.error(`Error fetching collection ${t}:`,e),e}},U3=async(t,e)=>{var n;try{const r=["CHR","HACCP","Kezia","Tabac"];let i={...e},s=e.statut;r.includes(t)&&((n=e.demandeSAP)!=null&&n.toLowerCase().includes("demande de rma")?s="Demande de RMA":s||(s="Nouveau")),i={...e,statut:s},i.dateCreation||(i.dateCreation=new Date().toISOString()),console.log(`[firebaseService] Attempting to add document to ${t} with data:`,i);const a=await DP(Ns(kr,t),i);return console.log(`[firebaseService] Document successfully added to ${t} with ID: ${a.id} and status: ${s}`),a.id}catch(r){throw console.error(`[firebaseService] Error adding document to ${t}:`,r),console.error("[firebaseService] Data attempted:",e),r}},B3=async(t,e,n)=>{try{const r=Vf(kr,t,e);await Wa(r,n),console.log(`[firebaseService] Document ${e} in ${t} updated successfully.`)}catch(r){throw console.error(`Error updating document ${e} in ${t}:`,r),r}},$3=async(t,e)=>{try{const n=Vf(kr,t,e);await u3(n),console.log(`[firebaseService] Document ${e} from ${t} deleted successfully.`)}catch(n){throw console.error(`Error deleting document ${e} from ${t}:`,n),n}},My=async()=>{try{return[{id:"CHR"},{id:"HACCP"},{id:"Kezia"},{id:"Tabac"}]}catch(t){throw console.error("Error fetching sectors:",t),t}},H3=(t,e)=>{const n=RP(Ns(kr,t));return Ly(n,i=>{const s=i.docs.map(a=>({id:a.id,...a.data()}));e(s)},i=>{console.error(`Error listening to collection ${t}:`,i),e([])})},zP=(t,e)=>{const n=Ns(kr,t);return Ly(n,i=>{const s=[],a=[];i.docs.forEach(u=>{var y;const c=u.data();let f=c.statut;((y=c.demandeSAP)==null?void 0:y.toLowerCase().includes("demande de rma"))&&f!=="Demande de RMA"?(f="Demande de RMA",a.push(Wa(u.ref,{statut:f})),console.log(`Updating ticket ${u.id} in sector ${t} to status: ${f} based on demandeSAP.`)):f||(f="Nouveau",a.push(Wa(u.ref,{statut:f})),console.log(`Updating ticket ${u.id} in sector ${t} to default status: ${f} as it was missing.`)),s.push({id:u.id,...c,statut:f,secteur:t})}),e(s),a.length>0&&Promise.all(a).then(()=>console.log(`Finished background status updates for sector ${t}.`)).catch(u=>console.error(`Error during background status updates for sector ${t}:`,u))},i=>{console.error(`Error listening to tickets for sector ${t}:`,i),e([])})},q3=async t=>{var e;try{const n=Ns(kr,t),r=await Ny(n),i=[],s=[];for(const a of r.docs){const u=a.data();let c=u.statut;((e=u.demandeSAP)==null?void 0:e.toLowerCase().includes("demande de rma"))&&c!=="Demande de RMA"?(c="Demande de RMA",s.push(Wa(a.ref,{statut:c}))):c||(c="Nouveau",s.push(Wa(a.ref,{statut:c}))),i.push({id:a.id,...u,statut:c,secteur:t})}return await Promise.all(s),i}catch(n){throw console.error(`Error fetching tickets for sector ${t}:`,n),n}},Eh=async(t,e,n)=>{try{const r=Vf(kr,t,e);await Wa(r,n)}catch(r){throw console.error(`Error updating ticket ${e} in ${t}:`,r),r}},UP=async()=>{try{return await jP("Envoi")}catch(t){throw console.error("Error fetching envois:",t),t}},W3=async t=>{try{const e=t.map(n=>$3("Envoi",n));return await Promise.all(e),console.log(`[firebaseService] Successfully deleted ${t.length} envois.`),!0}catch(e){throw console.error("[firebaseService] Error deleting multiple envois:",e),e}},BP=async t=>{try{const e=Ns(kr,"geocodes"),n=RP(e,s3("address","==",t)),r=await Ny(n);return r.empty?null:r.docs[0].data()}catch(e){return console.error("Error fetching geocode from Firestore:",e),null}},G3=async(t,e,n)=>{console.log(`Storing geocode for address: ${t} with coordinates: ${e}, ${n}`);try{const r=Ns(kr,"geocodes");if(await BP(t)){console.log(`Geocode already exists for address: ${t}. Skipping storage.`);return}await DP(r,{address:t,latitude:e,longitude:n,timestamp:new Date}),console.log(`Geocode successfully stored for address: ${t}`)}catch(r){console.error("Error storing geocode in Firestore:",r)}},kg=async()=>{try{return await jP("users")}catch(t){throw console.error("Error fetching users:",t),t}},K3=t=>{const e=Ns(kr,"Envoi");return Ly(e,r=>{t(r.size)},r=>{console.error("Error listening to envois count:",r),t(0)})},zp="b93a76ecb4b0439dbfe9e64c3c6aff07",Z3="https://api.opencagedata.com/geocode/v1/json",$P=()=>{const[t,e]=H.useState([]),[n,r]=H.useState(!1),[i,s]=H.useState(null);return H.useRef([]),H.useRef(!1),H.useRef(null),{geocode:async u=>{var c,f,p,m,y;console.log(`[useGeoCoding] geocode function called for address: ${u}`),r(!0),s(null);try{console.log(`[useGeoCoding] Checking DB for: "${u}"`);const v=await BP(u);if(v)return console.log(`[useGeoCoding] DB Hit for: "${u}"`,v),r(!1),{latitude:v.latitude,longitude:v.longitude};console.log(`[useGeoCoding] DB Miss for: "${u}". Fetching from API.`);try{const T=await Et.get(Z3,{params:{q:u,key:zp,language:"fr",countrycode:"fr",limit:1},timeout:7e3});if(T.data.results&&T.data.results.length>0){const I=T.data.results[0].geometry;if(I&&typeof I.lat=="number"&&typeof I.lng=="number"){const O={latitude:I.lat,longitude:I.lng};return console.log(`[useGeoCoding] API Success for: "${u}"`,O),G3(u,O.latitude,O.longitude).then(()=>console.log(`[useGeoCoding] Stored geocode for: "${u}"`)).catch(S=>console.error(`[useGeoCoding] Failed to store geocode for "${u}":`,S)),r(!1),O}else return console.warn(`[useGeoCoding] No valid geometry from API for: "${u}"`,T.data.results[0]),r(!1),null}else return console.warn(`[useGeoCoding] No results from API for: "${u}"`),r(!1),null}catch(T){let I=`Erreur API pour "${u}"`;return T.message==="Clé API manquante"?(I="Clé API manquante ou invalide.",console.error("[useGeoCoding] API Key is missing!")):T.code==="ECONNABORTED"?(I=`Timeout API pour "${u}"`,console.error("[useGeoCoding] Geocoding API timeout:",T.message)):((c=T.response)==null?void 0:c.status)===401||((f=T.response)==null?void 0:f.status)===403?(I="Clé API invalide (401/403)",console.error("[useGeoCoding] Geocoding API Auth error:",T.message)):((p=T.response)==null?void 0:p.status)===402?(I="Limite API atteinte (402)",console.error("[useGeoCoding] Geocoding API 402 error:",T.message)):((m=T.response)==null?void 0:m.status)===429?(I="Trop de requêtes API (429)",console.error("[useGeoCoding] Geocoding API 429 error:",T.message)):console.error("[useGeoCoding] Geocoding API error:",T.message,(y=T.response)==null?void 0:y.data),s(I),r(!1),null}}catch(v){const T=`Erreur DB pour "${u}"`;return s(T),console.error("[useGeoCoding] Geocoding DB error:",v.message),r(!1),null}},coordinates:t,isLoading:n,error:i}},HP=[{name:"Baptiste",feature:{type:"Feature",properties:{name:"Baptiste"},geometry:{type:"Polygon",coordinates:[[[4.8836577,44.886044],[4.2842162,44.9924881],[3.8667357,44.7225929],[4.0644896,44.3231158],[4.646765,44.3034632],[5.4927123,44.1124911],[5.7151854,44.1834396],[5.4515135,44.405585],[5.836035,44.6894078],[5.4563201,44.7906117],[5.1425231,44.9652883],[5.0251067,44.94488],[4.8836577,44.886044]]]}}},{name:"julien Isère",feature:{type:"Feature",properties:{name:"julien Isère"},geometry:{type:"Polygon",coordinates:[[[5.4712372,45.0877866],[5.4087525,45.2146597],[5.3407746,45.3460764],[5.3579407,45.3923861],[5.154007,45.5084757],[5.1588727,45.6134865],[5.0592499,45.6488118],[4.8024445,45.5810905],[4.8628693,45.5253153],[4.7543793,45.4535917],[4.7548924,45.3637067],[4.8045044,45.3002118],[4.9947052,45.3475241],[5.1794129,45.2518931],[5.1505738,45.0800295],[5.3819733,45.0465649],[5.4712372,45.0877866]]]}}},{name:"Julien",feature:{type:"Feature",properties:{name:"Julien"},geometry:{type:"Polygon",coordinates:[[[5.4607639,44.7993594],[5.47999,45.0836844],[5.3804264,45.04343],[5.1462803,45.0788359],[5.1744328,45.2507031],[4.9952183,45.3444058],[4.8029575,45.2970908],[4.7548924,45.3637067],[4.5983372,45.2912944],[4.4905338,45.2303966],[4.2852268,44.9963497],[4.8812351,44.8894264],[5.0206242,44.946315],[5.1435337,44.968666],[5.4607639,44.7993594]]]}}},{name:"Florian",feature:{type:"Feature",properties:{name:"Florian"},geometry:{type:"Polygon",coordinates:[[[5.8179481,44.7013913],[6.1461645,44.8612524],[6.3569647,44.8558986],[6.3260653,45.0012533],[6.2072756,45.0187293],[6.2628937,45.1254119],[6.1619567,45.160767],[6.1303705,45.4370377],[5.9793082,45.5852412],[5.8893576,45.6020577],[5.6256856,45.6083024],[5.3626999,45.878565],[5.2226244,45.7661144],[5.0722489,45.7910165],[5.161513,45.6990145],[5.0592036,45.646717],[5.1615684,45.610667],[5.1546475,45.5049321],[5.3668206,45.3946213],[5.3482813,45.3459005],[5.4801178,45.0890645],[5.4718786,44.7959962],[5.8179481,44.7013913]]]}}},{name:"Matthieu",feature:{type:"Feature",properties:{name:"Matthieu"},geometry:{type:"Polygon",coordinates:[[[5.811555,46.0055516],[5.8369609,45.9325323],[5.8778364,45.8310799],[5.9590929,45.8132902],[5.9993579,45.7506936],[6.1535045,45.7550725],[6.18921,45.7004294],[6.3128062,45.6889188],[6.5181132,45.9038709],[6.7158671,45.7248816],[6.8023845,45.7718382],[7.0440837,45.9277564],[6.894395,46.118946],[6.8113109,46.1322712],[6.8628093,46.2829067],[6.7934581,46.3279694],[6.8161174,46.4269768],[6.5201732,46.458678],[6.2269755,46.3146916],[6.309373,46.2468299],[5.9578105,46.1346504],[5.8294078,46.1065697],[5.811555,46.0055516]]]}}},{name:"Guillem",feature:{type:"Feature",properties:{name:"Guillem"},geometry:{type:"Polygon",coordinates:[[[5.8274262,45.9345997],[5.7704346,45.7264774],[5.6413453,45.6194831],[5.889911,45.6108379],[5.984668,45.5940239],[6.1350434,45.4458434],[6.1789887,45.1744565],[6.2696259,45.1376567],[6.4591401,45.0523449],[6.6376679,45.1095567],[7.1526521,45.251852],[7.185611,45.4053629],[6.807956,45.7648112],[6.7118256,45.7188075],[6.5181916,45.8968606],[6.3190644,45.6823611],[6.1831086,45.693873],[6.147403,45.7456476],[5.9935944,45.7446893],[5.9496491,45.8069479],[5.8741181,45.8241765],[5.8274262,45.9345997]]]}}}],Q3={Baptiste:{color:"#097138",weight:2,fillColor:"#097138",fillOpacity:.3},"julien Isère":{color:"#9C27B0",weight:2,fillColor:"#9C27B0",fillOpacity:.3},Julien:{color:"#E65100",weight:2,fillColor:"#E65100",fillOpacity:.3},Florian:{color:"#FFEA00",weight:2,fillColor:"#FFEA00",fillOpacity:.3},Matthieu:{color:"#9FA8DA",weight:2,fillColor:"#9FA8DA",fillOpacity:.3},Guillem:{color:"#000000",weight:2,fillColor:"#000000",fillOpacity:.3}},IE={color:"#3388ff",weight:2,fillColor:"#3388ff",fillOpacity:.3},Y3=(t="#3388ff")=>Jl.divIcon({className:"custom-div-icon",html:`<div style="background-color:${t}; width:15px; height:15px; border-radius:50%; border: 2px solid white;"></div>`,iconSize:[15,15],iconAnchor:[7,7],popupAnchor:[0,-7]}),J3=({tickets:t})=>{const e=H.useRef(null),n=H.useRef(null),r=H.useRef([]),i=H.useRef(null),[s,a]=H.useState(null),{geocode:u}=$P(),[c,f]=H.useState(!1),p=H.useRef(new Map),m=H.useRef(!1);return H.useEffect(()=>{if(!e.current||n.current)return;console.log("[InteractiveMap] Initializing map...");const y=Jl.map(e.current).setView([46.2276,2.2137],6);Jl.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(y),n.current=y;try{const v=Jl.geoJSON([],{style:T=>{if(T.properties&&T.properties.name){const I=T.properties.name;return Q3[I]||IE}return IE},onEachFeature:(T,I)=>{T.properties&&T.properties.name&&I.bindPopup(`<b>Secteur:</b> ${T.properties.name}`)}});HP.forEach(T=>{v.addData(T.feature)}),v.addTo(y),i.current=v,v.getBounds().isValid()&&y.fitBounds(v.getBounds()),console.log("[InteractiveMap] Added GeoJSON zones to map with proper colors")}catch(v){console.error("[InteractiveMap] Error adding GeoJSON zones:",v),a("Erreur lors du chargement des zones")}return f(!0),console.log("[InteractiveMap] Map initialized"),()=>{console.log("[InteractiveMap] Cleaning up map"),n.current&&(n.current.remove(),n.current=null)}},[]),H.useEffect(()=>{if(!c||!n.current)return;(async()=>{if(!m.current){m.current=!0,console.log(`[InteractiveMap] Processing ${t.length} tickets for markers`),r.current.forEach(v=>{n.current&&v.remove()}),r.current=[];for(const v of t)if(v.adresse)try{let T;if(p.current.has(v.adresse))T=p.current.get(v.adresse),console.log(`[InteractiveMap] Using cached coordinates for: ${v.adresse}`,T);else{const I=await u(v.adresse);I&&(T={lat:I.latitude,lng:I.longitude},p.current.set(v.adresse,T),console.log(`[InteractiveMap] Geocoded address: ${v.adresse}`,T))}if(T&&n.current){let I="#3388ff";v.statut&&(v.statut.toLowerCase().includes("en cours")?I="#FFA500":v.statut.toLowerCase().includes("terminé")?I="#4CAF50":v.statut.toLowerCase().includes("annulé")&&(I="#F44336"));const O=Y3(I),S=Jl.marker([T.lat,T.lng],{icon:O}).bindPopup(`<b>${v.raisonSociale||"Sans nom"}</b><br/>${v.adresse}<br/>Statut: ${v.statut||"Non défini"}`);S.addTo(n.current),r.current.push(S),console.log(`[InteractiveMap] Added circular marker for: ${v.adresse}`)}}catch(T){console.error(`[InteractiveMap] Error processing ticket: ${v.id}`,T)}m.current=!1,console.log(`[InteractiveMap] Added ${r.current.length} circular markers to map`)}})()},[t,c,u]),x.jsxs("div",{className:"relative",children:[x.jsx("div",{ref:e,className:"w-full h-[500px] rounded-lg"}),s&&x.jsx("div",{className:"absolute top-2 right-2 bg-red-100 text-red-700 px-4 py-2 rounded",children:s})]})},Up=()=>{const[t,e]=H.useState(0),[n,r]=H.useState(0),[i,s]=H.useState([]),[a,u]=H.useState(!0),[c,f]=H.useState(!0),[p,m]=H.useState(null),[y,v]=H.useState(null),T=H.useRef([]),I=H.useRef({});return H.useEffect(()=>{u(!0),f(!0),m(null),v(null),I.current={};let O=!0;const S=K3(C=>{O&&(e(C),a&&u(!1))});return(async()=>{try{console.log("[DashboardPage] Fetching sectors...");const C=await My();if(!O)return;if(console.log(`[DashboardPage] Fetched ${C.length} sectors. Setting up listeners...`),T.current.forEach(B=>B()),T.current=[],I.current={},C.length===0){console.warn("[DashboardPage] No sectors found. Map data will likely be empty."),O&&(s([]),r(0),f(!1));return}C.forEach(B=>{const G=B.id;I.current[G]=[],console.log(`[DashboardPage] Setting up listener for sector: ${G}`);const $=zP(G,R=>{if(O){console.log(`[DashboardPage] Received ${R.length} tickets for sector: ${G}`),I.current[G]=R;let A=[],D=0;Object.values(I.current).forEach(M=>{A=A.concat(M),D+=M.length}),console.log(`[DashboardPage] Updating state. Total tickets: ${D}, Combined tickets for map:`,A.length),s(A),r(D),c&&(console.log("[DashboardPage] Setting loadingMapData to false."),f(!1)),v(null)}else console.log(`[DashboardPage] Listener update for sector ${G} ignored (component unmounted).`)},R=>{console.error(`[DashboardPage] Error listening to tickets for sector ${G}:`,R),O&&v(A=>A?`${A}, Erreur secteur ${G}`:`Erreur chargement tickets secteur ${G}`)});T.current.push($)}),O&&a&&u(!1)}catch(C){console.error("[DashboardPage] Error fetching sectors or setting up ticket listeners:",C),O&&(m("Erreur chargement secteurs"),v("Erreur chargement données carte."),u(!1),f(!1))}})(),()=>{O=!1,console.log("[DashboardPage] Cleaning up listeners..."),S(),console.log(`[DashboardPage] Cleaning up ${T.current.length} ticket listeners.`),T.current.forEach(C=>C()),T.current=[],console.log("[DashboardPage] Dashboard listeners cleaned up.")}},[]),console.log("[DashboardPage] Rendering. LoadingMapData:",c,"ErrorMapData:",y,"TicketsData length:",i.length),x.jsxs("div",{className:"space-y-6",children:[x.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Tableau de Bord"}),x.jsx(RO,{envoisCount:t,ticketsCount:n,loading:a,error:p}),x.jsx("div",{className:"card bg-base-100 shadow-xl",children:x.jsxs("div",{className:"card-body",children:[x.jsx("h2",{className:"card-title",children:"Carte Interactive des Tickets SAP et Secteurs"})," ",c&&x.jsxs("div",{className:"flex justify-center items-center h-64",children:[x.jsx("span",{className:"loading loading-spinner loading-lg"}),x.jsx("p",{className:"ml-2",children:"Chargement des données de la carte..."})]}),y&&!c&&x.jsxs("div",{className:"text-error text-center p-4",children:["Erreur lors du chargement des données de la carte: ",y]}),!c&&!y&&x.jsx(J3,{tickets:i}),!c&&!y&&i.length===0&&x.jsx("div",{className:"text-center p-4 text-gray-500",children:"Aucun ticket avec une adresse valide à afficher sur la carte pour le moment."})]})})]})},X3=({groupedTickets:t,onSelectTicket:e,selectedTicketId:n,groupByField:r})=>{const[i,s]=wr.useState({});wr.useEffect(()=>{if(n){const c=Object.keys(t).find(f=>t[f].some(p=>p.id===n));c&&!i[c]&&s(f=>({...f,[c]:!0}))}},[n]);const a=c=>{s(f=>({...f,[c]:!f[c]}))},u=Object.keys(t).sort();return u.length===0?x.jsx("p",{className:"text-center text-gray-500",children:"Aucun ticket à afficher."}):x.jsx("div",{className:"space-y-2",children:u.map(c=>{const f=t[c],p=i[c]??!1;return x.jsxs("div",{className:"collapse collapse-arrow border border-base-300 bg-base-100 rounded-md",children:[x.jsx("input",{type:"checkbox",checked:p,onChange:()=>a(c),className:"min-h-0 p-0","aria-label":`Toggle group ${c}`}),x.jsx("div",{className:"collapse-title text-md font-medium cursor-pointer flex justify-between items-center p-2 min-h-0",onClick:()=>a(c),children:x.jsxs("span",{children:[c," (",f.length,")"]})}),x.jsx("div",{className:`collapse-content p-0 ${p?"expanded":""}`,children:x.jsx("ul",{className:"menu menu-sm bg-base-100 p-0 [&_li>*]:rounded-none",children:f.map(m=>x.jsx("li",{children:x.jsx("a",{href:"#",onClick:y=>{y.preventDefault(),e(m)},className:`flex justify-between items-center p-2 ${m.id===n?"active":""}`,children:x.jsxs("div",{className:"flex-1 overflow-hidden mr-2",children:[x.jsx("span",{className:"block truncate text-xs font-semibold",children:m.numeroSAP||m.codeClient||`ID: ${m.id.substring(0,6)}...`}),x.jsxs("span",{className:"block truncate text-xs text-gray-500",children:["Statut: ",m.statut||"N/A"]}),m.salesperson&&x.jsxs("span",{className:"block truncate text-xs text-info mt-1 flex items-center",children:[x.jsx(AO,{className:"mr-1 flex-shrink-0"}),m.salesperson]})]})})},m.id))})})]},c)})})},PE="AIzaSyAZqeCNWSWu1D4iFthrCW7sx9Ky2jlqoUg",eF="https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent",CE=t=>{const[e,n]=H.useState(null),[r,i]=H.useState(!1),[s,a]=H.useState(null);return H.useEffect(()=>{if(!t){n(null);return}(async()=>{i(!0),a(null);try{console.log("Prompt sent to Gemini:",t),console.log("Gemini API Key:",PE);const c=JSON.stringify({contents:[{parts:[{text:t}]}]}),f=await fetch(`${eF}?key=${PE}`,{method:"POST",headers:{"Content-Type":"application/json"},body:c});if(!f.ok){const m=await f.json();console.error("Gemini summary error (fetch error):",m),a(`Erreur lors de la requête: ${f.status} - ${f.statusText}`),n(null),i(!1);return}const p=await f.json();if(console.log("Gemini API response:",p),p.candidates&&p.candidates.length>0){const m=p.candidates[0].content.parts[0].text;n(m),console.log("Gemini summary generated successfully:",m)}else a("Impossible de générer un résumé: Réponse inattendue de l'API"),n(null),console.error("Gemini API response unexpected:",p)}catch(c){a(`Erreur lors de la génération du résumé: ${c.message}`),n(null),console.error("Gemini summary error:",c)}finally{i(!1)}})()},[t]),{summary:e,isLoading:r,error:s}};function tF(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const nF=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,rF=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,iF={};function kE(t,e){return(iF.jsx?rF:nF).test(t)}const sF=/[ \t\n\f\r]/g;function oF(t){return typeof t=="object"?t.type==="text"?AE(t.value):!1:AE(t)}function AE(t){return t.replace(sF,"")===""}class vc{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}vc.prototype.normal={};vc.prototype.property={};vc.prototype.space=void 0;function qP(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new vc(n,r,e)}function Ag(t){return t.toLowerCase()}class bn{constructor(e,n){this.attribute=n,this.property=e}}bn.prototype.attribute="";bn.prototype.booleanish=!1;bn.prototype.boolean=!1;bn.prototype.commaOrSpaceSeparated=!1;bn.prototype.commaSeparated=!1;bn.prototype.defined=!1;bn.prototype.mustUseProperty=!1;bn.prototype.number=!1;bn.prototype.overloadedBoolean=!1;bn.prototype.property="";bn.prototype.spaceSeparated=!1;bn.prototype.space=void 0;let aF=0;const Re=Ao(),Pt=Ao(),WP=Ao(),se=Ao(),tt=Ao(),ba=Ao(),Dn=Ao();function Ao(){return 2**++aF}const bg=Object.freeze(Object.defineProperty({__proto__:null,boolean:Re,booleanish:Pt,commaOrSpaceSeparated:Dn,commaSeparated:ba,number:se,overloadedBoolean:WP,spaceSeparated:tt},Symbol.toStringTag,{value:"Module"})),Bp=Object.keys(bg);class Vy extends bn{constructor(e,n,r,i){let s=-1;if(super(e,n),bE(this,"space",i),typeof r=="number")for(;++s<Bp.length;){const a=Bp[s];bE(this,Bp[s],(r&bg[a])===bg[a])}}}Vy.prototype.defined=!0;function bE(t,e,n){n&&(t[e]=n)}function rl(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new Vy(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[Ag(r)]=r,n[Ag(s.attribute)]=r}return new vc(e,n,t.space)}const GP=rl({properties:{ariaActiveDescendant:null,ariaAtomic:Pt,ariaAutoComplete:null,ariaBusy:Pt,ariaChecked:Pt,ariaColCount:se,ariaColIndex:se,ariaColSpan:se,ariaControls:tt,ariaCurrent:null,ariaDescribedBy:tt,ariaDetails:null,ariaDisabled:Pt,ariaDropEffect:tt,ariaErrorMessage:null,ariaExpanded:Pt,ariaFlowTo:tt,ariaGrabbed:Pt,ariaHasPopup:null,ariaHidden:Pt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:tt,ariaLevel:se,ariaLive:null,ariaModal:Pt,ariaMultiLine:Pt,ariaMultiSelectable:Pt,ariaOrientation:null,ariaOwns:tt,ariaPlaceholder:null,ariaPosInSet:se,ariaPressed:Pt,ariaReadOnly:Pt,ariaRelevant:null,ariaRequired:Pt,ariaRoleDescription:tt,ariaRowCount:se,ariaRowIndex:se,ariaRowSpan:se,ariaSelected:Pt,ariaSetSize:se,ariaSort:null,ariaValueMax:se,ariaValueMin:se,ariaValueNow:se,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function KP(t,e){return e in t?t[e]:e}function ZP(t,e){return KP(t,e.toLowerCase())}const lF=rl({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ba,acceptCharset:tt,accessKey:tt,action:null,allow:null,allowFullScreen:Re,allowPaymentRequest:Re,allowUserMedia:Re,alt:null,as:null,async:Re,autoCapitalize:null,autoComplete:tt,autoFocus:Re,autoPlay:Re,blocking:tt,capture:null,charSet:null,checked:Re,cite:null,className:tt,cols:se,colSpan:null,content:null,contentEditable:Pt,controls:Re,controlsList:tt,coords:se|ba,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Re,defer:Re,dir:null,dirName:null,disabled:Re,download:WP,draggable:Pt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Re,formTarget:null,headers:tt,height:se,hidden:Re,high:se,href:null,hrefLang:null,htmlFor:tt,httpEquiv:tt,id:null,imageSizes:null,imageSrcSet:null,inert:Re,inputMode:null,integrity:null,is:null,isMap:Re,itemId:null,itemProp:tt,itemRef:tt,itemScope:Re,itemType:tt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Re,low:se,manifest:null,max:null,maxLength:se,media:null,method:null,min:null,minLength:se,multiple:Re,muted:Re,name:null,nonce:null,noModule:Re,noValidate:Re,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Re,optimum:se,pattern:null,ping:tt,placeholder:null,playsInline:Re,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Re,referrerPolicy:null,rel:tt,required:Re,reversed:Re,rows:se,rowSpan:se,sandbox:tt,scope:null,scoped:Re,seamless:Re,selected:Re,shadowRootClonable:Re,shadowRootDelegatesFocus:Re,shadowRootMode:null,shape:null,size:se,sizes:null,slot:null,span:se,spellCheck:Pt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:se,step:null,style:null,tabIndex:se,target:null,title:null,translate:null,type:null,typeMustMatch:Re,useMap:null,value:Pt,width:se,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:tt,axis:null,background:null,bgColor:null,border:se,borderColor:null,bottomMargin:se,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Re,declare:Re,event:null,face:null,frame:null,frameBorder:null,hSpace:se,leftMargin:se,link:null,longDesc:null,lowSrc:null,marginHeight:se,marginWidth:se,noResize:Re,noHref:Re,noShade:Re,noWrap:Re,object:null,profile:null,prompt:null,rev:null,rightMargin:se,rules:null,scheme:null,scrolling:Pt,standby:null,summary:null,text:null,topMargin:se,valueType:null,version:null,vAlign:null,vLink:null,vSpace:se,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Re,disableRemotePlayback:Re,prefix:null,property:null,results:se,security:null,unselectable:null},space:"html",transform:ZP}),uF=rl({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Dn,accentHeight:se,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:se,amplitude:se,arabicForm:null,ascent:se,attributeName:null,attributeType:null,azimuth:se,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:se,by:null,calcMode:null,capHeight:se,className:tt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:se,diffuseConstant:se,direction:null,display:null,dur:null,divisor:se,dominantBaseline:null,download:Re,dx:null,dy:null,edgeMode:null,editable:null,elevation:se,enableBackground:null,end:null,event:null,exponent:se,externalResourcesRequired:null,fill:null,fillOpacity:se,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ba,g2:ba,glyphName:ba,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:se,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:se,horizOriginX:se,horizOriginY:se,id:null,ideographic:se,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:se,k:se,k1:se,k2:se,k3:se,k4:se,kernelMatrix:Dn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:se,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:se,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:se,overlineThickness:se,paintOrder:null,panose1:null,path:null,pathLength:se,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:tt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:se,pointsAtY:se,pointsAtZ:se,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Dn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Dn,rev:Dn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Dn,requiredFeatures:Dn,requiredFonts:Dn,requiredFormats:Dn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:se,specularExponent:se,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:se,strikethroughThickness:se,string:null,stroke:null,strokeDashArray:Dn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:se,strokeOpacity:se,strokeWidth:null,style:null,surfaceScale:se,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Dn,tabIndex:se,tableValues:null,target:null,targetX:se,targetY:se,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Dn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:se,underlineThickness:se,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:se,values:null,vAlphabetic:se,vMathematical:se,vectorEffect:null,vHanging:se,vIdeographic:se,version:null,vertAdvY:se,vertOriginX:se,vertOriginY:se,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:se,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:KP}),QP=rl({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),YP=rl({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:ZP}),JP=rl({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),cF={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},hF=/[A-Z]/g,RE=/-[a-z]/g,dF=/^data[-\w.:]+$/i;function fF(t,e){const n=Ag(e);let r=e,i=bn;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&dF.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(RE,mF);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!RE.test(s)){let a=s.replace(hF,pF);a.charAt(0)!=="-"&&(a="-"+a),e="data"+a}}i=Vy}return new i(r,e)}function pF(t){return"-"+t.toLowerCase()}function mF(t){return t.charAt(1).toUpperCase()}const gF=qP([GP,lF,QP,YP,JP],"html"),Fy=qP([GP,uF,QP,YP,JP],"svg");function _F(t){return t.join(" ").trim()}var jy={},NE=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,yF=/\n/g,vF=/^\s*/,wF=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,EF=/^:\s*/,xF=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,TF=/^[;\s]*/,SF=/^\s+|\s+$/g,IF=`
`,LE="/",OE="*",Qs="",PF="comment",CF="declaration",kF=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,r=1;function i(T){var I=T.match(yF);I&&(n+=I.length);var O=T.lastIndexOf(IF);r=~O?T.length-O:r+T.length}function s(){var T={line:n,column:r};return function(I){return I.position=new a(T),f(),I}}function a(T){this.start=T,this.end={line:n,column:r},this.source=e.source}a.prototype.content=t;function u(T){var I=new Error(e.source+":"+n+":"+r+": "+T);if(I.reason=T,I.filename=e.source,I.line=n,I.column=r,I.source=t,!e.silent)throw I}function c(T){var I=T.exec(t);if(I){var O=I[0];return i(O),t=t.slice(O.length),I}}function f(){c(vF)}function p(T){var I;for(T=T||[];I=m();)I!==!1&&T.push(I);return T}function m(){var T=s();if(!(LE!=t.charAt(0)||OE!=t.charAt(1))){for(var I=2;Qs!=t.charAt(I)&&(OE!=t.charAt(I)||LE!=t.charAt(I+1));)++I;if(I+=2,Qs===t.charAt(I-1))return u("End of comment missing");var O=t.slice(2,I-2);return r+=2,i(O),t=t.slice(I),r+=2,T({type:PF,comment:O})}}function y(){var T=s(),I=c(wF);if(I){if(m(),!c(EF))return u("property missing ':'");var O=c(xF),S=T({type:CF,property:DE(I[0].replace(NE,Qs)),value:O?DE(O[0].replace(NE,Qs)):Qs});return c(TF),S}}function v(){var T=[];p(T);for(var I;I=y();)I!==!1&&(T.push(I),p(T));return T}return f(),v()};function DE(t){return t?t.replace(SF,Qs):Qs}var AF=wu&&wu.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(jy,"__esModule",{value:!0});jy.default=RF;var bF=AF(kF);function RF(t,e){var n=null;if(!t||typeof t!="string")return n;var r=(0,bF.default)(t),i=typeof e=="function";return r.forEach(function(s){if(s.type==="declaration"){var a=s.property,u=s.value;i?e(a,u,s):u&&(n=n||{},n[a]=u)}}),n}var Uf={};Object.defineProperty(Uf,"__esModule",{value:!0});Uf.camelCase=void 0;var NF=/^--[a-zA-Z0-9_-]+$/,LF=/-([a-z])/g,OF=/^[^-]+$/,DF=/^-(webkit|moz|ms|o|khtml)-/,MF=/^-(ms)-/,VF=function(t){return!t||OF.test(t)||NF.test(t)},FF=function(t,e){return e.toUpperCase()},ME=function(t,e){return"".concat(e,"-")},jF=function(t,e){return e===void 0&&(e={}),VF(t)?t:(t=t.toLowerCase(),e.reactCompat?t=t.replace(MF,ME):t=t.replace(DF,ME),t.replace(LF,FF))};Uf.camelCase=jF;var zF=wu&&wu.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},UF=zF(jy),BF=Uf;function Rg(t,e){var n={};return!t||typeof t!="string"||(0,UF.default)(t,function(r,i){r&&i&&(n[(0,BF.camelCase)(r,e)]=i)}),n}Rg.default=Rg;var $F=Rg;const HF=Gd($F),XP=eC("end"),zy=eC("start");function eC(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function qF(t){const e=zy(t),n=XP(t);if(e&&n)return{start:e,end:n}}function _u(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?VE(t.position):"start"in t||"end"in t?VE(t):"line"in t||"column"in t?Ng(t):""}function Ng(t){return FE(t&&t.line)+":"+FE(t&&t.column)}function VE(t){return Ng(t&&t.start)+"-"+Ng(t&&t.end)}function FE(t){return t&&typeof t=="number"?t:1}class an extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},a=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(a=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?s.ruleId=r:(s.source=r.slice(0,c),s.ruleId=r.slice(c+1))}if(!s.place&&s.ancestors&&s.ancestors){const c=s.ancestors[s.ancestors.length-1];c&&(s.place=c.position)}const u=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=u?u.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=u?u.line:void 0,this.name=_u(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=a&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}an.prototype.file="";an.prototype.name="";an.prototype.reason="";an.prototype.message="";an.prototype.stack="";an.prototype.column=void 0;an.prototype.line=void 0;an.prototype.ancestors=void 0;an.prototype.cause=void 0;an.prototype.fatal=void 0;an.prototype.place=void 0;an.prototype.ruleId=void 0;an.prototype.source=void 0;const Uy={}.hasOwnProperty,WF=new Map,GF=/[A-Z]/g,KF=new Set(["table","tbody","thead","tfoot","tr"]),ZF=new Set(["td","th"]),tC="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function QF(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=i6(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=r6(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Fy:gF,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=nC(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function nC(t,e,n){if(e.type==="element")return YF(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return JF(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return e6(t,e,n);if(e.type==="mdxjsEsm")return XF(t,e);if(e.type==="root")return t6(t,e,n);if(e.type==="text")return n6(t,e)}function YF(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Fy,t.schema=i),t.ancestors.push(e);const s=iC(t,e.tagName,!1),a=s6(t,e);let u=$y(t,e);return KF.has(e.tagName)&&(u=u.filter(function(c){return typeof c=="string"?!oF(c):!0})),rC(t,a,s,e),By(a,u),t.ancestors.pop(),t.schema=r,t.create(e,s,a,n)}function JF(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}Qu(t,e.position)}function XF(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Qu(t,e.position)}function e6(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=Fy,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:iC(t,e.name,!0),a=o6(t,e),u=$y(t,e);return rC(t,a,s,e),By(a,u),t.ancestors.pop(),t.schema=r,t.create(e,s,a,n)}function t6(t,e,n){const r={};return By(r,$y(t,e)),t.create(e,t.Fragment,r,n)}function n6(t,e){return e.value}function rC(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function By(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function r6(t,e,n){return r;function r(i,s,a,u){const f=Array.isArray(a.children)?n:e;return u?f(s,a,u):f(s,a)}}function i6(t,e){return n;function n(r,i,s,a){const u=Array.isArray(s.children),c=zy(r);return e(i,s,a,u,{columnNumber:c?c.column-1:void 0,fileName:t,lineNumber:c?c.line:void 0},void 0)}}function s6(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&Uy.call(e.properties,i)){const s=a6(t,i,e.properties[i]);if(s){const[a,u]=s;t.tableCellAlignToStyle&&a==="align"&&typeof u=="string"&&ZF.has(e.tagName)?r=u:n[a]=u}}if(r){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function o6(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const s=r.data.estree.body[0];s.type;const a=s.expression;a.type;const u=a.properties[0];u.type,Object.assign(n,t.evaluater.evaluateExpression(u.argument))}else Qu(t,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const u=r.value.data.estree.body[0];u.type,s=t.evaluater.evaluateExpression(u.expression)}else Qu(t,e.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function $y(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:WF;for(;++r<e.children.length;){const s=e.children[r];let a;if(t.passKeys){const c=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(c){const f=i.get(c)||0;a=c+"-"+f,i.set(c,f+1)}}const u=nC(t,s,a);u!==void 0&&n.push(u)}return n}function a6(t,e,n){const r=fF(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?tF(n):_F(n)),r.property==="style"){let i=typeof n=="object"?n:l6(t,String(n));return t.stylePropertyNameCase==="css"&&(i=u6(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?cF[r.property]||r.property:r.attribute,n]}}function l6(t,e){try{return HF(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new an("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=tC+"#cannot-parse-style-attribute",i}}function iC(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,a;for(;++s<i.length;){const u=kE(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};a=a?{type:"MemberExpression",object:a,property:u,computed:!!(s&&u.type==="Literal"),optional:!1}:u}r=a}else r=kE(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return Uy.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);Qu(t)}function Qu(t,e){const n=new an("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=tC+"#cannot-handle-mdx-estrees-without-createevaluater",n}function u6(t){const e={};let n;for(n in t)Uy.call(t,n)&&(e[c6(n)]=t[n]);return e}function c6(t){let e=t.replace(GF,h6);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function h6(t){return"-"+t.toLowerCase()}const $p={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},d6={};function f6(t,e){const n=d6,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return sC(t,r,i)}function sC(t,e,n){if(p6(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return jE(t.children,e,n)}return Array.isArray(t)?jE(t,e,n):""}function jE(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=sC(t[i],e,n);return r.join("")}function p6(t){return!!(t&&typeof t=="object")}const zE=document.createElement("i");function Hy(t){const e="&"+t+";";zE.innerHTML=e;const n=zE.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Qr(t,e,n,r){const i=t.length;let s=0,a;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)a=Array.from(r),a.unshift(e,n),t.splice(...a);else for(n&&t.splice(e,n);s<r.length;)a=r.slice(s,s+1e4),a.unshift(e,0),t.splice(...a),s+=1e4,e+=1e4}function ir(t,e){return t.length>0?(Qr(t,t.length,0,e),t):e}const UE={}.hasOwnProperty;function m6(t){const e={};let n=-1;for(;++n<t.length;)g6(e,t[n]);return e}function g6(t,e){let n;for(n in e){const i=(UE.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let a;if(s)for(a in s){UE.call(i,a)||(i[a]=[]);const u=s[a];_6(i[a],Array.isArray(u)?u:u?[u]:[])}}}function _6(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);Qr(t,0,0,r)}function oC(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function Ra(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Fr=Ls(/[A-Za-z]/),jn=Ls(/[\dA-Za-z]/),y6=Ls(/[#-'*+\--9=?A-Z^-~]/);function Lg(t){return t!==null&&(t<32||t===127)}const Og=Ls(/\d/),v6=Ls(/[\dA-Fa-f]/),w6=Ls(/[!-/:-@[-`{-~]/);function Se(t){return t!==null&&t<-2}function An(t){return t!==null&&(t<0||t===32)}function Ke(t){return t===-2||t===-1||t===32}const E6=Ls(new RegExp("\\p{P}|\\p{S}","u")),x6=Ls(/\s/);function Ls(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function il(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let a="";if(s===37&&jn(t.charCodeAt(n+1))&&jn(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(a=String.fromCharCode(s));else if(s>55295&&s<57344){const u=t.charCodeAt(n+1);s<56320&&u>56319&&u<57344?(a=String.fromCharCode(s,u),i=1):a="�"}else a=String.fromCharCode(s);a&&(e.push(t.slice(r,n),encodeURIComponent(a)),r=n+i+1,a=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function rt(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return a;function a(c){return Ke(c)?(t.enter(n),u(c)):e(c)}function u(c){return Ke(c)&&s++<i?(t.consume(c),u):(t.exit(n),e(c))}}const T6={tokenize:S6};function S6(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(u){if(u===null){t.consume(u);return}return t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),rt(t,e,"linePrefix")}function i(u){return t.enter("paragraph"),s(u)}function s(u){const c=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=c),n=c,a(u)}function a(u){if(u===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(u);return}return Se(u)?(t.consume(u),t.exit("chunkText"),s):(t.consume(u),a)}}const I6={tokenize:P6},BE={tokenize:C6};function P6(t){const e=this,n=[];let r=0,i,s,a;return u;function u(C){if(r<n.length){const B=n[r];return e.containerState=B[1],t.attempt(B[0].continuation,c,f)(C)}return f(C)}function c(C){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&k();const B=e.events.length;let G=B,$;for(;G--;)if(e.events[G][0]==="exit"&&e.events[G][1].type==="chunkFlow"){$=e.events[G][1].end;break}S(r);let R=B;for(;R<e.events.length;)e.events[R][1].end={...$},R++;return Qr(e.events,G+1,0,e.events.slice(B)),e.events.length=R,f(C)}return u(C)}function f(C){if(r===n.length){if(!i)return y(C);if(i.currentConstruct&&i.currentConstruct.concrete)return T(C);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(BE,p,m)(C)}function p(C){return i&&k(),S(r),y(C)}function m(C){return e.parser.lazy[e.now().line]=r!==n.length,a=e.now().offset,T(C)}function y(C){return e.containerState={},t.attempt(BE,v,T)(C)}function v(C){return r++,n.push([e.currentConstruct,e.containerState]),y(C)}function T(C){if(C===null){i&&k(),S(0),t.consume(C);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),I(C)}function I(C){if(C===null){O(t.exit("chunkFlow"),!0),S(0),t.consume(C);return}return Se(C)?(t.consume(C),O(t.exit("chunkFlow")),r=0,e.interrupt=void 0,u):(t.consume(C),I)}function O(C,B){const G=e.sliceStream(C);if(B&&G.push(null),C.previous=s,s&&(s.next=C),s=C,i.defineSkip(C.start),i.write(G),e.parser.lazy[C.start.line]){let $=i.events.length;for(;$--;)if(i.events[$][1].start.offset<a&&(!i.events[$][1].end||i.events[$][1].end.offset>a))return;const R=e.events.length;let A=R,D,M;for(;A--;)if(e.events[A][0]==="exit"&&e.events[A][1].type==="chunkFlow"){if(D){M=e.events[A][1].end;break}D=!0}for(S(r),$=R;$<e.events.length;)e.events[$][1].end={...M},$++;Qr(e.events,A+1,0,e.events.slice(R)),e.events.length=$}}function S(C){let B=n.length;for(;B-- >C;){const G=n[B];e.containerState=G[1],G[0].exit.call(e,t)}n.length=C}function k(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function C6(t,e,n){return rt(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function $E(t){if(t===null||An(t)||x6(t))return 1;if(E6(t))return 2}function qy(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const Dg={name:"attention",resolveAll:k6,tokenize:A6};function k6(t,e){let n=-1,r,i,s,a,u,c,f,p;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;c=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const m={...t[r][1].end},y={...t[n][1].start};HE(m,-c),HE(y,c),a={type:c>1?"strongSequence":"emphasisSequence",start:m,end:{...t[r][1].end}},u={type:c>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:y},s={type:c>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:c>1?"strong":"emphasis",start:{...a.start},end:{...u.end}},t[r][1].end={...a.start},t[n][1].start={...u.end},f=[],t[r][1].end.offset-t[r][1].start.offset&&(f=ir(f,[["enter",t[r][1],e],["exit",t[r][1],e]])),f=ir(f,[["enter",i,e],["enter",a,e],["exit",a,e],["enter",s,e]]),f=ir(f,qy(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),f=ir(f,[["exit",s,e],["enter",u,e],["exit",u,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(p=2,f=ir(f,[["enter",t[n][1],e],["exit",t[n][1],e]])):p=0,Qr(t,r-1,n-r+3,f),n=r+f.length-p-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function A6(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=$E(r);let s;return a;function a(c){return s=c,t.enter("attentionSequence"),u(c)}function u(c){if(c===s)return t.consume(c),u;const f=t.exit("attentionSequence"),p=$E(c),m=!p||p===2&&i||n.includes(c),y=!i||i===2&&p||n.includes(r);return f._open=!!(s===42?m:m&&(i||!y)),f._close=!!(s===42?y:y&&(p||!m)),e(c)}}function HE(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const b6={name:"autolink",tokenize:R6};function R6(t,e,n){let r=0;return i;function i(v){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(v),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(v){return Fr(v)?(t.consume(v),a):v===64?n(v):f(v)}function a(v){return v===43||v===45||v===46||jn(v)?(r=1,u(v)):f(v)}function u(v){return v===58?(t.consume(v),r=0,c):(v===43||v===45||v===46||jn(v))&&r++<32?(t.consume(v),u):(r=0,f(v))}function c(v){return v===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(v),t.exit("autolinkMarker"),t.exit("autolink"),e):v===null||v===32||v===60||Lg(v)?n(v):(t.consume(v),c)}function f(v){return v===64?(t.consume(v),p):y6(v)?(t.consume(v),f):n(v)}function p(v){return jn(v)?m(v):n(v)}function m(v){return v===46?(t.consume(v),r=0,p):v===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(v),t.exit("autolinkMarker"),t.exit("autolink"),e):y(v)}function y(v){if((v===45||jn(v))&&r++<63){const T=v===45?y:m;return t.consume(v),T}return n(v)}}const Bf={partial:!0,tokenize:N6};function N6(t,e,n){return r;function r(s){return Ke(s)?rt(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||Se(s)?e(s):n(s)}}const aC={continuation:{tokenize:O6},exit:D6,name:"blockQuote",tokenize:L6};function L6(t,e,n){const r=this;return i;function i(a){if(a===62){const u=r.containerState;return u.open||(t.enter("blockQuote",{_container:!0}),u.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(a),t.exit("blockQuoteMarker"),s}return n(a)}function s(a){return Ke(a)?(t.enter("blockQuotePrefixWhitespace"),t.consume(a),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(a))}}function O6(t,e,n){const r=this;return i;function i(a){return Ke(a)?rt(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):s(a)}function s(a){return t.attempt(aC,e,n)(a)}}function D6(t){t.exit("blockQuote")}const lC={name:"characterEscape",tokenize:M6};function M6(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return w6(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const uC={name:"characterReference",tokenize:V6};function V6(t,e,n){const r=this;let i=0,s,a;return u;function u(m){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(m),t.exit("characterReferenceMarker"),c}function c(m){return m===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(m),t.exit("characterReferenceMarkerNumeric"),f):(t.enter("characterReferenceValue"),s=31,a=jn,p(m))}function f(m){return m===88||m===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(m),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,a=v6,p):(t.enter("characterReferenceValue"),s=7,a=Og,p(m))}function p(m){if(m===59&&i){const y=t.exit("characterReferenceValue");return a===jn&&!Hy(r.sliceSerialize(y))?n(m):(t.enter("characterReferenceMarker"),t.consume(m),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return a(m)&&i++<s?(t.consume(m),p):n(m)}}const qE={partial:!0,tokenize:j6},WE={concrete:!0,name:"codeFenced",tokenize:F6};function F6(t,e,n){const r=this,i={partial:!0,tokenize:G};let s=0,a=0,u;return c;function c($){return f($)}function f($){const R=r.events[r.events.length-1];return s=R&&R[1].type==="linePrefix"?R[2].sliceSerialize(R[1],!0).length:0,u=$,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),p($)}function p($){return $===u?(a++,t.consume($),p):a<3?n($):(t.exit("codeFencedFenceSequence"),Ke($)?rt(t,m,"whitespace")($):m($))}function m($){return $===null||Se($)?(t.exit("codeFencedFence"),r.interrupt?e($):t.check(qE,I,B)($)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),y($))}function y($){return $===null||Se($)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),m($)):Ke($)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),rt(t,v,"whitespace")($)):$===96&&$===u?n($):(t.consume($),y)}function v($){return $===null||Se($)?m($):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),T($))}function T($){return $===null||Se($)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),m($)):$===96&&$===u?n($):(t.consume($),T)}function I($){return t.attempt(i,B,O)($)}function O($){return t.enter("lineEnding"),t.consume($),t.exit("lineEnding"),S}function S($){return s>0&&Ke($)?rt(t,k,"linePrefix",s+1)($):k($)}function k($){return $===null||Se($)?t.check(qE,I,B)($):(t.enter("codeFlowValue"),C($))}function C($){return $===null||Se($)?(t.exit("codeFlowValue"),k($)):(t.consume($),C)}function B($){return t.exit("codeFenced"),e($)}function G($,R,A){let D=0;return M;function M(ce){return $.enter("lineEnding"),$.consume(ce),$.exit("lineEnding"),V}function V(ce){return $.enter("codeFencedFence"),Ke(ce)?rt($,z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(ce):z(ce)}function z(ce){return ce===u?($.enter("codeFencedFenceSequence"),F(ce)):A(ce)}function F(ce){return ce===u?(D++,$.consume(ce),F):D>=a?($.exit("codeFencedFenceSequence"),Ke(ce)?rt($,ae,"whitespace")(ce):ae(ce)):A(ce)}function ae(ce){return ce===null||Se(ce)?($.exit("codeFencedFence"),R(ce)):A(ce)}}}function j6(t,e,n){const r=this;return i;function i(a){return a===null?n(a):(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),s)}function s(a){return r.parser.lazy[r.now().line]?n(a):e(a)}}const Hp={name:"codeIndented",tokenize:U6},z6={partial:!0,tokenize:B6};function U6(t,e,n){const r=this;return i;function i(f){return t.enter("codeIndented"),rt(t,s,"linePrefix",5)(f)}function s(f){const p=r.events[r.events.length-1];return p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?a(f):n(f)}function a(f){return f===null?c(f):Se(f)?t.attempt(z6,a,c)(f):(t.enter("codeFlowValue"),u(f))}function u(f){return f===null||Se(f)?(t.exit("codeFlowValue"),a(f)):(t.consume(f),u)}function c(f){return t.exit("codeIndented"),e(f)}}function B6(t,e,n){const r=this;return i;function i(a){return r.parser.lazy[r.now().line]?n(a):Se(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),i):rt(t,s,"linePrefix",5)(a)}function s(a){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?e(a):Se(a)?i(a):n(a)}}const $6={name:"codeText",previous:q6,resolve:H6,tokenize:W6};function H6(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function q6(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function W6(t,e,n){let r=0,i,s;return a;function a(m){return t.enter("codeText"),t.enter("codeTextSequence"),u(m)}function u(m){return m===96?(t.consume(m),r++,u):(t.exit("codeTextSequence"),c(m))}function c(m){return m===null?n(m):m===32?(t.enter("space"),t.consume(m),t.exit("space"),c):m===96?(s=t.enter("codeTextSequence"),i=0,p(m)):Se(m)?(t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),c):(t.enter("codeTextData"),f(m))}function f(m){return m===null||m===32||m===96||Se(m)?(t.exit("codeTextData"),c(m)):(t.consume(m),f)}function p(m){return m===96?(t.consume(m),i++,p):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(m)):(s.type="codeTextData",f(m))}}class G6{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Hl(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Hl(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Hl(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);Hl(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Hl(this.left,n.reverse())}}}function Hl(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function cC(t){const e={};let n=-1,r,i,s,a,u,c,f;const p=new G6(t);for(;++n<p.length;){for(;n in e;)n=e[n];if(r=p.get(n),n&&r[1].type==="chunkFlow"&&p.get(n-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,s=0,s<c.length&&c[s][1].type==="lineEndingBlank"&&(s+=2),s<c.length&&c[s][1].type==="content"))for(;++s<c.length&&c[s][1].type!=="content";)c[s][1].type==="chunkText"&&(c[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,K6(p,n)),n=e[n],f=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(a=p.get(s),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(i&&(p.get(i)[1].type="lineEndingBlank"),a[1].type="lineEnding",i=s);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;i&&(r[1].end={...p.get(i)[1].start},u=p.slice(i,n),u.unshift(r),p.splice(i,n-i+1,u))}}return Qr(t,0,Number.POSITIVE_INFINITY,p.slice(0)),!f}function K6(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const u=a.events,c=[],f={};let p,m,y=-1,v=n,T=0,I=0;const O=[I];for(;v;){for(;t.get(++i)[1]!==v;);s.push(i),v._tokenizer||(p=r.sliceStream(v),v.next||p.push(null),m&&a.defineSkip(v.start),v._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(p),v._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),m=v,v=v.next}for(v=n;++y<u.length;)u[y][0]==="exit"&&u[y-1][0]==="enter"&&u[y][1].type===u[y-1][1].type&&u[y][1].start.line!==u[y][1].end.line&&(I=y+1,O.push(I),v._tokenizer=void 0,v.previous=void 0,v=v.next);for(a.events=[],v?(v._tokenizer=void 0,v.previous=void 0):O.pop(),y=O.length;y--;){const S=u.slice(O[y],O[y+1]),k=s.pop();c.push([k,k+S.length-1]),t.splice(k,2,S)}for(c.reverse(),y=-1;++y<c.length;)f[T+c[y][0]]=T+c[y][1],T+=c[y][1]-c[y][0]-1;return f}const Z6={resolve:Y6,tokenize:J6},Q6={partial:!0,tokenize:X6};function Y6(t){return cC(t),t}function J6(t,e){let n;return r;function r(u){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(u)}function i(u){return u===null?s(u):Se(u)?t.check(Q6,a,s)(u):(t.consume(u),i)}function s(u){return t.exit("chunkContent"),t.exit("content"),e(u)}function a(u){return t.consume(u),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function X6(t,e,n){const r=this;return i;function i(a){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),rt(t,s,"linePrefix")}function s(a){if(a===null||Se(a))return n(a);const u=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?e(a):t.interrupt(r.parser.constructs.flow,n,e)(a)}}function hC(t,e,n,r,i,s,a,u,c){const f=c||Number.POSITIVE_INFINITY;let p=0;return m;function m(S){return S===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(S),t.exit(s),y):S===null||S===32||S===41||Lg(S)?n(S):(t.enter(r),t.enter(a),t.enter(u),t.enter("chunkString",{contentType:"string"}),I(S))}function y(S){return S===62?(t.enter(s),t.consume(S),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(u),t.enter("chunkString",{contentType:"string"}),v(S))}function v(S){return S===62?(t.exit("chunkString"),t.exit(u),y(S)):S===null||S===60||Se(S)?n(S):(t.consume(S),S===92?T:v)}function T(S){return S===60||S===62||S===92?(t.consume(S),v):v(S)}function I(S){return!p&&(S===null||S===41||An(S))?(t.exit("chunkString"),t.exit(u),t.exit(a),t.exit(r),e(S)):p<f&&S===40?(t.consume(S),p++,I):S===41?(t.consume(S),p--,I):S===null||S===32||S===40||Lg(S)?n(S):(t.consume(S),S===92?O:I)}function O(S){return S===40||S===41||S===92?(t.consume(S),I):I(S)}}function dC(t,e,n,r,i,s){const a=this;let u=0,c;return f;function f(v){return t.enter(r),t.enter(i),t.consume(v),t.exit(i),t.enter(s),p}function p(v){return u>999||v===null||v===91||v===93&&!c||v===94&&!u&&"_hiddenFootnoteSupport"in a.parser.constructs?n(v):v===93?(t.exit(s),t.enter(i),t.consume(v),t.exit(i),t.exit(r),e):Se(v)?(t.enter("lineEnding"),t.consume(v),t.exit("lineEnding"),p):(t.enter("chunkString",{contentType:"string"}),m(v))}function m(v){return v===null||v===91||v===93||Se(v)||u++>999?(t.exit("chunkString"),p(v)):(t.consume(v),c||(c=!Ke(v)),v===92?y:m)}function y(v){return v===91||v===92||v===93?(t.consume(v),u++,m):m(v)}}function fC(t,e,n,r,i,s){let a;return u;function u(y){return y===34||y===39||y===40?(t.enter(r),t.enter(i),t.consume(y),t.exit(i),a=y===40?41:y,c):n(y)}function c(y){return y===a?(t.enter(i),t.consume(y),t.exit(i),t.exit(r),e):(t.enter(s),f(y))}function f(y){return y===a?(t.exit(s),c(a)):y===null?n(y):Se(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),rt(t,f,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),p(y))}function p(y){return y===a||y===null||Se(y)?(t.exit("chunkString"),f(y)):(t.consume(y),y===92?m:p)}function m(y){return y===a||y===92?(t.consume(y),p):p(y)}}function yu(t,e){let n;return r;function r(i){return Se(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):Ke(i)?rt(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const ej={name:"definition",tokenize:nj},tj={partial:!0,tokenize:rj};function nj(t,e,n){const r=this;let i;return s;function s(v){return t.enter("definition"),a(v)}function a(v){return dC.call(r,t,u,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(v)}function u(v){return i=Ra(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),v===58?(t.enter("definitionMarker"),t.consume(v),t.exit("definitionMarker"),c):n(v)}function c(v){return An(v)?yu(t,f)(v):f(v)}function f(v){return hC(t,p,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(v)}function p(v){return t.attempt(tj,m,m)(v)}function m(v){return Ke(v)?rt(t,y,"whitespace")(v):y(v)}function y(v){return v===null||Se(v)?(t.exit("definition"),r.parser.defined.push(i),e(v)):n(v)}}function rj(t,e,n){return r;function r(u){return An(u)?yu(t,i)(u):n(u)}function i(u){return fC(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(u)}function s(u){return Ke(u)?rt(t,a,"whitespace")(u):a(u)}function a(u){return u===null||Se(u)?e(u):n(u)}}const ij={name:"hardBreakEscape",tokenize:sj};function sj(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return Se(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const oj={name:"headingAtx",resolve:aj,tokenize:lj};function aj(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},Qr(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function lj(t,e,n){let r=0;return i;function i(p){return t.enter("atxHeading"),s(p)}function s(p){return t.enter("atxHeadingSequence"),a(p)}function a(p){return p===35&&r++<6?(t.consume(p),a):p===null||An(p)?(t.exit("atxHeadingSequence"),u(p)):n(p)}function u(p){return p===35?(t.enter("atxHeadingSequence"),c(p)):p===null||Se(p)?(t.exit("atxHeading"),e(p)):Ke(p)?rt(t,u,"whitespace")(p):(t.enter("atxHeadingText"),f(p))}function c(p){return p===35?(t.consume(p),c):(t.exit("atxHeadingSequence"),u(p))}function f(p){return p===null||p===35||An(p)?(t.exit("atxHeadingText"),u(p)):(t.consume(p),f)}}const uj=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],GE=["pre","script","style","textarea"],cj={concrete:!0,name:"htmlFlow",resolveTo:fj,tokenize:pj},hj={partial:!0,tokenize:gj},dj={partial:!0,tokenize:mj};function fj(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function pj(t,e,n){const r=this;let i,s,a,u,c;return f;function f(j){return p(j)}function p(j){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(j),m}function m(j){return j===33?(t.consume(j),y):j===47?(t.consume(j),s=!0,I):j===63?(t.consume(j),i=3,r.interrupt?e:N):Fr(j)?(t.consume(j),a=String.fromCharCode(j),O):n(j)}function y(j){return j===45?(t.consume(j),i=2,v):j===91?(t.consume(j),i=5,u=0,T):Fr(j)?(t.consume(j),i=4,r.interrupt?e:N):n(j)}function v(j){return j===45?(t.consume(j),r.interrupt?e:N):n(j)}function T(j){const Ce="CDATA[";return j===Ce.charCodeAt(u++)?(t.consume(j),u===Ce.length?r.interrupt?e:z:T):n(j)}function I(j){return Fr(j)?(t.consume(j),a=String.fromCharCode(j),O):n(j)}function O(j){if(j===null||j===47||j===62||An(j)){const Ce=j===47,xe=a.toLowerCase();return!Ce&&!s&&GE.includes(xe)?(i=1,r.interrupt?e(j):z(j)):uj.includes(a.toLowerCase())?(i=6,Ce?(t.consume(j),S):r.interrupt?e(j):z(j)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(j):s?k(j):C(j))}return j===45||jn(j)?(t.consume(j),a+=String.fromCharCode(j),O):n(j)}function S(j){return j===62?(t.consume(j),r.interrupt?e:z):n(j)}function k(j){return Ke(j)?(t.consume(j),k):M(j)}function C(j){return j===47?(t.consume(j),M):j===58||j===95||Fr(j)?(t.consume(j),B):Ke(j)?(t.consume(j),C):M(j)}function B(j){return j===45||j===46||j===58||j===95||jn(j)?(t.consume(j),B):G(j)}function G(j){return j===61?(t.consume(j),$):Ke(j)?(t.consume(j),G):C(j)}function $(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(t.consume(j),c=j,R):Ke(j)?(t.consume(j),$):A(j)}function R(j){return j===c?(t.consume(j),c=null,D):j===null||Se(j)?n(j):(t.consume(j),R)}function A(j){return j===null||j===34||j===39||j===47||j===60||j===61||j===62||j===96||An(j)?G(j):(t.consume(j),A)}function D(j){return j===47||j===62||Ke(j)?C(j):n(j)}function M(j){return j===62?(t.consume(j),V):n(j)}function V(j){return j===null||Se(j)?z(j):Ke(j)?(t.consume(j),V):n(j)}function z(j){return j===45&&i===2?(t.consume(j),Oe):j===60&&i===1?(t.consume(j),ze):j===62&&i===4?(t.consume(j),fe):j===63&&i===3?(t.consume(j),N):j===93&&i===5?(t.consume(j),me):Se(j)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(hj,_e,F)(j)):j===null||Se(j)?(t.exit("htmlFlowData"),F(j)):(t.consume(j),z)}function F(j){return t.check(dj,ae,_e)(j)}function ae(j){return t.enter("lineEnding"),t.consume(j),t.exit("lineEnding"),ce}function ce(j){return j===null||Se(j)?F(j):(t.enter("htmlFlowData"),z(j))}function Oe(j){return j===45?(t.consume(j),N):z(j)}function ze(j){return j===47?(t.consume(j),a="",J):z(j)}function J(j){if(j===62){const Ce=a.toLowerCase();return GE.includes(Ce)?(t.consume(j),fe):z(j)}return Fr(j)&&a.length<8?(t.consume(j),a+=String.fromCharCode(j),J):z(j)}function me(j){return j===93?(t.consume(j),N):z(j)}function N(j){return j===62?(t.consume(j),fe):j===45&&i===2?(t.consume(j),N):z(j)}function fe(j){return j===null||Se(j)?(t.exit("htmlFlowData"),_e(j)):(t.consume(j),fe)}function _e(j){return t.exit("htmlFlow"),e(j)}}function mj(t,e,n){const r=this;return i;function i(a){return Se(a)?(t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),s):n(a)}function s(a){return r.parser.lazy[r.now().line]?n(a):e(a)}}function gj(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(Bf,e,n)}}const _j={name:"htmlText",tokenize:yj};function yj(t,e,n){const r=this;let i,s,a;return u;function u(N){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(N),c}function c(N){return N===33?(t.consume(N),f):N===47?(t.consume(N),G):N===63?(t.consume(N),C):Fr(N)?(t.consume(N),A):n(N)}function f(N){return N===45?(t.consume(N),p):N===91?(t.consume(N),s=0,T):Fr(N)?(t.consume(N),k):n(N)}function p(N){return N===45?(t.consume(N),v):n(N)}function m(N){return N===null?n(N):N===45?(t.consume(N),y):Se(N)?(a=m,ze(N)):(t.consume(N),m)}function y(N){return N===45?(t.consume(N),v):m(N)}function v(N){return N===62?Oe(N):N===45?y(N):m(N)}function T(N){const fe="CDATA[";return N===fe.charCodeAt(s++)?(t.consume(N),s===fe.length?I:T):n(N)}function I(N){return N===null?n(N):N===93?(t.consume(N),O):Se(N)?(a=I,ze(N)):(t.consume(N),I)}function O(N){return N===93?(t.consume(N),S):I(N)}function S(N){return N===62?Oe(N):N===93?(t.consume(N),S):I(N)}function k(N){return N===null||N===62?Oe(N):Se(N)?(a=k,ze(N)):(t.consume(N),k)}function C(N){return N===null?n(N):N===63?(t.consume(N),B):Se(N)?(a=C,ze(N)):(t.consume(N),C)}function B(N){return N===62?Oe(N):C(N)}function G(N){return Fr(N)?(t.consume(N),$):n(N)}function $(N){return N===45||jn(N)?(t.consume(N),$):R(N)}function R(N){return Se(N)?(a=R,ze(N)):Ke(N)?(t.consume(N),R):Oe(N)}function A(N){return N===45||jn(N)?(t.consume(N),A):N===47||N===62||An(N)?D(N):n(N)}function D(N){return N===47?(t.consume(N),Oe):N===58||N===95||Fr(N)?(t.consume(N),M):Se(N)?(a=D,ze(N)):Ke(N)?(t.consume(N),D):Oe(N)}function M(N){return N===45||N===46||N===58||N===95||jn(N)?(t.consume(N),M):V(N)}function V(N){return N===61?(t.consume(N),z):Se(N)?(a=V,ze(N)):Ke(N)?(t.consume(N),V):D(N)}function z(N){return N===null||N===60||N===61||N===62||N===96?n(N):N===34||N===39?(t.consume(N),i=N,F):Se(N)?(a=z,ze(N)):Ke(N)?(t.consume(N),z):(t.consume(N),ae)}function F(N){return N===i?(t.consume(N),i=void 0,ce):N===null?n(N):Se(N)?(a=F,ze(N)):(t.consume(N),F)}function ae(N){return N===null||N===34||N===39||N===60||N===61||N===96?n(N):N===47||N===62||An(N)?D(N):(t.consume(N),ae)}function ce(N){return N===47||N===62||An(N)?D(N):n(N)}function Oe(N){return N===62?(t.consume(N),t.exit("htmlTextData"),t.exit("htmlText"),e):n(N)}function ze(N){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(N),t.exit("lineEnding"),J}function J(N){return Ke(N)?rt(t,me,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(N):me(N)}function me(N){return t.enter("htmlTextData"),a(N)}}const Wy={name:"labelEnd",resolveAll:xj,resolveTo:Tj,tokenize:Sj},vj={tokenize:Ij},wj={tokenize:Pj},Ej={tokenize:Cj};function xj(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&Qr(t,0,t.length,n),t}function Tj(t,e){let n=t.length,r=0,i,s,a,u;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(a){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(a=n);const c={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},f={type:"label",start:{...t[s][1].start},end:{...t[a][1].end}},p={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[a-2][1].start}};return u=[["enter",c,e],["enter",f,e]],u=ir(u,t.slice(s+1,s+r+3)),u=ir(u,[["enter",p,e]]),u=ir(u,qy(e.parser.constructs.insideSpan.null,t.slice(s+r+4,a-3),e)),u=ir(u,[["exit",p,e],t[a-2],t[a-1],["exit",f,e]]),u=ir(u,t.slice(a+1)),u=ir(u,[["exit",c,e]]),Qr(t,s,t.length,u),t}function Sj(t,e,n){const r=this;let i=r.events.length,s,a;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return u;function u(y){return s?s._inactive?m(y):(a=r.parser.defined.includes(Ra(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(y),t.exit("labelMarker"),t.exit("labelEnd"),c):n(y)}function c(y){return y===40?t.attempt(vj,p,a?p:m)(y):y===91?t.attempt(wj,p,a?f:m)(y):a?p(y):m(y)}function f(y){return t.attempt(Ej,p,m)(y)}function p(y){return e(y)}function m(y){return s._balanced=!0,n(y)}}function Ij(t,e,n){return r;function r(m){return t.enter("resource"),t.enter("resourceMarker"),t.consume(m),t.exit("resourceMarker"),i}function i(m){return An(m)?yu(t,s)(m):s(m)}function s(m){return m===41?p(m):hC(t,a,u,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(m)}function a(m){return An(m)?yu(t,c)(m):p(m)}function u(m){return n(m)}function c(m){return m===34||m===39||m===40?fC(t,f,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(m):p(m)}function f(m){return An(m)?yu(t,p)(m):p(m)}function p(m){return m===41?(t.enter("resourceMarker"),t.consume(m),t.exit("resourceMarker"),t.exit("resource"),e):n(m)}}function Pj(t,e,n){const r=this;return i;function i(u){return dC.call(r,t,s,a,"reference","referenceMarker","referenceString")(u)}function s(u){return r.parser.defined.includes(Ra(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(u):n(u)}function a(u){return n(u)}}function Cj(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const kj={name:"labelStartImage",resolveAll:Wy.resolveAll,tokenize:Aj};function Aj(t,e,n){const r=this;return i;function i(u){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(u),t.exit("labelImageMarker"),s}function s(u){return u===91?(t.enter("labelMarker"),t.consume(u),t.exit("labelMarker"),t.exit("labelImage"),a):n(u)}function a(u){return u===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(u):e(u)}}const bj={name:"labelStartLink",resolveAll:Wy.resolveAll,tokenize:Rj};function Rj(t,e,n){const r=this;return i;function i(a){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelLink"),s}function s(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const qp={name:"lineEnding",tokenize:Nj};function Nj(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),rt(t,e,"linePrefix")}}const Zh={name:"thematicBreak",tokenize:Lj};function Lj(t,e,n){let r=0,i;return s;function s(f){return t.enter("thematicBreak"),a(f)}function a(f){return i=f,u(f)}function u(f){return f===i?(t.enter("thematicBreakSequence"),c(f)):r>=3&&(f===null||Se(f))?(t.exit("thematicBreak"),e(f)):n(f)}function c(f){return f===i?(t.consume(f),r++,c):(t.exit("thematicBreakSequence"),Ke(f)?rt(t,u,"whitespace")(f):u(f))}}const wn={continuation:{tokenize:Vj},exit:jj,name:"list",tokenize:Mj},Oj={partial:!0,tokenize:zj},Dj={partial:!0,tokenize:Fj};function Mj(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,a=0;return u;function u(v){const T=r.containerState.type||(v===42||v===43||v===45?"listUnordered":"listOrdered");if(T==="listUnordered"?!r.containerState.marker||v===r.containerState.marker:Og(v)){if(r.containerState.type||(r.containerState.type=T,t.enter(T,{_container:!0})),T==="listUnordered")return t.enter("listItemPrefix"),v===42||v===45?t.check(Zh,n,f)(v):f(v);if(!r.interrupt||v===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),c(v)}return n(v)}function c(v){return Og(v)&&++a<10?(t.consume(v),c):(!r.interrupt||a<2)&&(r.containerState.marker?v===r.containerState.marker:v===41||v===46)?(t.exit("listItemValue"),f(v)):n(v)}function f(v){return t.enter("listItemMarker"),t.consume(v),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||v,t.check(Bf,r.interrupt?n:p,t.attempt(Oj,y,m))}function p(v){return r.containerState.initialBlankLine=!0,s++,y(v)}function m(v){return Ke(v)?(t.enter("listItemPrefixWhitespace"),t.consume(v),t.exit("listItemPrefixWhitespace"),y):n(v)}function y(v){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(v)}}function Vj(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(Bf,i,s);function i(u){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,rt(t,e,"listItemIndent",r.containerState.size+1)(u)}function s(u){return r.containerState.furtherBlankLines||!Ke(u)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(u)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(Dj,e,a)(u))}function a(u){return r.containerState._closeFlow=!0,r.interrupt=void 0,rt(t,t.attempt(wn,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u)}}function Fj(t,e,n){const r=this;return rt(t,i,"listItemIndent",r.containerState.size+1);function i(s){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?e(s):n(s)}}function jj(t){t.exit(this.containerState.type)}function zj(t,e,n){const r=this;return rt(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const a=r.events[r.events.length-1];return!Ke(s)&&a&&a[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const KE={name:"setextUnderline",resolveTo:Uj,tokenize:Bj};function Uj(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const a={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",a,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=a,t.push(["exit",a,e]),t}function Bj(t,e,n){const r=this;let i;return s;function s(f){let p=r.events.length,m;for(;p--;)if(r.events[p][1].type!=="lineEnding"&&r.events[p][1].type!=="linePrefix"&&r.events[p][1].type!=="content"){m=r.events[p][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||m)?(t.enter("setextHeadingLine"),i=f,a(f)):n(f)}function a(f){return t.enter("setextHeadingLineSequence"),u(f)}function u(f){return f===i?(t.consume(f),u):(t.exit("setextHeadingLineSequence"),Ke(f)?rt(t,c,"lineSuffix")(f):c(f))}function c(f){return f===null||Se(f)?(t.exit("setextHeadingLine"),e(f)):n(f)}}const $j={tokenize:Hj};function Hj(t){const e=this,n=t.attempt(Bf,r,t.attempt(this.parser.constructs.flowInitial,i,rt(t,t.attempt(this.parser.constructs.flow,i,t.attempt(Z6,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const qj={resolveAll:mC()},Wj=pC("string"),Gj=pC("text");function pC(t){return{resolveAll:mC(t==="text"?Kj:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,a,u);return a;function a(p){return f(p)?s(p):u(p)}function u(p){if(p===null){n.consume(p);return}return n.enter("data"),n.consume(p),c}function c(p){return f(p)?(n.exit("data"),s(p)):(n.consume(p),c)}function f(p){if(p===null)return!0;const m=i[p];let y=-1;if(m)for(;++y<m.length;){const v=m[y];if(!v.previous||v.previous.call(r,r.previous))return!0}return!1}}}function mC(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function Kj(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,a=-1,u=0,c;for(;s--;){const f=i[s];if(typeof f=="string"){for(a=f.length;f.charCodeAt(a-1)===32;)u++,a--;if(a)break;a=-1}else if(f===-2)c=!0,u++;else if(f!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(u=0),u){const f={type:n===t.length||c||u<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?a:r.start._bufferIndex+a,_index:r.start._index+s,line:r.end.line,column:r.end.column-u,offset:r.end.offset-u},end:{...r.end}};r.end={...f.start},r.start.offset===r.end.offset?Object.assign(r,f):(t.splice(n,0,["enter",f,e],["exit",f,e]),n+=2)}n++}return t}const Zj={42:wn,43:wn,45:wn,48:wn,49:wn,50:wn,51:wn,52:wn,53:wn,54:wn,55:wn,56:wn,57:wn,62:aC},Qj={91:ej},Yj={[-2]:Hp,[-1]:Hp,32:Hp},Jj={35:oj,42:Zh,45:[KE,Zh],60:cj,61:KE,95:Zh,96:WE,126:WE},Xj={38:uC,92:lC},e5={[-5]:qp,[-4]:qp,[-3]:qp,33:kj,38:uC,42:Dg,60:[b6,_j],91:bj,92:[ij,lC],93:Wy,95:Dg,96:$6},t5={null:[Dg,qj]},n5={null:[42,95]},r5={null:[]},i5=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:n5,contentInitial:Qj,disable:r5,document:Zj,flow:Jj,flowInitial:Yj,insideSpan:t5,string:Xj,text:e5},Symbol.toStringTag,{value:"Module"}));function s5(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let a=[],u=[];const c={attempt:R(G),check:R($),consume:k,enter:C,exit:B,interrupt:R($,{interrupt:!0})},f={code:null,containerState:{},defineSkip:I,events:[],now:T,parser:t,previous:null,sliceSerialize:y,sliceStream:v,write:m};let p=e.tokenize.call(f,c);return e.resolveAll&&s.push(e),f;function m(V){return a=ir(a,V),O(),a[a.length-1]!==null?[]:(A(e,0),f.events=qy(s,f.events,f),f.events)}function y(V,z){return a5(v(V),z)}function v(V){return o5(a,V)}function T(){const{_bufferIndex:V,_index:z,line:F,column:ae,offset:ce}=r;return{_bufferIndex:V,_index:z,line:F,column:ae,offset:ce}}function I(V){i[V.line]=V.column,M()}function O(){let V;for(;r._index<a.length;){const z=a[r._index];if(typeof z=="string")for(V=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===V&&r._bufferIndex<z.length;)S(z.charCodeAt(r._bufferIndex));else S(z)}}function S(V){p=p(V)}function k(V){Se(V)?(r.line++,r.column=1,r.offset+=V===-3?2:1,M()):V!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),f.previous=V}function C(V,z){const F=z||{};return F.type=V,F.start=T(),f.events.push(["enter",F,f]),u.push(F),F}function B(V){const z=u.pop();return z.end=T(),f.events.push(["exit",z,f]),z}function G(V,z){A(V,z.from)}function $(V,z){z.restore()}function R(V,z){return F;function F(ae,ce,Oe){let ze,J,me,N;return Array.isArray(ae)?_e(ae):"tokenize"in ae?_e([ae]):fe(ae);function fe(X){return de;function de(Ue){const xt=Ue!==null&&X[Ue],Rt=Ue!==null&&X.null,Zt=[...Array.isArray(xt)?xt:xt?[xt]:[],...Array.isArray(Rt)?Rt:Rt?[Rt]:[]];return _e(Zt)(Ue)}}function _e(X){return ze=X,J=0,X.length===0?Oe:j(X[J])}function j(X){return de;function de(Ue){return N=D(),me=X,X.partial||(f.currentConstruct=X),X.name&&f.parser.constructs.disable.null.includes(X.name)?xe():X.tokenize.call(z?Object.assign(Object.create(f),z):f,c,Ce,xe)(Ue)}}function Ce(X){return V(me,N),ce}function xe(X){return N.restore(),++J<ze.length?j(ze[J]):Oe}}}function A(V,z){V.resolveAll&&!s.includes(V)&&s.push(V),V.resolve&&Qr(f.events,z,f.events.length-z,V.resolve(f.events.slice(z),f)),V.resolveTo&&(f.events=V.resolveTo(f.events,f))}function D(){const V=T(),z=f.previous,F=f.currentConstruct,ae=f.events.length,ce=Array.from(u);return{from:ae,restore:Oe};function Oe(){r=V,f.previous=z,f.currentConstruct=F,f.events.length=ae,u=ce,M()}}function M(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function o5(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let a;if(n===i)a=[t[n].slice(r,s)];else{if(a=t.slice(n,i),r>-1){const u=a[0];typeof u=="string"?a[0]=u.slice(r):a.shift()}s>0&&a.push(t[i].slice(0,s))}return a}function a5(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let a;if(typeof s=="string")a=s;else switch(s){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=e?" ":"	";break}case-1:{if(!e&&i)continue;a=" ";break}default:a=String.fromCharCode(s)}i=s===-2,r.push(a)}return r.join("")}function l5(t){const r={constructs:m6([i5,...(t||{}).extensions||[]]),content:i(T6),defined:[],document:i(I6),flow:i($j),lazy:{},string:i(Wj),text:i(Gj)};return r;function i(s){return a;function a(u){return s5(r,s,u)}}}function u5(t){for(;!cC(t););return t}const ZE=/[\0\t\n\r]/g;function c5(){let t=1,e="",n=!0,r;return i;function i(s,a,u){const c=[];let f,p,m,y,v;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(a||void 0).decode(s)),m=0,e="",n&&(s.charCodeAt(0)===65279&&m++,n=void 0);m<s.length;){if(ZE.lastIndex=m,f=ZE.exec(s),y=f&&f.index!==void 0?f.index:s.length,v=s.charCodeAt(y),!f){e=s.slice(m);break}if(v===10&&m===y&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),m<y&&(c.push(s.slice(m,y)),t+=y-m),v){case 0:{c.push(65533),t++;break}case 9:{for(p=Math.ceil(t/4)*4,c.push(-2);t++<p;)c.push(-1);break}case 10:{c.push(-4),t=1;break}default:r=!0,t=1}m=y+1}return u&&(r&&c.push(-5),e&&c.push(e),c.push(null)),c}}const h5=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function d5(t){return t.replace(h5,f5)}function f5(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return oC(n.slice(s?2:1),s?16:10)}return Hy(n)||t}const gC={}.hasOwnProperty;function p5(t,e,n){return typeof e!="string"&&(n=e,e=void 0),m5(n)(u5(l5(n).document().write(c5()(t,e,!0))))}function m5(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Ds),autolinkProtocol:D,autolinkEmail:D,atxHeading:s(ei),blockQuote:s(Rt),characterEscape:D,characterReference:D,codeFenced:s(Zt),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:s(Zt,a),codeText:s(Rn,a),codeTextData:D,data:D,codeFlowValue:D,definition:s(Xr),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:s(Os),hardBreakEscape:s(Ri),hardBreakTrailing:s(Ri),htmlFlow:s(Ni,a),htmlFlowData:D,htmlText:s(Ni,a),htmlTextData:D,image:s(Li),label:a,link:s(Ds),listItem:s(Oi),listItemValue:y,listOrdered:s(ti,m),listUnordered:s(ti),paragraph:s(bo),reference:j,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:s(ei),strong:s(Di),thematicBreak:s(Ro)},exit:{atxHeading:c(),atxHeadingSequence:G,autolink:c(),autolinkEmail:xt,autolinkProtocol:Ue,blockQuote:c(),characterEscapeValue:M,characterReferenceMarkerHexadecimal:xe,characterReferenceMarkerNumeric:xe,characterReferenceValue:X,characterReference:de,codeFenced:c(O),codeFencedFence:I,codeFencedFenceInfo:v,codeFencedFenceMeta:T,codeFlowValue:M,codeIndented:c(S),codeText:c(ce),codeTextData:M,data:M,definition:c(),definitionDestinationString:B,definitionLabelString:k,definitionTitleString:C,emphasis:c(),hardBreakEscape:c(z),hardBreakTrailing:c(z),htmlFlow:c(F),htmlFlowData:M,htmlText:c(ae),htmlTextData:M,image:c(ze),label:me,labelText:J,lineEnding:V,link:c(Oe),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:Ce,resourceDestinationString:N,resourceTitleString:fe,resource:_e,setextHeading:c(A),setextHeadingLineSequence:R,setextHeadingText:$,strong:c(),thematicBreak:c()}};_C(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(Q){let re={type:"root",children:[]};const ve={stack:[re],tokenStack:[],config:e,enter:u,exit:f,buffer:a,resume:p,data:n},Le=[];let qe=-1;for(;++qe<Q.length;)if(Q[qe][1].type==="listOrdered"||Q[qe][1].type==="listUnordered")if(Q[qe][0]==="enter")Le.push(qe);else{const Qt=Le.pop();qe=i(Q,Qt,qe)}for(qe=-1;++qe<Q.length;){const Qt=e[Q[qe][0]];gC.call(Qt,Q[qe][1].type)&&Qt[Q[qe][1].type].call(Object.assign({sliceSerialize:Q[qe][2].sliceSerialize},ve),Q[qe][1])}if(ve.tokenStack.length>0){const Qt=ve.tokenStack[ve.tokenStack.length-1];(Qt[1]||QE).call(ve,void 0,Qt[0])}for(re.position={start:Gi(Q.length>0?Q[0][1].start:{line:1,column:1,offset:0}),end:Gi(Q.length>0?Q[Q.length-2][1].end:{line:1,column:1,offset:0})},qe=-1;++qe<e.transforms.length;)re=e.transforms[qe](re)||re;return re}function i(Q,re,ve){let Le=re-1,qe=-1,Qt=!1,ln,un,Wn,Gn;for(;++Le<=ve;){const zt=Q[Le];switch(zt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{zt[0]==="enter"?qe++:qe--,Gn=void 0;break}case"lineEndingBlank":{zt[0]==="enter"&&(ln&&!Gn&&!qe&&!Wn&&(Wn=Le),Gn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Gn=void 0}if(!qe&&zt[0]==="enter"&&zt[1].type==="listItemPrefix"||qe===-1&&zt[0]==="exit"&&(zt[1].type==="listUnordered"||zt[1].type==="listOrdered")){if(ln){let _n=Le;for(un=void 0;_n--;){const cn=Q[_n];if(cn[1].type==="lineEnding"||cn[1].type==="lineEndingBlank"){if(cn[0]==="exit")continue;un&&(Q[un][1].type="lineEndingBlank",Qt=!0),cn[1].type="lineEnding",un=_n}else if(!(cn[1].type==="linePrefix"||cn[1].type==="blockQuotePrefix"||cn[1].type==="blockQuotePrefixWhitespace"||cn[1].type==="blockQuoteMarker"||cn[1].type==="listItemIndent"))break}Wn&&(!un||Wn<un)&&(ln._spread=!0),ln.end=Object.assign({},un?Q[un][1].start:zt[1].end),Q.splice(un||Le,0,["exit",ln,zt[2]]),Le++,ve++}if(zt[1].type==="listItemPrefix"){const _n={type:"listItem",_spread:!1,start:Object.assign({},zt[1].start),end:void 0};ln=_n,Q.splice(Le,0,["enter",_n,zt[2]]),Le++,ve++,Wn=void 0,Gn=!0}}}return Q[re][1]._spread=Qt,ve}function s(Q,re){return ve;function ve(Le){u.call(this,Q(Le),Le),re&&re.call(this,Le)}}function a(){this.stack.push({type:"fragment",children:[]})}function u(Q,re,ve){this.stack[this.stack.length-1].children.push(Q),this.stack.push(Q),this.tokenStack.push([re,ve||void 0]),Q.position={start:Gi(re.start),end:void 0}}function c(Q){return re;function re(ve){Q&&Q.call(this,ve),f.call(this,ve)}}function f(Q,re){const ve=this.stack.pop(),Le=this.tokenStack.pop();if(Le)Le[0].type!==Q.type&&(re?re.call(this,Q,Le[0]):(Le[1]||QE).call(this,Q,Le[0]));else throw new Error("Cannot close `"+Q.type+"` ("+_u({start:Q.start,end:Q.end})+"): it’s not open");ve.position.end=Gi(Q.end)}function p(){return f6(this.stack.pop())}function m(){this.data.expectingFirstListItemValue=!0}function y(Q){if(this.data.expectingFirstListItemValue){const re=this.stack[this.stack.length-2];re.start=Number.parseInt(this.sliceSerialize(Q),10),this.data.expectingFirstListItemValue=void 0}}function v(){const Q=this.resume(),re=this.stack[this.stack.length-1];re.lang=Q}function T(){const Q=this.resume(),re=this.stack[this.stack.length-1];re.meta=Q}function I(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function O(){const Q=this.resume(),re=this.stack[this.stack.length-1];re.value=Q.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function S(){const Q=this.resume(),re=this.stack[this.stack.length-1];re.value=Q.replace(/(\r?\n|\r)$/g,"")}function k(Q){const re=this.resume(),ve=this.stack[this.stack.length-1];ve.label=re,ve.identifier=Ra(this.sliceSerialize(Q)).toLowerCase()}function C(){const Q=this.resume(),re=this.stack[this.stack.length-1];re.title=Q}function B(){const Q=this.resume(),re=this.stack[this.stack.length-1];re.url=Q}function G(Q){const re=this.stack[this.stack.length-1];if(!re.depth){const ve=this.sliceSerialize(Q).length;re.depth=ve}}function $(){this.data.setextHeadingSlurpLineEnding=!0}function R(Q){const re=this.stack[this.stack.length-1];re.depth=this.sliceSerialize(Q).codePointAt(0)===61?1:2}function A(){this.data.setextHeadingSlurpLineEnding=void 0}function D(Q){const ve=this.stack[this.stack.length-1].children;let Le=ve[ve.length-1];(!Le||Le.type!=="text")&&(Le=Ms(),Le.position={start:Gi(Q.start),end:void 0},ve.push(Le)),this.stack.push(Le)}function M(Q){const re=this.stack.pop();re.value+=this.sliceSerialize(Q),re.position.end=Gi(Q.end)}function V(Q){const re=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ve=re.children[re.children.length-1];ve.position.end=Gi(Q.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(re.type)&&(D.call(this,Q),M.call(this,Q))}function z(){this.data.atHardBreak=!0}function F(){const Q=this.resume(),re=this.stack[this.stack.length-1];re.value=Q}function ae(){const Q=this.resume(),re=this.stack[this.stack.length-1];re.value=Q}function ce(){const Q=this.resume(),re=this.stack[this.stack.length-1];re.value=Q}function Oe(){const Q=this.stack[this.stack.length-1];if(this.data.inReference){const re=this.data.referenceType||"shortcut";Q.type+="Reference",Q.referenceType=re,delete Q.url,delete Q.title}else delete Q.identifier,delete Q.label;this.data.referenceType=void 0}function ze(){const Q=this.stack[this.stack.length-1];if(this.data.inReference){const re=this.data.referenceType||"shortcut";Q.type+="Reference",Q.referenceType=re,delete Q.url,delete Q.title}else delete Q.identifier,delete Q.label;this.data.referenceType=void 0}function J(Q){const re=this.sliceSerialize(Q),ve=this.stack[this.stack.length-2];ve.label=d5(re),ve.identifier=Ra(re).toLowerCase()}function me(){const Q=this.stack[this.stack.length-1],re=this.resume(),ve=this.stack[this.stack.length-1];if(this.data.inReference=!0,ve.type==="link"){const Le=Q.children;ve.children=Le}else ve.alt=re}function N(){const Q=this.resume(),re=this.stack[this.stack.length-1];re.url=Q}function fe(){const Q=this.resume(),re=this.stack[this.stack.length-1];re.title=Q}function _e(){this.data.inReference=void 0}function j(){this.data.referenceType="collapsed"}function Ce(Q){const re=this.resume(),ve=this.stack[this.stack.length-1];ve.label=re,ve.identifier=Ra(this.sliceSerialize(Q)).toLowerCase(),this.data.referenceType="full"}function xe(Q){this.data.characterReferenceType=Q.type}function X(Q){const re=this.sliceSerialize(Q),ve=this.data.characterReferenceType;let Le;ve?(Le=oC(re,ve==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Le=Hy(re);const qe=this.stack[this.stack.length-1];qe.value+=Le}function de(Q){const re=this.stack.pop();re.position.end=Gi(Q.end)}function Ue(Q){M.call(this,Q);const re=this.stack[this.stack.length-1];re.url=this.sliceSerialize(Q)}function xt(Q){M.call(this,Q);const re=this.stack[this.stack.length-1];re.url="mailto:"+this.sliceSerialize(Q)}function Rt(){return{type:"blockquote",children:[]}}function Zt(){return{type:"code",lang:null,meta:null,value:""}}function Rn(){return{type:"inlineCode",value:""}}function Xr(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Os(){return{type:"emphasis",children:[]}}function ei(){return{type:"heading",depth:0,children:[]}}function Ri(){return{type:"break"}}function Ni(){return{type:"html",value:""}}function Li(){return{type:"image",title:null,url:"",alt:null}}function Ds(){return{type:"link",title:null,url:"",children:[]}}function ti(Q){return{type:"list",ordered:Q.type==="listOrdered",start:null,spread:Q._spread,children:[]}}function Oi(Q){return{type:"listItem",spread:Q._spread,checked:null,children:[]}}function bo(){return{type:"paragraph",children:[]}}function Di(){return{type:"strong",children:[]}}function Ms(){return{type:"text",value:""}}function Ro(){return{type:"thematicBreak"}}}function Gi(t){return{line:t.line,column:t.column,offset:t.offset}}function _C(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?_C(t,r):g5(t,r)}}function g5(t,e){let n;for(n in e)if(gC.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function QE(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+_u({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+_u({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+_u({start:e.start,end:e.end})+") is still open")}function _5(t){const e=this;e.parser=n;function n(r){return p5(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function y5(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function v5(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function w5(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(i.data={meta:e.meta}),t.patch(e,i),i=t.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(e,i),i}function E5(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function x5(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function T5(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=il(r.toLowerCase()),s=t.footnoteOrder.indexOf(r);let a,u=t.footnoteCounts.get(r);u===void 0?(u=0,t.footnoteOrder.push(r),a=t.footnoteOrder.length):a=s+1,u+=1,t.footnoteCounts.set(r,u);const c={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(u>1?"-"+u:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};t.patch(e,c);const f={type:"element",tagName:"sup",properties:{},children:[c]};return t.patch(e,f),t.applyData(e,f)}function S5(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function I5(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function yC(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const a=i[i.length-1];return a&&a.type==="text"?a.value+=r:i.push({type:"text",value:r}),i}function P5(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return yC(t,e);const i={src:il(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function C5(t,e){const n={src:il(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function k5(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function A5(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return yC(t,e);const i={href:il(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function b5(t,e){const n={href:il(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function R5(t,e,n){const r=t.all(e),i=n?N5(n):vC(e),s={},a=[];if(typeof e.checked=="boolean"){const p=r[0];let m;p&&p.type==="element"&&p.tagName==="p"?m=p:(m={type:"element",tagName:"p",properties:{},children:[]},r.unshift(m)),m.children.length>0&&m.children.unshift({type:"text",value:" "}),m.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let u=-1;for(;++u<r.length;){const p=r[u];(i||u!==0||p.type!=="element"||p.tagName!=="p")&&a.push({type:"text",value:`
`}),p.type==="element"&&p.tagName==="p"&&!i?a.push(...p.children):a.push(p)}const c=r[r.length-1];c&&(i||c.type!=="element"||c.tagName!=="p")&&a.push({type:"text",value:`
`});const f={type:"element",tagName:"li",properties:s,children:a};return t.patch(e,f),t.applyData(e,f)}function N5(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=vC(n[r])}return e}function vC(t){const e=t.spread;return e??t.children.length>1}function L5(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const a=r[i];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function O5(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function D5(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function M5(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function V5(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const a={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],a),i.push(a)}if(n.length>0){const a={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},u=zy(e.children[1]),c=XP(e.children[e.children.length-1]);u&&c&&(a.position={start:u,end:c}),i.push(a)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function F5(t,e,n){const r=n?n.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,u=a?a.length:e.children.length;let c=-1;const f=[];for(;++c<u;){const m=e.children[c],y={},v=a?a[c]:void 0;v&&(y.align=v);let T={type:"element",tagName:s,properties:y,children:[]};m&&(T.children=t.all(m),t.patch(m,T),T=t.applyData(m,T)),f.push(T)}const p={type:"element",tagName:"tr",properties:{},children:t.wrap(f,!0)};return t.patch(e,p),t.applyData(e,p)}function j5(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const YE=9,JE=32;function z5(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const s=[];for(;r;)s.push(XE(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return s.push(XE(e.slice(i),i>0,!1)),s.join("")}function XE(t,e,n){let r=0,i=t.length;if(e){let s=t.codePointAt(r);for(;s===YE||s===JE;)r++,s=t.codePointAt(r)}if(n){let s=t.codePointAt(i-1);for(;s===YE||s===JE;)i--,s=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function U5(t,e){const n={type:"text",value:z5(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function B5(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const $5={blockquote:y5,break:v5,code:w5,delete:E5,emphasis:x5,footnoteReference:T5,heading:S5,html:I5,imageReference:P5,image:C5,inlineCode:k5,linkReference:A5,link:b5,listItem:R5,list:L5,paragraph:O5,root:D5,strong:M5,table:V5,tableCell:j5,tableRow:F5,text:U5,thematicBreak:B5,toml:xh,yaml:xh,definition:xh,footnoteDefinition:xh};function xh(){}const wC=-1,$f=0,vu=1,qd=2,Gy=3,Ky=4,Zy=5,Qy=6,EC=7,xC=8,e1=typeof self=="object"?self:globalThis,H5=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,a]=e[i];switch(s){case $f:case wC:return n(a,i);case vu:{const u=n([],i);for(const c of a)u.push(r(c));return u}case qd:{const u=n({},i);for(const[c,f]of a)u[r(c)]=r(f);return u}case Gy:return n(new Date(a),i);case Ky:{const{source:u,flags:c}=a;return n(new RegExp(u,c),i)}case Zy:{const u=n(new Map,i);for(const[c,f]of a)u.set(r(c),r(f));return u}case Qy:{const u=n(new Set,i);for(const c of a)u.add(r(c));return u}case EC:{const{name:u,message:c}=a;return n(new e1[u](c),i)}case xC:return n(BigInt(a),i);case"BigInt":return n(Object(BigInt(a)),i);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:u}=new Uint8Array(a);return n(new DataView(u),a)}}return n(new e1[s](a),i)};return r},t1=t=>H5(new Map,t)(0),ra="",{toString:q5}={},{keys:W5}=Object,ql=t=>{const e=typeof t;if(e!=="object"||!t)return[$f,e];const n=q5.call(t).slice(8,-1);switch(n){case"Array":return[vu,ra];case"Object":return[qd,ra];case"Date":return[Gy,ra];case"RegExp":return[Ky,ra];case"Map":return[Zy,ra];case"Set":return[Qy,ra];case"DataView":return[vu,n]}return n.includes("Array")?[vu,n]:n.includes("Error")?[EC,n]:[qd,n]},Th=([t,e])=>t===$f&&(e==="function"||e==="symbol"),G5=(t,e,n,r)=>{const i=(a,u)=>{const c=r.push(a)-1;return n.set(u,c),c},s=a=>{if(n.has(a))return n.get(a);let[u,c]=ql(a);switch(u){case $f:{let p=a;switch(c){case"bigint":u=xC,p=a.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+c);p=null;break;case"undefined":return i([wC],a)}return i([u,p],a)}case vu:{if(c){let y=a;return c==="DataView"?y=new Uint8Array(a.buffer):c==="ArrayBuffer"&&(y=new Uint8Array(a)),i([c,[...y]],a)}const p=[],m=i([u,p],a);for(const y of a)p.push(s(y));return m}case qd:{if(c)switch(c){case"BigInt":return i([c,a.toString()],a);case"Boolean":case"Number":case"String":return i([c,a.valueOf()],a)}if(e&&"toJSON"in a)return s(a.toJSON());const p=[],m=i([u,p],a);for(const y of W5(a))(t||!Th(ql(a[y])))&&p.push([s(y),s(a[y])]);return m}case Gy:return i([u,a.toISOString()],a);case Ky:{const{source:p,flags:m}=a;return i([u,{source:p,flags:m}],a)}case Zy:{const p=[],m=i([u,p],a);for(const[y,v]of a)(t||!(Th(ql(y))||Th(ql(v))))&&p.push([s(y),s(v)]);return m}case Qy:{const p=[],m=i([u,p],a);for(const y of a)(t||!Th(ql(y)))&&p.push(s(y));return m}}const{message:f}=a;return i([u,{name:c,message:f}],a)};return s},n1=(t,{json:e,lossy:n}={})=>{const r=[];return G5(!(e||n),!!e,new Map,r)(t),r},Wd=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?t1(n1(t,e)):structuredClone(t):(t,e)=>t1(n1(t,e));function K5(t,e){const n=[{type:"text",value:"↩"}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function Z5(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function Q5(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||K5,r=t.options.footnoteBackLabel||Z5,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",a=t.options.footnoteLabelProperties||{className:["sr-only"]},u=[];let c=-1;for(;++c<t.footnoteOrder.length;){const f=t.footnoteById.get(t.footnoteOrder[c]);if(!f)continue;const p=t.all(f),m=String(f.identifier).toUpperCase(),y=il(m.toLowerCase());let v=0;const T=[],I=t.footnoteCounts.get(m);for(;I!==void 0&&++v<=I;){T.length>0&&T.push({type:"text",value:" "});let k=typeof n=="string"?n:n(c,v);typeof k=="string"&&(k={type:"text",value:k}),T.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+y+(v>1?"-"+v:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,v),className:["data-footnote-backref"]},children:Array.isArray(k)?k:[k]})}const O=p[p.length-1];if(O&&O.type==="element"&&O.tagName==="p"){const k=O.children[O.children.length-1];k&&k.type==="text"?k.value+=" ":O.children.push({type:"text",value:" "}),O.children.push(...T)}else p.push(...T);const S={type:"element",tagName:"li",properties:{id:e+"fn-"+y},children:t.wrap(p,!0)};t.patch(f,S),u.push(S)}if(u.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Wd(a),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(u,!0)},{type:"text",value:`
`}]}}const TC=function(t){if(t==null)return ez;if(typeof t=="function")return Hf(t);if(typeof t=="object")return Array.isArray(t)?Y5(t):J5(t);if(typeof t=="string")return X5(t);throw new Error("Expected function, string, or object as test")};function Y5(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=TC(t[n]);return Hf(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function J5(t){const e=t;return Hf(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function X5(t){return Hf(e);function e(n){return n&&n.type===t}}function Hf(t){return e;function e(n,r,i){return!!(tz(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function ez(){return!0}function tz(t){return t!==null&&typeof t=="object"&&"type"in t}const SC=[],nz=!0,r1=!1,rz="skip";function iz(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=TC(i),a=r?-1:1;u(t,void 0,[])();function u(c,f,p){const m=c&&typeof c=="object"?c:{};if(typeof m.type=="string"){const v=typeof m.tagName=="string"?m.tagName:typeof m.name=="string"?m.name:void 0;Object.defineProperty(y,"name",{value:"node ("+(c.type+(v?"<"+v+">":""))+")"})}return y;function y(){let v=SC,T,I,O;if((!e||s(c,f,p[p.length-1]||void 0))&&(v=sz(n(c,p)),v[0]===r1))return v;if("children"in c&&c.children){const S=c;if(S.children&&v[0]!==rz)for(I=(r?S.children.length:-1)+a,O=p.concat(S);I>-1&&I<S.children.length;){const k=S.children[I];if(T=u(k,I,O)(),T[0]===r1)return T;I=typeof T[1]=="number"?T[1]:I+a}}return v}}}function sz(t){return Array.isArray(t)?t:typeof t=="number"?[nz,t]:t==null?SC:[t]}function IC(t,e,n,r){let i,s,a;typeof e=="function"?(s=void 0,a=e,i=n):(s=e,a=n,i=r),iz(t,s,u,i);function u(c,f){const p=f[f.length-1],m=p?p.children.indexOf(c):void 0;return a(c,m,p)}}const Mg={}.hasOwnProperty,oz={};function az(t,e){const n=e||oz,r=new Map,i=new Map,s=new Map,a={...$5,...n.handlers},u={all:f,applyData:uz,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:a,one:c,options:n,patch:lz,wrap:hz};return IC(t,function(p){if(p.type==="definition"||p.type==="footnoteDefinition"){const m=p.type==="definition"?r:i,y=String(p.identifier).toUpperCase();m.has(y)||m.set(y,p)}}),u;function c(p,m){const y=p.type,v=u.handlers[y];if(Mg.call(u.handlers,y)&&v)return v(u,p,m);if(u.options.passThrough&&u.options.passThrough.includes(y)){if("children"in p){const{children:I,...O}=p,S=Wd(O);return S.children=u.all(p),S}return Wd(p)}return(u.options.unknownHandler||cz)(u,p,m)}function f(p){const m=[];if("children"in p){const y=p.children;let v=-1;for(;++v<y.length;){const T=u.one(y[v],p);if(T){if(v&&y[v-1].type==="break"&&(!Array.isArray(T)&&T.type==="text"&&(T.value=i1(T.value)),!Array.isArray(T)&&T.type==="element")){const I=T.children[0];I&&I.type==="text"&&(I.value=i1(I.value))}Array.isArray(T)?m.push(...T):m.push(T)}}}return m}}function lz(t,e){t.position&&(e.position=qF(t))}function uz(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const a="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:a}}n.type==="element"&&s&&Object.assign(n.properties,Wd(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function cz(t,e){const n=e.data||{},r="value"in e&&!(Mg.call(n,"hProperties")||Mg.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function hz(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function i1(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function s1(t,e){const n=az(t,e),r=n.one(t,void 0),i=Q5(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function dz(t,e){return t&&"run"in t?async function(n,r){const i=s1(n,{file:r,...e});await t.run(i,r)}:function(n,r){return s1(n,{file:r,...t||e})}}function o1(t){if(t)throw t}var Qh=Object.prototype.hasOwnProperty,PC=Object.prototype.toString,a1=Object.defineProperty,l1=Object.getOwnPropertyDescriptor,u1=function(e){return typeof Array.isArray=="function"?Array.isArray(e):PC.call(e)==="[object Array]"},c1=function(e){if(!e||PC.call(e)!=="[object Object]")return!1;var n=Qh.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&Qh.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var i;for(i in e);return typeof i>"u"||Qh.call(e,i)},h1=function(e,n){a1&&n.name==="__proto__"?a1(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},d1=function(e,n){if(n==="__proto__")if(Qh.call(e,n)){if(l1)return l1(e,n).value}else return;return e[n]},fz=function t(){var e,n,r,i,s,a,u=arguments[0],c=1,f=arguments.length,p=!1;for(typeof u=="boolean"&&(p=u,u=arguments[1]||{},c=2),(u==null||typeof u!="object"&&typeof u!="function")&&(u={});c<f;++c)if(e=arguments[c],e!=null)for(n in e)r=d1(u,n),i=d1(e,n),u!==i&&(p&&i&&(c1(i)||(s=u1(i)))?(s?(s=!1,a=r&&u1(r)?r:[]):a=r&&c1(r)?r:{},h1(u,{name:n,newValue:t(p,a,i)})):typeof i<"u"&&h1(u,{name:n,newValue:i}));return u};const Wp=Gd(fz);function Vg(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function pz(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const a=i.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);u(null,...i);function u(c,...f){const p=t[++s];let m=-1;if(c){a(c);return}for(;++m<i.length;)(f[m]===null||f[m]===void 0)&&(f[m]=i[m]);i=f,p?mz(p,u)(...f):a(null,...f)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function mz(t,e){let n;return r;function r(...a){const u=t.length>a.length;let c;u&&a.push(i);try{c=t.apply(this,a)}catch(f){const p=f;if(u&&n)throw p;return i(p)}u||(c&&c.then&&typeof c.then=="function"?c.then(s,i):c instanceof Error?i(c):s(c))}function i(a,...u){n||(n=!0,e(a,...u))}function s(a){i(null,a)}}const Mr={basename:gz,dirname:_z,extname:yz,join:vz,sep:"/"};function gz(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');wc(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let a=-1,u=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else a<0&&(s=!0,a=i+1),u>-1&&(t.codePointAt(i)===e.codePointAt(u--)?u<0&&(r=i):(u=-1,r=a));return n===r?r=a:r<0&&(r=t.length),t.slice(n,r)}function _z(t){if(wc(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function yz(t){wc(t);let e=t.length,n=-1,r=0,i=-1,s=0,a;for(;e--;){const u=t.codePointAt(e);if(u===47){if(a){r=e+1;break}continue}n<0&&(a=!0,n=e+1),u===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function vz(...t){let e=-1,n;for(;++e<t.length;)wc(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":wz(n)}function wz(t){wc(t);const e=t.codePointAt(0)===47;let n=Ez(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function Ez(t,e){let n="",r=0,i=-1,s=0,a=-1,u,c;for(;++a<=t.length;){if(a<t.length)u=t.codePointAt(a);else{if(u===47)break;u=47}if(u===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(c=n.lastIndexOf("/"),c!==n.length-1){c<0?(n="",r=0):(n=n.slice(0,c),r=n.length-1-n.lastIndexOf("/")),i=a,s=0;continue}}else if(n.length>0){n="",r=0,i=a,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,a):n=t.slice(i+1,a),r=a-i-1;i=a,s=0}else u===46&&s>-1?s++:s=-1}return n}function wc(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const xz={cwd:Tz};function Tz(){return"/"}function Fg(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function Sz(t){if(typeof t=="string")t=new URL(t);else if(!Fg(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return Iz(t)}function Iz(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const Gp=["history","path","basename","stem","extname","dirname"];class CC{constructor(e){let n;e?Fg(e)?n={path:e}:typeof e=="string"||Pz(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":xz.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Gp.length;){const s=Gp[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)Gp.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Mr.basename(this.path):void 0}set basename(e){Zp(e,"basename"),Kp(e,"basename"),this.path=Mr.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Mr.dirname(this.path):void 0}set dirname(e){f1(this.basename,"dirname"),this.path=Mr.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Mr.extname(this.path):void 0}set extname(e){if(Kp(e,"extname"),f1(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Mr.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Fg(e)&&(e=Sz(e)),Zp(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Mr.basename(this.path,this.extname):void 0}set stem(e){Zp(e,"stem"),Kp(e,"stem"),this.path=Mr.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new an(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Kp(t,e){if(t&&t.includes(Mr.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Mr.sep+"`")}function Zp(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function f1(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function Pz(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Cz=function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},kz={}.hasOwnProperty;class Yy extends Cz{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=pz()}copy(){const e=new Yy;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(Wp(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(Jp("data",this.frozen),this.namespace[e]=n,this):kz.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Jp("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Sh(e),r=this.parser||this.Parser;return Qp("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),Qp("process",this.parser||this.Parser),Yp("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,a){const u=Sh(e),c=r.parse(u);r.run(c,u,function(p,m,y){if(p||!m||!y)return f(p);const v=m,T=r.stringify(v,y);Rz(T)?y.value=T:y.result=T,f(p,y)});function f(p,m){p||!m?a(p):s?s(m):n(void 0,m)}}}processSync(e){let n=!1,r;return this.freeze(),Qp("processSync",this.parser||this.Parser),Yp("processSync",this.compiler||this.Compiler),this.process(e,i),m1("processSync","process",n),r;function i(s,a){n=!0,o1(s),r=a}}run(e,n,r){p1(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(a,u){const c=Sh(n);i.run(e,c,f);function f(p,m,y){const v=m||e;p?u(p):a?a(v):r(void 0,v,y)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),m1("runSync","run",r),i;function s(a,u){o1(a),i=u,r=!0}}stringify(e,n){this.freeze();const r=Sh(n),i=this.compiler||this.Compiler;return Yp("stringify",i),p1(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(Jp("use",this.frozen),e!=null)if(typeof e=="function")c(e,n);else if(typeof e=="object")Array.isArray(e)?u(e):a(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(f){if(typeof f=="function")c(f,[]);else if(typeof f=="object")if(Array.isArray(f)){const[p,...m]=f;c(p,m)}else a(f);else throw new TypeError("Expected usable value, not `"+f+"`")}function a(f){if(!("plugins"in f)&&!("settings"in f))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");u(f.plugins),f.settings&&(i.settings=Wp(!0,i.settings,f.settings))}function u(f){let p=-1;if(f!=null)if(Array.isArray(f))for(;++p<f.length;){const m=f[p];s(m)}else throw new TypeError("Expected a list of plugins, not `"+f+"`")}function c(f,p){let m=-1,y=-1;for(;++m<r.length;)if(r[m][0]===f){y=m;break}if(y===-1)r.push([f,...p]);else if(p.length>0){let[v,...T]=p;const I=r[y][1];Vg(I)&&Vg(v)&&(v=Wp(!0,I,v)),r[y]=[f,v,...T]}}}}const Az=new Yy().freeze();function Qp(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function Yp(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function Jp(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function p1(t){if(!Vg(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function m1(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Sh(t){return bz(t)?t:new CC(t)}function bz(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function Rz(t){return typeof t=="string"||Nz(t)}function Nz(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Lz="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",g1=[],_1={allowDangerousHtml:!0},Oz=/^(https?|ircs?|mailto|xmpp)$/i,Dz=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function y1(t){const e=Mz(t),n=Vz(t);return Fz(e.runSync(e.parse(n),n),t)}function Mz(t){const e=t.rehypePlugins||g1,n=t.remarkPlugins||g1,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,..._1}:_1;return Az().use(_5).use(n).use(dz,r).use(e)}function Vz(t){const e=t.children||"",n=new CC;return typeof e=="string"&&(n.value=e),n}function Fz(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,a=e.skipHtml,u=e.unwrapDisallowed,c=e.urlTransform||jz;for(const p of Dz)Object.hasOwn(e,p.from)&&(""+p.from+(p.to?"use `"+p.to+"` instead":"remove it")+Lz+p.id,void 0);return e.className&&(t={type:"element",tagName:"div",properties:{className:e.className},children:t.type==="root"?t.children:[t]}),IC(t,f),QF(t,{Fragment:x.Fragment,components:i,ignoreInvalidStyle:!0,jsx:x.jsx,jsxs:x.jsxs,passKeys:!0,passNode:!0});function f(p,m,y){if(p.type==="raw"&&y&&typeof m=="number")return a?y.children.splice(m,1):y.children[m]={type:"text",value:p.value},m;if(p.type==="element"){let v;for(v in $p)if(Object.hasOwn($p,v)&&Object.hasOwn(p.properties,v)){const T=p.properties[v],I=$p[v];(I===null||I.includes(p.tagName))&&(p.properties[v]=c(String(T||""),v,p))}}if(p.type==="element"){let v=n?!n.includes(p.tagName):s?s.includes(p.tagName):!1;if(!v&&r&&typeof m=="number"&&(v=!r(p,m,y)),v&&y&&typeof m=="number")return u&&p.children?y.children.splice(m,1,...p.children):y.children.splice(m,1),m}}}function jz(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||Oz.test(t.slice(0,e))?t:""}const zz=t=>{var e;return(e=t==null?void 0:t.demandeSAP)!=null&&e.toLowerCase().includes("demande de rma")?"Demande de RMA":(t==null?void 0:t.statut)||"En cours"},Uz=t=>{switch(t==null?void 0:t.toLowerCase()){case"en cours":return"badge-warning";case"a clôturée":return"badge-info";case"terminée":return"badge-success";case"demande de rma":return"badge-secondary";default:return"badge-ghost"}},Bz=({ticket:t,onClose:e,sectorId:n,onTicketUpdated:r})=>{const[i,s]=H.useState(""),[a,u]=H.useState(""),[c,f]=H.useState(!1),[p,m]=H.useState(null),[y,v]=H.useState(null),[T,I]=H.useState(null),[O,S]=H.useState(!1),k=H.useMemo(()=>!(t!=null&&t.demandeSAP)||t!=null&&t.summary?"":`Résume ce texte en 1 ou 2 phrases maximum: ${t.demandeSAP}`,[t==null?void 0:t.id,t==null?void 0:t.demandeSAP,t==null?void 0:t.summary]),{summary:C,isLoading:B,error:G}=CE(k),$=H.useMemo(()=>!(t!=null&&t.demandeSAP)||t!=null&&t.solution?"":`Propose une solution concise (1-2 phrases) pour ce problème: ${t.demandeSAP}`,[t==null?void 0:t.id,t==null?void 0:t.demandeSAP,t==null?void 0:t.solution]),{summary:R,isLoading:A,error:D}=CE($);H.useEffect(()=>{u(t?zz(t):"")},[t]),H.useEffect(()=>{(async()=>{if(C&&n&&(t!=null&&t.id)&&!t.summary){I(null);try{console.log("Attempting to save generated summary:",C),await Eh(n,t.id,{summary:C}),r()}catch(ce){console.error("Error saving summary:",ce),I(`Erreur sauvegarde résumé: ${ce.message}`)}}})()},[C,n,t==null?void 0:t.id,t==null?void 0:t.summary]),H.useEffect(()=>{(async()=>{if(R&&n&&(t!=null&&t.id)&&!t.solution){I(null);try{console.log("Attempting to save generated solution:",R),await Eh(n,t.id,{solution:R}),r()}catch(ce){console.error("Error saving solution:",ce),I(`Erreur sauvegarde solution: ${ce.message}`)}}})()},[R,n,t==null?void 0:t.id,t==null?void 0:t.solution]);const M=async()=>{if(i.trim()&&n&&(t!=null&&t.id)){S(!0),v(null);const ae=[...t.commentaires||[],i];try{await Eh(n,t.id,{commentaires:ae}),s(""),r()}catch(ce){v(`Erreur ajout commentaire: ${ce.message}`)}finally{S(!1)}}},V=async()=>{if(n&&(t!=null&&t.id)&&a){f(!0),m(null);try{await Eh(n,t.id,{statut:a}),r()}catch(ae){m(`Erreur MàJ statut: ${ae.message}`)}finally{f(!1)}}};if(!t)return null;const z=(t==null?void 0:t.summary)||C,F=(t==null?void 0:t.solution)||R;return x.jsxs("div",{className:"modal modal-open",children:[x.jsxs("div",{className:"modal-box w-11/12 max-w-3xl relative",children:[" ",x.jsx("button",{onClick:e,className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2 z-10","aria-label":"Fermer",children:"✕"}),x.jsxs("h3",{className:"font-bold text-lg mb-4",children:[t.raisonSociale," - Ticket SAP ",t.numeroSAP]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-2 py-4 text-sm",children:[x.jsxs("p",{children:[x.jsx("b",{children:"Code Client:"})," ",t.codeClient||"N/A"]}),x.jsxs("p",{children:[x.jsx("b",{children:"Téléphone:"})," ",t.telephone||"N/A"]}),x.jsxs("p",{className:"md:col-span-2",children:[x.jsx("b",{children:"Adresse:"})," ",t.adresse||"N/A"]}),x.jsxs("p",{children:[x.jsx("b",{children:"Date:"})," ",t.date||"N/A"]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("b",{children:"Statut:"})," ",x.jsx("span",{className:`badge ${Uz(a)}`,children:a})]})]}),x.jsx("hr",{className:"my-3"}),x.jsxs("div",{className:"mb-3",children:[x.jsx("h4",{className:"text-md font-semibold mb-1",children:"Résumé IA"}),B&&x.jsx("span",{className:"loading loading-dots loading-sm"}),G&&!z&&x.jsxs("p",{className:"text-error text-xs",children:["Erreur résumé: ",G]}),z?x.jsx("div",{className:"prose prose-sm max-w-none",children:x.jsx(y1,{children:z})}):!B&&!G?x.jsx("p",{className:"text-xs text-gray-500 italic",children:"Génération du résumé..."}):null,T&&T.includes("résumé")&&x.jsx("p",{className:"text-error text-xs mt-1",children:T})]}),x.jsxs("div",{className:"mb-3",children:[x.jsx("h4",{className:"text-md font-semibold mb-1",children:"Solution Proposée IA"}),A&&x.jsx("span",{className:"loading loading-dots loading-sm"}),D&&!F&&x.jsxs("p",{className:"text-error text-xs",children:["Erreur solution: ",D]}),F?x.jsx("div",{className:"prose prose-sm max-w-none",children:x.jsx(y1,{children:F})}):!A&&!D?x.jsx("p",{className:"text-xs text-gray-500 italic",children:"Génération de la solution..."}):null,T&&T.includes("solution")&&x.jsx("p",{className:"text-error text-xs mt-1",children:T})]}),x.jsx("hr",{className:"my-3"}),x.jsxs("details",{className:"mb-3",children:[x.jsx("summary",{className:"cursor-pointer font-semibold text-md",children:"Voir la demande SAP originale"}),x.jsx("div",{className:"mt-2 p-2 border rounded bg-base-200 text-xs max-h-32 overflow-y-auto",children:x.jsx("pre",{className:"whitespace-pre-wrap break-words",children:t.demandeSAP||"N/A"})})]}),x.jsx("hr",{className:"my-3"}),x.jsxs("div",{className:"mb-4",children:[x.jsx("h4",{className:"text-md font-semibold mb-2",children:"Modifier le Statut"}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsxs("select",{className:"select select-bordered select-sm w-full max-w-xs",value:a,onChange:ae=>u(ae.target.value),disabled:c,children:[x.jsx("option",{value:"Demande de RMA",children:"Demande de RMA"}),x.jsx("option",{value:"En cours",children:"En cours"}),x.jsx("option",{value:"A Clôturée",children:"A Clôturée"})," ",x.jsx("option",{value:"Terminée",children:"Terminée"})]}),x.jsx("button",{className:"btn btn-primary btn-sm",onClick:V,disabled:c,children:c?x.jsx("span",{className:"loading loading-spinner loading-xs"}):"Mettre à jour"})]}),p&&x.jsx("p",{className:"text-error text-sm mt-1",children:p})]}),x.jsxs("div",{children:[x.jsx("h4",{className:"text-md font-semibold mb-2",children:"Commentaires"}),x.jsx("div",{className:"max-h-32 overflow-y-auto mb-2 border rounded p-2 bg-base-200 text-sm",children:t.commentaires&&t.commentaires.length>0?x.jsx("ul",{className:"list-disc list-inside",children:t.commentaires.map((ae,ce)=>x.jsx("li",{children:ae},ce))}):x.jsx("p",{className:"text-sm text-gray-500 italic",children:"Aucun commentaire."})}),x.jsx("textarea",{placeholder:"Ajouter un commentaire...",className:"textarea textarea-bordered w-full text-sm",rows:2,value:i,onChange:ae=>s(ae.target.value),disabled:O}),x.jsx("button",{className:"btn btn-secondary btn-sm mt-2",onClick:M,disabled:O||!i.trim(),children:O?x.jsx("span",{className:"loading loading-spinner loading-xs"}):"Ajouter"}),y&&x.jsx("p",{className:"text-error text-sm mt-1",children:y})]})]}),x.jsx("form",{method:"dialog",className:"modal-backdrop",children:x.jsx("button",{onClick:e,children:"close"})})]})};function $z(t,e,n){n===void 0&&(n={});var r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties={},r.geometry=t,r}function Hz(t,e,n){if(n===void 0&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!v1(t[0])||!v1(t[1]))throw new Error("coordinates must contain numbers");var r={type:"Point",coordinates:t};return $z(r,e,n)}function v1(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function qz(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return t.geometry.coordinates;if(t.type==="Point")return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Wz(t){return t.type==="Feature"?t.geometry:t}function Gz(t,e,n){if(n===void 0&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var r=qz(t),i=Wz(e),s=i.type,a=e.bbox,u=i.coordinates;if(a&&Kz(r,a)===!1)return!1;s==="Polygon"&&(u=[u]);for(var c=!1,f=0;f<u.length&&!c;f++)if(w1(r,u[f][0],n.ignoreBoundary)){for(var p=!1,m=1;m<u[f].length&&!p;)w1(r,u[f][m],!n.ignoreBoundary)&&(p=!0),m++;p||(c=!0)}return c}function w1(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,s=e.length-1;i<e.length;s=i++){var a=e[i][0],u=e[i][1],c=e[s][0],f=e[s][1],p=t[1]*(a-c)+u*(c-t[0])+f*(t[0]-a)===0&&(a-t[0])*(c-t[0])<=0&&(u-t[1])*(f-t[1])<=0;if(p)return!n;var m=u>t[1]!=f>t[1]&&t[0]<(c-a)*(t[1]-u)/(f-u)+a;m&&(r=!r)}return r}function Kz(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}const Zz=()=>{const[t,e]=H.useState([]),[n,r]=H.useState(null),[i,s]=H.useState([]),[a,u]=H.useState(null),[c,f]=H.useState(!0),[p,m]=H.useState(null),[y,v]=H.useState(0),[T,I]=H.useState(!0),[O,S]=H.useState(""),[k,C]=H.useState(""),[B,G]=H.useState(""),[$,R]=H.useState(""),[A,D]=H.useState(!1),M=H.useMemo(()=>i.filter(X=>typeof X.adresse=="string"&&X.adresse.trim()!==""&&X.adresse!=="Non trouvé"),[i]);H.useMemo(()=>M.map(X=>X.adresse),[M]);const{coordinates:V,isLoading:z,error:F}=$P(),ae=H.useCallback(async X=>{if(X){I(!0),m(null);try{const de=await q3(X);s(de),m(null)}catch(de){console.error(`Error loading tickets for sector ${X}:`,de),m(`Erreur de chargement des tickets pour ${X}.`),s([])}finally{I(!1)}}},[]);H.useEffect(()=>{(async()=>{try{f(!0);const de=await My();e(de),de.length>0&&!n?r(de[0].id):de.length===0&&f(!1)}catch(de){console.error("Error loading sectors:",de),m("Erreur lors du chargement des secteurs."),f(!1)}})()},[]),H.useEffect(()=>{if(!n){s([]),f(!1);return}f(!0),m(null),console.log(`Subscribing to sector: ${n}, version: ${y}`);const X=zP(n,de=>{console.log(`Received ${de.length} tickets for sector ${n}`),s(de),f(!1),m(null)});return()=>{console.log(`Unsubscribing from sector: ${n}`),X()}},[n,y]);const ce=H.useMemo(()=>{if(z||!V||V.length!==M.length)return i.map(de=>({...de,salesperson:"Chargement..."}));const X=new Map;return M.forEach((de,Ue)=>{V[Ue]&&X.set(de.id,V[Ue])}),i.map(de=>{const Ue=X.get(de.id);let xt="Hors zone";if(Ue)try{const Rt=Hz([Ue.lng,Ue.lat]),Zt=HP.find(Rn=>Gz(Rt,Rn.feature));Zt&&(xt=Zt.name)}catch(Rt){console.error(`Error checking point in polygon for ticket ${de.id}:`,Rt),xt="Erreur zone"}else de.adresse&&de.adresse!=="Non trouvé"?xt="Géocodage...":xt="Adresse manquante";return{...de,salesperson:xt}})},[i,V,z,M]),Oe=H.useCallback(()=>{console.log("Ticket updated, incrementing data version."),v(X=>X+1)},[]),ze=H.useCallback(X=>{console.log("Selected ticket:",X.id);const de=ce.find(Ue=>Ue.id===X.id)||X;u(de)},[ce]),J=H.useCallback(()=>{console.log("Closing details"),u(null)},[]),me=X=>{const de=X.target.value;console.log("Sector changed to:",de),r(de),ae(de),S(""),C(""),G(""),R(""),u(null)},N=()=>{n&&ae(n)},fe=H.useMemo(()=>ce.filter(X=>{var de,Ue,xt;return(O===""||((de=X.raisonSociale)==null?void 0:de.toLowerCase().includes(O.toLowerCase())))&&(k===""||((Ue=X.codeClient)==null?void 0:Ue.toLowerCase().includes(k.toLowerCase())))&&(B===""||((xt=X.numeroSAP)==null?void 0:xt.toLowerCase().includes(B.toLowerCase())))&&($===""||X.statut===$)}),[ce,O,k,B,$]),_e=H.useMemo(()=>fe.reduce((X,de)=>{const Ue=de.raisonSociale||"Client inconnu";return X[Ue]||(X[Ue]=[]),X[Ue].push(de),X},{}),[fe]),j=H.useMemo(()=>{const X=new Set(i.map(de=>de.statut).filter(Boolean));return["",...Array.from(X)]},[i]),Ce=()=>{S(""),C(""),G(""),R("")},xe=O||k||B||$;return x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"flex flex-col lg:flex-row gap-4 h-[calc(100vh-8rem)]",children:x.jsxs("div",{className:"flex flex-col w-full",children:[" ",x.jsxs("div",{className:"mb-4 card bg-base-100 shadow p-4 shrink-0",children:[x.jsx("label",{htmlFor:"sector-select",className:"label font-semibold",children:"Secteur SAP"}),x.jsxs("select",{id:"sector-select",className:"select select-bordered w-full",value:n||"",onChange:me,disabled:c&&!n&&t.length===0,children:[x.jsx("option",{value:"",disabled:!0,children:"Sélectionner un secteur..."}),t.map(X=>x.jsx("option",{value:X.id,children:X.id},X.id))]})]}),x.jsxs("div",{className:"mb-4 card bg-base-100 shadow p-4 shrink-0",children:[x.jsxs("div",{className:"flex justify-between items-center mb-2",children:[x.jsx("h2",{className:"text-lg font-semibold",children:"Filtres"}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsxs("button",{className:`btn btn-ghost btn-sm text-error ${xe?"":"hidden"}`,onClick:Ce,title:"Effacer les filtres",children:[x.jsx(BS,{})," Effacer"]}),x.jsx("button",{className:"btn btn-ghost btn-sm",onClick:N,title:"Rafraîchir la liste des tickets",children:x.jsx(US,{})}),x.jsxs("button",{className:"btn btn-ghost btn-sm lg:hidden",onClick:()=>D(!A),children:[x.jsx(zS,{})," ",A?"Masquer":"Afficher"]})]})]}),x.jsxs("div",{className:`${A?"block":"hidden"} lg:block space-y-2`,children:[x.jsx("input",{type:"text",placeholder:"Filtrer par Raison Sociale...",className:"input input-bordered w-full",value:O,onChange:X=>S(X.target.value)}),x.jsx("input",{type:"text",placeholder:"Filtrer par Code Client...",className:"input input-bordered w-full",value:k,onChange:X=>C(X.target.value)}),x.jsx("input",{type:"text",placeholder:"Filtrer par N° SAP...",className:"input input-bordered w-full",value:B,onChange:X=>G(X.target.value)}),x.jsx("select",{className:"select select-bordered w-full",value:$,onChange:X=>R(X.target.value),children:j.map(X=>x.jsx("option",{value:X,children:X===""?"Tous les statuts":X},X))})]}),F&&x.jsxs("div",{className:"mt-2 text-xs text-error",children:["Erreur géocodage: ",F]})]}),x.jsxs("div",{className:"scrollable-list flex-grow card bg-base-100 shadow p-4 w-full min-h-0",style:{minHeight:0,maxHeight:"calc(100vh - 15rem)"},children:[(c||z&&i.length>0||T)&&x.jsx("div",{className:"flex justify-center items-center h-full",children:x.jsx("span",{className:"loading loading-spinner loading-lg"})}),p&&x.jsx("div",{className:"alert alert-error text-sm p-2",children:x.jsx("span",{children:p})}),!c&&!p&&n&&!T&&x.jsx(X3,{groupedTickets:_e,onSelectTicket:ze,selectedTicketId:a==null?void 0:a.id,groupByField:"raisonSociale"}),!c&&!p&&!n&&!T&&x.jsx("p",{className:"text-center text-gray-500",children:"Veuillez sélectionner un secteur pour voir les tickets."}),!c&&!p&&n&&Object.keys(_e).length===0&&!z&&!T&&x.jsx("p",{className:"text-center text-gray-500",children:"Aucun ticket trouvé pour les filtres actuels."})]})]})}),a&&x.jsx(Bz,{ticket:a,onClose:J,sectorId:n,onTicketUpdated:Oe})]})},Qz=t=>t.reduce((e,n)=>{const r=n.nomClient||"Client Inconnu";return e[r]||(e[r]=[]),e[r].push(n),e},{}),Yz=({selectedSector:t,onEnvoiSelect:e})=>{const[n,r]=H.useState([]),[i,s]=H.useState(!0),[a,u]=H.useState(null),[c,f]=H.useState(!1),[p,m]=H.useState(null);H.useEffect(()=>{(async()=>{s(!0),u(null);try{const B=await UP();r(B),u(null)}catch(B){u(`Erreur lors de la récupération des envois: ${B.message}`),r([])}finally{s(!1)}})()},[]);const y=H.useMemo(()=>t?n.filter(C=>C.secteur===t):n,[n,t]),v=H.useMemo(()=>Qz(y),[y]),T=async(C,B)=>{m(C)},I=async(C,B)=>{f(!0);try{const G=B.map($=>$.id);await W3(G),r($=>$.filter(R=>!G.includes(R.id))),alert(`Les envois pour ${C} ont été supprimés avec succès.`)}catch(G){u(`Erreur lors de la suppression des envois: ${G.message}`)}finally{f(!1),m(null)}},O=()=>{m(null)};if(i)return x.jsx("div",{className:"flex justify-center items-center p-4",children:x.jsx("span",{className:"loading loading-dots loading-lg"})});if(a)return x.jsxs("div",{className:"alert alert-error",children:[x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),x.jsx("span",{children:a})]});const S=C=>{switch(C==null?void 0:C.toLowerCase()){case"oui":return"badge-success";case"non":return"badge-error";default:return"badge-ghost"}},k=Object.keys(v).sort();return x.jsx("div",{children:y.length===0&&!i&&!a?x.jsxs("p",{className:"text-center p-4",children:["Aucun envoi trouvé ",t?`pour le secteur ${t}`:"","."]}):k.map(C=>x.jsxs("div",{className:"mb-6 p-4 border rounded-lg shadow-sm bg-base-200",children:[x.jsxs("div",{className:"flex justify-between items-center mb-3 sticky top-0 bg-base-200 py-2 z-10",children:[x.jsxs("h3",{className:"text-xl font-semibold",children:[C," (",v[C].length,")"]}),x.jsx("button",{onClick:()=>T(C,v[C]),className:"btn btn-sm btn-error",disabled:c,children:c?x.jsx("span",{className:"loading loading-spinner loading-xs"}):"Supprimer"})]}),p===C&&x.jsxs("div",{className:"bg-base-100 p-4 mb-4 rounded-lg border border-error",children:[x.jsxs("p",{className:"font-bold text-error mb-2",children:["Êtes-vous sûr de vouloir supprimer tous les envois pour ",C,"?"]}),x.jsxs("p",{className:"mb-4",children:["Cette action est irréversible et supprimera ",v[C].length," envoi(s)."]}),x.jsxs("div",{className:"flex justify-end gap-2",children:[x.jsx("button",{onClick:O,className:"btn btn-sm btn-ghost",disabled:c,children:"Annuler"}),x.jsx("button",{onClick:()=>I(C,v[C]),className:"btn btn-sm btn-error",disabled:c,children:c?x.jsx("span",{className:"loading loading-spinner loading-xs"}):"Confirmer"})]})]}),x.jsx("div",{className:"space-y-4",children:v[C].map(B=>x.jsx("div",{onClick:()=>e(B),className:"card w-full bg-base-100 shadow-md cursor-pointer hover:shadow-lg transition-shadow duration-200",children:x.jsxs("div",{className:"card-body p-4",children:[x.jsxs("p",{children:[x.jsx("b",{children:"Article:"})," ",B.articleNom]}),x.jsxs("p",{children:[x.jsx("b",{children:"BT:"})," ",B.bt]}),x.jsxs("p",{children:[x.jsx("b",{children:"Code Client:"})," ",B.codeClient]}),!t&&x.jsxs("p",{children:[x.jsx("b",{children:"Secteur:"})," ",B.secteur]}),x.jsxs("div",{className:"card-actions justify-end items-center mt-2",children:[B.trackingLink&&x.jsx("a",{href:B.trackingLink,target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline btn-info",onClick:G=>G.stopPropagation(),children:"Suivre Colis"}),x.jsxs("div",{className:`badge ${S(B.statutExpedition)}`,children:["Expédié: ",B.statutExpedition||"N/A"]})]})]})},B.id))})]},C))})},Jz=({envoi:t,onClose:e})=>t?x.jsxs("div",{className:"modal modal-open",children:[x.jsxs("div",{className:"modal-box w-11/12 max-w-2xl",children:[" ",x.jsx("button",{onClick:e,className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:"✕"}),x.jsxs("h3",{className:"font-bold text-lg mb-4",children:[t.nomClient," - Envoi BT ",t.bt]}),x.jsxs("div",{className:"space-y-2",children:[" ",x.jsxs("p",{children:[x.jsx("b",{children:"Code Client:"})," ",t.codeClient]}),x.jsxs("p",{children:[x.jsx("b",{children:"Article:"})," ",t.articleNom]}),x.jsxs("p",{children:[x.jsx("b",{children:"Secteur:"})," ",t.secteur]}),x.jsxs("p",{children:[x.jsx("b",{children:"Statut Expédition:"})," ",t.statutExpedition||"N/A"]}),t.trackingLink?x.jsxs("p",{children:[x.jsx("b",{children:"Lien de suivi:"})," ",x.jsxs("a",{href:t.trackingLink,target:"_blank",rel:"noopener noreferrer",className:"link link-info break-all",children:[" ",t.trackingLink]})]}):x.jsxs("p",{children:[x.jsx("b",{children:"Lien de suivi:"})," Non disponible"]})]}),x.jsx("div",{className:"modal-action mt-4",children:x.jsx("button",{onClick:e,className:"btn",children:"Fermer"})})]}),x.jsx("div",{className:"modal-backdrop",onClick:e})]}):null,Xz=()=>{const[t,e]=H.useState(null),[n,r]=H.useState([]),[i,s]=H.useState(!0),[a,u]=H.useState(null),[c,f]=H.useState(""),[p,m]=H.useState(""),[y,v]=H.useState(""),[T,I]=H.useState(""),[O,S]=H.useState(!1),[k,C]=H.useState([]),[B,G]=H.useState(!0),$=H.useCallback(async()=>{s(!0);try{const ae=await UP();r(ae),u(null)}catch(ae){u(`Erreur lors de la récupération des envois: ${ae.message}`),r([])}finally{s(!1)}},[]);H.useEffect(()=>{$(),G(!0);const ae=H3("Envoi",ce=>{C(ce),G(!1)});return()=>ae()},[$]);const R=H.useCallback(ae=>{e(ae)},[]),A=H.useCallback(()=>{e(null)},[]),D=()=>{$()};H.useCallback(()=>{console.log("Envoi details potentially updated (callback called).")},[]),H.useMemo(()=>{if(B)return[""];const ae=new Set(k.map(ce=>ce.statutExpedition).filter(Boolean));return["",...Array.from(ae).sort()]},[k,B]);const M=H.useMemo(()=>{if(B)return[""];const ae=new Set(k.map(ce=>ce.secteur).filter(Boolean));return["",...Array.from(ae).sort()]},[k,B]),V=()=>{f(""),m(""),v(""),I("")},z=c||p||y||T,F=H.useMemo(()=>n.filter(ae=>T===""||ae.secteur===T),[n,T]);return x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 h-[calc(100vh-8rem)]",children:[" ",x.jsxs("div",{className:"flex flex-col w-full",children:[" ",x.jsxs("div",{className:"mb-4 card bg-base-100 shadow p-4 shrink-0",children:[" ",x.jsxs("div",{className:"flex justify-between items-center mb-2",children:[x.jsx("h2",{className:"text-lg font-semibold",children:"Filtres Envois"}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsxs("button",{className:`btn btn-ghost btn-sm text-error ${z?"":"hidden"}`,onClick:V,title:"Effacer les filtres",children:[x.jsx(BS,{})," Effacer"]}),x.jsx("button",{className:"btn btn-ghost btn-sm",onClick:D,title:"Rafraîchir la liste des envois",children:x.jsx(US,{})}),x.jsxs("button",{className:"btn btn-ghost btn-sm lg:hidden",onClick:()=>S(!O),children:[x.jsx(zS,{})," ",O?"Masquer":"Afficher"]})]})]}),x.jsxs("div",{className:`${O?"block":"hidden"} lg:block space-y-2`,children:[x.jsx("p",{className:"text-xs text-warning",children:"Note: Seul le filtre secteur est actif pour la liste."}),x.jsx("select",{className:"select select-bordered w-full",value:T,onChange:ae=>I(ae.target.value),disabled:B,children:M.map(ae=>x.jsx("option",{value:ae,children:ae===""?"Tous les secteurs":ae},ae))})]})]}),x.jsxs("div",{className:"scrollable-list flex-grow card bg-base-100 shadow p-4 w-full min-h-0",style:{minHeight:0,maxHeight:"calc(100vh - 15rem)"},children:[i&&x.jsx("div",{className:"flex justify-center items-center h-full",children:x.jsx("span",{className:"loading loading-spinner loading-lg"})}),a&&x.jsx("div",{className:"alert alert-error text-sm p-2",children:x.jsx("span",{children:a})}),!i&&!a&&x.jsx(Yz,{envois:F,selectedSector:T,onEnvoiSelect:R})]})]})]}),t&&x.jsx(Jz,{envoi:t,onClose:A})]})},e9=({user:t,onClose:e})=>t?x.jsx("div",{className:"modal modal-open",children:x.jsxs("div",{className:"modal-box",children:[x.jsx("button",{onClick:e,className:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",children:"✕"}),x.jsx("h3",{className:"font-bold text-lg",children:"Détails de l'utilisateur"}),x.jsxs("div",{className:"py-4",children:[x.jsxs("p",{children:[x.jsx("b",{children:"Nom:"})," ",t.nom]}),x.jsxs("p",{children:[x.jsx("b",{children:"Email:"})," ",t.email]}),x.jsxs("p",{children:[x.jsx("b",{children:"Secteurs:"})," ",Array.isArray(t.secteurs)?t.secteurs.join(", "):"N/A"]}),x.jsxs("p",{children:[x.jsx("b",{children:"Role:"})," ",t.role]})]})]})}):null,t9=({users:t,onEditUser:e})=>{const[n,r]=H.useState(null),i=u=>{r(u)},s=()=>{r(null)},a=u=>{e(u)};return x.jsxs("div",{children:[x.jsx("div",{className:"overflow-x-auto",children:x.jsxs("table",{className:"table",children:[x.jsx("thead",{children:x.jsxs("tr",{children:[x.jsx("th",{children:"Nom"}),x.jsx("th",{children:"Email"}),x.jsx("th",{children:"Secteurs"}),x.jsx("th",{children:"Role"}),x.jsx("th",{children:"Actions"})]})}),x.jsx("tbody",{children:t.map(u=>x.jsxs("tr",{children:[x.jsx("td",{children:x.jsx("div",{className:"flex items-center space-x-3",children:x.jsx("div",{children:x.jsx("div",{className:"font-bold",children:u.nom})})})}),x.jsx("td",{children:u.email}),x.jsx("td",{children:Array.isArray(u.secteurs)?u.secteurs.join(", "):"N/A"}),x.jsx("td",{children:u.role}),x.jsxs("th",{children:[x.jsx("button",{className:"btn btn-ghost btn-xs",onClick:()=>i(u),children:"details"}),x.jsx("button",{className:"btn btn-ghost btn-xs",onClick:()=>a(u),children:"Modifier"})," "]})]},u.id))}),x.jsx("tfoot",{children:x.jsxs("tr",{children:[x.jsx("th",{children:"Nom"}),x.jsx("th",{children:"Email"}),x.jsx("th",{children:"Secteurs"}),x.jsx("th",{children:"Role"}),x.jsx("th",{children:"Actions"})]})})]})}),n&&x.jsx(e9,{user:n,onClose:s})]})},n9=({onSubmit:t,user:e})=>{const[n,r]=H.useState([]),[i,s]=H.useState(!0),[a,u]=H.useState(null),[c,f]=H.useState({nom:"",email:"",password:"",role:"Utilisateur",secteurs:[]});H.useEffect(()=>{(async()=>{s(!0),u(null);try{const T=await My();r(T)}catch(T){u(T.message||"Failed to load sectors."),console.error("Error fetching sectors:",T)}finally{s(!1)}})()},[]),H.useEffect(()=>{e&&f({nom:e.nom||"",email:e.email||"",password:"",role:e.role||"Utilisateur",secteurs:e.secteurs||[]})},[e]);const p=v=>{const{name:T,value:I}=v.target;f({...c,[T]:I})},m=v=>{const T=Array.from(v.target.selectedOptions,I=>I.value);f({...c,secteurs:T})},y=v=>{v.preventDefault(),t(c)};return i?x.jsx("div",{children:"Loading sectors..."}):a?x.jsx("div",{className:"alert alert-error",children:a}):x.jsx("form",{onSubmit:y,className:"card bg-base-100 shadow-xl",children:x.jsxs("div",{className:"card-body",children:[x.jsx("h2",{className:"card-title",children:e?"Modifier Utilisateur":"Ajouter un utilisateur"}),x.jsxs("div",{className:"form-control",children:[x.jsx("label",{className:"label",children:x.jsx("span",{className:"label-text",children:"Nom"})}),x.jsx("input",{type:"text",placeholder:"Nom",className:"input input-bordered",name:"nom",value:c.nom,onChange:p,required:!0})]}),x.jsxs("div",{className:"form-control",children:[x.jsx("label",{className:"label",children:x.jsx("span",{className:"label-text",children:"Email"})}),x.jsx("input",{type:"email",placeholder:"Email",className:"input input-bordered",name:"email",value:c.email,onChange:p,required:!0,readOnly:!!e})]}),!e&&x.jsxs("div",{className:"form-control",children:[x.jsx("label",{className:"label",children:x.jsx("span",{className:"label-text",children:"Mot de passe"})}),x.jsx("input",{type:"password",placeholder:"Mot de passe",className:"input input-bordered",name:"password",value:c.password,onChange:p,required:!0})]}),x.jsxs("div",{className:"form-control",children:[x.jsx("label",{className:"label",children:x.jsx("span",{className:"label-text",children:"Rôle"})}),x.jsxs("select",{className:"select select-bordered",name:"role",value:c.role,onChange:p,children:[x.jsx("option",{children:"Utilisateur"}),x.jsx("option",{children:"Admin"})]})]}),x.jsxs("div",{className:"form-control",children:[x.jsx("label",{className:"label",children:x.jsx("span",{className:"label-text",children:"Secteurs"})}),x.jsx("select",{className:"select select-bordered",name:"secteurs",multiple:!0,value:c.secteurs,onChange:m,children:n.map(v=>x.jsx("option",{value:v.id,children:v.id},v.id))})]}),x.jsx("div",{className:"card-actions justify-end mt-4",children:x.jsx("button",{type:"submit",className:"btn btn-primary",children:e?"Modifier":"Ajouter"})})]})})},r9=()=>{const[t,e]=H.useState([]),[n,r]=H.useState(!0),[i,s]=H.useState(null),[a,u]=H.useState(null);H.useEffect(()=>{(async()=>{r(!0),s(null);try{const m=await kg();e(m)}catch(m){s(m.message||"Failed to load users."),console.error("Error fetching users:",m)}finally{r(!1)}})()},[]);const c=async p=>{console.log("User data submitted:",p);try{if(a)await B3("users",a.id,p),console.log("User updated successfully!");else{console.log("Adding new user is not yet implemented in this handler.");return}const m=await kg();e(m),u(null)}catch(m){s(m.message||"Failed to submit user data."),console.error("Error submitting user data:",m)}},f=p=>{u(p)};return n?x.jsx("div",{children:"Loading users..."}):i?x.jsx("div",{className:"alert alert-error",children:i}):x.jsxs("div",{className:"container mx-auto mt-10",children:[x.jsx("h1",{className:"text-3xl font-bold mb-5",children:"Administration des utilisateurs"}),x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[x.jsx(n9,{onSubmit:c,user:a})," ",x.jsx(t9,{users:t,onEditUser:f})," "]})]})},i9=()=>{const[t,e]=H.useState(!0),[n,r]=H.useState(""),[i,s]=H.useState(""),[a,u]=H.useState(null),c=ff(),f=async p=>{p.preventDefault(),u(null);try{t?await rL(SE,n,i):await nL(SE,n,i),c("/dashboard")}catch(m){u(m.message)}};return x.jsx("div",{className:"hero min-h-screen bg-base-200",children:x.jsxs("div",{className:"hero-content flex-col lg:flex-row-reverse",children:[x.jsxs("div",{className:"text-center lg:text-left",children:[x.jsx("h1",{className:"text-5xl font-bold",children:t?"Connexion":"Inscription"}),x.jsx("p",{className:"py-6",children:t?"Connectez-vous pour accéder à l'application.":"Inscrivez-vous pour créer un compte."})]}),x.jsx("div",{className:"card shrink-0 w-full max-w-sm shadow-2xl bg-base-100",children:x.jsxs("form",{className:"card-body",onSubmit:f,children:[a&&x.jsx("div",{className:"alert alert-error",children:a}),x.jsxs("div",{className:"form-control",children:[x.jsx("label",{className:"label",children:x.jsx("span",{className:"label-text",children:"Email"})}),x.jsx("input",{type:"email",placeholder:"email",className:"input input-bordered",value:n,onChange:p=>r(p.target.value),required:!0})]}),x.jsxs("div",{className:"form-control",children:[x.jsx("label",{className:"label",children:x.jsx("span",{className:"label-text",children:"Mot de passe"})}),x.jsx("input",{type:"password",placeholder:"password",className:"input input-bordered",value:i,onChange:p=>s(p.target.value),required:!0})]}),x.jsx("div",{className:"form-control mt-6",children:x.jsx("button",{type:"submit",className:"btn btn-primary",children:t?"Se connecter":"S'inscrire"})}),x.jsx("div",{className:"text-center mt-4",children:x.jsxs("p",{children:[t?"Pas de compte?":"Déjà un compte?",x.jsx("button",{type:"button",className:"link link-primary",onClick:()=>e(!t),children:t?"S'inscrire":"Se connecter"})]})})]})})]})})},s9=()=>{const[t,e]=H.useState("Installation"),[n,r]=H.useState(""),[i,s]=H.useState(""),[a,u]=H.useState(""),[c,f]=H.useState(""),[p,m]=H.useState("CHR"),[y,v]=H.useState(!1),[T,I]=H.useState(null),O=ff(),S=async k=>{if(k.preventDefault(),v(!0),I(null),!i||!a||!n||!p){I("Veuillez remplir tous les champs obligatoires (Nom Client, Adresse Client, Description, Secteur)."),v(!1);return}const C={typeIntervention:t,description:n,nomClient:i,adresseClient:a,contactClient:c,secteur:p,dateCreation:new Date().toISOString()};try{await U3(p,C),console.log(`Ticket créé avec succès dans le secteur ${p}`),O("/sap")}catch(B){console.error("Erreur lors de la création du ticket:",B),I("Une erreur est survenue lors de la création du ticket.")}finally{v(!1)}};return x.jsxs("div",{className:"container mx-auto mt-8 p-6 bg-base-100 shadow-md rounded-md",children:[x.jsx("h1",{className:"text-2xl font-semibold mb-6 text-center",children:"Créer un Ticket SAP"}),T&&x.jsx("div",{className:"alert alert-error shadow-lg mb-4",children:x.jsx("div",{children:x.jsx("span",{children:T})})}),x.jsxs("form",{onSubmit:S,className:"space-y-6 max-w-2xl mx-auto",children:[x.jsxs("div",{className:"p-4 border border-base-300 rounded-md",children:[x.jsx("h2",{className:"text-lg font-medium mb-3 text-primary",children:"Informations Client"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"nomClient",className:"block text-sm font-medium text-base-content",children:"Nom du Client *"}),x.jsx("input",{type:"text",id:"nomClient",value:i,onChange:k=>s(k.target.value),className:"input input-bordered w-full mt-1",required:!0})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"adresseClient",className:"block text-sm font-medium text-base-content",children:"Adresse Client *"}),x.jsx("input",{type:"text",id:"adresseClient",value:a,onChange:k=>u(k.target.value),className:"input input-bordered w-full mt-1",placeholder:"ex: 123 Rue Principale, 75001 Paris",required:!0})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"contactClient",className:"block text-sm font-medium text-base-content",children:"Personne à contacter"}),x.jsx("input",{type:"text",id:"contactClient",value:c,onChange:k=>f(k.target.value),className:"input input-bordered w-full mt-1"})]})]})]}),x.jsxs("div",{className:"p-4 border border-base-300 rounded-md",children:[x.jsx("h2",{className:"text-lg font-medium mb-3 text-primary",children:"Détails de l'intervention"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"secteur",className:"block text-sm font-medium text-base-content",children:"Secteur SAP *"}),x.jsxs("select",{id:"secteur",value:p,onChange:k=>m(k.target.value),className:"select select-bordered w-full mt-1",required:!0,children:[x.jsx("option",{value:"CHR",children:"CHR"}),x.jsx("option",{value:"HACCP",children:"HACCP"}),x.jsx("option",{value:"Kezia",children:"Kezia"}),x.jsx("option",{value:"Tabac",children:"Tabac"})]})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"typeIntervention",className:"block text-sm font-medium text-base-content",children:"Type d'intervention"}),x.jsxs("select",{id:"typeIntervention",value:t,onChange:k=>e(k.target.value),className:"select select-bordered w-full mt-1",children:[x.jsx("option",{children:"Installation"}),x.jsx("option",{children:"Maintenance"}),x.jsx("option",{children:"Réparation"}),x.jsx("option",{children:"Consultation"}),x.jsx("option",{children:"Formation"}),x.jsx("option",{children:"Autre"})]})]})]}),x.jsxs("div",{className:"mt-4",children:[x.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-base-content",children:"Description du problème / Demande *"}),x.jsx("textarea",{id:"description",rows:5,value:n,onChange:k=>r(k.target.value),className:"textarea textarea-bordered w-full mt-1",placeholder:"Décrivez le problème ou la demande ici...",required:!0})]})]}),x.jsx("div",{className:"text-center pt-4",children:x.jsx("button",{type:"submit",className:"btn btn-primary w-full md:w-auto",disabled:y,children:y?x.jsxs(x.Fragment,{children:[x.jsx("span",{className:"loading loading-spinner"}),"Création en cours..."]}):"Créer le Ticket"})})]})]})};function o9(){const[t,e]=H.useState(null);return ff(),H.useEffect(()=>{const n=vf(),r=oL(n,i=>{e(!!i)});return()=>r()},[]),t===null?x.jsx("div",{className:"flex justify-center items-center min-h-screen bg-base-100",children:x.jsx("span",{className:"loading loading-dots loading-lg"})}):x.jsx(x.Fragment,{children:t?x.jsxs("div",{className:"flex flex-col min-h-screen bg-base-100",children:[" ",x.jsx(bO,{}),x.jsx("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-4 flex-grow fade-in",children:x.jsxs(vR,{children:[x.jsx(Ki,{path:"/",element:x.jsx(Up,{})}),x.jsx(Ki,{path:"/dashboard",element:x.jsx(Up,{})}),x.jsx(Ki,{path:"/sap",element:x.jsx(Zz,{})}),x.jsx(Ki,{path:"/sap/create",element:x.jsx(s9,{})}),x.jsx(Ki,{path:"/envois",element:x.jsx(Xz,{})}),x.jsx(Ki,{path:"/admin",element:x.jsx(r9,{})}),x.jsx(Ki,{path:"/auth",element:x.jsx(Up,{})})]})})]}):x.jsx(i9,{})})}const a9=H.createContext(void 0),l9=({children:t})=>{const[e,n]=H.useState(null),[r,i]=H.useState(!0),[s,a]=H.useState(null);H.useEffect(()=>{const f=vf().onAuthStateChanged(async p=>{if(p){i(!0),a(null);try{const y=(await kg()).find(v=>v.email===p.email);y&&y.secteurs?n(y.secteurs):n([])}catch(m){a(m.message||"Failed to load user sectors."),console.error("Error fetching user sectors:",m),n(null)}finally{i(!1)}}else n(null),i(!1)});return()=>f()},[]);const u={userSectors:e,setUserSectors:n,loadingSectors:r,errorSectors:s};return x.jsx(a9.Provider,{value:u,children:t})};Xp.createRoot(document.getElementById("root")).render(x.jsx(wr.StrictMode,{children:x.jsx(PR,{children:x.jsxs(l9,{children:[" ",x.jsx(o9,{})]})})}));
